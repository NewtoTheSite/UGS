import "./../lodash.custom.min.js";
import "./../Tween.js";
import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__require=(t=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,s)=>("undefined"!=typeof require?require:t)[s]}):t)((function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')})),__commonJS=(t,s)=>function(){return s||(0,t[__getOwnPropNames(t)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(t,s,e,i)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of __getOwnPropNames(s))__hasOwnProp.call(t,n)||n===e||__defProp(t,n,{get:()=>s[n],enumerable:!(i=__getOwnPropDesc(s,n))||i.enumerable});return t},__toESM=(t,s,e)=>(e=null!=t?__create(__getProtoOf(t)):{},__copyProps(!s&&t&&t.i?e:__defProp(e,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,s){return Math.abs(t-s)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(s))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},m=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},g=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},y=function(t,s,e,i){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=e,n[3]=i,n},S=function(t,s,e,i,n){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t},w=function(t,s){if(t===s){var e=s[1];t[1]=s[2],t[2]=e}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},v=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=e*r-n*i;return h?(h=1/h,t[0]=r*h,t[1]=-i*h,t[2]=-n*h,t[3]=e*h,t):null},b=function(t,s){var e=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=e,t},M=function(t){return t[0]*t[3]-t[2]*t[1]},x=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*o+r*a,t[1]=n*o+h*a,t[2]=i*l+r*u,t[3]=n*l+h*u,t},T=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+r*o,t[1]=n*a+h*o,t[2]=i*-o+r*a,t[3]=n*-o+h*a,t},C=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[0],a=e[1];return t[0]=i*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},I=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=-e,t[3]=i,t},_=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},G=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},P=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},A=function(t,s,e,i){return t[2]=i[2]/i[0],e[0]=i[0],e[1]=i[1],e[3]=i[3]-t[2]*e[1],[t,s,e]},R=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t},E=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t},O=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},F=function(t,s){var e=t[0],i=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(i-o)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},D=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t},L=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t},k=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},N=function(t){var s=new ARRAY_TYPE(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},$=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},W=function(t,s,e,i,n,r){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=s,h[2]=e,h[3]=i,h[4]=n,h[5]=r,h},V=function(t,s,e,i,n,r,h){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t},j=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=e*r-i*n;return a?(a=1/a,t[0]=r*a,t[1]=-i*a,t[2]=-n*a,t[3]=e*a,t[4]=(n*o-r*h)*a,t[5]=(i*h-e*o)*a,t):null},U=function(t){return t[0]*t[3]-t[1]*t[2]},z=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1],c=e[2],f=e[3],d=e[4],p=e[5];return t[0]=i*l+r*u,t[1]=n*l+h*u,t[2]=i*c+r*f,t[3]=n*c+h*f,t[4]=i*d+r*p+o,t[5]=n*d+h*p+a,t},H=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(e),u=Math.cos(e);return t[0]=i*u+r*l,t[1]=n*u+h*l,t[2]=i*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},J=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1];return t[0]=i*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},q=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1];return t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=i*l+r*u+o,t[5]=n*l+h*u+a,t},Y=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=-e,t[3]=i,t[4]=0,t[5]=0,t},X=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},K=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Z=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Q=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t},st=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t},et=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t},it=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t},nt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},rt=function(t,s){var e=t[0],i=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=s[0],l=s[1],u=s[2],c=s[3],f=s[4],d=s[5];return Math.abs(e-a)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(i-l)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(n-u)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},ht=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},ot=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},at=function(t){var s=new ARRAY_TYPE(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},ut=function(t,s,e,i,n,r,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=s,l[2]=e,l[3]=i,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},ct=function(t,s,e,i,n,r,h,o,a,l){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},dt=function(t,s){if(t===s){var e=s[1],i=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=e,t[5]=s[7],t[6]=i,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},pt=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=e*c+i*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*i+n*l)*p,t[2]=(o*i-n*h)*p,t[3]=f*p,t[4]=(u*e-n*a)*p,t[5]=(-o*e+n*r)*p,t[6]=d*p,t[7]=(-l*e+i*a)*p,t[8]=(h*e-i*r)*p,t):null},mt=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-i*u,t[2]=i*o-n*h,t[3]=o*a-r*u,t[4]=e*u-n*a,t[5]=n*r-e*o,t[6]=r*l-h*a,t[7]=i*a-e*l,t[8]=e*h-i*r,t},gt=function(t){var s=t[0],e=t[1],i=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+e*(-l*n+h*o)+i*(a*n-r*o)},yt=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=e[0],d=e[1],p=e[2],m=e[3],g=e[4],y=e[5],S=e[6],w=e[7],v=e[8];return t[0]=f*i+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*i+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=S*i+w*h+v*l,t[7]=S*n+w*o+v*u,t[8]=S*r+w*a+v*c,t},St=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=e[0],d=e[1];return t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*i+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},wt=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(e),d=Math.cos(e);return t[0]=d*i+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*i,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},vt=function(t,s,e){var i=e[0],n=e[1];return t[0]=i*s[0],t[1]=i*s[1],t[2]=i*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Mt=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=0,t[3]=-e,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},xt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Tt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Ct=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=e+e,o=i+i,a=n+n,l=e*h,u=i*h,c=i*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},It=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=e*o-i*h,w=e*a-n*h,v=e*l-r*h,b=i*a-n*o,M=i*l-r*o,x=n*l-r*a,T=u*m-c*p,C=u*g-f*p,I=u*y-d*p,_=c*g-f*m,G=c*y-d*m,P=f*y-d*g,A=S*P-w*G+v*_+b*I-M*C+x*T;return A?(A=1/A,t[0]=(o*P-a*G+l*_)*A,t[1]=(a*I-h*P-l*C)*A,t[2]=(h*G-o*I+l*T)*A,t[3]=(n*G-i*P-r*_)*A,t[4]=(e*P-n*I+r*C)*A,t[5]=(i*I-e*G-r*T)*A,t[6]=(m*x-g*M+y*b)*A,t[7]=(g*v-p*x-y*w)*A,t[8]=(p*M-m*v+y*S)*A,t):null},_t=function(t,s,e){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Gt=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Pt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},At=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t[8]=s[8]+e[8],t},Rt=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t[6]=s[6]-e[6],t[7]=s[7]-e[7],t[8]=s[8]-e[8],t},Et=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t[8]=s[8]*e,t},Ot=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t[6]=s[6]+e[6]*i,t[7]=s[7]+e[7]*i,t[8]=s[8]+e[8]*i,t},Ft=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Dt=function(t,s){var e=t[0],i=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=s[0],f=s[1],d=s[2],p=s[3],m=s[4],g=s[5],y=s[6],S=s[7],w=s[8];return Math.abs(e-c)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(i-f)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-S)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-w)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(w))},Lt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},kt=function(t){var s=new ARRAY_TYPE(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Bt=function(t,s,e,i,n,r,h,o,a,l,u,c,f,d,p,m){var g=new ARRAY_TYPE(16);return g[0]=t,g[1]=s,g[2]=e,g[3]=i,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},$t=function(t,s,e,i,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},Wt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Vt=function(t,s){if(t===s){var e=s[1],i=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=e,t[6]=s[9],t[7]=s[13],t[8]=i,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},jt=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=e*o-i*h,w=e*a-n*h,v=e*l-r*h,b=i*a-n*o,M=i*l-r*o,x=n*l-r*a,T=u*m-c*p,C=u*g-f*p,I=u*y-d*p,_=c*g-f*m,G=c*y-d*m,P=f*y-d*g,A=S*P-w*G+v*_+b*I-M*C+x*T;return A?(A=1/A,t[0]=(o*P-a*G+l*_)*A,t[1]=(n*G-i*P-r*_)*A,t[2]=(m*x-g*M+y*b)*A,t[3]=(f*M-c*x-d*b)*A,t[4]=(a*I-h*P-l*C)*A,t[5]=(e*P-n*I+r*C)*A,t[6]=(g*v-p*x-y*w)*A,t[7]=(u*x-f*v+d*w)*A,t[8]=(h*G-o*I+l*T)*A,t[9]=(i*I-e*G-r*T)*A,t[10]=(p*M-m*v+y*S)*A,t[11]=(c*v-u*M-d*S)*A,t[12]=(o*C-h*_-a*T)*A,t[13]=(e*_-i*C+n*T)*A,t[14]=(m*w-p*b-g*S)*A,t[15]=(u*b-c*w+f*S)*A,t):null},Ut=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=e*o-i*h,w=e*a-n*h,v=e*l-r*h,b=i*a-n*o,M=i*l-r*o,x=n*l-r*a,T=u*m-c*p,C=u*g-f*p,I=u*y-d*p,_=c*g-f*m,G=c*y-d*m,P=f*y-d*g;return t[0]=o*P-a*G+l*_,t[1]=n*G-i*P-r*_,t[2]=m*x-g*M+y*b,t[3]=f*M-c*x-d*b,t[4]=a*I-h*P-l*C,t[5]=e*P-n*I+r*C,t[6]=g*v-p*x-y*w,t[7]=u*x-f*v+d*w,t[8]=h*G-o*I+l*T,t[9]=i*I-e*G-r*T,t[10]=p*M-m*v+y*S,t[11]=c*v-u*M-d*S,t[12]=o*C-h*_-a*T,t[13]=e*_-i*C+n*T,t[14]=m*w-p*b-g*S,t[15]=u*b-c*w+f*S,t},zt=function(t){var s=t[0],e=t[1],i=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-e*r,y=s*o-i*r,S=e*o-i*h,w=l*p-u*d,v=l*m-c*d,b=u*m-c*p;return a*(s*b-e*v+i*w)-n*(r*b-h*v+o*w)+t[15]*(l*S-u*y+c*g)-f*(d*S-p*y+m*g)},Ht=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],S=s[15],w=e[0],v=e[1],b=e[2],M=e[3];return t[0]=w*i+v*o+b*c+M*m,t[1]=w*n+v*a+b*f+M*g,t[2]=w*r+v*l+b*d+M*y,t[3]=w*h+v*u+b*p+M*S,w=e[4],v=e[5],b=e[6],M=e[7],t[4]=w*i+v*o+b*c+M*m,t[5]=w*n+v*a+b*f+M*g,t[6]=w*r+v*l+b*d+M*y,t[7]=w*h+v*u+b*p+M*S,w=e[8],v=e[9],b=e[10],M=e[11],t[8]=w*i+v*o+b*c+M*m,t[9]=w*n+v*a+b*f+M*g,t[10]=w*r+v*l+b*d+M*y,t[11]=w*h+v*u+b*p+M*S,w=e[12],v=e[13],b=e[14],M=e[15],t[12]=w*i+v*o+b*c+M*m,t[13]=w*n+v*a+b*f+M*g,t[14]=w*r+v*l+b*d+M*y,t[15]=w*h+v*u+b*p+M*S,t},Jt=function(t,s,e){var i,n,r,h,o,a,l,u,c,f,d,p,m=e[0],g=e[1],y=e[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=i*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},qt=function(t,s,e){var i=e[0],n=e[1],r=e[2];return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Yt=function(t,s,e,i){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,S,w,v,b,M,x,T,C,I,_,G=i[0],P=i[1],A=i[2],R=Math.hypot(G,P,A);return R<EPSILON?null:(G*=R=1/R,P*=R,A*=R,n=Math.sin(e),h=1-(r=Math.cos(e)),o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],S=s[11],w=G*G*h+r,v=P*G*h+A*n,b=A*G*h-P*n,M=G*P*h-A*n,x=P*P*h+r,T=A*P*h+G*n,C=G*A*h+P*n,I=P*A*h-G*n,_=A*A*h+r,t[0]=o*w+c*v+m*b,t[1]=a*w+f*v+g*b,t[2]=l*w+d*v+y*b,t[3]=u*w+p*v+S*b,t[4]=o*M+c*x+m*T,t[5]=a*M+f*x+g*T,t[6]=l*M+d*x+y*T,t[7]=u*M+p*x+S*T,t[8]=o*C+c*I+m*_,t[9]=a*C+f*I+g*_,t[10]=l*C+d*I+y*_,t[11]=u*C+p*I+S*_,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},Xt=function(t,s,e){var i=Math.sin(e),n=Math.cos(e),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*i,t[5]=h*n+u*i,t[6]=o*n+c*i,t[7]=a*n+f*i,t[8]=l*n-r*i,t[9]=u*n-h*i,t[10]=c*n-o*i,t[11]=f*n-a*i,t},Kt=function(t,s,e){var i=Math.sin(e),n=Math.cos(e),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*i,t[1]=h*n-u*i,t[2]=o*n-c*i,t[3]=a*n-f*i,t[8]=r*i+l*n,t[9]=h*i+u*n,t[10]=o*i+c*n,t[11]=a*i+f*n,t},Zt=function(t,s,e){var i=Math.sin(e),n=Math.cos(e),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*i,t[1]=h*n+u*i,t[2]=o*n+c*i,t[3]=a*n+f*i,t[4]=l*n-r*i,t[5]=u*n-h*i,t[6]=c*n-o*i,t[7]=f*n-a*i,t},Qt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ts=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ss=function(t,s,e){var i,n,r,h=e[0],o=e[1],a=e[2],l=Math.hypot(h,o,a);return l<EPSILON?null:(h*=l=1/l,o*=l,a*=l,i=Math.sin(s),r=1-(n=Math.cos(s)),t[0]=h*h*r+n,t[1]=o*h*r+a*i,t[2]=a*h*r-o*i,t[3]=0,t[4]=h*o*r-a*i,t[5]=o*o*r+n,t[6]=a*o*r+h*i,t[7]=0,t[8]=h*a*r+o*i,t[9]=o*a*r-h*i,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},es=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},is=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=i+i,a=n+n,l=r+r,u=i*o,c=i*a,f=i*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,S=h*l;return t[0]=1-(d+m),t[1]=c+S,t[2]=f-y,t[3]=0,t[4]=c-S,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},hs=function(t,s){var e=new ARRAY_TYPE(3),i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=i*i+n*n+r*r+h*h;return c>0?(e[0]=2*(o*h+u*i+a*r-l*n)/c,e[1]=2*(a*h+u*n+l*i-o*r)/c,e[2]=2*(l*h+u*r+o*n-a*i)/c):(e[0]=2*(o*h+u*i+a*r-l*n),e[1]=2*(a*h+u*n+l*i-o*r),e[2]=2*(l*h+u*r+o*n-a*i)),rs(t,s,e),t},os=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},as=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(e,i,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},ls=function(t,s){var e=new ARRAY_TYPE(3);as(e,s);var i=1/e[0],n=1/e[1],r=1/e[2],h=s[0]*i,o=s[1]*n,a=s[2]*r,l=s[4]*i,u=s[5]*n,c=s[6]*r,f=s[8]*i,d=s[9]*n,p=s[10]*r,m=h+u+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(c-d)/g,t[1]=(f-a)/g,t[2]=(o-l)/g):h>u&&h>p?(g=2*Math.sqrt(1+h-u-p),t[3]=(c-d)/g,t[0]=.25*g,t[1]=(o+l)/g,t[2]=(f+a)/g):u>p?(g=2*Math.sqrt(1+u-h-p),t[3]=(f-a)/g,t[0]=(o+l)/g,t[1]=.25*g,t[2]=(c+d)/g):(g=2*Math.sqrt(1+p-h-u),t[3]=(o-l)/g,t[0]=(f+a)/g,t[1]=(c+d)/g,t[2]=.25*g),t},us=function(t,s,e,i){s[0]=i[12],s[1]=i[13],s[2]=i[14];var n=i[0],r=i[1],h=i[2],o=i[4],a=i[5],l=i[6],u=i[8],c=i[9],f=i[10];e[0]=Math.hypot(n,r,h),e[1]=Math.hypot(o,a,l),e[2]=Math.hypot(u,c,f);var d=1/e[0],p=1/e[1],m=1/e[2],g=n*d,y=r*p,S=h*m,w=o*d,v=a*p,b=l*m,M=u*d,x=c*p,T=f*m,C=g+v+T,I=0;return C>0?(I=2*Math.sqrt(C+1),t[3]=.25*I,t[0]=(b-x)/I,t[1]=(M-S)/I,t[2]=(y-w)/I):g>v&&g>T?(I=2*Math.sqrt(1+g-v-T),t[3]=(b-x)/I,t[0]=.25*I,t[1]=(y+w)/I,t[2]=(M+S)/I):v>T?(I=2*Math.sqrt(1+v-g-T),t[3]=(M-S)/I,t[0]=(y+w)/I,t[1]=.25*I,t[2]=(b+x)/I):(I=2*Math.sqrt(1+T-g-v),t[3]=(y-w)/I,t[0]=(M+S)/I,t[1]=(b+x)/I,t[2]=.25*I),t},cs=function(t,s,e,i){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,S=o*l,w=o*u,v=i[0],b=i[1],M=i[2];return t[0]=(1-(p+g))*v,t[1]=(f+w)*v,t[2]=(d-S)*v,t[3]=0,t[4]=(f-w)*b,t[5]=(1-(c+g))*b,t[6]=(m+y)*b,t[7]=0,t[8]=(d+S)*M,t[9]=(m-y)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fs=function(t,s,e,i,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,S=a*l,w=a*u,v=a*c,b=i[0],M=i[1],x=i[2],T=n[0],C=n[1],I=n[2],_=(1-(m+y))*b,G=(d+v)*b,P=(p-w)*b,A=(d-v)*M,R=(1-(f+y))*M,E=(g+S)*M,O=(p+w)*x,F=(g-S)*x,D=(1-(f+m))*x;return t[0]=_,t[1]=G,t[2]=P,t[3]=0,t[4]=A,t[5]=R,t[6]=E,t[7]=0,t[8]=O,t[9]=F,t[10]=D,t[11]=0,t[12]=e[0]+T-(_*T+A*C+O*I),t[13]=e[1]+C-(G*T+R*C+F*I),t[14]=e[2]+I-(P*T+E*C+D*I),t[15]=1,t},ds=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=e+e,o=i+i,a=n+n,l=e*h,u=i*h,c=i*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ps=function(t,s,e,i,n,r,h){var o=1/(e-s),a=1/(n-i),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(e+s)*o,t[9]=(n+i)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},ms=function(t,s,e,i,n){var r=1/Math.tan(s/2);if(t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(i-n);t[10]=(n+i)*h,t[14]=2*n*i*h}else t[10]=-1,t[14]=-2*i;return t},gs=function(t,s,e,i,n){var r=1/Math.tan(s/2);if(t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(i-n);t[10]=n*h,t[14]=n*i*h}else t[10]=-1,t[14]=-i;return t},ys=function(t,s,e,i){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=i/(e-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*e/(e-i),t[15]=0,t},Ss=function(t,s,e,i,n,r,h){var o=1/(s-e),a=1/(i-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+e)*o,t[13]=(n+i)*a,t[14]=(h+r)*l,t[15]=1,t},ws=function(t,s,e,i,n,r,h){var o=1/(s-e),a=1/(i-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+e)*o,t[13]=(n+i)*a,t[14]=r*l,t[15]=1,t},vs=function(t,s,e,i){var n,r,h,o,a,l,u,c,f,d,p=s[0],m=s[1],g=s[2],y=i[0],S=i[1],w=i[2],v=e[0],b=e[1],M=e[2];return Math.abs(p-v)<EPSILON&&Math.abs(m-b)<EPSILON&&Math.abs(g-M)<EPSILON?Wt(t):(u=p-v,c=m-b,f=g-M,n=S*(f*=d=1/Math.hypot(u,c,f))-w*(c*=d),r=w*(u*=d)-y*f,h=y*c-S*u,(d=Math.hypot(n,r,h))?(n*=d=1/d,r*=d,h*=d):(n=0,r=0,h=0),o=c*h-f*r,a=f*n-u*h,l=u*r-c*n,(d=Math.hypot(o,a,l))?(o*=d=1/d,a*=d,l*=d):(o=0,a=0,l=0),t[0]=n,t[1]=o,t[2]=u,t[3]=0,t[4]=r,t[5]=a,t[6]=c,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=-(n*p+r*m+h*g),t[13]=-(o*p+a*m+l*g),t[14]=-(u*p+c*m+f*g),t[15]=1,t)},bs=function(t,s,e,i){var n=s[0],r=s[1],h=s[2],o=i[0],a=i[1],l=i[2],u=n-e[0],c=r-e[1],f=h-e[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},Ms=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},xs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ts=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t[8]=s[8]+e[8],t[9]=s[9]+e[9],t[10]=s[10]+e[10],t[11]=s[11]+e[11],t[12]=s[12]+e[12],t[13]=s[13]+e[13],t[14]=s[14]+e[14],t[15]=s[15]+e[15],t},Cs=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t[6]=s[6]-e[6],t[7]=s[7]-e[7],t[8]=s[8]-e[8],t[9]=s[9]-e[9],t[10]=s[10]-e[10],t[11]=s[11]-e[11],t[12]=s[12]-e[12],t[13]=s[13]-e[13],t[14]=s[14]-e[14],t[15]=s[15]-e[15],t},Is=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t[8]=s[8]*e,t[9]=s[9]*e,t[10]=s[10]*e,t[11]=s[11]*e,t[12]=s[12]*e,t[13]=s[13]*e,t[14]=s[14]*e,t[15]=s[15]*e,t},_s=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t[6]=s[6]+e[6]*i,t[7]=s[7]+e[7]*i,t[8]=s[8]+e[8]*i,t[9]=s[9]+e[9]*i,t[10]=s[10]+e[10]*i,t[11]=s[11]+e[11]*i,t[12]=s[12]+e[12]*i,t[13]=s[13]+e[13]*i,t[14]=s[14]+e[14]*i,t[15]=s[15]+e[15]*i,t},Gs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ps=function(t,s){var e=t[0],i=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],S=s[0],w=s[1],v=s[2],b=s[3],M=s[4],x=s[5],T=s[6],C=s[7],I=s[8],_=s[9],G=s[10],P=s[11],A=s[12],R=s[13],E=s[14],O=s[15];return Math.abs(e-S)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(i-w)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(n-v)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-b)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(h-M)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(o-x)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-T)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-C)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-I)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-_)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-G)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(d-P)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-A)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-R)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-E)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(y-O)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(O))},As=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Rs=function(t){var s=new ARRAY_TYPE(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Es=function(t){var s=t[0],e=t[1],i=t[2];return Math.hypot(s,e,i)},Os=function(t,s,e){var i=new ARRAY_TYPE(3);return i[0]=t,i[1]=s,i[2]=e,i},Fs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Ds=function(t,s,e,i){return t[0]=s,t[1]=e,t[2]=i,t},Ls=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t},ks=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t},Ns=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t[2]=s[2]*e[2],t},Bs=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t[2]=s[2]/e[2],t},$s=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ws=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Vs=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t[2]=Math.min(s[2],e[2]),t},js=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t[2]=Math.max(s[2],e[2]),t},Us=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},zs=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t},Hs=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t},Js=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],n=s[2]-t[2];return Math.hypot(e,i,n)},qs=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],n=s[2]-t[2];return e*e+i*i+n*n},Ys=function(t){var s=t[0],e=t[1],i=t[2];return s*s+e*e+i*i},Xs=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},Ks=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Zs=function(t,s){var e=s[0],i=s[1],n=s[2],r=e*e+i*i+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},Qs=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},te=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=e[0],o=e[1],a=e[2];return t[0]=n*a-r*o,t[1]=r*h-i*a,t[2]=i*o-n*h,t},se=function(t,s,e,i){var n=s[0],r=s[1],h=s[2];return t[0]=n+i*(e[0]-n),t[1]=r+i*(e[1]-r),t[2]=h+i*(e[2]-h),t},ee=function(t,s,e,i){var n=Math.acos(Math.min(Math.max(Qs(s,e),-1),1)),r=Math.sin(n),h=Math.sin((1-i)*n)/r,o=Math.sin(i*n)/r;return t[0]=h*s[0]+o*e[0],t[1]=h*s[1]+o*e[1],t[2]=h*s[2]+o*e[2],t},ie=function(t,s,e,i,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+e[0]*a+i[0]*l+n[0]*u,t[1]=s[1]*o+e[1]*a+i[1]*l+n[1]*u,t[2]=s[2]*o+e[2]*a+i[2]*l+n[2]*u,t},ne=function(t,s,e,i,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+e[0]*u+i[0]*c+n[0]*f,t[1]=s[1]*l+e[1]*u+i[1]*c+n[1]*f,t[2]=s[2]*l+e[2]*u+i[2]*c+n[2]*f,t},re=function(t,s){s=s||1;var e=2*RANDOM()*Math.PI,i=2*RANDOM()-1,n=Math.sqrt(1-i*i)*s;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t[2]=i*s,t},he=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=e[3]*i+e[7]*n+e[11]*r+e[15];return h=h||1,t[0]=(e[0]*i+e[4]*n+e[8]*r+e[12])/h,t[1]=(e[1]*i+e[5]*n+e[9]*r+e[13])/h,t[2]=(e[2]*i+e[6]*n+e[10]*r+e[14])/h,t},oe=function(t,s,e){var i=s[0],n=s[1],r=s[2];return t[0]=i*e[0]+n*e[3]+r*e[6],t[1]=i*e[1]+n*e[4]+r*e[7],t[2]=i*e[2]+n*e[5]+r*e[8],t},ae=function(t,s,e){var i=e[0],n=e[1],r=e[2],h=e[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-i*l,f=i*a-n*o,d=n*f-r*c,p=r*u-i*f,m=i*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},le=function(t,s,e,i){var n=[],r=[];return n[0]=s[0]-e[0],n[1]=s[1]-e[1],n[2]=s[2]-e[2],r[0]=n[0],r[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),r[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},ue=function(t,s,e,i){var n=[],r=[];return n[0]=s[0]-e[0],n[1]=s[1]-e[1],n[2]=s[2]-e[2],r[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),r[1]=n[1],r[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},ce=function(t,s,e,i){var n=[],r=[];return n[0]=s[0]-e[0],n[1]=s[1]-e[1],n[2]=s[2]-e[2],r[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),r[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),r[2]=n[2],t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},fe=function(t,s){var e=t[0],i=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((e*e+i*i+n*n)*(r*r+h*h+o*o)),l=a&&Qs(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},de=function(t){return t[0]=0,t[1]=0,t[2]=0,t},pe=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},me=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},ge=function(t,s){var e=t[0],i=t[1],n=t[2],r=s[0],h=s[1],o=s[2];return Math.abs(e-r)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(n-o)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(o))},ye=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Se=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},we=function(t,s,e,i){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=e,n[3]=i,n},ve=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},be=function(t,s,e,i,n){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t},Me=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t},xe=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t},Te=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t[2]=s[2]*e[2],t[3]=s[3]*e[3],t},Ce=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t[2]=s[2]/e[2],t[3]=s[3]/e[3],t},Ie=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},_e=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Ge=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t[2]=Math.min(s[2],e[2]),t[3]=Math.min(s[3],e[3]),t},Pe=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t[2]=Math.max(s[2],e[2]),t[3]=Math.max(s[3],e[3]),t},Ae=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Re=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t},Ee=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t},Oe=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(e,i,n,r)},Fe=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return e*e+i*i+n*n+r*r},De=function(t){var s=t[0],e=t[1],i=t[2],n=t[3];return Math.hypot(s,e,i,n)},Le=function(t){var s=t[0],e=t[1],i=t[2],n=t[3];return s*s+e*e+i*i+n*n},ke=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Ne=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Be=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=e*e+i*i+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=e*h,t[1]=i*h,t[2]=n*h,t[3]=r*h,t},$e=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},We=function(t,s,e,i){var n=e[0]*i[1]-e[1]*i[0],r=e[0]*i[2]-e[2]*i[0],h=e[0]*i[3]-e[3]*i[0],o=e[1]*i[2]-e[2]*i[1],a=e[1]*i[3]-e[3]*i[1],l=e[2]*i[3]-e[3]*i[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},Ve=function(t,s,e,i){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+i*(e[0]-n),t[1]=r+i*(e[1]-r),t[2]=h+i*(e[2]-h),t[3]=o+i*(e[3]-o),t},je=function(t,s){var e,i,n,r,h,o;s=s||1;do{h=(e=2*RANDOM()-1)*e+(i=2*RANDOM()-1)*i}while(h>=1);do{o=(n=2*RANDOM()-1)*n+(r=2*RANDOM()-1)*r}while(o>=1);var a=Math.sqrt((1-h)/o);return t[0]=s*e,t[1]=s*i,t[2]=s*n*a,t[3]=s*r*a,t},Ue=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3];return t[0]=e[0]*i+e[4]*n+e[8]*r+e[12]*h,t[1]=e[1]*i+e[5]*n+e[9]*r+e[13]*h,t[2]=e[2]*i+e[6]*n+e[10]*r+e[14]*h,t[3]=e[3]*i+e[7]*n+e[11]*r+e[15]*h,t},ze=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=e[0],o=e[1],a=e[2],l=e[3],u=l*i+o*r-a*n,c=l*n+a*i-h*r,f=l*r+h*n-o*i,d=-h*i-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},He=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Je=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},qe=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ye=function(t,s){var e=t[0],i=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(i-o)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},Xe=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ke=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Ze=function(t,s,e){e*=.5;var i=Math.sin(e);return t[0]=i*s[0],t[1]=i*s[1],t[2]=i*s[2],t[3]=Math.cos(e),t},Qe=function(t,s){var e=2*Math.acos(s[3]),i=Math.sin(e/2);return i>EPSILON?(t[0]=s[0]/i,t[1]=s[1]/i,t[2]=s[2]/i):(t[0]=1,t[1]=0,t[2]=0),e},ti=function(t,s){var e=dot$2(t,s);return Math.acos(2*e*e-1)},si=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-i*l,t[2]=r*u+h*l+i*a-n*o,t[3]=h*u-i*o-n*a-r*l,t},ei=function(t,s,e){e*=.5;var i=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-i*o,t},ii=function(t,s,e){e*=.5;var i=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a-r*o,t[1]=n*a+h*o,t[2]=r*a+i*o,t[3]=h*a-n*o,t},ni=function(t,s,e){e*=.5;var i=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+n*o,t[1]=n*a-i*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},ri=function(t,s){var e=s[0],i=s[1],n=s[2];return t[0]=e,t[1]=i,t[2]=n,t[3]=Math.sqrt(Math.abs(1-e*e-i*i-n*n)),t},hi=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=Math.sqrt(e*e+i*i+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=e*a,t[1]=i*a,t[2]=n*a,t[3]=o*Math.cos(h),t},oi=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=Math.sqrt(e*e+i*i+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=e*o,t[1]=i*o,t[2]=n*o,t[3]=.5*Math.log(e*e+i*i+n*n+r*r),t},ai=function(t,s,e){return oi(t,s),scale$2(t,t,e),hi(t,t),t},li=function(t,s,e,i){var n,r,h,o,a,l=s[0],u=s[1],c=s[2],f=s[3],d=e[0],p=e[1],m=e[2],g=e[3];return(r=l*d+u*p+c*m+f*g)<0&&(r=-r,d=-d,p=-p,m=-m,g=-g),1-r>EPSILON?(n=Math.acos(r),h=Math.sin(n),o=Math.sin((1-i)*n)/h,a=Math.sin(i*n)/h):(o=1-i,a=i),t[0]=o*l+a*d,t[1]=o*u+a*p,t[2]=o*c+a*m,t[3]=o*f+a*g,t},ui=function(t){var s=RANDOM(),e=RANDOM(),i=RANDOM(),n=Math.sqrt(1-s),r=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*e),t[1]=n*Math.cos(2*Math.PI*e),t[2]=r*Math.sin(2*Math.PI*i),t[3]=r*Math.cos(2*Math.PI*i),t},ci=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=e*e+i*i+n*n+r*r,o=h?1/h:0;return t[0]=-e*o,t[1]=-i*o,t[2]=-n*o,t[3]=r*o,t},fi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},di=function(t,s){var e,i=s[0]+s[4]+s[8];if(i>0)e=Math.sqrt(i+1),t[3]=.5*e,e=.5/e,t[0]=(s[5]-s[7])*e,t[1]=(s[6]-s[2])*e,t[2]=(s[1]-s[3])*e;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;e=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*e,e=.5/e,t[3]=(s[3*r+h]-s[3*h+r])*e,t[r]=(s[3*r+n]+s[3*n+r])*e,t[h]=(s[3*h+n]+s[3*n+h])*e}return t},pi=function(t,s,e,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,r=Math.PI/360;s*=r,i*=r,e*=r;var h=Math.sin(s),o=Math.cos(s),a=Math.sin(e),l=Math.cos(e),u=Math.sin(i),c=Math.cos(i);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},mi=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},gi=function(t,s){return Math.abs($e(t,s))>=1-EPSILON},yi=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},Si=function(t){var s=new ARRAY_TYPE(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},wi=function(t,s,e,i,n,r,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=s,a[2]=e,a[3]=i,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},vi=function(t,s,e,i,n,r,h){var o=new ARRAY_TYPE(8);o[0]=t,o[1]=s,o[2]=e,o[3]=i;var a=.5*n,l=.5*r,u=.5*h;return o[4]=a*i+l*e-u*s,o[5]=l*i+u*t-a*e,o[6]=u*i+a*s-l*t,o[7]=-a*t-l*s-u*e,o},bi=function(t,s,e){var i=.5*e[0],n=.5*e[1],r=.5*e[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=i*l+n*a-r*o,t[5]=n*l+r*h-i*a,t[6]=r*l+i*o-n*h,t[7]=-i*h-n*o-r*a,t},Mi=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},xi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ti=function(t,s){var e=Xe();ls(e,s);var i=new ARRAY_TYPE(3);return os(i,s),bi(t,e,i),t},Ci=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Ii=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},_i=function(t,s,e,i,n,r,h,o,a){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Gi=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Pi=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Ai=function(t,s){var e=s[4],i=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(e*l+r*h+i*a-n*o),t[1]=2*(i*l+r*o+n*h-e*a),t[2]=2*(n*l+r*a+e*o-i*h),t},Ri=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=.5*e[0],a=.5*e[1],l=.5*e[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-i*l+c,t[6]=h*l+i*a-n*o+f,t[7]=-i*o-n*a-r*l+d,t},Ei=function(t,s,e){var i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*r-l*n,f=a*h+u*n+l*i-o*r,d=l*h+u*r+o*n-a*i,p=u*h-o*i-a*n-l*r;return ei(t,s,e),i=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*i+f*r-d*n,t[5]=f*h+p*n+d*i-c*r,t[6]=d*h+p*r+c*n-f*i,t[7]=p*h-c*i-f*n-d*r,t},Oi=function(t,s,e){var i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*r-l*n,f=a*h+u*n+l*i-o*r,d=l*h+u*r+o*n-a*i,p=u*h-o*i-a*n-l*r;return ii(t,s,e),i=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*i+f*r-d*n,t[5]=f*h+p*n+d*i-c*r,t[6]=d*h+p*r+c*n-f*i,t[7]=p*h-c*i-f*n-d*r,t},Fi=function(t,s,e){var i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*r-l*n,f=a*h+u*n+l*i-o*r,d=l*h+u*r+o*n-a*i,p=u*h-o*i-a*n-l*r;return ni(t,s,e),i=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*i+f*r-d*n,t[5]=f*h+p*n+d*i-c*r,t[6]=d*h+p*r+c*n-f*i,t[7]=p*h-c*i-f*n-d*r,t},Di=function(t,s,e){var i=e[0],n=e[1],r=e[2],h=e[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*i+a*r-l*n,t[1]=a*h+u*n+l*i-o*r,t[2]=l*h+u*r+o*n-a*i,t[3]=u*h-o*i-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*i+a*r-l*n,t[5]=a*h+u*n+l*i-o*r,t[6]=l*h+u*r+o*n-a*i,t[7]=u*h-o*i-a*n-l*r,t},Li=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-i*l,t[2]=r*u+h*l+i*a-n*o,t[3]=h*u-i*o-n*a-r*l,o=e[4],a=e[5],l=e[6],u=e[7],t[4]=i*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-i*l,t[6]=r*u+h*l+i*a-n*o,t[7]=h*u-i*o-n*a-r*l,t},ki=function(t,s,e,i){if(Math.abs(i)<EPSILON)return Ci(t,s);var n=Math.hypot(e[0],e[1],e[2]);i*=.5;var r=Math.sin(i),h=r*e[0]/n,o=r*e[1]/n,a=r*e[2]/n,l=Math.cos(i),u=s[0],c=s[1],f=s[2],d=s[3];t[0]=u*l+d*h+c*a-f*o,t[1]=c*l+d*o+f*h-u*a,t[2]=f*l+d*a+u*o-c*h,t[3]=d*l-u*h-c*o-f*a;var p=s[4],m=s[5],g=s[6],y=s[7];return t[4]=p*l+y*h+m*a-g*o,t[5]=m*l+y*o+g*h-p*a,t[6]=g*l+y*a+p*o-m*h,t[7]=y*l-p*h-m*o-g*a,t},Ni=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t},Bi=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[4],a=e[5],l=e[6],u=e[7],c=s[4],f=s[5],d=s[6],p=s[7],m=e[0],g=e[1],y=e[2],S=e[3];return t[0]=i*S+h*m+n*y-r*g,t[1]=n*S+h*g+r*m-i*y,t[2]=r*S+h*y+i*g-n*m,t[3]=h*S-i*m-n*g-r*y,t[4]=i*u+h*o+n*l-r*a+c*S+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-i*l+f*S+p*g+d*m-c*y,t[6]=r*u+h*l+i*a-n*o+d*S+p*y+c*g-f*m,t[7]=h*u-i*o-n*a-r*l+p*S-c*m-f*g-d*y,t},$i=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t},Wi=function(t,s,e,i){var n=1-i;return dot$1(s,e)<0&&(i=-i),t[0]=s[0]*n+e[0]*i,t[1]=s[1]*n+e[1]*i,t[2]=s[2]*n+e[2]*i,t[3]=s[3]*n+e[3]*i,t[4]=s[4]*n+e[4]*i,t[5]=s[5]*n+e[5]*i,t[6]=s[6]*n+e[6]*i,t[7]=s[7]*n+e[7]*i,t},Vi=function(t,s){var e=squaredLength$1(s);return t[0]=-s[0]/e,t[1]=-s[1]/e,t[2]=-s[2]/e,t[3]=s[3]/e,t[4]=-s[4]/e,t[5]=-s[5]/e,t[6]=-s[6]/e,t[7]=s[7]/e,t},ji=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Ui=function(t,s){var e=squaredLength$1(s);if(e>0){e=Math.sqrt(e);var i=s[0]/e,n=s[1]/e,r=s[2]/e,h=s[3]/e,o=s[4],a=s[5],l=s[6],u=s[7],c=i*o+n*a+r*l+h*u;t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-i*c)/e,t[5]=(a-n*c)/e,t[6]=(l-r*c)/e,t[7]=(u-h*c)/e}return t},zi=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Hi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Ji=function(t,s){var e=t[0],i=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7];return Math.abs(e-u)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-f)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},qi=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},Yi=function(t){var s=new ARRAY_TYPE(2);return s[0]=t[0],s[1]=t[1],s},Xi=function(t,s){var e=new ARRAY_TYPE(2);return e[0]=t,e[1]=s,e},Ki=function(t,s){return t[0]=s[0],t[1]=s[1],t},Zi=function(t,s,e){return t[0]=s,t[1]=e,t},Qi=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t},tn=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t},sn=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t},en=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t},nn=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},rn=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},hn=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t},on=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t},an=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},un=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t},cn=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t},fn=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return Math.hypot(e,i)},dn=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return e*e+i*i},pn=function(t){var s=t[0],e=t[1];return Math.hypot(s,e)},mn=function(t){var s=t[0],e=t[1];return s*s+e*e},gn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},yn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},Sn=function(t,s){var e=s[0],i=s[1],n=e*e+i*i;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},wn=function(t,s){return t[0]*s[0]+t[1]*s[1]},vn=function(t,s,e){var i=s[0]*e[1]-s[1]*e[0];return t[0]=t[1]=0,t[2]=i,t},bn=function(t,s,e,i){var n=s[0],r=s[1];return t[0]=n+i*(e[0]-n),t[1]=r+i*(e[1]-r),t},Mn=function(t,s){s=s||1;var e=2*RANDOM()*Math.PI;return t[0]=Math.cos(e)*s,t[1]=Math.sin(e)*s,t},xn=function(t,s,e){var i=s[0],n=s[1];return t[0]=e[0]*i+e[2]*n,t[1]=e[1]*i+e[3]*n,t},Tn=function(t,s,e){var i=s[0],n=s[1];return t[0]=e[0]*i+e[2]*n+e[4],t[1]=e[1]*i+e[3]*n+e[5],t},Cn=function(t,s,e){var i=s[0],n=s[1];return t[0]=e[0]*i+e[3]*n+e[6],t[1]=e[1]*i+e[4]*n+e[7],t},In=function(t,s,e){var i=s[0],n=s[1];return t[0]=e[0]*i+e[4]*n+e[12],t[1]=e[1]*i+e[5]*n+e[13],t},_n=function(t,s,e,i){var n=s[0]-e[0],r=s[1]-e[1],h=Math.sin(i),o=Math.cos(i);return t[0]=n*o-r*h+e[0],t[1]=n*h+r*o+e[1],t},Gn=function(t,s){var e=t[0],i=t[1],n=s[0],r=s[1],h=Math.sqrt((e*e+i*i)*(n*n+r*r)),o=h&&(e*n+i*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},Pn=function(t){return t[0]=0,t[1]=0,t},An=function(t){return"vec2("+t[0]+", "+t[1]+")"},Rn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},En=function(t,s){var e=t[0],i=t[1],n=s[0],r=s[1];return Math.abs(e-n)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(i-r)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(r))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=g,fromValues$8=y,set$8=S,transpose$2=w,invert$5=v,adjoint$2=b,determinant$3=M,multiply$8=x,rotate$4=T,scale$8=C,fromRotation$4=I,fromScaling$3=_,str$8=G,frob$3=P,LDU=A,add$8=R,subtract$6=E,exactEquals$8=O,equals$8=F,multiplyScalar$3=D,multiplyScalarAndAdd$3=L,create$7=k,clone$7=N,copy$7=B,identity$4=$,fromValues$7=W,set$7=V,invert$4=j,determinant$2=U,multiply$7=z,rotate$3=H,scale$7=J,translate$3=q,fromRotation$3=Y,fromScaling$2=X,fromTranslation$3=K,str$7=Z,frob$2=Q,add$7=tt,subtract$5=st,multiplyScalar$2=et,multiplyScalarAndAdd$2=it,exactEquals$7=nt,equals$7=rt,create$6=ht,fromMat4$1=ot,clone$6=at,copy$6=lt,fromValues$6=ut,set$6=ct,identity$3=ft,transpose$1=dt,invert$3=pt,adjoint$1=mt,determinant$1=gt,multiply$6=yt,translate$2=St,rotate$2=wt,scale$6=vt,fromTranslation$2=bt,fromRotation$2=Mt,fromScaling$1=xt,fromMat2d=Tt,fromQuat$1=Ct,normalFromMat4=It,projection=_t,str$6=Gt,frob$1=Pt,add$6=At,subtract$4=Rt,multiplyScalar$1=Et,multiplyScalarAndAdd$1=Ot,exactEquals$6=Ft,equals$6=Dt,create$5=Lt,clone$5=kt,copy$5=Nt,fromValues$5=Bt,set$5=$t,identity$2=Wt,transpose=Vt,invert$2=jt,adjoint=Ut,determinant=zt,multiply$5=Ht,translate$1=Jt,scale$5=qt,rotate$1=Yt,rotateX$3=Xt,rotateY$3=Kt,rotateZ$3=Zt,fromTranslation$1=Qt,fromScaling=ts,fromRotation$1=ss,fromXRotation=es,fromYRotation=is,fromZRotation=ns,fromRotationTranslation$1=rs,fromQuat2=hs,getTranslation$1=os,getScaling=as,getRotation=ls,decompose=us,fromRotationTranslationScale=cs,fromRotationTranslationScaleOrigin=fs,fromQuat=ds,frustum=ps,perspectiveNO=ms,perspectiveZO=gs,perspectiveFromFieldOfView=ys,orthoNO=Ss,orthoZO=ws,lookAt=vs,targetTo=bs,str$5=Ms,frob=xs,add$5=Ts,subtract$3=Cs,multiplyScalar=Is,multiplyScalarAndAdd=_s,exactEquals$5=Gs,equals$5=Ps,create$4=As,clone$4=Rs,length$4=Es,fromValues$4=Os,copy$4=Fs,set$4=Ds,add$4=Ls,subtract$2=ks,multiply$4=Ns,divide$2=Bs,ceil$2=$s,floor$2=Ws,min$2=Vs,max$2=js,round$2=Us,scale$4=zs,scaleAndAdd$2=Hs,distance$2=Js,squaredDistance$2=qs,squaredLength$4=Ys,negate$2=Xs,inverse$2=Ks,normalize$4=Zs,dot$4=Qs,cross$2=te,lerp$4=se,slerp$1=ee,hermite=ie,bezier=ne,random$3=re,transformMat4$2=he,transformMat3$1=oe,transformQuat$1=ae,rotateX$2=le,rotateY$2=ue,rotateZ$2=ce,angle$1=fe,zero$2=de,str$4=pe,exactEquals$4=me,equals$4=ge,create$3=ye,clone$3=Se,fromValues$3=we,copy$3=ve,set$3=be,add$3=Me,subtract$1=xe,multiply$3=Te,divide$1=Ce,ceil$1=Ie,floor$1=_e,min$1=Ge,max$1=Pe,round$1=Ae,scale$3=Re,scaleAndAdd$1=Ee,distance$1=Oe,squaredDistance$1=Fe,length$3=De,squaredLength$3=Le,negate$1=ke,inverse$1=Ne,normalize$3=Be,dot$3=$e,cross$1=We,lerp$3=Ve,random$2=je,transformMat4$1=Ue,transformQuat=ze,zero$1=He,str$3=Je,exactEquals$3=qe,equals$3=Ye,create$2=Xe,identity$1=Ke,setAxisAngle=Ze,getAxisAngle=Qe,getAngle=ti,multiply$2=si,rotateX$1=ei,rotateY$1=ii,rotateZ$1=ni,calculateW=ri,exp=hi,ln=oi,pow=ai,slerp=li,random$1=ui,invert$1=ci,conjugate$1=fi,fromMat3=di,fromEuler=pi,str$2=mi,equals$2=gi,create$1=yi,clone$1=Si,fromValues$1=wi,fromRotationTranslationValues=vi,fromRotationTranslation=bi,fromTranslation=Mi,fromRotation=xi,fromMat4=Ti,copy$1=Ci,identity=Ii,set$1=_i,getDual=Gi,setDual=Pi,getTranslation=Ai,translate=Ri,rotateX=Ei,rotateY=Oi,rotateZ=Fi,rotateByQuatAppend=Di,rotateByQuatPrepend=Li,rotateAroundAxis=ki,add$1=Ni,multiply$1=Bi,scale$1=$i,lerp$1=Wi,invert=Vi,conjugate=ji,normalize$1=Ui,str$1=zi,exactEquals$1=Hi,equals$1=Ji,create=qi,clone=Yi,fromValues=Xi,copy=Ki,set=Zi,add=Qi,subtract=tn,multiply=sn,divide=en,ceil=nn,floor=rn,min=hn,max=on,round=an,scale=un,scaleAndAdd=cn,distance=fn,squaredDistance=dn,length=pn,squaredLength=mn,negate=gn,inverse=yn,normalize=Sn,dot=wn,cross=vn,lerp=bn,random=Mn,transformMat2=xn,transformMat2d=Tn,transformMat3=Cn,transformMat4=In,rotate=_n,angle=Gn,zero=Pn,str=An,exactEquals=Rn,equals=En,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get h(){return ARRAY_TYPE},o:RANDOM,l:ANGLE_ORDER,u:e,m:n,equals:h},mul$8=x,sub$6=E,mat2=Object.freeze({__proto__:null,create:u,clone:p,S:m,identity:g,v:y,set:S,M:w,T:v,C:b,I:M,multiply:x,rotate:T,scale:C,_:I,G:_,P:G,A:P,R:A,add:R,O:E,F:O,equals:F,D:D,L:L,mul:mul$8,sub:sub$6}),mul$7=z,sub$5=st,mat2d=Object.freeze({__proto__:null,create:k,clone:N,S:B,identity:$,v:W,set:V,T:j,I:U,multiply:z,rotate:H,scale:J,translate:q,_:Y,G:X,N:K,P:Z,A:Q,add:tt,O:st,D:et,L:it,F:nt,equals:rt,mul:mul$7,sub:sub$5}),mul$6=yt,sub$4=Rt,mat3=Object.freeze({__proto__:null,create:ht,B:ot,clone:at,S:lt,v:ut,set:ct,identity:ft,M:dt,T:pt,C:mt,I:gt,multiply:yt,translate:St,rotate:wt,scale:vt,N:bt,_:Mt,G:xt,$:Tt,W:Ct,V:It,j:_t,P:Gt,A:Pt,add:At,O:Rt,D:Et,L:Ot,F:Ft,equals:Dt,mul:mul$6,sub:sub$4}),perspective=ms,ortho=Ss,mul$5=Ht,sub$3=Cs,mat4=Object.freeze({__proto__:null,create:Lt,clone:kt,S:Nt,v:Bt,set:$t,identity:Wt,M:Vt,T:jt,C:Ut,I:zt,multiply:Ht,translate:Jt,scale:qt,rotate:Yt,U:Xt,H:Kt,J:Zt,N:Qt,G:ts,_:ss,Y:es,X:is,K:ns,Z:rs,tt:hs,st:os,et:as,it:ls,nt:us,rt:cs,ht:fs,W:ds,ot:ps,lt:ms,perspective:perspective,ut:gs,ct:ys,ft:Ss,dt:ortho,gt:ws,yt:vs,St:bs,P:Ms,A:xs,add:Ts,O:Cs,D:Is,L:_s,F:Gs,equals:Ps,mul:mul$5,sub:sub$3}),sub$2=ks,mul$4=Ns,div$2=Bs,dist$2=Js,sqrDist$2=qs,len$4=Es,sqrLen$4=Ys,t=As(),forEach$2=function(s,e,i,n,r,h){var o,a;for(e||(e=3),i||(i=0),a=n?Math.min(n*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},vec3=Object.freeze({__proto__:null,create:As,clone:Rs,length:Es,v:Os,S:Fs,set:Ds,add:Ls,O:ks,multiply:Ns,wt:Bs,ceil:$s,floor:Ws,min:Vs,max:js,round:Us,scale:zs,vt:Hs,bt:Js,Mt:qs,xt:Ys,Tt:Xs,inverse:Ks,normalize:Zs,Ct:Qs,It:te,_t:se,Gt:ee,Pt:ie,At:ne,random:re,Rt:he,Et:oe,Ot:ae,U:le,H:ue,J:ce,angle:fe,Ft:de,P:pe,F:me,equals:ge,sub:sub$2,mul:mul$4,div:div$2,Dt:dist$2,Lt:sqrDist$2,kt:len$4,Nt:sqrLen$4,forEach:forEach$2}),sub$1=xe,mul$3=Te,div$1=Ce,dist$1=Oe,sqrDist$1=Fe,len$3=De,sqrLen$3=Le,forEach$1=function(){var t=ye();return function(s,e,i,n,r,h){var o,a;for(e||(e=4),i||(i=0),a=n?Math.min(n*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),vec4=Object.freeze({__proto__:null,create:ye,clone:Se,v:we,S:ve,set:be,add:Me,O:xe,multiply:Te,wt:Ce,ceil:Ie,floor:_e,min:Ge,max:Pe,round:Ae,scale:Re,vt:Ee,bt:Oe,Mt:Fe,length:De,xt:Le,Tt:ke,inverse:Ne,normalize:Be,Ct:$e,It:We,_t:Ve,random:je,Rt:Ue,Ot:ze,Ft:He,P:Je,F:qe,equals:Ye,sub:sub$1,mul:mul$3,div:div$1,Dt:dist$1,Lt:sqrDist$1,kt:len$3,Nt:sqrLen$3,forEach:forEach$1}),clone$2=Se,fromValues$2=we,copy$2=ve,set$2=be,add$2=Me,mul$2=si,scale$2=Re,dot$2=$e,lerp$2=Ve,length$2=De,len$2=length$2,squaredLength$2=Le,sqrLen$2=squaredLength$2,normalize$2=Be,exactEquals$2=qe,rotationTo=function(){var t=As(),s=Os(1,0,0),e=Os(0,1,0);return function(i,n,r){var h=Qs(n,r);return h<-.999999?(te(t,s,n),len$4(t)<1e-6&&te(t,e,n),Zs(t,t),Ze(i,t,Math.PI),i):h>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(te(t,n,r),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+h,normalize$2(i,i))}}(),sqlerp=function(){var t=Xe(),s=Xe();return function(e,i,n,r,h,o){return li(t,i,h,o),li(s,n,r,o),li(e,t,s,2*o*(1-o)),e}}(),setAxes=function(){var t=ht();return function(s,e,i,n){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],normalize$2(s,di(s,t))}}(),quat=Object.freeze({__proto__:null,create:Xe,identity:Ke,Bt:Ze,$t:Qe,Wt:ti,multiply:si,U:ei,H:ii,J:ni,Vt:ri,exp:hi,jt:oi,pow:ai,Gt:li,random:ui,T:ci,Ut:fi,zt:di,Ht:pi,P:mi,clone:clone$2,v:fromValues$2,S:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Ct:dot$2,_t:lerp$2,length:length$2,kt:len$2,xt:squaredLength$2,Nt:sqrLen$2,normalize:normalize$2,F:exactEquals$2,equals:gi,Jt:rotationTo,qt:sqlerp,Yt:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=Bi,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:yi,clone:Si,v:wi,Xt:vi,Z:bi,N:Mi,_:xi,B:Ti,S:Ci,identity:Ii,set:_i,Kt:getReal,Zt:Gi,Qt:setReal,ts:Pi,st:Ai,translate:Ri,U:Ei,H:Oi,J:Fi,ss:Di,es:Li,ns:ki,add:Ni,multiply:Bi,mul:mul$1,scale:$i,Ct:dot$1,_t:Wi,T:Vi,Ut:ji,length:length$1,kt:len$1,xt:squaredLength$1,Nt:sqrLen$1,normalize:Ui,P:zi,F:Hi,equals:Ji}),len=pn,sub=tn,mul=sn,div=en,dist=fn,sqrDist=dn,sqrLen=mn,forEach=function(){var t=qi();return function(s,e,i,n,r,h){var o,a;for(e||(e=2),i||(i=0),a=n?Math.min(n*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),vec2=Object.freeze({__proto__:null,create:qi,clone:Yi,v:Xi,S:Ki,set:Zi,add:Qi,O:tn,multiply:sn,wt:en,ceil:nn,floor:rn,min:hn,max:on,round:an,scale:un,vt:cn,bt:fn,Mt:dn,length:pn,xt:mn,Tt:gn,inverse:yn,normalize:Sn,Ct:wn,It:vn,_t:bn,random:Mn,rs:xn,hs:Tn,Et:Cn,Rt:In,rotate:_n,angle:Gn,Ft:Pn,P:An,F:Rn,equals:En,kt:len,sub:sub,mul:mul,div:div,Dt:dist,Lt:sqrDist,Nt:sqrLen,forEach:forEach}),globalThis.ls=common,globalThis.ls.us=mat2,globalThis.ls.cs=mat2d,globalThis.ls.fs=mat3,globalThis.ls.ds=mat4,globalThis.ls.ps=quat,globalThis.ls.gs=quat2,globalThis.ls.ys=vec2,globalThis.ls.Ss=vec3,globalThis.ls.ws=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetKeyboardSdkInstance,StringFromCharCode,GetSdkInstance,shuffle,pickGradient2,pickGradient3,dot2,dot3,quintic,fract,sq,swap,uint64,splitmix64,rotl,next,nextFloat,IsExpressionType,GetMouseSdkInstance,GetAudioSdkInstance,GetAudioDOMInterface,GetTouchSdkInstance,WrapModeToStr,CloneDrawable,GetParticleEngine,randomOffset,getIndexForEase,ValidateTags,SetObjectTypeCollisionsEnabled,UnwrapIWorldInstance,CloneVec2,SplitConvexPolysOver8Points,SplitConvexPoly,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let On=function(t,s,e){e=e||0;var i,n,r,h,o,a,l,u=[0,0];return i=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=i*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],rr(l=i*o-h*n,0,e)||(u[0]=(o*r-n*a)/l,u[1]=(i*a-h*r)/l),u},Fn=function(t,s,e,i){var n=s[0]-t[0],r=s[1]-t[1],h=i[0]-e[0],o=i[1]-e[1];if(h*r-o*n==0)return!1;var a=(n*(e[1]-t[1])+r*(t[0]-e[0]))/(h*r-o*n),l=(h*(t[1]-e[1])+o*(e[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Dn=function(t,s,e){return(s[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(s[1]-t[1])},Ln=function(t,s,e){return Dn(t,s,e)>0},kn=function(t,s,e){return Dn(t,s,e)>=0},Nn=function(t,s,e){return Dn(t,s,e)<0},Bn=function(t,s,e){return Dn(t,s,e)<=0},$n=function(t,s,e,i){if(i){var n=tmpPoint1,r=tmpPoint2;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=e[0]-s[0],r[1]=e[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<i}return 0===Dn(t,s,e)},Wn=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return e*e+i*i},Vn=function(t,s){var e=t.length;return t[s<0?s%e+e:s%e]},jn=function(t){t.length=0},Un=function(t,s,e,i){for(var n=e;n<i;n++)t.push(s[n])},zn=function(t){for(var s=0,e=t,i=1;i<t.length;++i)(e[i][1]<e[s][1]||e[i][1]===e[s][1]&&e[i][0]>e[s][0])&&(s=i);return!Ln(Vn(t,s-1),Vn(t,s),Vn(t,s+1))&&(Hn(t),!0)},Hn=function(t){for(var s=[],e=t.length,i=0;i!==e;i++)s.push(t.pop());for(i=0;i!==e;i++)t[i]=s[i]},Jn=function(t,s){return Nn(Vn(t,s-1),Vn(t,s),Vn(t,s+1))},qn=function(t,s,e){var i,n,r=tmpLine1,h=tmpLine2;if(kn(Vn(t,s+1),Vn(t,s),Vn(t,e))&&Bn(Vn(t,s-1),Vn(t,s),Vn(t,e)))return!1;n=Wn(Vn(t,s),Vn(t,e));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&kn(Vn(t,s),Vn(t,e),Vn(t,o+1))&&Bn(Vn(t,s),Vn(t,e),Vn(t,o))&&(r[0]=Vn(t,s),r[1]=Vn(t,e),h[0]=Vn(t,o),h[1]=Vn(t,o+1),i=On(r,h),Wn(Vn(t,s),i)<n))return!1;return!0},Yn=function(t,s,e){for(var i=0;i!==t.length;++i)if(i!==s&&i!==e&&(i+1)%t.length!==s&&(i+1)%t.length!==e&&Fn(Vn(t,s),Vn(t,e),Vn(t,i),Vn(t,i+1)))return!1;return!0},Xn=function(t,s,e,i){var n=i||[];if(jn(n),s<e)for(var r=s;r<=e;r++)n.push(t[r]);else{for(r=0;r<=e;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},Kn=function(t){for(var s=[],e=[],i=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(Jn(t,h))for(var o=0;o<t.length;++o)if(qn(t,h,o)){e=Kn(Xn(t,h,o,n)),i=Kn(Xn(t,o,h,n));for(var a=0;a<i.length;a++)e.push(i[a]);e.length<r&&(s=e,r=e.length,s.push([Vn(t,h),Vn(t,o)]))}return s},Zn=function(t){var s=Kn(t);return s.length>0?Qn(t,s):[t]},Qn=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var e=[t],i=0;i<s.length;i++)for(var n=s[i],r=0;r<e.length;r++){var h=Qn(e[r],n);if(h){e.splice(r,1),e.push(h[0],h[1]);break}}return e}return n=s,i=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==i&&-1!==r&&[Xn(t,i,r),Xn(t,r,i)]},tr=function(t){var s,e=t;for(s=0;s<e.length-1;s++)for(var i=0;i<s-1;i++)if(Fn(e[s],e[s+1],e[i],e[i+1]))return!1;for(s=1;s<e.length-2;s++)if(Fn(e[0],e[e.length-1],e[s],e[s+1]))return!1;return!0},sr=function(t,s,e,i,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=i[1]-e[1],l=e[0]-i[0],u=a*e[0]+l*e[1],c=r*l-a*h;return rr(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},er=function(t,s,e,i,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],e=e||[],i=i||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],S=[],w=t,v=t;if(v.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var b=0;b<t.length;++b)if(Jn(w,b)){e.push(w[b]),u=c=Number.MAX_VALUE;for(var M=0;M<t.length;++M)Ln(Vn(w,b-1),Vn(w,b),Vn(w,M))&&Bn(Vn(w,b-1),Vn(w,b),Vn(w,M-1))&&(l=sr(Vn(w,b-1),Vn(w,b),Vn(w,M),Vn(w,M-1)),Nn(Vn(w,b+1),Vn(w,b),l)&&(f=Wn(w[b],l))<c&&(c=f,a=l,m=M)),Ln(Vn(w,b+1),Vn(w,b),Vn(w,M+1))&&Bn(Vn(w,b+1),Vn(w,b),Vn(w,M))&&(l=sr(Vn(w,b+1),Vn(w,b),Vn(w,M),Vn(w,M+1)),Ln(Vn(w,b-1),Vn(w,b),l)&&(f=Wn(w[b],l))<u&&(u=f,o=l,p=M));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,i.push(l),b<p?(Un(y,w,b,p+1),y.push(l),S.push(l),0!==m&&Un(S,w,m,w.length),Un(S,w,0,b+1)):(0!==b&&Un(y,w,b,w.length),Un(y,w,0,p+1),y.push(l),S.push(l),Un(S,w,m,b+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)kn(Vn(w,b-1),Vn(w,b),Vn(w,M))&&Bn(Vn(w,b+1),Vn(w,b),Vn(w,M))&&(f=Wn(Vn(w,b),Vn(w,M)))<d&&Yn(w,b,M)&&(d=f,g=M%t.length);b<g?(Un(y,w,b,g+1),0!==g&&Un(S,w,g,v.length),Un(S,w,0,b+1)):(0!==b&&Un(y,w,b,v.length),Un(y,w,0,g+1),Un(S,w,g,b+1))}return y.length<S.length?(er(y,s,e,i,n,r,h),er(S,s,e,i,n,r,h)):(er(S,s,e,i,n,r,h),er(y,s,e,i,n,r,h)),s}return s.push(t),s},ir=function(t,s){for(var e=0,i=t.length-1;t.length>3&&i>=0;--i)$n(Vn(t,i-1),Vn(t,i),Vn(t,i+1),s)&&(t.splice(i%t.length,1),e++);return e},nr=function(t,s){for(var e=t.length-1;e>=1;--e)for(var i=t[e],n=e-1;n>=0;--n)hr(i,t[n],s)&&t.splice(e,1)},rr=function(t,s,e){return e=e||0,Math.abs(t-s)<=e},hr=function(t,s,e){return rr(t[0],s[0],e)&&rr(t[1],s[1],e)};lineInt=On,lineSegmentsIntersect=Fn,triangleArea=Dn,isLeft=Ln,isLeftOn=kn,isRight=Nn,isRightOn=Bn,collinear=$n,sqdist=Wn,polygonAt=Vn,polygonClear=jn,polygonAppend=Un,polygonMakeCCW=zn,polygonReverse=Hn,polygonIsReflex=Jn,polygonCanSee=qn,polygonCanSee2=Yn,polygonCopy=Xn,polygonGetCutEdges=Kn,polygonDecomp=Zn,polygonSlice=Qn,polygonIsSimple=tr,getIntersectionPoint=sr,polygonQuickDecomp=er,polygonRemoveCollinearPoints=ir,polygonRemoveDuplicatePoints=nr,scalar_eq=rr,points_eq=hr,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.vs={bs:Zn,Ms:er,xs:tr,Ts:ir,Cs:nr,Is:zn}}{let ar=!1,lr=!1,ur="dev";const cr=Symbol("Construct internal API token");let fr=16;const dr=self._s=class{constructor(){throw TypeError("static class can't be instantiated")}static Gs(){if(fr<=0)throw new Error("cannot obtain internal API token");return--fr,cr}static Ps(){ar=!0}static As(){return ar}static Rs(){lr=!0}static Es(){return lr}static Os(t){ur=t}static Fs(){return ur}static Ds(){return"final"===ur}};dr.Ls=!1,dr.ks=!1,dr.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ns={}}{const pr=self._s;pr.Bs=class{constructor(t){this.$s=t,this.Ws=new Map,this.Vs()}Vs(){let t=this.$s;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.js(t)}js(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),e=decodeURIComponent(t.substring(0,s)),i=decodeURIComponent(t.substring(s+1));this.Ws.set(e,i)}Us(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}zs(t){return this.Ws.has(t)}Hs(t){const s=this.Ws.get(t);return void 0===s?null:s}Js(){history.replaceState("",document.title,location.pathname+location.search)}qs(t){this.$s=t,this.Ws.clear(),this.Vs()}},pr.Ys=new pr.Bs(location.search),pr.Xs=new pr.Bs(location.hash),pr.Ys.zs("perf")&&(pr.Ks=!0),"dev"!==pr.Ys.Hs("mode")&&pr.Os("final")}{let mr=function(t){const s=parseFloat(t);return Sr.get(s)||(s>=13?"11":"NT "+t)};GetWindowsNTVersionName=mr;const gr=self._s,yr="(unknown)";gr.Zs={Qs:yr,te:yr,se:yr,ee:yr,ie:NaN,ne:yr,re:"browser",he:!0,oe:!1,ae:!1,le:!1,ue:async()=>{}};const Sr=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),wr=navigator.userAgent,vr=navigator.userAgentData;if(vr&&vr.brands.length>0){let Mr=function(t){let s="",e="",i="",n="";for(const r of t){const t=xr.get(r.brand);!s&&t&&(s=t,e=r.version);const h=Tr.get(r.brand);!i&&h&&(i=h,n=r.version)}s||"Chromium"!==i||(gr.Zs.se="Chromium",gr.Zs.ee=n),gr.Zs.se=s||yr,gr.Zs.ee=e||yr,gr.Zs.ne=i||yr};ReadBrandList=Mr,gr.Zs.Qs=vr.platform,gr.Zs.oe=vr.mobile,gr.Zs.he=!gr.Zs.oe;const xr=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Tr=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Mr(vr.brands);let Cr=!1;gr.Zs.ue=async()=>{if(!Cr)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Mr(t.fullVersionList),"Windows"===gr.Zs.Qs?gr.Zs.te=mr(t.platformVersion):gr.Zs.te=t.platformVersion,Cr=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Ir=function(t,s){const e=Array.isArray(t)?t:[t];for(const t of e){const e=t.exec(wr);if(e){s(e);break}}};RunTest=Ir,Ir(/windows\s+nt\s+([\d\.]+)/i,(t=>{gr.Zs.Qs="Windows";const s=t[1];gr.Zs.te=mr(s)})),Ir(/mac\s+os\s+x\s+([\d\._]+)/i,(t=>{gr.Zs.Qs="macOS",gr.Zs.te=t[1].replace(/_/g,".")})),Ir(/CrOS/,(()=>{gr.Zs.Qs="Chrome OS"})),Ir(/linux|openbsd|freebsd|netbsd/i,(()=>{gr.Zs.Qs="Linux"})),Ir(/android/i,(()=>{gr.Zs.Qs="Android"})),Ir(/android\s+([\d\.]+)/i,(t=>{gr.Zs.Qs="Android",gr.Zs.te=t[1]})),gr.Zs.Qs===yr&&(Ir(/(iphone|ipod|ipad)/i,(t=>{gr.Zs.Qs="iOS"})),Ir([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],(t=>{gr.Zs.Qs="iOS",gr.Zs.te=t[1].replace(/_/g,".")})));const _r=/chrome\//i.test(wr),Gr=/chromium\//i.test(wr),Pr=/edg\//i.test(wr),Ar=/OPR\//.test(wr),Rr=/nwjs/i.test(wr),Er=/safari\//i.test(wr),Or=/webkit/i.test(wr);Pr||Ar||Ir(/chrome\/([\d\.]+)/i,(t=>{gr.Zs.se="Chrome",gr.Zs.ee=t[1],gr.Zs.ne="Chromium"})),Ir(/edg\/([\d\.]+)/i,(t=>{gr.Zs.se="Edge",gr.Zs.ee=t[1],gr.Zs.ne="Chromium"})),Ir(/OPR\/([\d\.]+)/,(t=>{gr.Zs.se="Opera",gr.Zs.ee=t[1],gr.Zs.ne="Chromium"})),Ir(/chromium\/([\d\.]+)/i,(t=>{gr.Zs.se="Chromium",gr.Zs.ee=t[1],gr.Zs.ne="Chromium"})),Ir(/nwjs\/[0-9.]+/i,(t=>{gr.Zs.se="NW.js",gr.Zs.ee=t[1],gr.Zs.ne="Chromium",gr.Zs.re="nwjs"})),Ir(/firefox\/([\d\.]+)/i,(t=>{gr.Zs.se="Firefox",gr.Zs.ee=t[1],gr.Zs.ne="Gecko"})),!Er||_r||Gr||Pr||Ar||Rr||(gr.Zs.se="Safari",gr.Zs.ne="WebKit",Ir(/version\/([\d\.]+)/i,(t=>{gr.Zs.ee=t[1]})),Ir(/crios\/([\d\.]+)/i,(t=>{gr.Zs.se="Chrome for iOS",gr.Zs.ee=t[1]})),Ir(/fxios\/([\d\.]+)/i,(t=>{gr.Zs.se="Firefox for iOS",gr.Zs.ee=t[1]})),Ir(/edgios\/([\d\.]+)/i,(t=>{gr.Zs.se="Edge for iOS",gr.Zs.ee=t[1]}))),gr.Zs.ne===yr&&Or&&(gr.Zs.ne="WebKit"),"Android"===gr.Zs.Qs&&"Safari"===gr.Zs.se&&(gr.Zs.se="Stock");const Fr=new Set(["Windows","macOS","Linux","Chrome OS"]).has(gr.Zs.Qs)||"nwjs"===gr.Zs.re;gr.Zs.he=Fr,gr.Zs.oe=!Fr}"Chrome"===gr.Zs.se&&"browser"===gr.Zs.re&&/wv\)/.test(wr)&&(gr.Zs.re="webview"),"nwjs"!==gr.Zs.re&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(gr.Zs.re="webapp"),gr.Zs.ie=parseFloat(gr.Zs.ee);const br="macOS"===gr.Zs.Qs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;br&&(gr.Zs.Qs="iOS",gr.Zs.te=gr.Zs.ee,gr.Zs.he=!1,gr.Zs.oe=!0,gr.Zs.le=!0),gr.Zs.ae="macOS"===gr.Zs.Qs||"iOS"===gr.Zs.Qs}{let Dr=function(t){return new Promise(((s,e)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>e(t.error)}))},Lr=function(t){return new Promise(((s,e)=>{t.oncomplete=()=>s(),t.onerror=()=>e(t.error),t.onabort=()=>e(t.error)}))},kr=function(t,s){return Jr(t,s)},Nr=function(t,s){return Jr(t,s,!0)},Br=function(t){$r(t);let s=Ur.get(t);return s instanceof Promise||(s=qr(t),Ur.set(t,s),s.catch((s=>Ur.delete(t)))),s},$r=function(t){if("string"!=typeof t)throw new TypeError("expected string")},Wr=function(t,s){const e=t.objectStore(jr).openCursor();return new Promise((t=>{const i=[];e.onsuccess=e=>{const n=e.target.result;if(n){switch(s){case"entries":i.push([n.key,n.value]);break;case"keys":i.push(n.key);break;case"values":i.push(n.value)}n.continue()}else t(i)}}))};s=Dr,a=Lr,c=kr,i=Nr,l=Br,f=$r,d=Wr;const Vr=2,jr="keyvaluepairs",Ur=new Map,zr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,Hr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function Jr(t,s,e=!1,i=!0){const n=await Br(t);try{return s(n.transaction([jr],e?"readwrite":"readonly"))}catch(n){if(i&&"InvalidStateError"===n.name)return Ur.delete(t),Jr(t,s,e,!1);throw n}}async function qr(t){$r(t);const s=indexedDB.open(t,Vr);return s.addEventListener("upgradeneeded",(s=>{try{s.target.result.createObjectStore(jr)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}})),Dr(s)}class Yr{constructor(t){$r(t),this.name=t}async ready(){await Br(this.name)}set(t,s){return $r(t),Nr(this.name,(async e=>{const i=Dr(e.objectStore(jr).put(s,t)),n=Lr(e);await Promise.all([n,i])}))}get(t){return $r(t),kr(this.name,(async s=>{const e=Dr(s.objectStore(jr).get(t)),i=Lr(s),[n,r]=await Promise.all([i,e]);return r}))}delete(t){return $r(t),Nr(this.name,(async s=>{const e=Dr(s.objectStore(jr).delete(t)),i=Lr(s);await Promise.all([i,e])}))}clear(){return Nr(this.name,(async t=>{const s=Dr(t.objectStore(jr).clear()),e=Lr(t);await Promise.all([e,s])}))}keys(){return kr(this.name,(async t=>{let s;s=Hr?Dr(t.objectStore(jr).getAllKeys()):Wr(t,"keys");const e=Lr(t),[i,n]=await Promise.all([e,s]);return n}))}values(){return kr(this.name,(async t=>{let s;s=zr?Dr(t.objectStore(jr).getAll()):Wr(t,"values");const e=Lr(t),[i,n]=await Promise.all([e,s]);return n}))}entries(){return kr(this.name,(async t=>{const s=Wr(t,"entries"),e=Lr(t),[i,n]=await Promise.all([e,s]);return n}))}}self.ce=Yr}{let Xr=function(t){throw new Error(`"${t}" is not implemented`)},Kr=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Zr=function(t){return"object"==typeof t?new Promise((s=>{const{port1:e,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),e.postMessage(t)})):Promise.resolve(t)};r=Xr,a=Kr,o=Zr;const Qr=self.ce,th=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class sh{constructor(t){this.fe=t,this.de=!this.fe,this.de||"undefined"!=typeof indexedDB||(this.de=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.pe=new Map}me(t){if(!this.de)for(const s of th)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.de=!0;break}}async ge(t){const s=this.pe.get(t),e=await Zr(s);return void 0===e?null:e}async ye(t,s){s=await Zr(s),this.pe.set(t,s)}Se(t){this.pe.delete(t)}we(){this.pe.clear()}ve(){return Array.from(this.pe.keys())}be(){return this.de}Me(){return this.pe}xe(t){this.pe=t}async getItem(t,s){if(Kr(s),this.de)return await this.ge(t);let e;try{e=await this.fe.get(t)}catch(s){return this.me(s),this.de?await this.ge(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===e?null:e}async setItem(t,s,e){if(Kr(e),void 0===s&&(s=null),this.de)await this.ye(t,s);else try{await this.fe.set(t,s)}catch(e){if(this.me(e),!this.de)throw e;await this.ye(t,s)}}async removeItem(t,s){if(Kr(s),this.de)this.Se(t);else try{await this.fe.delete(t)}catch(s){this.me(s),this.de?this.Se(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(Kr(t),this.de)this.we();else try{await this.fe.clear()}catch(t){this.me(t),this.de?this.we():console.error("Error clearing storage: ",t)}}async keys(t){if(Kr(t),this.de)return this.ve();let s=[];try{s=await this.fe.keys()}catch(t){if(this.me(t),this.de)return this.ve();console.error("Error getting storage keys: ",t)}return s}ready(t){return Kr(t),this.de?Promise.resolve(!0):this.fe.ready()}Te(t){if(t.Ce)return new sh(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const e=new Qr(s);return new sh(e)}}length(t){Xr("localforage.length()")}key(t,s){Xr("localforage.key()")}iterate(t,s){Xr("localforage.iterate()")}Ie(t){Xr("localforage.setDriver()")}config(t){Xr("localforage.config()")}_e(t){Xr("localforage.defineDriver()")}Ge(){Xr("localforage.driver()")}supports(t){Xr("localforage.supports()")}dropInstance(){Xr("localforage.dropInstance()")}}self.localforage=new sh(new Qr("localforage"))}{const eh=self._s;if(eh.Pe={},eh.Pe.Ae=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),eh.Pe.Re="undefined"!=typeof HTMLDialogElement,eh.Pe.Ee=!!self.requestIdleCallback,eh.Pe.ImageBitmap=!!self.createImageBitmap,eh.Pe.ImageBitmapOptions=!1,eh.Pe.Oe=!1,eh.Pe.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then((()=>{eh.Pe.ImageBitmapOptions=!0})).catch((()=>{eh.Pe.ImageBitmapOptions=!1}))}catch(ih){eh.Pe.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then((t=>{eh.Pe.Oe=10===t.width&&10===t.height})).catch((()=>{eh.Pe.Oe=!1}))}catch(nh){eh.Pe.Oe=!1}}if(eh.Pe.Fe=!(!navigator.clipboard||!navigator.clipboard.readText),eh.Pe.De=!(!navigator.permissions||!navigator.permissions.query),eh.Pe.Le=!1,eh.Pe.De){const rh={name:"clipboard-read"};navigator.permissions.query(rh).then((()=>{eh.Pe.Le=!0})).catch((()=>{eh.Pe.Le=!1}))}eh.Pe.ke=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),eh.Pe.Ne="undefined"!=typeof Proxy,eh.Pe.Be="undefined"!=typeof document&&void 0!==document.createElement("a").download,eh.Pe.$e="function"==typeof fetch,eh.Pe.We=!!(self.isSecureContext&&"Opera"!==eh.Zs.se&&navigator.storage&&navigator.storage.persist),eh.Pe.Ve=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),eh.Pe.je=(()=>{if("undefined"==typeof document)return!1;if("iOS"===eh.Zs.Qs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),eh.Pe.ImageDecoder=void 0!==self.ImageDecoder,eh.Pe.Ue=!!self.VideoEncoder,eh.Pe.ze=!!self.showOpenFilePicker,eh.Pe.He=!!self.queryLocalFonts,eh.Pe.UserActivation=!!navigator.userActivation,eh.Pe.Je=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let e=null;try{t.convertToBlob?e=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(e=await new Promise((s=>t.toBlob(s,"image/webp",1)))),eh.Pe.Je=e&&"image/webp"===e.type}catch(t){eh.Pe.Je=!1}})()}{const hh=self._s;if(!String.prototype.trimStart){const oh=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(oh,"")}}if(!String.prototype.trimEnd){const ah=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(ah,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(hh.qe(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let lh=function(t,s){return t.reduce(((t,e)=>s>0&&Array.isArray(e)?(Array.prototype.push.apply(t,lh(e,s-1)),t):(t.push(e),t)),[])};arrayFlat=lh,Array.prototype.flat=function(t=1){return lh(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise(((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota(((s,e)=>t({usage:s,quota:e})),s)))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let uh=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+ch.Ye();console.error(s)};assertFail=uh;const ch=self._s;self.assert=function(t,s){t||uh(s)}}{const fh=self._s,dh=self.Ns;fh.Xe=function(t){return"number"==typeof t},fh.Ke=function(t){return fh.Xe(t)&&isFinite(t)},fh.Ze=function(t){if(!fh.Xe(t))throw new TypeError("expected number")},fh.Qe=function(t){fh.ti(t)},fh.si=function(t,s,e){if(!fh.Xe(t)||isNaN(t)||s>t||e<t)throw new RangeError("number outside of range")},fh.ei=function(...t){for(let s of t);},fh.ii=function(t){if(!fh.Ke(t))throw new TypeError("expected finite number")},fh.ni=function(t){fh.ti(t)},fh.ri=function(...t){for(let s of t);},fh.hi=function(t){return"string"==typeof t},fh.oi=function(t){if(!fh.hi(t))throw new TypeError("expected string")},fh.ai=function(t){fh.ti(t)},fh.li=function(...t){for(let s of t);},fh.ci=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},fh.fi=function(t){if(!fh.ci(t))throw new TypeError("expected simple object")},fh.di=function(t){if(!fh.ti(t)&&!fh.ci(t))throw new TypeError("expected simple object")},fh.pi=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},fh.mi=function(t){if(!fh.pi(t))throw new TypeError("expected object")},fh.gi=function(t){fh.ti(t)},fh.yi=function(...t){for(let s of t);},fh.Si=function(t){return fh.wi(t,Blob)&&"string"==typeof t.name},fh.bi=function(t){if(!fh.Si(t))throw new TypeError("expected file")},fh.Mi=function(t){fh.ti(t)},fh.xi=function(t){return Array.isArray(t)},fh.Ti=function(t){if(!fh.xi(t))throw new TypeError("expected array")},fh.Ci=function(t){fh.ti(t)},fh.Ii=function(...t){for(let s of t);},fh._i=function(t){return!(!fh.xi(t)||t.length&&!fh.xi(t[0]))},fh.Gi=function(t){if(!fh._i(t))throw new TypeError("expected 2d array");for(let s of t)if(!fh.xi(s))throw new TypeError("expected 2d array")},fh.Pi=function(t){fh.ti(t)},fh.Ai=function(t){return"function"==typeof t},fh.Ri=function(t,s){if(!fh.Ai(t))throw new TypeError("expected function");if(!fh.ti(s)&&t!==s)throw new TypeError("expected same function reference")},fh.Ei=function(t){fh.ti(t)},fh.Oi=function(...t){for(let s of t);},fh.Fi=function(t,...s){if(!fh.Ai(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let e of s)if(!fh.ti(e)&&t===e)return;throw new TypeError("expected same function reference")},fh.Di=function(...t){if(!fh.ti(t))for(let s of t);},fh.Li=function(t,s){return t instanceof s},fh.ki=function(t,...s){for(let e of s)if(fh.Li(t,e))return!0;return!1},fh.Ni=function(t,s){if(!fh.Li(t,s))throw new TypeError("unexpected type")},fh.Bi=function(t,s){fh.ti(t)},fh.$i=function(t,...s){for(let t of s);},fh.Wi=function(t,...s){if(!fh.ki(t,...s))throw new TypeError("unexpected type")},fh.Vi=function(t,...s){if(!fh.ti(t)&&!fh.ki(t,...s))throw new TypeError("unexpected type")},fh.ji=function(t,s){for(let e of t)if(!fh.Li(e,s))return!1;return!0},fh.Ui=function(t){for(let s of t)if(!fh.Ke(s))return!1;return!0},fh.zi=function(t,s){for(let s of t);},fh.Hi=function(t,s){if(!fh.ti(t))for(let s of t);},fh.Ji=function(t,s){if(!fh.ti(t))for(let s of t);},fh.Yi=function(t,...s){for(let s of t);},fh.Xi=function(t,...s){if(!fh.ti(t))for(let s of t);},fh.Ki=function(t,s){return!(fh.ti(t)||!fh.hi(t.nodeName))&&(!s||fh.Zi(t.nodeName,s))},fh.Qi=function(t,s){if(fh.ti(t)||!fh.hi(t.nodeName))throw new TypeError("expected DOM node");if(s&&!fh.Zi(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},fh.tn=function(t,s){fh.ti(t)},fh.sn=function(t,s){return!(fh.ti(t)||!fh.hi(t.tagName))&&(!s||fh.Zi(t.tagName,s))},fh.en=function(t,s){if(fh.ti(t)||!fh.hi(t.tagName))throw new TypeError("expected HTML element");if(s&&!fh.Zi(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},fh.nn=function(t,s){fh.ti(t)},fh.rn=function(t){return fh.sn(t,"img")||fh.sn(t,"canvas")||fh.sn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},fh.hn=function(t){if(!fh.rn(t))throw new TypeError("expected drawable")},fh.an=function(t){fh.ti(t)},fh.ln=function(t){return t instanceof ImageData||fh.rn(t)},fh.un=function(t){if(!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.cn=function(t){if(!fh.ti(t)&&!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.fn=function(t){return"string"==typeof t||fh.dn&&t instanceof fh.dn||t instanceof fh.pn},fh.mn=function(t){if(!fh.fn(t))throw new TypeError("expected string-like")},fh.gn=function(t){fh.ti(t)},fh.yn=function(...t){for(let s of t);},fh.Sn=function(){throw new Error("must be overridden")},fh.wn=function(){throw new Error("not yet implemented")},fh.vn=function(t){return t.constructor===function*(){}.constructor},fh.bn=function(t){if(!fh.vn(t))throw new Error("expected generator function")},fh.Mn=function(t){return"function"===t[Symbol.iterator]},fh.xn=function(t){if(!fh.Mn(t))throw new Error("expected iterable")},fh.Tn=function(t){return!fh.ti(t)},fh.ti=function(t){return null==t},fh.Cn=function(t){let s=t[0].constructor;for(let e of t)if(e.constructor!==s)return!1;return s},fh.In=function(t,s){for(let e of t)if(!(e instanceof s))return!1;return!0};const ph=Object.getPrototypeOf(Uint8Array);fh._n=function(t){return fh.Li(t,ph)},fh.Gn=function(t){},fh.Pn=function(t){fh.An(t,ph)},fh.Rn=function(t,...s){if(!fh.En(t,...s))throw new TypeError("unexpected type")},fh.En=function(t,...s){for(const e of s)if(fh.wi(t,e))return!0;return!1},fh.An=function(t,s){if(!fh.wi(t,s))throw new TypeError("unexpected type")},fh.wi=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},dh.Ze=fh.Ze,dh.Qe=fh.Qe,dh.ii=fh.ii,dh.ni=fh.ni,dh.oi=fh.oi,dh.ai=fh.ai,dh.mi=fh.mi,dh.gi=fh.gi,dh.Ti=fh.Ti,dh.Ci=fh.Ci,dh.Ri=fh.Ri,dh.Ei=fh.Ei,dh.Ni=fh.Ni,dh.Bi=fh.Bi,dh.ti=fh.ti}{let mh=function(t,s){let e=vh.getType(t),i=vh.getType(s);return"null"===e||"null"===i||"undefined"!==e&&"undefined"!==i&&e===i},gh=function(t){console.warn("[Defence] "+t+" @",vh.Ye())},yh=function(){if(Gh=-1,xh.size>0||Th.size>0){let t=[...new Set([...xh.keys()].map((t=>vh.getName(t))))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),xh.clear(),Th.clear()}},Sh=function(t){let s=new Set;for(let e in t)s.add(e);return s},wh=function(t,s){let e=Sh(s),i=Ph.get(t);if(i){let s=[];for(let t of i.values())e.has(t)?e.delete(t):s.push(t);vh.On(s,[...e]),s.length&&console.warn(`[Defence] '${vh.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Ph.set(t,e)};isValidTypeChange=mh,logDefendedObjectWarning=gh,CheckDefendedObjectsUsedCorrectly=yh,getObjectPropertySet=Sh,VerifyObjectPropertiesConsistent=wh;const vh=self._s,bh=new Map;let Mh;vh.Fn=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},vh.Dn=function(t,...s){bh.has(t)||bh.set(t,-1),-1===bh.get(t)&&bh.set(t,requestAnimationFrame((()=>{console.log(`%c${t}`,"font-weight: bold",...s),bh.set(t,-1)})))},vh.Ln=function(t){performance.mark(t),Mh||(Mh=new Map),Mh.has(t)||Mh.set(t,{kn:0,total:0,Nn:0,Bn:1,toString:function(){return`${t} :: current => ${this.kn.toPrecision(3)} :: average => ${this.Nn.toPrecision(3)} :: calls => ${this.Bn}`}})},vh.$n=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],e=Mh.get(t);e.kn=s.duration,e.total+=e.kn,e.Nn=e.total/e.Bn,console.log(e.toString()),e.Bn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},vh.Ye=function(){return(new Error).stack},vh.Wn=function(){},vh.cast=function(t,s){return t&&t instanceof s?t:null},vh.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":vh.Xe(t)?"<number>":vh.hi(t)?"<string>":vh.xi(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":vh.Ai(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},vh.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},vh.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let e=t-1;e>=s;e--)yield e;else for(let e=t;e<s;e++)yield e};let xh=new Map,Th=new Map,Ch=new WeakMap,Ih=new WeakMap;vh.Vn={};const _h=new Set(["then","splice"]);vh.Vn.get=function(t,s){return s in t||"symbol"==typeof s||_h.has(s)||gh(`Accessed missing property '${s}' from defended object '${vh.getName(t)}', returning undefined`),Ih.has(t)&&"symbol"!=typeof s&&!_h.has(s)&&gh(`Accessed property '${s}' on a released object '${vh.getName(t)}'\nObject was originally released at: ${Ih.get(t)})\nCall stack at access: `),t[s]},vh.Vn.set=function(t,s,e){return s in t||xh.has(t)||gh(`Set non-existent property '${s}' to '${e}' on defended object '${vh.getName(t)}'`),mh(t[s],e)||xh.has(t)||gh(`Set '${vh.getType(t[s])}' property '${s}' to type '${vh.getType(e)}' on defended object '${vh.getName(t)}'`),Ih.has(t)&&gh(`Set property '${s}' on a released object '${vh.getName(t)}'\nObject was originally released at: ${Ih.get(t)})\nCall stack at access: `),t[s]=e,!0},vh.Vn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${vh.getName(t)}'`)},vh.Vn.defineProperty=function(t,s,e){throw new ReferenceError(`Cannot define property '${s}' on defended object '${vh.getName(t)}'`)},vh.Vn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${vh.getName(t)}'`)};let Gh=-1;vh.jn=class{constructor(){if(!vh.ks||!vh.Pe.Ne)return;let t=new.target,s=Object.create(t.prototype),e=new Proxy(s,vh.Vn);return xh.set(s,e),Th.set(e,s),Ch.set(e,s),-1===Gh&&(Gh=requestAnimationFrame(yh)),e}},vh.Un=function(t){if(vh.ks&&vh.Pe.Ne&&t instanceof vh.jn){if(!Th.has(t))return t;let s=Th.get(t);return Th.delete(t),xh.delete(s),t}return vh.Ls?Object.seal(t):t},vh.zn=function(t,...s){let e;try{e=new t(...s)}catch(t){throw Th.clear(),xh.clear(),t}return vh.ks&&wh(t,e),vh.Un(e)},vh.Hn=function(t){let s=Ch.get(t);s&&Ih.set(s,vh.Ye())},vh.Jn=function(t){let s=Ch.get(t);return!!s&&!!Ih.get(s)};let Ph=new Map;vh.qn=class{constructor(t){this.Yn="",t&&this.start(t)}start(t){vh.Ks&&(this.Yn=t,performance.mark(this.Yn+"-Start"))}end(){vh.Ks&&(performance.mark(this.Yn+"-End"),performance.measure(this.Yn,this.Yn+"-Start",this.Yn+"-End"))}next(t){vh.Ks&&(this.end(),this.Yn=t,performance.mark(this.Yn+"-Start"))}}}{let Ah=function(t){return 0===t&&1/t<0};isNegativeZero=Ah;const Rh=self._s,Eh=2*Math.PI,Oh=Math.PI/180,Fh=180/Math.PI;Rh.wrap=function(t,s,e){t=Math.floor(t),s=Math.floor(s);const i=(e=Math.floor(e))-s;if(0===i)return e;if(t<s){const n=e-(s-t)%i;return n===e?0:n}return s+(t-s)%i},Rh.Xn=function(t,s,e,i,n){const r=e-s;return 0===r&&0===i?t:(t-s)*(n-i)/r+i},Rh.normalize=function(t,s,e){return s-e==0?1:(t-s)/(e-s)},Rh.Kn=function(t,s,e){return t<s?s:t>e?e:t},Rh.Zn=function(t){return(t%=Eh)<0&&(t+=Eh),t},Rh.Qn=function(t){return t*Oh},Rh.tr=function(t){return t*Fh},Rh.sr=function(t,s){return Math.sqrt(t*t+s*s)},Rh.er=function(t,s,e){return Math.sqrt(t*t+s*s+e*e)},Rh.ir=function(t,s,e,i){return Rh.sr(e-t,i-s)},Rh.nr=function(t,s,e,i){const n=e-t,r=i-s;return n*n+r*r},Rh.rr=function(t,s,e,i){return Math.atan2(i-s,e-t)},Rh.hr=function(t,s){if(t===s)return 0;let e=Math.sin(t),i=Math.cos(t),n=e*Math.sin(s)+i*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Rh.ar=function(t,s,e){let i=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(i*r+n*h)>e?n*r-i*h>0?Rh.Zn(t+e):Rh.Zn(t-e):Rh.Zn(s)},Rh.lr=function(t,s){let e=Math.sin(t);return Math.cos(t)*Math.sin(s)-e*Math.cos(s)<=0},Rh.ur=function(t,s,e,i=0){let n=Rh.hr(t,s);const r=Eh*i;return Rh.lr(s,t)?Rh.Zn(t+(n+r)*e):Rh.Zn(t-(n+r)*e)},Rh.cr=function(t,s,e,i=0){const n=Rh.hr(t,s),r=Eh*i;return Rh.lr(s,t)?Rh.Zn(t+(n+r)*e):Rh.Zn(t+(Eh-n+r)*e)},Rh.dr=function(t,s,e,i=0){const n=Rh.hr(t,s),r=Eh*i;return Rh.lr(s,t)?Rh.Zn(t-(-Eh+n-r)*e):Rh.Zn(t-(n+r)*e)},Rh.pr=function(t,s){const e=Rh.hr(t,s);return Rh.lr(t,s)?Rh.Zn(s-e):Rh.Zn(s+e)},Rh._t=function(t,s,e){return t+e*(s-t)},Rh.mr=function(t,s,e){return t===s?0:(e-t)/(s-t)},Rh.gr=function(t,s,e,i,n){return Rh._t(i,n,Rh.mr(t,s,e))},Rh.yr=function(t,s,e,i){return Rh._t(Rh._t(t,s,i),Rh._t(s,e,i),i)},Rh.Sr=function(t,s,e,i,n){return Rh._t(Rh.yr(t,s,e,n),Rh.yr(s,e,i,n),n)},Rh.wr=function(t,s,e){return(t+s+(t-s)*Math.cos(e*Math.PI))/2},Rh.vr=function(t){return t>0&&!(t-1&t)},Rh.br=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Rh.Mr=function(t,s){return Math.round(t*s)/s},Rh.Tr=function(t,s){return Math.floor(t*s)/s},Rh.Cr=function(t,s){s=Math.max(Math.floor(s),0);const e=Math.pow(10,s);return Math.round(t*e)/e},Rh.Ir=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Rh.toFixed=function(t,s){let e=t.toFixed(s),i=e.length-1;for(;i>=0&&"0"===e.charAt(i);--i);return i>=0&&"."===e.charAt(i)&&--i,i<0?e:e.substr(0,i+1)},Rh._r=function(t,s,e){return Rh.Kn(t,0,255)|Rh.Kn(s,0,255)<<8|Rh.Kn(e,0,255)<<16};const Dh=1024,Lh=1023,kh=16384,Nh=8191,Bh=-8192;Rh.Gr=function(t,s,e,i){return(t=Rh.Kn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Rh.Kn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(e=Rh.Kn(Math.floor(1024*e),-8192,8191))<0&&(e+=16384),-(16384*t*16384*1024+16384*s*1024+1024*e+(i=Rh.Kn(Math.floor(1023*i),0,1023)))},Rh.Pr=function(t,s,e){return Rh.Gr(t,s,e,1)},Rh.Ar=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Rh.Rr=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Rh.Er=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Rh.Or=function(t){return Ah(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Rh.Fr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let e=s;s=t%s,t=e}return t};const $h=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Rh.Dr=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let e of $h){let i=t/e[0]*e[1];if(Math.abs(s-i)<1)return e.slice(0);if(i=t/e[1]*e[0],Math.abs(s-i)<1)return[e[1],e[0]]}let e=Rh.Fr(t,s);return[t/e,s/e]},Rh.Lr=function(t,s,e,i,n,r,h,o){const a=Math.min(t,e),l=Math.max(t,e),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,i),d=Math.max(s,i),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-e,y=r-s+o-i,S=e-t,w=i-s,v=h-n,b=o-r,M=Math.abs(w*v-b*S),x=v*y-b*g;if(Math.abs(x)>M)return!1;const T=S*y-w*g;return Math.abs(T)<=M},Rh.kr=function(t,s,e,i,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-e,y=l-s+c-i,S=e-t,w=i-s,v=u-a,b=c-l,M=Math.abs(w*v-b*S),x=v*y-b*g;if(Math.abs(x)>M)return!1;const T=S*y-w*g;return Math.abs(T)<=M},Rh.Nr=function(t,s,e,i,n){const r=Math.min(t,e),h=Math.max(t,e),o=Math.min(s,i),a=Math.max(s,i),l=n.Br(),u=n.$r(),c=n.Wr(),f=n.Vr(),d=n.jr(),p=n.Ur(),m=n.zr(),g=n.Hr();return Rh.kr(t,s,e,i,r,h,o,a,l,u,c,f)||Rh.kr(t,s,e,i,r,h,o,a,c,f,d,p)||Rh.kr(t,s,e,i,r,h,o,a,d,p,m,g)||Rh.kr(t,s,e,i,r,h,o,a,m,g,l,u)},Rh.Jr=function(t,s,e,i,n){const r=Math.min(t,e),h=Math.max(t,e),o=Math.min(s,i),a=Math.max(s,i);let l=0;for(let u=n.length-4;l<=u;l+=2)if(Rh.kr(t,s,e,i,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return Rh.kr(t,s,e,i,r,h,o,a,n[l],n[l+1],n[0],n[1])};const Wh=2,Vh=1e-6;Rh.qr=function(t,s,e,i,n,r,h,o){const a=e-t,l=o-r,u=a*l-(i-s)*(h-n);if(0===u)return 2;const c=((s-i)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},Rh.Yr=function(t,s,e,i,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return Rh.qr(t,s,e,i,n-l,r-u,h+l,o+u)},Rh.Xr=function(t,s,e,i,n,r,h,o){const a=n-e,l=r-i,u=h-e,c=o-i,f=t-e,d=s-i,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,S=u*f+c*d,w=1/(p*y-m*m),v=(y*g-m*S)*w,b=(p*S-m*g)*w;return v>=0&&b>=0&&v+b<=1},Rh.Kr=function(t,s,e,i,n,r,h,o){const a=n-e,l=r-i,u=h-e,c=o-i,f=t-e,d=s-i,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,S=f*u+d*c,w=p*g-m*m,v=(g*y-m*S)/w,b=(p*S-m*y)/w;return[1-v-b,v,b]},Rh.Zr=function(t,s,e,i,n,r,h,o,a,l,u,c){return[t*i+s*h+e*l,t*n+s*o+e*u,t*r+s*a+e*c]}}{const jh=self._s;let Uh=null,zh="";if("undefined"!=typeof document){Uh=document;const Kh=document.querySelector("base");zh=Kh&&Kh.hasAttribute("href")?Kh.getAttribute("href"):"",zh&&(zh.startsWith("/")&&(zh=zh.substr(1)),zh.endsWith("/")||(zh+="/"))}jh.Qr=function(){return zh},jh.th=function(){if(!Uh)return"";const t=Uh.location;return jh.sh(t.origin+t.pathname)+zh},jh.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},jh.eh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},jh.ih=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},jh.nh=function(t,s){const e=t.lastIndexOf(".");return-1===e?t+"."+s:t.substr(0,e+1)+s},jh.rh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},jh.hh=function(t){return t.replace(/\\/g,"/")},jh.oh=function(t,s){return s===(t?jh.ih(t).slice(1):"")},jh.ah=function(t,s){let e,i;return jh.Si(t)&&(e=jh.rh(t.name)),jh.hi(t)&&(e=jh.rh(t)),jh.Si(s)&&(i=jh.rh(s.name)),jh.hi(s)&&(i=jh.rh(s)),e===i},jh.uh=function(t){t=jh.hh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const e=t.lastIndexOf("/")+1;let i,n="",r=t,h="";e>0&&(n=t.slice(0,e),r=t.slice(e)),i=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),i=r.slice(0,-h.length)),{dir:n,fh:r,name:i,root:s,ext:h,dh:s+n+r}},jh.ph=function(t,s){return new Promise(((e,i)=>{self.setTimeout(e,t,s)}))},jh.mh=function(t){try{t()}catch(t){jh.Ls&&console.warn("Swallowed exception: ",t)}},jh.gh=function(){},jh.Zi=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},jh.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},jh.Sh=function(t,s,e){t[e++]=s[0],t[e++]=s[1],t[e++]=s[2],t[e++]=s[3],t[e++]=s[4],t[e++]=s[5],t[e++]=s[6],t[e++]=s[7],t[e++]=s[8],t[e++]=s[9],t[e++]=s[10],t[e++]=s[11],t[e++]=s[12],t[e++]=s[13],t[e++]=s[14],t[e]=s[15]},jh.wh=function(t,s){t.length=s},jh.bh=function(t){t&&0!==t.length&&jh.wh(t,0)},jh.Mh=function(t){if(t){for(let s=0;s<t.length;s++){let e=t[s];jh.wh(e,0)}jh.wh(t,0)}},jh.xh=function(t,s,e){s|=0;const i=t.length;if(!(s<=i))for(let n=i;n<s;++n)t.push(e)},jh.Th=function(t,s,e){s|=0;const i=t.length;s<i?jh.wh(t,s):s>i&&jh.xh(t,s,e)},jh.Ch=function(t,s){jh.bh(t),jh.On(t,s)},jh.On=function(t,s){if(s.length<1e4)t.push(...s);else for(let e=0,i=s.length;e<i;++e)t.push(s[e])},jh.Ih=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let e=t.length-1;for(let i=s;i<e;++i)t[i]=t[i+1];jh.wh(t,e)},jh._h=function(t,s){let e=t.indexOf(s);e>=0&&t.splice(e,1)},jh.Gh=function(t,s){let e=t.length;if(s.length!==e)return!1;for(let i=0;i<e;++i)if(t[i]!==s[i])return!1;return!0},jh.Ph=function(t,s){let e=[],i=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?e.push(r):(t[i]=r,++i)}return jh.wh(t,i),e},jh.Ah=function(t,s){const e=t.length;let i=0;for(let e=0,n=t.length;e<n;++e){let n=t[e];s.has(n)||(t[i++]=n)}return jh.wh(t,i),e-i},jh.Rh=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},jh.Eh=function(t,s){if(!jh.Rh(t,s))throw new RangeError("array index out of bounds")},jh.Oh=function(t){return t.slice()},jh.Fh=function(t,s){let e=[];for(let i of t)if(jh.pi(i)){let t=s(i);if(!t)throw new Error("missing clone");if(t.constructor!==i.constructor)throw new Error("object is not a clone");e.push(t)}else jh.xi(i)?e.push(jh.Fh(i,s)):e.push(i);return e},jh.Dh=function(t){let s=[];for(let e of t)s.push(e.slice());return s},jh.Lh=function(t,s=" "){return t?t.split(s).map((t=>t.trim())).filter((t=>!!t)):[]},jh.kh=function(t,s,e){const i=new Set;for(const n of t.values())s(n)&&(e?i.add(e(n)):i.add(n));return i},jh.Nh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},jh.Bh=function(t,s){for(const e of s)t.add(e);return t},jh.$h=function(t){for(let s of t)return s;return null},jh.xor=function(t,s){return!t!=!s},jh.compare=function(t,s,e){switch(s){case 0:return t===e;case 1:return t!==e;case 2:return t<e;case 3:return t<=e;case 4:return t>e;case 5:return t>=e;default:return!1}},jh.Wh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},jh.Vh=function(t,s){return t.length?new Promise(((e,i)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then((i=>{h||(n[o]=i,++r,r===t.length?e(n):s(r,t.length))})).catch((t=>{h=!0,i(t)}))})):Promise.resolve([])};let Hh=[];jh.jh=function(t){Hh.push(t)},jh.Uh=function(){let t=0;for(let s of Hh)t+=s();return Math.floor(t)};let Jh=1;const qh=new Map,Yh=new MessageChannel;Yh.port2.onmessage=function(t){const s=t.data,e=qh.get(s);qh.delete(s),e&&e(performance.now())},jh.zh=function(t){const s=Jh++;return qh.set(s,t),Yh.port1.postMessage(s),s},jh.Hh=function(t){qh.delete(t)},jh.Jh=jh.zh,jh.qh=function(){return new Promise((t=>jh.Jh(t)))};const Xh=new Set;jh.Yh=function(t){const s=self.requestAnimationFrame((async e=>{await jh.qh(),Xh.has(s)&&(Xh.delete(s),t(e))}));return Xh.add(s),s},jh.Xh=function(t){Xh.has(t)&&(self.cancelAnimationFrame(t),Xh.delete(t))}}{const Zh=self._s;Zh.Kh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Zh.Zh=function(t){return!Zh.Kh(t)},Zh.Qh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Zh.so=function(t,s){return fetch(t,s).then((t=>(Zh.Qh(t),t)))},Zh.eo=function(t){return Zh.so(t).then((t=>t.text()))},Zh.io=function(t){return Zh.so(t).then((t=>t.json()))},Zh.no=function(t){return Zh.so(t).then((t=>t.blob()))},Zh.ro=function(t){return Zh.so(t).then((t=>t.arrayBuffer()))},Zh.ho=function(t){return new Promise(((s,e)=>{const i=new Image;i.onload=()=>s(i),i.onerror=t=>e(t),i.src=t}))},Zh.oo=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise(((s,e)=>{const i=new FileReader;i.onload=()=>s(i.result),i.onerror=()=>e(i.error),i.readAsArrayBuffer(t)}))},Zh.ao=function(t){return"function"==typeof t.text?t.text():new Promise(((s,e)=>{const i=new FileReader;i.onload=()=>s(i.result),i.onerror=()=>e(i.error),i.readAsText(t)}))},Zh.lo=function(t){return Zh.ao(t).then((t=>JSON.parse(t)))},Zh.uo=async function(t,s){let e=URL.createObjectURL(t);try{const t=await Zh.ho(e);return URL.revokeObjectURL(e),e="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{e&&URL.revokeObjectURL(e)}},Zh.co=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const e=document.createElement("canvas");return e.width=t,e.height=s,e}return new OffscreenCanvas(t,s)},Zh.fo=function(t,s,e){if("number"!=typeof e&&(e=1),s=s||"image/png",e=Zh.Kn(e,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:e});if(t.toBlob)return new Promise((i=>t.toBlob(i,s,e)));throw new Error("could not convert canvas to blob")},Zh.do=function(t,s,e){const i=Zh.co(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),Zh.fo(i,s,e)},Zh.po=function(t,s,e){if(Zh.Pe.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then((t=>Zh.do(t,s,e)));if(Zh.Pe.ImageBitmap)return createImageBitmap(t).then((t=>Zh.do(t,s,e)));{const i=Zh.co(t.width,t.height);return i.getContext("2d").putImageData(t,0,0),Zh.fo(i,s,e)}},Zh.mo=function(t,s){t.clear();for(const e of s)t.add(e)},Zh.yo=function(t){const s=Object.create(null);for(const[e,i]of t.entries())s[e]=i;return s},Zh.So=function(t,s){s.clear();for(const[e,i]of Object.entries(t))s.set(e,i)},Zh.wo=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map((s=>t(s)))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map((s=>[s[0],t(s[1])]))};{const e=Object.create(null);for(const[i,n]of Object.entries(s))e[i]=t(n);return e}}return s},Zh.vo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map((s=>t(s))));if("map"===s._c3type_)return new Map(s.data.map((s=>[s[0],t(s[1])])));{const e=Object.create(null);for(const[i,n]of Object.entries(s))e[i]=t(n);return e}}return s},Zh.bo=function(t){if(t.startsWith("--"))return t;let s="",e=!1,i=0;for(const n of t)"-"===n?i>0&&(e=!0):e?(s+=n.toUpperCase(),e=!1):s+=n,++i;return s},Zh.Mo=function(t){return"object"==typeof t&&"function"==typeof t.next},Zh.xo=function(t,s){const e=[];if("function"==typeof s)for(let i=0;i<t;++i)e.push(s());else for(let i=0;i<t;++i)e.push(s);return e}}{let Qh=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},to=function(t,s,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(s-t)*e:e<.5?s:e<2/3?t+(s-t)*(2/3-e)*6:t};padTwoDigits=Qh,hueToRGB=to;const so=self._s,eo=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,io=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;so.To=class{constructor(t,s,e,i){this.Co=NaN,this.Io=NaN,this._o=NaN,this.Go=NaN,this.Co=0,this.Io=0,this._o=0,this.Go=0,t instanceof so.To?this.set(t):this.Po(t||0,s||0,e||0,i||0)}Ao(t,s,e){return this.Co=+t,this.Io=+s,this._o=+e,this.Kn(),this}Po(t,s,e,i){return this.Co=+t,this.Io=+s,this._o=+e,this.Go=+i,this.Kn(),this}set(t){return this.Co=t.Co,this.Io=t.Io,this._o=t._o,this.Go=t.Go,this}S(t){return this.set(t)}add(t){this.Co+=t.Co,this.Io+=t.Io,this._o+=t._o,this.Go+=t.Go,this.Kn()}Ro(t,s,e,i=0){this.Co+=+t,this.Io+=+s,this._o+=+e,this.Go+=+i,this.Kn()}Eo(t){this.Oo(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Fo(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Do(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Lo(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Kn()}ko(t){this.Co=t.Co,this.Io=t.Io,this._o=t._o}Oo(t){this.Co=so.Kn(+t,0,1)}No(){return this.Co}Fo(t){this.Io=so.Kn(+t,0,1)}Bo(){return this.Io}Do(t){this._o=so.Kn(+t,0,1)}$o(){return this._o}Lo(t){this.Go=so.Kn(+t,0,1)}Wo(){return this.Go}clone(){return so.zn(so.To,this.Co,this.Io,this._o,this.Go)}toArray(){return[this.Co,this.Io,this._o,this.Go]}Vo(){return new Float64Array(this.toArray())}jo(t,s){t[s++]=this.Co,t[s++]=this.Io,t[s++]=this._o,t[s]=this.Go}Uo(t,s){t[s++]=this.Co,t[s++]=this.Io,t[s]=this._o}equals(t){return this.Co===t.Co&&this.Io===t.Io&&this._o===t._o&&this.Go===t.Go}zo(t){return this.Co===t.Co&&this.Io===t.Io&&this._o===t._o}Ho(t,s,e){return this.Co===t&&this.Io===s&&this._o===e}Jo(t,s,e,i){return this.Co===t&&this.Io===s&&this._o===e&&this.Go===i}qo(t,s){return t[s]===Math.fround(this.Co)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this._o)&&t[s+3]===Math.fround(this.Go)}Yo(t,s){return t[s]===Math.fround(this.Co)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this._o)}multiply(t){this.Co*=t.Co,this.Io*=t.Io,this._o*=t._o,this.Go*=t.Go}Xo(t){this.Co*=t,this.Io*=t,this._o*=t,this.Go*=t}Ko(){return this.Co*=this.Go,this.Io*=this.Go,this._o*=this.Go,this}Zo(){return this.Co/=this.Go,this.Io/=this.Go,this._o/=this.Go,this}Kn(){return this.Co=so.Kn(this.Co,0,1),this.Io=so.Kn(this.Io,0,1),this._o=so.Kn(this._o,0,1),this.Go=so.Kn(this.Go,0,1),this}Qo(t){this.Co=so.Ar(t),this.Io=so.Rr(t),this._o=so.Er(t),this.Go=so.Or(t)}ta(t,s,e){return`rgb(${100*(so.Ke(t)?t:this.No())}%, ${100*(so.Ke(s)?s:this.Bo())}%, ${100*(so.Ke(e)?e:this.$o())}%)`}sa(t,s,e,i){return`rgba(${100*(so.Ke(t)?t:this.No())}%, ${100*(so.Ke(s)?s:this.Bo())}%, ${100*(so.Ke(e)?e:this.$o())}%, ${so.Ke(i)?i:this.Wo()})`}ea(){const t=Math.round(255*this.No()),s=Math.round(255*this.Bo()),e=Math.round(255*this.$o());return"#"+Qh(t.toString(16))+Qh(s.toString(16))+Qh(e.toString(16))}ia(t){if("string"!=typeof t)return!1;let s,e,i;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,e=parseInt(t[1],16)/15,i=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,e=parseInt(t.substr(2,2),16)/255,i=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Oo(s),isFinite(e)&&this.Fo(e),isFinite(i)&&this.Do(i),this.Lo(1),!0}na(){return`${Math.round(255*this.No())}, ${Math.round(255*this.Bo())}, ${Math.round(255*this.$o())}`}ra(){return[Math.round(255*this.No()),Math.round(255*this.Bo()),Math.round(255*this.$o())]}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const e=parseInt(s[0].trim(),10)/255,i=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(n)&&this.Do(n),this.Lo(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const e=parseInt(s[0].trim(),10)/100,i=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(n)&&this.Do(n),this.Lo(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const e=parseInt(s[0].trim(),10)/255,i=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(n)&&this.Do(n),isFinite(r)&&this.Lo(r),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const e=parseInt(s[0].trim(),10)/100,i=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(e)&&this.Oo(e),isFinite(i)&&this.Fo(i),isFinite(n)&&this.Do(n),isFinite(r)&&this.Lo(r),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.oa(t):this.ha(t);if(t.startsWith("rgba("))return t.includes("%")?this.la(t):this.aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ca(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.oa(t):4===s.length&&this.la(t):3===s.length?this.ha(t):4===s.length&&this.aa(t)}}return this.ia(t)}toJSON(){return[this.Co,this.Io,this._o,this.Go]}fa(t,s,e,i){let n,r,h;if(t%=360,s=so.Kn(s,0,100),e=so.Kn(e,0,100),i=so.Kn(i,0,1),t/=360,e/=100,0==(s/=100))n=r=h=e;else{const i=e<.5?e*(1+s):e+s-e*s,o=2*e-i;n=to(o,i,t+1/3),r=to(o,i,t),h=to(o,i,t-1/3)}return this.Oo(n),this.Fo(r),this.Do(h),this.Lo(i),this}ca(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),e=eo.exec(s),i=io.exec(s);return e&&4===e.length?(this.fa(+e[1],+e[2],+e[3],1),!0):!(!i||5!==i.length||(this.fa(+e[1],+e[2],+e[3],+e[4]),0))}da(){const t=this.Co,s=this.Io,e=this._o,i=this.Go;return`hsla(${so.To.pa(t,s,e)}, ${so.To.ma(t,s,e)}%, ${so.To.ga(t,s,e)}%, ${i})`}ya(){const t=this.Co,s=this.Io,e=this._o;return[so.To.pa(t,s,e),so.To.ma(t,s,e),so.To.ga(t,s,e),this.Go]}Sa(t){Array.isArray(t)&&(t.length<3||(this.Co=t[0],this.Io=t[1],this._o=t[2],t.length>=4?this.Go=t[3]:this.Go=1))}set r(t){this.Oo(t)}get r(){return this.No()}set g(t){this.Fo(t)}get g(){return this.Bo()}set b(t){this.Do(t)}get b(){return this.$o()}set a(t){this.Lo(t)}get a(){return this.Wo()}wa(t,s){switch(t){case 0:this.Oo(s);break;case 1:this.Fo(s);break;case 2:this.Do(s);break;case 3:this.Lo(s);break;default:throw new RangeError("invalid color index")}}va(t){switch(t){case 0:return this.No();case 1:return this.Bo();case 2:return this.$o();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static ba(t,s){let e,i;if(Array.isArray(t))e=new so.To,e.Sa(t);else{if(!(t instanceof so.To))throw new Error("unexpected type");e=t}if(Array.isArray(s))i=new so.To,i.Sa(s);else{if(!(s instanceof so.To))throw new Error("unexpected type");i=s}return e.equals(i)}static Ma(t,s){return so.Kn(Math.max(t,s)-Math.min(t,s),0,1)}static xa(t,s){const e=new so.To;return e.Oo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),e.Fo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),e.Do(Math.max(t._o,s._o)-Math.min(t._o,s._o)),e.Lo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),e}static Ta(t,s){const e=new so.To(0,0,0,1);return e.Oo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),e.Fo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),e.Do(Math.max(t._o,s._o)-Math.min(t._o,s._o)),e}static pa(t,s,e){const i=Math.max(t,s,e),n=Math.min(t,s,e);if(i===n)return 0;let r=0;switch(i){case t:r=(s-e)/(i-n)+(s<e?6:0);break;case s:r=(e-t)/(i-n)+2;break;case e:r=(t-s)/(i-n)+4}return Math.round(r/6*360)}static ma(t,s,e){const i=Math.max(t,s,e),n=Math.min(t,s,e);if(i===n)return 0;const r=i-n,h=(i+n)/2>.5?r/(2-i-n):r/(i+n);return Math.round(100*h)}static ga(t,s,e){const i=Math.max(t,s,e),n=(i+Math.min(t,s,e))/2;return i?Math.round(100*n):0}},so.To.Ca=Object.freeze(so.zn(so.To,1,1,1,1)),so.To.Ia=Object.freeze(so.zn(so.To,0,0,0,1)),so.To._a=Object.freeze(so.zn(so.To,0,0,0,0))}{const no=self._s;no.Ga=class{constructor(t,s){this.Pa=0,this.Aa=0,t instanceof no.Ga?this.S(t):this.set(t||0,s||0)}set(t,s){this.Pa=+t,this.Aa=+s}S(t){this.Pa=t.Pa,this.Aa=t.Aa}equals(t){return this.Pa===t.Pa&&this.Aa===t.Aa}Ra(t,s){return this.Pa===t&&this.Aa===s}qo(t,s){return t[s]===Math.fround(this.Pa)&&t[s+1]===Math.fround(this.Aa)}Ea(t){this.Pa=+t}Oa(){return this.Pa}Fa(t){this.Aa=+t}Da(){return this.Aa}toArray(){return[this.Pa,this.Aa]}Vo(){return new Float64Array(this.toArray())}jo(t,s){t[s++]=this.Pa,t[s]=this.Aa}offset(t,s){this.Pa+=+t,this.Aa+=+s}scale(t,s){this.Pa*=t,this.Aa*=s}wt(t,s){this.Pa/=t,this.Aa/=s}round(){this.Pa=Math.round(this.Pa),this.Aa=Math.round(this.Aa)}floor(){this.Pa=Math.floor(this.Pa),this.Aa=Math.floor(this.Aa)}ceil(){this.Pa=Math.ceil(this.Pa),this.Aa=Math.ceil(this.Aa)}angle(){return no.rr(0,0,this.Pa,this.Aa)}La(){return this.Pa*this.Pa+this.Aa*this.Aa}length(){return no.sr(this.Pa,this.Aa)}ka(t,s){const e=this.Pa*s-this.Aa*t;this.Aa=this.Aa*s+this.Pa*t,this.Pa=e}rotate(t){0!==t&&this.ka(Math.sin(t),Math.cos(t))}Na(t,s,e){0===t||s===this.Pa&&e===this.Aa||(this.Pa-=s,this.Aa-=e,this.ka(Math.sin(t),Math.cos(t)),this.Pa+=+s,this.Aa+=+e)}move(t,s){0!==s&&(this.Pa+=Math.cos(t)*s,this.Aa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Pa/=t,this.Aa/=t)}Kn(t,s){this.Pa=no.Kn(this.Pa,t,s),this.Aa=no.Kn(this.Aa,t,s)}Ct(t){return this.Pa*t.Pa+this.Aa*t.Aa}reverse(){this.Pa=-this.Pa,this.Aa=-this.Aa}Ba(){let t=this.Pa;return this.Pa=this.Aa,this.Aa=-t,this}}}{const ro=self._s;ro.Rect=class{constructor(t,s,e,i){this.$a=NaN,this.Wa=NaN,this.Va=NaN,this.ja=NaN,this.$a=0,this.Wa=0,this.Va=0,this.ja=0,t instanceof ro.Rect?this.S(t):this.set(t||0,s||0,e||0,i||0)}set(t,s,e,i){this.$a=+t,this.Wa=+s,this.Va=+e,this.ja=+i}Ua(t,s,e,i){t=+t,s=+s,this.$a=t,this.Wa=s,this.Va=t+ +e,this.ja=s+ +i}S(t){this.$a=+t.$a,this.Wa=+t.Wa,this.Va=+t.Va,this.ja=+t.ja}clone(){return new ro.Rect(this.$a,this.Wa,this.Va,this.ja)}static za(t,s){const e=new ro.Rect;return e.Ha(Math.min(t.$a,s.$a)),e.Ja(Math.min(t.Wa,s.Wa)),e.qa(Math.max(t.Va,s.Va)),e.Ya(Math.max(t.ja,s.ja)),e}static Xa(t){return new ro.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.$a===t.$a&&this.Wa===t.Wa&&this.Va===t.Va&&this.ja===t.ja}Ka(t,s,e,i){return this.$a===t&&this.Wa===s&&this.width()===e&&this.height()===i}qo(t,s){return t[s]===Math.fround(this.$a)&&t[s+1]===Math.fround(this.Wa)&&t[s+2]===Math.fround(this.Va)&&t[s+3]===Math.fround(this.ja)}Ha(t){this.$a=+t}Za(){return this.$a}Ja(t){this.Wa=+t}Qa(){return this.Wa}qa(t){this.Va=+t}tl(){return this.Va}Ya(t){this.ja=+t}sl(){return this.ja}toArray(){return[this.$a,this.Wa,this.Va,this.ja]}Vo(){return new Float64Array(this.toArray())}el(){return new DOMRect(this.$a,this.Wa,this.width(),this.height())}static il(t){return ro.zn(ro.Rect,t.left,t.top,t.right,t.bottom)}jo(t,s){t[s++]=this.$a,t[s++]=this.Wa,t[s++]=this.Va,t[s]=this.ja}nl(t,s){t[s++]=this.$a,t[s++]=this.Wa,t[s++]=this.Va,t[s++]=this.Wa,t[s++]=this.Va,t[s++]=this.ja,t[s++]=this.$a,t[s]=this.ja}rl(t,s,e){t[s++]=this.$a,t[s++]=this.Wa,t[s++]=e,t[s++]=this.Va,t[s++]=this.Wa,t[s++]=e,t[s++]=this.Va,t[s++]=this.ja,t[s++]=e,t[s++]=this.$a,t[s++]=this.ja,t[s]=e}width(){return this.Va-this.$a}height(){return this.ja-this.Wa}hl(){return(this.$a+this.Va)/2}ol(){return(this.Wa+this.ja)/2}offset(t,s){t=+t,s=+s,this.$a+=t,this.Wa+=s,this.Va+=t,this.ja+=s}offsetLeft(t){this.$a+=+t}offsetTop(t){this.Wa+=+t}al(t){this.Va+=+t}ll(t){this.ja+=+t}ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Wa<this.ja?this.$a<this.Va?this.ja=this.Wa+this.width():this.ja=this.Wa-this.width():this.$a<this.Va?this.ja=this.Wa-this.width():this.ja=this.Wa+this.width()}cl(t,s){t=+t,s=+s,this.$a-=t,this.Wa-=s,this.Va+=t,this.ja+=s}fl(t,s){t=+t,s=+s,this.$a+=t,this.Wa+=s,this.Va-=t,this.ja-=s}multiply(t,s){this.$a*=t,this.Wa*=s,this.Va*=t,this.ja*=s}wt(t,s){this.$a/=t,this.Wa/=s,this.Va/=t,this.ja/=s}dl(t){this.$a=+t-this.$a,this.Va=+t-this.Va}pl(t){this.Wa=+t-this.Wa,this.ja=+t-this.ja}ml(t,s){const e=this.width(),i=this.height(),n=this.Za()+e*t,r=this.Qa()+i*s;this.Ua(n-i*s,r-e*t,i,e)}gl(){const t=this.$a;this.$a=this.Va,this.Va=t}yl(){const t=this.Wa;this.Wa=this.ja,this.ja=t}Sl(t){const s=this.Wa;this.Wa=+t-this.ja,this.ja=+t-s}round(){this.$a=Math.round(this.$a),this.Wa=Math.round(this.Wa),this.Va=Math.round(this.Va),this.ja=Math.round(this.ja)}wl(){this.$a=Math.ceil(this.$a),this.Wa=Math.ceil(this.Wa),this.Va=Math.floor(this.Va),this.ja=Math.floor(this.ja)}vl(){this.$a=Math.floor(this.$a),this.Wa=Math.floor(this.Wa),this.Va=Math.ceil(this.Va),this.ja=Math.ceil(this.ja)}floor(){this.$a=Math.floor(this.$a),this.Wa=Math.floor(this.Wa),this.Va=Math.floor(this.Va),this.ja=Math.floor(this.ja)}ceil(){this.$a=Math.ceil(this.$a),this.Wa=Math.ceil(this.Wa),this.Va=Math.ceil(this.Va),this.ja=Math.ceil(this.ja)}Kn(t,s,e,i){this.$a=Math.max(this.$a,+t),this.Wa=Math.max(this.Wa,+s),this.Va=Math.min(this.Va,+e),this.ja=Math.min(this.ja,+i)}bl(t,s,e,i){t=+t,s=+s,e=+e,i=+i,this.$a=ro.Kn(this.$a,t,e),this.Wa=ro.Kn(this.Wa,s,i),this.Va=ro.Kn(this.Va,t,e),this.ja=ro.Kn(this.ja,s,i)}normalize(){this.$a>this.Va&&this.gl(),this.Wa>this.ja&&this.yl()}Ml(t){return!(t.Va<this.$a||t.ja<this.Wa||t.$a>this.Va||t.Wa>this.ja)}xl(t,s,e){return!(t.Va+s<this.$a||t.ja+e<this.Wa||t.$a+s>this.Va||t.Wa+e>this.ja)}Tl(t,s){return t>=this.$a&&t<=this.Va&&s>=this.Wa&&s<=this.ja}Cl(t){return t.$a>=this.$a&&t.Wa>=this.Wa&&t.Va<=this.Va&&t.ja<=this.ja}Il(t){t.$a<this.$a&&(this.$a=+t.$a),t.Wa<this.Wa&&(this.Wa=+t.Wa),t.Va>this.Va&&(this.Va=+t.Va),t.ja>this.ja&&(this.ja=+t.ja)}_l(t){this.$a=ro._t(t.$a,t.Va,this.$a),this.Wa=ro._t(t.Wa,t.ja,this.Wa),this.Va=ro._t(t.$a,t.Va,this.Va),this.ja=ro._t(t.Wa,t.ja,this.ja)}}}{const ho=self._s;ho.Gl=class{constructor(t,s,e,i,n,r,h,o){this.Pl=NaN,this.Al=NaN,this.Rl=NaN,this.El=NaN,this.Ol=NaN,this.Fl=NaN,this.Dl=NaN,this.Ll=NaN,this.Pl=0,this.Al=0,this.Rl=0,this.El=0,this.Ol=0,this.Fl=0,this.Dl=0,this.Ll=0,t instanceof ho.Gl?this.S(t):this.set(t||0,s||0,e||0,i||0,n||0,r||0,h||0,o||0)}set(t,s,e,i,n,r,h,o){this.Pl=+t,this.Al=+s,this.Rl=+e,this.El=+i,this.Ol=+n,this.Fl=+r,this.Dl=+h,this.Ll=+o}kl(t,s,e,i){this.set(t,s,e,s,e,i,t,i)}S(t){this.Pl=t.Pl,this.Al=t.Al,this.Rl=t.Rl,this.El=t.El,this.Ol=t.Ol,this.Fl=t.Fl,this.Dl=t.Dl,this.Ll=t.Ll}equals(t){return this.Pl===t.Pl&&this.Al===t.Al&&this.Rl===t.Rl&&this.El===t.El&&this.Ol===t.Ol&&this.Fl===t.Fl&&this.Dl===t.Dl&&this.Ll===t.Ll}Nl(t){this.Pl=+t}Br(){return this.Pl}Bl(t){this.Al=+t}$r(){return this.Al}$l(t){this.Rl=+t}Wr(){return this.Rl}Wl(t){this.El=+t}Vr(){return this.El}Vl(t){this.Ol=+t}jr(){return this.Ol}jl(t){this.Fl=+t}Ur(){return this.Fl}Ul(t){this.Dl=+t}zr(){return this.Dl}zl(t){this.Ll=+t}Hr(){return this.Ll}Hl(){return new DOMQuad(new DOMPoint(this.Pl,this.Al),new DOMPoint(this.Rl,this.El),new DOMPoint(this.Ol,this.Fl),new DOMPoint(this.Dl,this.Ll))}static Jl(t){return ho.zn(ho.Gl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Pl,this.Al,this.Rl,this.El,this.Ol,this.Fl,this.Dl,this.Ll]}Vo(){return new Float64Array(this.toArray())}jo(t,s){t[s++]=this.Pl,t[s++]=this.Al,t[s++]=this.Rl,t[s++]=this.El,t[s++]=this.Ol,t[s++]=this.Fl,t[s++]=this.Dl,t[s]=this.Ll}ql(t,s,e){t[s++]=this.Pl,t[s++]=this.Al,t[s++]=e,t[s++]=this.Rl,t[s++]=this.El,t[s++]=e,t[s++]=this.Ol,t[s++]=this.Fl,t[s++]=e,t[s++]=this.Dl,t[s++]=this.Ll,t[s]=e}offset(t,s){t=+t,s=+s,this.Pl+=t,this.Al+=s,this.Rl+=t,this.El+=s,this.Ol+=t,this.Fl+=s,this.Dl+=t,this.Ll+=s}round(){this.Pl=Math.round(this.Pl),this.Al=Math.round(this.Al),this.Rl=Math.round(this.Rl),this.El=Math.round(this.El),this.Ol=Math.round(this.Ol),this.Fl=Math.round(this.Fl),this.Dl=Math.round(this.Dl),this.Ll=Math.round(this.Ll)}floor(){this.Pl=Math.floor(this.Pl),this.Al=Math.floor(this.Al),this.Rl=Math.floor(this.Rl),this.El=Math.floor(this.El),this.Ol=Math.floor(this.Ol),this.Fl=Math.floor(this.Fl),this.Dl=Math.floor(this.Dl),this.Ll=Math.floor(this.Ll)}ceil(){this.Pl=Math.ceil(this.Pl),this.Al=Math.ceil(this.Al),this.Rl=Math.ceil(this.Rl),this.El=Math.ceil(this.El),this.Ol=Math.ceil(this.Ol),this.Fl=Math.ceil(this.Fl),this.Dl=Math.ceil(this.Dl),this.Ll=Math.ceil(this.Ll)}Yl(t){this.Pl=t.$a,this.Al=t.Wa,this.Rl=t.Va,this.El=t.Wa,this.Ol=t.Va,this.Fl=t.ja,this.Dl=t.$a,this.Ll=t.ja}Xl(t,s){0===s?this.Yl(t):this.Kl(t,Math.sin(s),Math.cos(s))}Kl(t,s,e){const i=t.$a*s,n=t.Wa*s,r=t.Va*s,h=t.ja*s,o=t.$a*e,a=t.Wa*e,l=t.Va*e,u=t.ja*e;this.Pl=o-n,this.Al=a+i,this.Rl=l-n,this.El=a+r,this.Ol=l-h,this.Fl=u+r,this.Dl=o-h,this.Ll=u+i}Zl(t){t.set(Math.min(this.Pl,this.Rl,this.Ol,this.Dl),Math.min(this.Al,this.El,this.Fl,this.Ll),Math.max(this.Pl,this.Rl,this.Ol,this.Dl),Math.max(this.Al,this.El,this.Fl,this.Ll))}Tl(t,s){let e=this.Rl-this.Pl,i=this.El-this.Al;const n=this.Ol-this.Pl,r=this.Fl-this.Al,h=t-this.Pl,o=s-this.Al;let a=e*e+i*i,l=e*n+i*r,u=e*h+i*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(e=this.Dl-this.Pl,i=this.Ll-this.Al,a=e*e+i*i,l=e*n+i*r,u=e*h+i*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}hl(){return(this.Pl+this.Rl+this.Ol+this.Dl)/4}ol(){return(this.Al+this.El+this.Fl+this.Ll)/4}Ql(t,s,e,i){return!(!this.Tl(t,s)&&!this.Tl(e,i))||ho.Nr(t,s,e,i,this)}tu(t){let s=t.hl(),e=t.ol();if(this.Tl(s,e))return!0;if(s=this.hl(),e=this.ol(),t.Tl(s,e))return!0;const i=this.Pl,n=this.Al,r=this.Rl,h=this.El,o=this.Ol,a=this.Fl,l=this.Dl,u=this.Ll;return ho.Nr(i,n,r,h,t)||ho.Nr(r,h,o,a,t)||ho.Nr(o,a,l,u,t)||ho.Nr(l,u,i,n,t)}su(){const t=this.Pl,s=this.Al;this.Pl=this.Rl,this.Al=this.El,this.Rl=this.Ol,this.El=this.Fl,this.Ol=this.Dl,this.Fl=this.Ll,this.Dl=t,this.Ll=s}eu(){this.iu(0,2),this.iu(1,3),this.iu(6,4),this.iu(7,5)}nu(){this.iu(0,6),this.iu(1,7),this.iu(2,4),this.iu(3,5)}ru(){this.iu(2,6),this.iu(3,7)}iu(t,s){const e=this.hu(t);this.ou(t,this.hu(s)),this.ou(s,e)}hu(t){switch(t){case 0:return this.Pl;case 1:return this.Al;case 2:return this.Rl;case 3:return this.El;case 4:return this.Ol;case 5:return this.Fl;case 6:return this.Dl;case 7:return this.Ll;default:throw new RangeError("invalid quad point index")}}ou(t,s){switch(s=+s,t){case 0:this.Pl=s;break;case 1:this.Al=s;break;case 2:this.Rl=s;break;case 3:this.El=s;break;case 4:this.Ol=s;break;case 5:this.Fl=s;break;case 6:this.Dl=s;break;case 7:this.Ll=s;break;default:throw new RangeError("invalid quad point index")}}}}{const oo=self._s,ao=self.assert,lo=[0,0,1,0,1,1,0,1],uo=oo.zn(oo.Gl);oo.au=class extends oo.jn{constructor(t,s=!0){super(),t||(t=lo),this.lu=Float64Array.from(t),this.uu=new oo.Rect,this.cu=!0,this.fu=s}Hn(){}du(){return this.lu}pu(){return this.lu.length/2}mu(t){this.lu.length===t.length?this.lu.set(t):this.lu=Float64Array.from(t),this.cu=!0}gu(){this.mu(lo)}S(t){this.mu(t.lu)}yu(){this.cu=!0}Su(){if(!this.cu)return;const t=this.lu;let s=t[0],e=t[1],i=s,n=e;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>i&&(i=h),o<e&&(e=o),o>n&&(n=o)}this.uu.set(s,e,i,n),this.cu=!1}Yl(t,s,e){let i=this.lu;8!==i.length&&(i=new Float64Array(8),this.lu=i),i[0]=t.Za()-s,i[1]=t.Qa()-e,i[2]=t.tl()-s,i[3]=t.Qa()-e,i[4]=t.tl()-s,i[5]=t.sl()-e,i[6]=t.Za()-s,i[7]=t.sl()-e,this.uu.S(t),0===s&&0===e||this.uu.offset(-s,-e),this.cu=!1}wu(t,s,e){uo.S(t),uo.offset(s,e),this.mu(uo.toArray()),this.cu=!0}transform(t,s,e){let i=0,n=1;0!==e&&(i=Math.sin(e),n=Math.cos(e)),this.vu(t,s,i,n)}vu(t,s,e,i){const n=this.lu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*i-a*e,n[h]=a*i+o*e}this.cu=!0}offset(t,s){const e=this.lu;for(let i=0,n=e.length;i<n;i+=2)e[i]+=t,e[i+1]+=s}Tl(t,s){const e=this.lu;if(t===e[0]&&s===e[1])return!0;this.Su();const i=this.uu,n=i.Za()-110,r=i.Qa()-101,h=i.tl()+131,o=i.sl()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let i=0,S=e.length;i<S;i+=2){const w=(i+2)%S,v=e[i],b=e[i+1],M=e[w],x=e[w+1];oo.kr(n,r,t,s,a,u,l,c,v,b,M,x)&&++g,oo.kr(h,o,t,s,f,p,d,m,v,b,M,x)&&++y}return g%2==1||y%2==1}bu(t,s,e){const i=t.lu,n=this.lu;if(this.Tl(i[0]+s,i[1]+e))return!0;if(t.Tl(n[0]-s,n[1]-e))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=i.length;t<n;t+=2){const r=(t+2)%n,h=i[t]+s,m=i[t+1]+e,g=i[r]+s,y=i[r+1]+e;if(oo.kr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}Ql(t,s,e,i,n,r){if(this.Tl(e-t,i-s))return!0;if(this.Tl(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;e<n?(h=e,a=n):(h=n,a=e),i<r?(o=i,l=r):(o=r,l=i);const u=this.lu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(oo.kr(e,i,n,r,h,a,o,l,p,m,g,y))return!0}return!1}eu(t){const s=this.lu;for(let e=0,i=s.length;e<i;e+=2)s[e]=2*t-s[e];this.cu=!0}nu(t){const s=this.lu;for(let e=0,i=s.length;e<i;e+=2){const i=e+1;s[i]=2*t-s[i]}this.cu=!0}ru(){const t=this.lu;for(let s=0,e=t.length;s<e;s+=2){const e=s+1,i=t[s];t[s]=t[e],t[e]=i}this.cu=!0}Mu(){const t=this.lu;let s=0;for(let e=0,i=t.length;e<i;e+=2)s+=t[e];return s/this.pu()}xu(){const t=this.lu;let s=0;for(let e=0,i=t.length;e<i;e+=2)s+=t[e+1];return s/this.pu()}Tu(){return this.lu}Cu(){return this.pu()}Iu(){return this.fu}}}{const co=self._s;co._u=class extends co.jn{constructor(t){if(super(),this.Gu=new Map,t)for(const[s,e,i]of t)this.Set(s,e,i)}Hn(){this.Pu(),this.Gu=null}Au(){return 0===this.Gu.size}Pu(){const t=this.Gu;for(const s of t.values())s.clear();t.clear()}Set(t,s,e){const i=this.Gu;let n=i.get(t);n||(n=new Map,i.set(t,n)),n.set(s,e)}Hs(t,s){const e=this.Gu.get(t);return e?e.get(s):e}zs(t,s){const e=this.Gu.get(t);return!!e&&e.has(s)}Ru(t,s){const e=this.Gu,i=e.get(t);if(!i)return!1;const n=i.delete(s);return n&&0===i.size&&e.delete(t),n}Eu(t){const s=this.Gu,e=s.get(t);e&&(e.clear(),s.delete(t));for(const[e,i]of s.entries())i.delete(t)&&0===i.size&&s.delete(e)}Ou(){let t=0;for(const s of this.Gu.values())t+=s.size;return t}*values(){for(const t of this.Gu.values())yield*t.values()}*Fu(){for(const[t,s]of this.Gu.entries())for(const e of s.keys())yield[t,e]}*entries(){for(const[t,s]of this.Gu.entries())for(const[e,i]of s.entries())yield[t,e,i]}}}{const fo=self._s;fo.Du=class extends fo.jn{constructor(){super(),this.Lu=new Set,this.ku=[],this.Nu=!1}Hn(){this.Pu()}Pu(){this.Lu.clear(),fo.bh(this.ku),this.Nu=!1}Bu(t){this.Lu.has(t)||(this.Lu.add(t),this.Nu||this.ku.push(t))}zs(t){return this.Lu.has(t)}Ru(t){this.Lu.delete(t)&&(this.Nu=!0)}Ou(){return this.Lu.size}Au(){return 0===this.Lu.size}$u(){return this.Nu&&(this.Wu(),this.Nu=!1),this.ku}Wu(){const t=this.ku;fo.bh(t);for(const s of this.Lu)t.push(s)}}}{const po=self._s,mo=new Map,go=new Map,yo=new Map,So=new Map,wo=new Map,vo=new Map,bo=new Map,Mo=new Map,xo=new Map;xo.set("linear","noease"),xo.set("default","noease");const To=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],Co=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Io=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Vu=class t{constructor(){}static ju(){return"default"}static Uu(){return"noease"}static zu(t){return Io.get(t)}static Hu(s,...e){let i,n;this.Ju(),s?(yo.has(s)||yo.set(s,new Map),i=yo.get(s),n=[...i.keys()].filter((e=>!t.qu(e,s)||t.qu(e,s).transition.Yu()))):(i=wo,n=[...i.keys()]);const r=n.sort();return[...go.keys()].concat(r).filter((t=>!e.includes(t)))}static Xu(){this.Ju();const t=[...wo.keys()];return t.sort(),[...go.keys()].concat(t)}static Ku(){this.Ju();const t=[...wo.keys()];return t.sort(),t}static Zu(t){for(const s of To)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of Co)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Qu(t){return this.Ju(),[...go.keys()].includes(t)}static tc(s){const e=xo.get(s);return e?mo.get(e):t.Qu(s)?mo.get(s):bo.has(s)?bo.get(s):void 0}static sc(t){return this.Ju(),Mo.get(t)}static ec(s,e){this.Ju();const i=t.tc(s);if(i)return i;if(!e)throw new Error("missing ease function");return yo.get(e).get(s)}static qu(t,s){this.Ju();const e=So.get(s);if(e)return e.get(t)}static nc(s,e){return this.Ju(),!!t.tc(s)||!!yo.get(e).get(s)}static rc(s){this.Ju();return t.tc(s)||wo.get(s)}static hc(t){return this.Ju(),vo.get(t)}static oc(t){return this.Ju(),this.Xu()[t]}static ac(t,s){return this.Ju(),this.Hu(s).indexOf(t)}static lc(t){return this.ac(t)}static Ju(){0===mo.size&&(this.uc("default",(()=>{})),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("cubicbezier",this.fc),this.cc("spline",this.dc))}static uc(s,e,i=!1){if("function"==typeof e)t.mc(s,e,"predefined");else{if(!po.xi(e))throw new Error("unexpected arguments");if(self.yc){const n=po.zn(self.yc,s,i);n.Sc(e),t.mc(s,((t,s,e,i)=>n.wc(t,s,e,i)),"predefined"),Mo.set(s,n)}else{const n=po.zn(po.vc,[s,e.map((t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee]))],!1);n.bc(i),t.mc(s,((t,s,e,i)=>n.wc(t,s,e,i)),"predefined")}}}static cc(s,e){t.mc(s,e,"private")}static Mc(s,e,i,n){this.Ju(),t.mc(s,e,"custom",i,n)}static xc(t,s){if(this.Qu(t))return;if([...bo.keys()].includes(t))return;const e=yo.get(s);e&&e.delete(t);const i=So.get(s);i&&i.delete(t)}static mc(t,s,e,i,n){switch(e){case"predefined":mo.set(t,s),go.set(t,s);break;case"custom":i?(yo.has(i)||yo.set(i,new Map),So.has(i)||So.set(i,new Map),yo.get(i).set(t,s),So.get(i).set(t,n)):(wo.set(t,s),vo.set(t,n));break;case"private":mo.set(t,s),bo.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Tc(t,s,e,i){return 0===i?s:e*t/i+s}static fc(t,s,e,i,n){return s+3*t*(e-s)+3*t**2*(s+i-2*e)+t**3*(n-s+3*e-3*i)}static dc(t,s,e,i,n,r,h,o,a,l){if(i===n&&r===h)return t;const u=No(t,s,i,r,o,l),c=Oo(e,n,h,a),f=Fo(e,n,h,a),d=Do(e,n,h,a);return Lo(u,c,f,d)}static Cc(t,s,e,i){const n=[],r=Oo(t,s,e,i),h=Fo(t,s,e,i),o=Do(t,s,e,i);for(let t=0;t<_o;++t){const s=Lo(t*Go,r,h,o);n.push(s)}return n}};const _o=11,Go=1/(_o-1),Po=4,Ao=.01,Ro=1e-7,Eo=10,Oo=(t,s,e,i)=>i-3*e+3*s-t,Fo=(t,s,e,i)=>3*e-6*s+3*t,Do=(t,s,e,i)=>3*(s-t),Lo=(t,s,e,i)=>((s*t+e)*t+i)*t,ko=(t,s,e,i)=>3*s*t*t+2*e*t+i,No=(t,s,e,i,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=_o-1;for(r[_o-1];o!=l&&a<=t;)o++,a=r[o],h+=Go;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*Go;const c=Oo(s,e,i,n),f=Fo(s,e,i,n),d=Do(s,e,i,n),p=ko(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Lo(u,c,f,d)-t)/ko(u,c,f,d);return u}{let s,e,i=h,n=h+Go,r=0;do{u=i+(n-i)/2;let h=Lo(u,c,f,d)-t;h>0?n=u:i=u,s=Math.abs(h)>1e-7,e=++r<10}while(s&&e);return u}}}{let Bo=function(t){$o.hi(t)};RequireStringOrNumber=Bo;const $o=self._s;$o.Ic=class{constructor(t){this._c=[],this.Yn=t||"",this.Gc=0}Hn(){this.Pu(),this._c=null}Pc(){return this.Yn}Pu(){$o.Mh(this._c),this.Gc=0}Ac(){return this.Gc}Rc(t=Math.random()*this.Ac()){let s=0;for(const[e,i]of this._c)if(s+=e,t<s)return i;return 0}Ec(){return!!this._c.length}Oc(t,s){Bo(s),this.Gc+=t,this._c.push([t,s])}Fc(t,s){Bo(s);const e=0===t;for(let i=0;i<this._c.length;i++){const n=this._c[i],r=e||n[0]===t,h=n[1]===s;if(r&&h){this._c.splice(i,1),this.Gc-=n[0];break}}}Dc(){return JSON.stringify(this._c)}static Lc(t,s){const e=new $o.Ic(s),i=JSON.parse(t);for(const t of i){const s=t[0],i=t[1];e.Oc(s,i)}return e}}}{const Wo=self._s;let Vo=0;Wo.kc=class{constructor(t,s){this.Nc=t,this.Bc=s,this.$c=Vo++,this.Nc.Wc("runtime","screen-reader-text",{type:"create",id:this.$c,text:this.Bc})}Hn(){this.Nc.Wc("runtime","screen-reader-text",{type:"release",id:this.$c}),this.Nc=null,this.Bc="",this.$c=-1}Vc(t){this.Bc!==t&&(this.Bc=t,this.Nc.Wc("runtime","screen-reader-text",{type:"update",id:this.$c,text:this.Bc}))}}}{const jo=self._s;jo.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.jc=!1,this.Uc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Uc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.jc=!0}}}{const Uo=self._s,zo=self.assert;Uo.Event.zc=class extends Uo.jn{constructor(t){super(),this.Hc=t,this.Jc=[],this.qc=new Set,this.Yc=[],this.Xc=new Set,this.Kc=0,this.Zc=[]}Hn(){this.Kc>0||(Uo.bh(this.Jc),this.qc.clear(),Uo.bh(this.Yc),this.Xc.clear(),Uo.bh(this.Zc),Uo.Hn(this))}Qc(t,s){if(this.tf())this.Zc.push({sf:"add",ef:t,capture:s});else if(s){if(this.qc.has(t))return;this.Jc.push(t),this.qc.add(t)}else{if(this.Xc.has(t))return;this.Yc.push(t),this.Xc.add(t)}}if(t,s){this.tf()?this.Zc.push({sf:"remove",ef:t,capture:s}):s?this.qc.has(t)&&(this.qc.delete(t),Uo._h(this.Jc,t)):this.Xc.has(t)&&(this.Xc.delete(t),Uo._h(this.Yc,t))}nf(){return!this.Jc.length&&!this.Yc.length}tf(){return this.Kc>0}rf(){const t=new Set,s=new Set;for(const e of this.Zc)if("add"===e.sf)this.Qc(e.ef,e.capture),e.capture?s.delete(e.ef):t.delete(e.ef);else{if("remove"!==e.sf)throw new Error("invalid op");e.capture?(this.qc.delete(e.ef),s.add(e.ef)):(this.Xc.delete(e.ef),t.add(e.ef))}Uo.Ah(this.Yc,t),Uo.Ah(this.Jc,s),Uo.bh(this.Zc)}hf(t){this.af();let s=!1;for(let e=0,i=this.Jc.length;e<i;++e)if(this.Jc[e](t),t.jc){s=!0;break}if(!s)for(let s=0,e=this.Yc.length;s<e&&(this.Yc[s](t),!t.jc);++s);return this.lf(),!t.defaultPrevented}uf(t){this.af();for(let s=0,e=this.Jc.length;s<e;++s)this.Jc[s](t);for(let s=0,e=this.Yc.length;s<e;++s)this.Yc[s](t);return this.lf(),!0}af(){this.Kc++}lf(){this.Kc--,0===this.Kc&&this.Zc.length>0&&this.rf()}cf(t){t?this.af():this.lf()}ff(t){let s=[];for(let e=0,i=this.Jc.length;e<i;++e){let i=this.Jc[e];s.push(Uo.df((()=>i(t))))}for(let e=0,i=this.Yc.length;e<i;++e){let i=this.Yc[e];s.push(Uo.df((()=>i(t))))}return Promise.all(s).then((()=>!t.defaultPrevented))}pf(t){const s=[];this.af();for(let e=0,i=this.Jc.length;e<i;++e){const i=this.Jc[e](t);i instanceof Promise&&s.push(i)}for(let e=0,i=this.Yc.length;e<i;++e){const i=this.Yc[e](t);i instanceof Promise&&s.push(i)}return this.lf(),s.length?Promise.all(s).then((()=>!t.defaultPrevented)):!t.defaultPrevented}async mf(t){return await this.pf(t)}async gf(t){this.af();for(let s=0,e=this.Jc.length;s<e;++s){const e=this.Jc[s](t);e instanceof Promise&&await e}for(let s=0,e=this.Yc.length;s<e;++s){const e=this.Yc[s](t);e instanceof Promise&&await e}return this.lf(),!t.defaultPrevented}*yf(t){this.af();for(let s=0,e=this.Jc.length;s<e;++s){const e=this.Jc[s](t);Uo.Mo(e)&&(yield*e)}for(let s=0,e=this.Yc.length;s<e;++s){const e=this.Yc[s](t);Uo.Mo(e)&&(yield*e)}this.lf()}}}{const Ho=self._s;Ho.Event.Sf=class extends Ho.jn{constructor(){super(),this.wf=new Map,this.vf=!1}Hn(){if(this.vf)throw new Error("already released");this.bf(),this.vf=!0,Ho.Hn(this)}Jn(){return this.vf}bf(){if(this.wf){for(let t of this.wf.values())t.Hn();this.wf.clear()}}Mf(t,s){let e=this.wf.get(t);return e||(s?(e=Ho.zn(Ho.Event.zc,t),this.wf.set(t,e),e):null)}xf(t){return this.wf.has(t)}addEventListener(t,s,e){this.Mf(t,!0).Qc(s,!!e)}removeEventListener(t,s,e){let i=this.Mf(t,!1);i&&(i.if(s,!!e),i.nf()&&this.wf.delete(t))}dispatchEvent(t){const s=this.Mf(t.type,!1);return!s||(t.cancelable?s.hf(t):s.uf(t))}Tf(t){const s=this.Mf(t.type,!1);return s?(t.Uc=!0,s.ff(t)):Promise.resolve(!0)}async Cf(t){const s=this.Mf(t.type,!1);if(!s)return!0;this.wf.delete(t.type),t.Uc=!0;const e=await s.ff(t);return s.Hn(),e}async If(t){const s=this.Mf(t.type,!1);return!s||await s.mf(t)}_f(t){const s=this.Mf(t.type,!1);return!s||s.pf(t)}async Gf(t){const s=this.Mf(t.type,!1);return!s||await s.gf(t)}Pf(t){const s=this.Mf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.yf(t)}cf(t){for(const s of this.wf.values())s.cf(t)}}}{let Jo=function(t){ea=ta&&0===ia?requestIdleCallback(qo,{timeout:35}):setTimeout(qo,ia>0?1:t)},qo=function(t){if(ea=-1,!sa.length)return;let s=performance.now(),e=s,i=0,n=0;do{Yo(sa.shift()),e=performance.now(),++i,n=(e-s)/i*1.1}while(sa.length&&(ta&&0===ia&&void 0!==t?n<t.timeRemaining():e-s+n<12));if(-1===ea&&sa.length){let t=e-s;Jo(Math.max(16-t,4))}},Yo=function(t){let s;try{s=t.ef()}catch(s){return void t.reject(s)}t.resolve(s)};SetNewCallback=Jo,DoAsyncifiedWork=qo,DoNextAsyncifiedJob=Yo;const Xo=self._s,Ko=12,Zo=16,Qo=35,ta="undefined"!=typeof requestIdleCallback;let sa=[],ea=-1,ia=0,na=Xo.Ys.zs("disable-asyncify");na&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Xo.df=function(t){let s=null;return Xo.Ls&&(s=Xo.Ye()),new Promise(((e,i)=>{sa.push({ef:t,resolve:e,reject:i,stack:s}),na?Yo(sa.pop()):-1===ea&&Jo(16)}))},Xo.df.Af=function(t){if(t)++ia;else if(--ia,ia<0)throw new Error("already turned off high throughput mode")}}{let ra=function(){ua=-1},ha=function(){ca=-1,fa=-1;let t=Date.now();for(let s of da)if(s.Rf(t)){let t=s.Ef();(-1===fa||t<fa)&&(fa=t)}else da.delete(s);if(-1!==fa){let s=Math.max(fa-t+100,1e3);ca=self.setTimeout(ha,s)}};ClearTimeCache=ra,CheckActiveIdleTimeouts=ha;const oa=self._s,aa=1e3,la=100;let ua=-1;oa.Of=function(){return-1===ua&&(ua=Date.now(),self.setTimeout(ra,16)),ua};let ca=-1,fa=-1,da=new Set;oa.Ff=class{constructor(t,s){this.Df=t,this.Lf=1e3*s,this.kf=0,this.Nf=!1}Bf(){let t=oa.Of();this.kf=t+this.Lf,this.Nf||(da.add(this),this.Nf=!0),-1===ca?(fa=this.kf,ca=self.setTimeout(ha,this.Lf+100)):this.kf<fa&&fa>t+1e3&&(self.clearTimeout(ca),fa=this.kf,ca=self.setTimeout(ha,this.Lf+100))}Rf(t){return!(t>=this.kf&&(this.Df()?(this.kf=t+this.Lf,0):(this.Nf=!1,1)))}Ef(){return this.kf}$f(){this.Nf&&(da.delete(this),this.Nf=!1,0===da.size&&-1!==ca&&(self.clearTimeout(ca),ca=-1,fa=-1))}Hn(){this.$f(),this.Df=null}}}{const pa=self._s;pa.Wf=class t{constructor(t){this.Vf=!1,this.jf=t}Uf(){this.Vf||(this.Vf=!0,this.jf&&(this.jf(),this.jf=null))}zf(){return this.Vf}Hn(){this.Uf()}static Hn(s){return new t((()=>s.Hn()))}static Hf(t,s,e,i,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==i)i=!1;else if("boolean"!=typeof i&&"object"!=typeof i)throw new TypeError("invalid event listener options");if(n&&(e=e.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new pa.Jf;for(const r of s)t.addEventListener(r,e,i),n.Bu(pa.zn(pa.Wf,(()=>t.removeEventListener(r,e,i))));return n}return t.addEventListener(s,e,i),pa.zn(pa.Wf,(()=>t.removeEventListener(s,e,i)))}},pa.qf=class extends pa.Wf{Yf(t){this.jf=t}},pa.Jf=class extends pa.Wf{constructor(...t){super(),this.Xf=new Set;for(let s of t)this.Bu(s)}Bu(...t){if(this.Vf)throw new Error("already disposed");for(let s of t)this.Xf.add(s)}Kf(t){if(this.Vf)throw new Error("already disposed");this.Xf.delete(t)}Zf(){if(this.Vf)throw new Error("already disposed");if(this.Xf){for(let t of this.Xf)t.Uf();this.Xf.clear()}}zf(){return this.Vf}Uf(){if(this.Vf)throw new Error("already disposed");this.Vf=!0;for(let t of this.Xf)t.Uf();this.Xf.clear(),this.Xf=null}Hn(){this.Uf()}}}{const ma=self._s;ma.Qf=class extends ma.jn{constructor(){super(),this.td=0,this.Aa=0,this.sd=0,this.ed=0}Bu(t){t=+t,this.Aa=t-this.td,this.sd=this.ed+this.Aa,this.td=this.sd-this.ed-this.Aa,this.ed=this.sd}nd(t){this.ed-=+t}Hs(){return this.ed}Bf(){this.td=0,this.Aa=0,this.sd=0,this.ed=0}Set(t){this.td=0,this.Aa=0,this.sd=0,this.ed=+t}rd(t){this.td=t.td,this.Aa=t.Aa,this.sd=t.sd,this.ed=t.ed}Hn(){}}}{const ga=self._s,ya={},Sa=!0,wa=!1;ya.hd=function(t){this.od=t,this.right=this.od.ad,this.left=this.od.ad,this.parent=null,this.color=!1,this.key=null},ya.ld=function(t){this.size=0,this.ad=new ya.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad,this.compare=t||this.ud},ya.ld.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},ya.ld.prototype.clone=function(){var t=new ya.ld(this.compare);return t.fd(this),t},ya.ld.prototype.clear=function(){this.size=0,this.ad=new ya.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad},ya.ld.prototype.dd=function(t){var s=t.right;t.right=s.left,s.left!=this.ad&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ya.ld.prototype.pd=function(t){var s=t.left;t.left=s.right,s.right!=this.ad&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ya.ld.prototype.md=function(t){if(this.contains(t))this.gd(t).key=t;else{var s=new ya.hd(this);s.key=t;for(var e=this.ad,i=this.root;i!=this.ad;)e=i,i=this.compare(s.key,i.key)<0?i.left:i.right;s.parent=e,e==this.ad?this.root=s:this.compare(s.key,e.key)<0?e.left=s:e.right=s,s.left=this.ad,s.right=this.ad,s.color=Sa,this.yd(s),this.size++}},ya.ld.prototype.yd=function(t){for(;t!=this.ad&&t!=this.root&&t.parent.color==Sa;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==Sa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=Sa,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=Sa,t.parent.parent!=this.ad&&this.pd(t.parent.parent)):(s=t.parent.parent.left).color==Sa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=Sa,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=Sa,t.parent.parent!=this.ad&&this.dd(t.parent.parent))}this.root.color=!1},ya.ld.prototype.Sd=function(t){var s,e;(e=(s=t.left==this.ad||t.right==this.ad?t:this.wd(t)).left!=this.ad?s.left:s.right).parent=s.parent,s.parent==this.ad?this.root=e:s==s.parent.left?s.parent.left=e:s.parent.right=e,s!=t&&(t.key=s.key),0==s.color&&this.vd(e),this.size--},ya.ld.prototype.vd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==Sa&&(s.color=!1,t.parent.color=Sa,this.dd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=Sa,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=Sa,this.pd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.dd(t.parent),t=this.root)):((s=t.parent.left).color==Sa&&(s.color=!1,t.parent.color=Sa,this.pd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=Sa,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=Sa,this.dd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.pd(t.parent),t=this.root))}t.color=!1},ya.ld.prototype.remove=function(t){var s=this.gd(t);if(s!=this.ad){var e=s.key;return this.Sd(s),e}return null},ya.ld.prototype.bd=function(t,s){this.remove(s)},ya.ld.prototype.min=function(t){for(;t.left!=this.ad;)t=t.left;return t},ya.ld.prototype.max=function(t){for(;t.right!=this.ad;)t=t.right;return t},ya.ld.prototype.wd=function(t){if(t.right!=this.ad)return this.min(t.right);for(var s=t.parent;s!=this.ad&&t==s.right;)t=s,s=s.parent;return s},ya.ld.prototype.Md=function(t){if(t.left!=this.ad)return this.max(t.left);for(var s=t.parent;s!=this.ad&&t==s.left;)t=s,s=s.parent;return s},ya.ld.prototype.xd=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.right!=this.ad)return this.min(s.right).key;for(var e=s.parent;e!=this.ad&&s==e.right;)s=e,e=e.parent;return e!=this.ad?e.key:null}return null},ya.ld.prototype.Td=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.left!=this.ad)return this.max(s.left).key;for(var e=s.parent;e!=this.ad&&s==e.left;)s=e,e=e.parent;return e!=this.ad?e.key:null}return null},ya.ld.prototype.Cd=function(){return this.min(this.root).key},ya.ld.prototype.Id=function(){return this.max(this.root).key},ya.ld.prototype.gd=function(t){for(var s=this.root;s!=this.ad&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ya.ld.prototype.contains=function(t){return null!=this.gd(t).key},ya.ld.prototype.getValues=function(){var t=[];return this.forEach((function(s){t.push(s)})),t},ya.ld.prototype.fd=function(t){if("array"==ya._d(t))for(var s=0;s<t.length;s++)this.md(t[s]);else if("function"==ya._d(t.forEach))t.forEach(this.md,this);else if("function"==ya._d(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)this.md(e[s])}else if("object"==ya._d(t))for(var i in t)this.md(t[i])},ya.ld.prototype.Gd=function(t){if("array"==ya._d(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ya._d(t.forEach))t.forEach(this.bd,this);else if("function"==ya._d(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)this.remove(e[s])}else if("object"==ya._d(t))for(var i in t)this.remove(t[i])},ya.ld.prototype.Pd=function(t){if("array"==ya._d(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ya._d(t.forEach))return t.every(this.contains,this);if("function"==ya._d(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)if(!this.contains(e[s]))return!1;return!0}if("object"==ya._d(t)){for(var i in t)if(!this.contains(t[i]))return!1;return!0}},ya.ld.prototype.range=function(t,s){var e=[];return this.Ad((function(t){e.push(t)}),t,s),e},ya.ld.prototype.Rd=function(t,s){if(!this.Ed())for(var e=this.min(this.root);e!=this.ad;){if(t.call(s,e.key,this))return;e=this.wd(e)}},ya.ld.prototype.Od=function(t,s,e){if(!this.Ed())for(var i=this.gd(s);i!=this.ad;){if(t.call(e,i.key,this))return;i=this.wd(i)}},ya.ld.prototype.traverseTo=function(t,s,e){if(!this.Ed())for(var i=this.min(this.root),n=this.gd(s);i!=n;){if(t.call(e,i.key,this))return;i=this.wd(i)}},ya.ld.prototype.Ad=function(t,s,e,i){if(!this.Ed())for(var n=this.gd(s),r=this.gd(e);n!=r;){if(t.call(i,n.key,this))return;n=this.wd(n)}},ya.ld.prototype.Fd=function(t,s){if(!this.Ed())for(var e=this.max(this.root);e!=this.ad;){if(t.call(s,e.key,this))return;e=this.Md(e)}},ya.ld.prototype.forEach=function(t,s){if(!this.Ed())for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))t.call(s,e.key,e.key,this)},ya.ld.prototype.some=function(t,s){if(this.Ed())return!1;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))if(t.call(s,e.key,e.key,this))return!0;return!1},ya.ld.prototype.every=function(t,s){if(this.Ed())return!1;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))if(!t.call(s,e.key,e.key,this))return!1;return!0},ya.ld.prototype.map=function(t,s){var e=[];if(this.Ed())return e;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))e.push(t.call(s,i.key,i.key,this));return e},ya.ld.prototype.filter=function(t,s){var e=[];if(this.Ed())return e;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))t.call(s,i.key,i.key,this)&&e.push(i.key);return e},ya.ld.prototype.Dd=function(){return this.size},ya.ld.prototype.Ed=function(){return 0==this.size},ya.ld.prototype.isSubsetOf=function(t){var s=ya.Dd(t);if(this.Dd()>s)return!1;var e=0;if(this.Ed())return!0;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))ya.contains.call(t,t,i.key)&&e++;return e==this.Dd()},ya.ld.prototype.intersection=function(t){var s=new ya.ld(this.compare);if(this.Ed())return s;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))t.contains.call(t,e.key,e.key,this)&&s.md(e.key);return s},ga.ld=class extends ga.jn{constructor(t){super(),this.Ld=new ya.ld(t),this.kd=!1,this.Nd=new Set,this.Bd=new Set}Bu(t){this.kd?this.Ld.contains(t)?this.Bd.delete(t):this.Nd.add(t):this.Ld.md(t)}Kf(t){this.kd?this.Ld.contains(t)?this.Bd.add(t):this.Nd.delete(t):this.Ld.remove(t)}zs(t){return this.kd?!!this.Nd.has(t)||!this.Bd.has(t)&&this.Ld.contains(t):this.Ld.contains(t)}Pu(){this.Ld.clear(),this.Nd.clear(),this.Bd.clear()}toArray(){if(this.kd)throw new Error("cannot be used in queueing mode");return this.Ld.getValues()}Ou(){return this.Ld.Dd()+this.Nd.size-this.Bd.size}Au(){return 0===this.Ou()}$d(){if(this.Au())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Ld;return t.min(t.root).key}Wd(){if(this.Au())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.$d();return this.Kf(t),t}Vd(t){if(t=!!t,this.kd!==t&&(this.kd=t,!t)){for(const t of this.Bd)this.Ld.remove(t);this.Bd.clear();for(const t of this.Nd)this.Ld.md(t);this.Nd.clear()}}jd(t){this.Ld.forEach(t)}*values(){if(this.Au())return;const t=this.Ld;for(let s=t.min(t.root);s!=t.ad;s=t.wd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const va=self._s;va.Ud=class{constructor(t=va.hardwareConcurrency){this.zd=t,this.Hd=[],this.Jd=0}Bu(t){return new Promise(((s,e)=>{this.Hd.push({ef:t,resolve:s,reject:e}),this.qd()}))}Yd(t){for(let s=0,e=this.Hd.length;s<e;++s)if(this.Hd[s].ef===t)return s;return-1}Xd(t,s){const e=this.Yd(t);if(-1===e)throw new Error("cannot find promise to resolve");this.Hd[e].resolve(s),this.Hd.splice(e,1)}Kd(t,s){const e=this.Yd(t);if(-1===e)throw new Error("cannot find promise to reject");this.Hd[e].reject(s),this.Hd.splice(e,1)}async qd(){if(!this.Hd.length)return;if(this.Jd>=this.zd)return;this.Jd++;const t=this.Hd.shift();try{const s=await t.ef();t.resolve(s)}catch(s){t.reject(s)}this.Jd--,this.qd()}static async Zd(t,s){const e=[];let i=!1;const n=async t=>{let n;for(;n=s.pop();){if(i)return;try{e.push(await n())}catch(t){throw i=!0,t}}},r=[];for(;t--;)r.push(n());return await Promise.all(r),e}}}{const ba=self._s;ba.Qd=class{constructor(t,s,e){this.Df=t,this.tp=s,this.sp=e||2*s,this.ep=-1,this.ip=-1/0,this.np=()=>this.rp(),this.hp=!1,this.op=!1,this.ap=null}lp(t){this.op=!!t}up(){return void 0!==ba.cp&&ba.cp.fp()?this.sp:this.tp}pp(...t){if(-1!==this.ep)return;this.ap=t;let s=ba.Of(),e=s-this.ip,i=this.up();e>=i&&this.op?(this.ip=s,this.mp()):this.ep=self.setTimeout(this.np,Math.max(i-e,4))}mp(){this.hp=!0;const t=this.ap;this.ap=null,t?this.Df(...t):this.Df(),this.hp=!1}Bf(){this.hp||(this.gp(),this.ap=null,this.ip=ba.Of())}rp(){this.ep=-1,this.ip=ba.Of(),this.mp()}gp(){-1!==this.ep&&(self.clearTimeout(this.ep),this.ep=-1)}Hn(){this.gp(),this.Df=null,this.ap=null,this.np=null}}}{const Ma=self._s;Ma.yp=class{constructor(){this.Sp=new Map,this.wp=!1,this.vp=null,this.bp=null,this.Mp=null,this.xp=null}Tp(t){this.wp=!!t}Cp(){return this.wp}Ip(t){this.vp=t}_p(t){if(!this.vp)throw new Error("no get base size callback set");return this.vp(t)}Gp(t){this.bp=t}Pp(t,s,e,i,n,r){if(!this.bp)throw new Error("no raster at size callback set");return this.bp(t,s,e,i,n,r)}Ap(t){this.Mp=t}Rp(t){if(!this.Mp)throw new Error("no release result callback set");this.Mp(t)}Ep(t){this.xp=t}Op(){if(!this.xp)throw new Error("no redraw callback set");this.xp()}Fp(t){let s=this.Sp.get(t);return s||(s=Ma.zn(Ma.Dp,this,t),this.Sp.set(t,s)),s.Lp(),s}kp(t){this.Sp.delete(t.Np())}Bp(){for(const t of this.Sp.values())t.$p(),t.Wp()}}}{const xa=self._s,Ta=4096;xa.Dp=class{constructor(t,s){this.Vp=t,this.jp=s,this.Up=0,this.zp=0,this.Hp=0,this.Jp=this.Vp._p(s).then((t=>{this.Vp&&(this.zp=t[0],this.Hp=t[1],this.Vp.Op())})).catch((t=>{console.error("[SVG] Error loading SVG: ",t),this.qp=!0,this.Vp&&this.Vp.Op()})),this.Yp=0,this.Xp=0,this.Kp=0,this.Zp=0,this.Qp=!1,this.tm=null,this.sm=!1,this.qp=!1}Hn(){if(this.Up<=0)throw new Error("already released");this.Up--,0===this.Up&&this.im()}$p(){this.tm&&(this.Vp.Rp(this.tm),this.tm=null)}im(){this.$p(),this.Vp.kp(this),this.Vp=null}Np(){return this.jp}Lp(){this.Up++}nm(){return this.Up>0}rm(){return this.tm}Wp(){this.sm=!0}async hm(t,s,e){if(0===s||0===e||this.qp)return;if(this.Qp)return;let i=xa.br(Math.ceil(s)),n=xa.br(Math.ceil(e));const r=Math.max(i,n);if(r>4096){const t=4096/r;s*=t,e*=t,i=Math.min(Math.ceil(i*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<i&&e<n){const t=s/e;i/n>t?(s=n*t,e=n):(s=i,e=i/t)}if(this.Vp.Cp()&&(i=Math.ceil(s),n=Math.ceil(e)),i<=this.Yp&&n<=this.Xp&&!this.sm)return;this.Qp=!0,this.Yp=i,this.Xp=n;const h=await this.Vp.Pp(this.jp,t,this.Yp,this.Xp,s,e);this.Vp&&(this.$p(),this.tm=h,this.Kp=s,this.Zp=e,this.Qp=!1,this.sm=!1,this.Vp.Op())}om(){return this.Jp}am(){return this.zp}lm(){return this.Hp}um(){return this.Kp}fm(){return this.Zp}dm(){return this.qp}}}{let Ca=function(t){return Ra.get(t)};lookupHtmlEntity=Ca;const Ia=self._s;Ia.pm="\ufeff";const _a=new Set("0123456789");Ia.gm=function(t){return _a.has(t)};const Ga=new Set(" \t\n\r            ​\u2028\u2029  　");Ia.ym=function(t){return Ga.has(t)},Ia.Sm=function(t){return[...t].filter((t=>!Ia.ym(t))).join("")},Ia.wm=function(t){for(const s of t)if(!Ia.ym(s))return!1;return!0},Ia.vm=function(t){for(const s of t)if(!Ia.ym(s))return!1;return!0},Ia.bm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Ia.Mm=function(t){return[...t].filter((t=>!Ia.bm(t))).join("")};let Pa=null;try{Pa=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Ia.xm=function(t){return!Ia.ym(t)&&Pa&&Pa.test(t)};const Aa=new Set("0123456789.+-e");Ia.Tm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!_a.has(s))return!1;for(let s of t)if(!Aa.has(s))return!1;return!0},Ia.Cm=function(t){let s=t.length;for(;s>0;){let e=t.charAt(s-1);if(!Ia.gm(e))break;--s}return t.substr(0,s)},Ia.Im=function(t){let s=Ia.Cm(t),e=t.substr(s.length);return e=e?(parseInt(e,10)+1).toString():"2",s+e};const Ra=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Ea=/[&<>"']/g;Ia._m=function(t){return t.replace(Ea,Ca)},Ia.Gm=function(t){let s=Ia.Pm(t,"\\","\\\\");return s=Ia.Pm(s,'"','\\"'),s=Ia.Pm(s,"\t","\\t"),s=Ia.Pm(s,"\r",""),Ia.Pm(s,"\n","\\n")},Ia.Am=function(t){let s=Ia.Pm(t,"&","&amp;");return s=Ia.Pm(s,"<","&lt;"),s=Ia.Pm(s,">","&gt;"),Ia.Pm(s,'"',"&quot;")};const Oa=/[-[\]{}()*+?.,\\^$|#\s]/g;Ia.qe=function(t){return t.replace(Oa,"\\$&")},Ia.Rm=function(t,s){let e=0;for(const i of t)i===s&&++e;return e},Ia.Em=function(t,s){let e=0,i=0;for(;e<s;){if(e=t.indexOf("\n",e),-1===e)return i;i++,e++}return i},Ia.Om=function(t,s,e=!1){if(!s)return[];e||(t=t.toLowerCase(),s=s.toLowerCase());const i=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+i;return h},Ia.Pm=function(t,s,e){return t.replaceAll(s,(()=>e))},Ia.Fm=function(t,s,e){return t.replace(new RegExp(Ia.qe(s),"gi"),(()=>e))},Ia.Dm=function(t,s){"string"==typeof s?t.textContent=s:s.Lm()?t.textContent=s.toString():(t.innerHTML=s.km(),s instanceof Ia.pn&&s.Nm(t))},Ia.Bm=function(t,s){return t instanceof Ia.dn||t instanceof Ia.pn?t.equals(s):s instanceof Ia.dn||s instanceof Ia.pn?s.equals(t):t===s},Ia.$m=function(t,...s){let e=t;for(let i=0,n=s.length;i<n;++i){const n=`{${i}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);e=e.replace(n,s[i].toString())}return e},Ia.Wm=function(t,...s){let e=t,i=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,e=e.replace(h,s[r].toString())):-1===i&&(i=r)}if(i>=0&&n>=0&&i<n)throw new Error(`missing placeholder '${i}' in string substitution`);return e},Ia.Vm=function(t,s){let e=t;for(let[t,i]of Object.entries(s))e=e.replaceAll(t,i.toString());return e},Ia.jm=function(t,s){return t>s?1:t<s?-1:0},Ia.Um=function(t,s){let e=t.toLowerCase(),i=s.toLowerCase();return e>i?1:e<i?-1:0};const Fa=new self.Intl.Segmenter;Ia.zm=function(t){const s=[];for(const e of Fa.segment(t))s.push(e.segment);return s},Ia.Hm=function*(t){for(const s of Fa.segment(t))yield s.segment},Ia.Jm=function(t){let s=0;for(const e of Fa.segment(t))++s;return s};const Da=1024,La=1048576,ka=1073741824,Na=1099511627776;Ia.qm=function(t,s){let e="common."+(s?"dataRates":"dataSizes")+".";const i=self.Ym;if(t<1024)return i(e+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"kilobytes",s)}if(t<ka){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"megabytes",s)}if(t<Na){let s=t/ka;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"gigabytes",s)}{let s=t/Na;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"terabytes",s)}};const Ba={Xm:!1,Km:!0,Zm:!0,Qm:!0,tg:!0};Ia.sg=function(t,s){s=Object.assign({},Ba,s),Ia.ig.eg("common.time");const e=[],i=self.lang,n=self.ng;if(s.Km){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,e.push(n(".days",null,s)))}if(s.Zm){const s=Math.floor(t/3600);(s>0||e.length)&&(t-=3600*s,e.push(n(".hours",null,s)))}if(s.Qm){const i=Math.floor(t/60);(i>0||e.length||!s.tg)&&(t-=60*i,e.push(n(".minutes",null,i)))}if(s.tg){const s=Math.floor(t%60);e.push(n(".seconds",null,s))}const r=(s.Xm?i(".approx-prefix"):"")+e.join(i(".separator"));return Ia.ig.rg(),r},Ia.hg=function(t,s){let e=t<0?"-":"",i=(t=Math.abs(t)).toString(),n=s-i.length;for(let t=0;t<n;++t)e+="0";return e+i},Ia.og=function(t){return t.toLowerCase().replace(/\b\w/g,(t=>t.toUpperCase()))},Ia.ag=function(t,s){let e=t.split(".").map((t=>t.trim())),i=s.split(".").map((t=>t.trim()));Ia.Th(e,4,"0"),Ia.Th(i,4,"0"),e=e.map((t=>parseInt(t,10))),i=i.map((t=>parseInt(t,10)));for(let t=0;t<4;++t){const s=e[t]-i[t];if(0!==s)return s<0?-1:1}return 0},Ia.lg=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)}))},Ia.ug=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let e=0;for(let i=0,n=t.length;i<n;++i)t.charAt(i)!==s.charAt(i)&&++e;return e},Ia.cg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let e,i,n,r,h,o;for(t.length>s.length&&(e=t,t=s,s=e),o=Array(t.length+1),i=0;i<=t.length;i++)o[i]=i;for(i=1;i<=s.length;i++){for(r=i,n=1;n<=t.length;n++)h=s[i-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let $a=function(t,s,e){const i=ja.get(e);if(!i)return"class"===e?s?"</span>":`<span class="bbclass${Ya++}">`:t;if("string"==typeof i){if("a"===i&&0===Ja.length||"abbr"===i&&0===qa.length)return t;if("a"!==i||s){if("abbr"!==i||s)return"<"+s+i+">";{const t=parseInt(e.substring(3),10)-1;if(t<0||t>=qa.length)throw new Error("invalid bbcode tip substitution");const s=qa[t];let i="";if("string"==typeof s?i=s:"function"==typeof s&&(i=s()),"string"!=typeof i)throw new TypeError("invalid bbcode tip");return`<abbr title="${Wa.Pm(i,'"',"&quot;")}">`}}{const t=parseInt(e.substring(1),10)-1;if(t<0||t>=Ja.length)throw new Error("invalid bbcode link substitution");const s=Ja[t];if("string"==typeof s)return`<a href="${Ja[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(i)){let t=i[0],e=i[1];return s?"</"+t+">":`<${t} class="${e}">`}};bbToHtmlReplacerFunc=$a;const Wa=self._s,Va=self.assert,ja=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),Ua=new Set(["icon"]),za=/\[(\/?)([a-zA-Z0-9]+)\]/g,Ha=/\[(\/?)([^\[\n]*?)\]/g;let Ja=null,qa=null,Ya=0;const Xa=/\n/g;Wa.pn=class{constructor(t,s){if(this.fg=s&&s.dg?t:Wa._m(t),this.pg="",this.mg=!1,this.gg=[],this.yg=[],s){if(this.mg=!!s.Sg,s.links){if(s.links.length>9)throw new Error("too many links");this.gg=s.links}if(s.wg){if(s.wg.length>9)throw new Error("too many tips");this.yg=s.wg}}this.vg=this.fg.includes("["),this.bg=this.mg&&this.fg.includes("\n"),this.Mg=!this.vg&&!this.bg&&!this.fg.includes("&"),this.xg=!1,this.Tg=[]}toString(){return this.fg}valueOf(){return this.fg}Lm(){return this.Mg}Cg(){return this.vg?this.fg.replace(za,""):this.fg}km(){if(this.Mg)return this.fg;if(!this.pg&&this.fg){let t=this.fg;this.vg&&(Ya=0,Ja=this.gg,qa=this.yg,t=t.replace(za,$a),Ja=null,qa=null),this.bg&&(t=t.replace(Xa,"<br>")),this.pg=t}return this.pg}Nm(t){if(this.gg.length)for(let s=0,e=this.gg.length;s<e;++s){const e=this.gg[s];if("function"!=typeof e)continue;const i=t.querySelector(".bblink"+s);if(!i)throw new Error("unable to attach BBString link handler");i.onclick=e}}equals(t){return t instanceof Wa.dn?this.km()===t.km():t instanceof Wa.pn?this.fg===t.fg:this.fg===t}Ig(){if(this.xg)return this.Tg;const t=[],s=this.fg,e=[];Ha.lastIndex=0;let i=0,n=null;for(;null!==(n=Ha.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(i,r);if(i=r+h.length,l&&t.push({text:l,_g:e.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=e.length-1;s>=0;--s)if(e[s].tag===t){e.splice(s,1);break}}else{let s=a,i=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),i=a.substring(n+1)):s=s.toLowerCase(),Ua.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:i,_g:e.slice(0)})}else e.push({tag:s,Gg:i})}}i<s.length&&t.push({text:s.substring(i),_g:e.slice(0)});for(const s of t)s.text&&(s.text=this.Pg(s.text));return this.Tg=t.map((t=>t.icon?Wa.zn(Wa.Ag,{icon:t.icon,_g:t._g}):Wa.zn(Wa.Rg,{Eg:Wa.zm(t.text),_g:t._g}))),this.xg=!0,this.Tg}Pg(t){return t=Wa.Pm(t,"\\[","["),Wa.Pm(t,"\\\\","\\")}static Og(t){return Wa.zn(Wa.pn,t,{dg:!0}).Cg()}static Fg(t){return t.replace(Ha,"")}}}{let Ka=function(t){return" "!==t&&" "!==t&&el.ym(t)},Za=function(t){return il.has(t)},Qa=function(t){return el.xm(t)&&!Za(t)},tl=function(t){for(;t.length>0&&Ka(t.at(-1));)t.pop()},sl=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Ka,IsOpeningCJKPunctiationChar=Za,IsContinuingCJKPunctuationChar=Qa,WordBreakTrimEnd=tl,IsNewline=sl;const el=self._s,il=new Set("〈《「『【〔〖〘〚〝");el.Dg=class{constructor(){this.Lg=[],this.kg=null}Ng(){return this.Lg}Bg(){return this.Lg.length}$g(t){this.kg=t}Wg(t,s){let e=0,i=0,n=0,r=0,h=0;for(const o of t){if(-1===o.Vg()){const t=s(o);o.jg(t.height),o.Ug(t.fontBoundingBoxAscent||0),o.zg(t.fontBoundingBoxDescent||0),o.Hg(t.Jg||0),o.qg()?o.Yg(t.width):o.Xg()&&o.Kg(this.kg)}e+=o.Vg(),i=Math.max(i,o.Zg()),n=Math.max(n,o.Qg()),r=Math.max(r,o.ty()),h=Math.max(h,o.sy())}return{width:e,height:i,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,Jg:h}}ey(t,s,e,i,n,r){this.Lg.push(el.zn(el.Dg.iy,{ny:t,width:s,height:e,fontBoundingBoxAscent:i,fontBoundingBoxDescent:n,Jg:r}))}Dg(t,s,e,i,n){if("string"==typeof t&&(t=[el.zn(el.Rg,{Eg:el.zm(t)})]),el.bh(this.Lg),!t.length||1===t.length&&t[0].qg()&&t[0].Au()||e<2)return;if(1===t.length){const i=t[0];if(i.qg()&&i.hy()<=100&&!i.oy()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,Jg:a}=s(i);if(t+=n,i.Yg(t),i.jg(r),i.Ug(h||0),i.zg(o||0),i.Hg(a||0),t<=e)return void this.ey([i],t,r,h,o,a)}}let r;r="word"===i?this.ly(t):"cjk"===i?this.uy(t):this.py(t),this.my(r,s,e,n)}ly(t){const s=[];let e=[],i=!1;for(const n of t){const t=n.gy();if(n.Xg())e.length>0&&s.push(e),s.push([n]),e=[];else for(const r of n.yy())if(sl(r))e.length>0&&s.push(e),s.push([el.zn(el.Rg,{Eg:["\n"],_g:t})]),e=[];else if(0===e.length)e.push(el.zn(el.Rg,{Eg:[r],_g:t})),i=Ka(r);else{const n=Ka(r);if(n===i){const s=e.at(-1);s.gy()===t?s.Sy(r):e.push(el.zn(el.Rg,{Eg:[r],_g:t}))}else s.push(e),e=[el.zn(el.Rg,{Eg:[r],_g:t})],i=n}}return e.length>0&&s.push(e),s}uy(t){const s=[];let e=[],i=!1;for(const n of t){const t=n.gy();if(n.Xg())e.length>0&&s.push(e),s.push([n]),e=[];else for(const r of n.yy())if(sl(r))e.length>0&&s.push(e),s.push([el.zn(el.Rg,{Eg:["\n"],_g:t})]),e=[];else if(0===e.length)e.push(el.zn(el.Rg,{Eg:[r],_g:t})),i=Za(r);else if(i||Qa(r)){const s=e.at(-1);s.gy()===t?s.Sy(r):e.push(el.zn(el.Rg,{Eg:[r],_g:t})),i=Za(r)}else s.push(e),e=[el.zn(el.Rg,{Eg:[r],_g:t})],i=Za(r)}return e.length>0&&s.push(e),s}py(t){const s=[];for(const e of t)if(e.qg()){const t=e.yy();el.On(s,t.map((t=>[el.zn(el.Rg,{Eg:[t],_g:e.gy()})])))}else s.push([e]);return s}wy(t){return t.map((t=>t.vy()))}by(t,s){const e=t.length?t.at(-1):null;let i=0;e&&e.qg()&&s[0].qg()&&s[0].gy()===e.gy()&&(e.My(s[0].yy()),i=1);for(let e=s.length;i<e;++i){const e=s[i];t.push(e.vy())}}my(t,s,e,i){let n=[],r=0,h=0,o=0,a=0,l=0;for(const i of t){if(1===i.length&&i[0].qg()&&1===i[0].hy()&&sl(i[0].yy()[0])){if(0===h){const t=s(el.zn(el.Rg,{Eg:[" "],_g:i[0].gy()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,l=t.Jg||0}this.ey(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0;continue}const t=this.wy(n);this.by(t,i);const u=this.Wg(t,s),c=u.width;if(c>=e)if(n.length>0&&this.ey(n,r,h,o,a,l),n=[],i[0].qg()&&el.vm(i[0].yy()))r=0,h=0,o=0,a=0,l=0;else{this.by(n,i);const t=this.Wg(n,s);r=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,l=t.Jg}else n=t,r=c,h=u.height,o=u.fontBoundingBoxAscent,a=u.fontBoundingBoxDescent,l=u.Jg}n.length>0&&this.ey(n,r,h,o,a,l),this.xy(s,i)}xy(t,s){for(const e of this.Lg){const i=e.Ty();if(!i.length)continue;let n=i.at(-1);if(n.qg()){const r=n.yy(),h=r.slice(0);if(tl(h),0===h.length)e.Cy(-n.Vg()),i.pop();else if(h.length<r.length){n.Iy(h);const s=t(n).width,i=n.Vg()-s;n.Yg(s),e.Cy(-i)}0!==s&&i.length>0&&(n=i.at(-1),n.Cy(s),e.Cy(s))}}}Pu(){el.bh(this.Lg)}_y(){return this.Lg.reduce(((t,s)=>Math.max(t,s.Vg())),0)}Gy(){return this.Lg.reduce(((t,s)=>t+s.Zg()),0)}}}{const nl=self._s;nl.Dg.iy=class{constructor(t){this.Tg=t.ny||[],this.Py=t.width||-1,this.Ay=t.height||-1,this.Ry=t.fontBoundingBoxAscent||-1,this.Ey=t.fontBoundingBoxDescent||-1,this.Oy=t.Jg||-1,this.Fy=0,this.Dy=0}ny(){return this.Tg.values()}*Ly(){const t=this.Tg;for(let s=t.length-1;s>=0;--s)yield t[s]}Ty(){return this.Tg}Cy(t){this.Py+=t}Vg(){return this.Py}Zg(){return this.Ay}ky(){return this.Ry}ty(){return this.Ey}sy(){return this.Oy}Ny(t){this.Fy=t}By(){return this.Fy}$y(t){this.Dy=t}Wy(){return this.Dy}}}{const rl=self._s;rl.Vy=class{constructor(t){this.jy=t._g||[],this.Py=t.width||-1,this.Ay=t.height||-1,this.Ry=t.fontBoundingBoxAscent||-1,this.Ey=t.fontBoundingBoxDescent||-1,this.Oy=t.Jg||-1,this.Fy=0,this.Dy=0}qg(){return!1}Xg(){return!1}gy(){return this.jy}Uy(t){const s=this.jy;for(let e=s.length-1;e>=0;--e){const i=s[e];if(i.tag===t)return i}return null}zy(t){return!!this.Uy(t)}Hy(){const t=new Map;for(const s of this.jy)t.set(s.tag,s.Gg);return t}Cy(t){this.Py+=t}Yg(t){this.Py=t}Vg(){return this.Py}jg(t){this.Ay=t}Zg(){return this.Ay}Ug(t){this.Ry=t}Qg(){return this.Ry}zg(t){this.Ey=t}ty(){return this.Ey}Hg(t){this.Oy=t}sy(){return this.Oy}Ny(t){this.Fy=t}By(){return this.Fy}$y(t){this.Dy=t}Wy(){return this.Dy}}}{const hl=self._s;hl.Rg=class extends hl.Vy{constructor(t){super(t),this.Jy=t.Eg}qg(){return!0}My(t){hl.On(this.Jy,t),this.Py=-1,this.Ay=-1,this.Ry=-1,this.Ey=-1,this.Oy=-1}Sy(t){this.Jy.push(t)}vy(){return hl.zn(hl.Rg,{Eg:this.Jy.slice(0),_g:this.jy,width:this.Py,height:this.Ay,fontBoundingBoxAscent:this.Ry,fontBoundingBoxDescent:this.Ey,Jg:this.Oy})}yy(){return this.Jy}Iy(t){this.Jy=t}hy(){return this.Jy.length}Au(){return 0===this.Jy.length}oy(){return this.Jy.includes("\n")}}}{const ol=self._s;ol.Ag=class extends ol.Vy{constructor(t){super(t),this.qy=t.icon}Xg(){return!0}Yy(){return this.qy}vy(){return ol.zn(ol.Ag,{icon:this.qy,_g:this.jy,width:this.Py,height:this.Ay,fontBoundingBoxAscent:this.Ry,fontBoundingBoxDescent:this.Ey,Jg:this.Oy})}Xy(t){if(!t)return null;let s=Number(this.qy);return String(s)===this.qy?(s=Math.floor(s),t.Ky(s)):t.Zy(this.qy)}Kg(t){const s=this.Xy(t);this.Py=s?this.Ay*s.Vg()/s.Zg():0}Qy(t){const s=this.Xy(t);return s?s.Qy():null}hy(){return 1}}}{const al=self._s;al.tS=class{constructor(t){this.sS=new Map,this.eS=t.iS,this.nS=t.rS}Hn(){for(const t of this.sS.values())t.Hn();this.sS.clear()}hS(t){let s=this.sS.get(t);if(s)return s;const e=this.eS(t);return s=al.zn(al.oS,this,{source:t,aS:e}),this.sS.set(t,s),s}lS(t){return this.sS.has(t)}uS(t){const s=this.sS.get(t);s&&s.Hn(),this.sS.delete(t)}async cS(t){return await this.nS(t)}}}{const ll=self._s;ll.oS=class{constructor(t,s){this.fS=t,this.dS=s.source,this.pS=[],this.mS=new Map,this.gS=!1,this.yS=!1,this.SS=null;const e=s.aS.wS;for(let t=0,s=e.length;t<s;++t){const s=e[t],i=ll.zn(ll.vS,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.pS.push(i),s.tag&&this.mS.set(s.tag.toLowerCase(),i)}}Hn(){for(const t of this.pS)t.Hn();ll.bh(this.pS),this.mS.clear(),this.fS=null,this.dS=null}bS(){return this.gS}MS(){return this.yS}xS(){return this.SS||(this.SS=this.TS()),this.SS}async TS(){if(this.gS)return;this.gS=!0,this.yS=!0;const t=await this.fS.cS(this.dS);if(!this.fS)return;const s=t.wS;for(let t=0,e=Math.min(s.length,this.pS.length);t<e;++t){const e=s[t].CS;this.pS[t].IS(e)}this.yS=!1}Ky(t){return(t=Math.floor(t))<0||t>=this.pS.length?null:this.pS[t]}Zy(t){return this.mS.get(t.toLowerCase())||null}}}{const ul=self._s;ul.vS=class{constructor(t,s){this._S=t,this.dS=s.source||null,this.GS=s.index,this.PS=s.tag,this.Py=s.width,this.Ay=s.height,this.AS=null}Hn(){this.Py=0,this.Ay=0,this._S=null}RS(){return this.dS}Vg(){return this.Py}Zg(){return this.Ay}IS(t){this.AS=t}Qy(){return this.AS}}}{let cl=function(t,s,e,i){const n=bl;gl.O(wl,e,s),gl.O(vl,t,s),gl.It(n,wl,vl),gl.normalize(n,n),i.set(n[0],n[1],n[2],gl.Ct(t,n))},fl=function(t,s,e,i,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.ES,f=h.OS,d=h.FS,p=1-c,m=1-f,g=1-d;return o*t*c+o*i*p+a*s*f+a*n*m+l*e*d+l*r*g>=u||o*i*c+o*t*p+a*n*f+a*s*m+l*r*d+l*e*g>u},dl=function(t,s,e,i){return i.x*t+i.y*s+i.z*e>=i.w};PlaneFromPoints=cl,IsInFrontOfPlane=fl,IsPointInFrontOfPlane=dl;const pl=self._s,ml=self.ls,gl=ml.Ss,yl=ml.ws,Sl=ml.ds,wl=gl.create(),vl=gl.create(),bl=gl.create(),Ml=yl.create(),xl=Sl.create(),Tl=gl.create(),Cl=gl.create(),Il=gl.create(),_l=gl.create(),Gl=gl.create(),Pl=gl.create(),Al=gl.create(),Rl=gl.create(),El=yl.v(0,0,1,1);pl.DS={LS(t,s,e,i,n,r,h){const o=i[0]*t+i[4]*s+i[8]*e+i[12],a=i[1]*t+i[5]*s+i[9]*e+i[13],l=i[2]*t+i[6]*s+i[10]*e+i[14],u=i[3]*t+i[7]*s+i[11]*e+i[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},kS(t,s,e,i,n,r,h){const o=xl,a=Ml;return Sl.multiply(o,n,i),null!==Sl.T(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*e-1,a[3]=1,yl.Rt(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},NS(t,s,e,i,n,r,h){const o=wl,a=vl;if(!pl.DS.kS(t,s,0,i,n,r,o))return!1;if(!pl.DS.kS(t,s,1,i,n,r,a))return!1;const l=vl;gl.O(l,a,o);const u=bl;gl.set(u,0,0,1);const c=-e,f=gl.Ct(u,l);let d=0;if(0===f){if(0!==gl.Ct(u,o)+c)return!1}else if(d=-(gl.Ct(o,u)+c)/f,d<0)return!1;return gl.vt(h,o,l,d),!0}};class Ol{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.ES=NaN,this.OS=NaN,this.FS=NaN}set(t,s,e,i){this.x=t,this.y=s,this.z=e,this.w=i,this.ES=t>0?1:0,this.OS=s>0?1:0,this.FS=e>0?1:0}}pl.DS.BS=class{constructor(){this.$S=new Ol,this.WS=new Ol,this.VS=new Ol,this.jS=new Ol,this.US=new Ol,this.zS=new Ol}HS(t,s){const e=El;pl.DS.kS(0,1,0,t,s,e,Tl),pl.DS.kS(1,1,0,t,s,e,Cl),pl.DS.kS(0,0,0,t,s,e,Il),pl.DS.kS(1,0,0,t,s,e,_l),pl.DS.kS(0,1,1,t,s,e,Gl),pl.DS.kS(1,1,1,t,s,e,Pl),pl.DS.kS(0,0,1,t,s,e,Al),pl.DS.kS(1,0,1,t,s,e,Rl),cl(Il,Tl,Gl,this.$S),cl(Tl,Cl,Pl,this.WS),cl(Cl,_l,Rl,this.VS),cl(_l,Il,Al,this.jS),cl(Al,Gl,Pl,this.zS),cl(_l,Cl,Tl,this.US)}JS(t,s,e,i,n,r){return fl(t,s,e,i,n,r,this.$S)&&fl(t,s,e,i,n,r,this.WS)&&fl(t,s,e,i,n,r,this.VS)&&fl(t,s,e,i,n,r,this.jS)&&fl(t,s,e,i,n,r,this.US)&&fl(t,s,e,i,n,r,this.zS)}qS(t,s,e){return!dl(t,s,e,this.US)}}}{const Fl=self._s,Dl=self.ls,Ll=Dl.Ss,kl=Dl.ws,Nl=Dl.ds,Bl=Nl.create(),$l=Ll.v(0,0,0),Wl=Ll.v(0,0,0),Vl=Ll.v(0,0,0),jl=Ll.v(0,1,0),Ul=kl.v(0,0,0,0),zl=new Fl.Gl,Hl=new Fl.Rect,Jl=new Fl.Gl(0,0,1,0,1,1,0,1),ql={YS:1,XS:1e4},Yl=Nl.v(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Fl.DS.KS=class{constructor(t){t=Object.assign({},ql,t),this.Py=0,this.Ay=0,this.ZS=Fl.Qn(45),this.QS=Math.tan(this.ZS/2),this.tw=Nl.create(),this.sw=Nl.create(),this.ew=!1,this.iw=t.YS,this.rw=t.XS,this.hw=[],this.ow=new Map,this.aw=null,this.lw=null,this.uw=null,this.cw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=null,this.gw=null,this.yw=null,this.Sw=null,this.ww=null,this.bw=new Map,this.Mw=null,this.xw=[],this.Tw=new Map,this.Cw=0,this.Iw=0,this._w=1,this.Gw=[this._w],this.Pw=1,this.Aw=[this.Pw],this.Rw=.5,this.Ew=[this.Rw],this.Ow=0,this.Fw=!0,this.Dw=!1}Lw(t){let s=0,e=t.length,i=0;for(;s<e;)t[s++]=i,t[s++]=i+1,t[s++]=i+2,t[s++]=i,t[s++]=i+2,t[s++]=i+3,i+=4}kw(){this.Cw=0,this.Iw=0,this.aw=null,this.lw=null,this.uw=null,this.cw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=null,this.gw=null,this.yw=null,this.Sw=null,this.ww=null,this.Nw()}Bw(){this.kw(),this.Mw=null}$w(){for(const t of this.hw)t.Hn();this.kw()}Vg(){return this.Py}Zg(){return this.Ay}Ww(t){return this.Vw()?100:t/(2*this.jw())}Uw(t){return this.Vw()?t/(2*this.jw())/this.Ww(t):1}zw(t){this.iw=t}Hw(){return this.iw}Jw(t){this.rw=t}qw(){return this.rw}Yw(t){this.ZS=t,this.QS=Math.tan(this.ZS/2)}Xw(){return this.ZS}jw(){return this.QS}Kw(){this.ew=!1}Zw(){this.ew=!0}Vw(){return!this.ew}Qw(){return this.ew}tv(t,s,e=.5,i=.5){const n=this.Hw(),r=this.qw(),h=this.Xw();if(.5===e&&.5===i)this.sv()?Nl.ut(t,h,s,n,r):Nl.perspective(t,h,s,n,r);else{const h=2*(e=1-e)-2,o=2*e,a=2*i-2,l=2*i,u=this.jw()*n,c=u*s;Nl.ot(t,h*c,o*c,a*u,l*u,n,r),this.sv()&&Nl.mul(t,Yl,t)}}ev(t,s,e,i=1){const n=self.devicePixelRatio,r=2*this.Ww(e)*n*this.jw()/e,h=s*r/(2*n*i),o=e*r/(2*n*i),a=-h,l=h,u=-o,c=o;this.sv()?Nl.gt(t,a,l,u,c,this.Hw(),this.qw()):Nl.dt(t,a,l,u,c,this.Hw(),this.qw())}nv(t,s,e,i,n,r=1){let h=1;this.Vw()&&(h=200*this.jw()/n);const o=Vl;Ll.set(o,h,-h,1);const a=$l,l=Wl;Ll.multiply(a,s,o),Ll.multiply(l,e,o),Nl.yt(t,a,l,i||jl),o[2]=r,Nl.scale(t,t,o)}rv(t,s,e,i,n,r,h,o){return Ll.set($l,t,s,e),Ll.set(Wl,i,n,r),this.nv(Bl,$l,Wl,jl,h,o),Bl}hv(t){this.hw.push(t),this.ow.set(t.Pc(),t)}ov(t){const s=this.hw.indexOf(t);-1!==s&&this.hw.splice(s,1),this.ow.delete(t.Pc())}Nw(){Fl.bh(this.hw),this.ow.clear()}av(t){return this.ow.get(t)||null}lv(){return this.aw}uv(){this.cv(this.aw)}fv(){return this.lw}dv(){this.cv(this.lw)}pv(){this.cv(this.uw)}mv(){this.cv(this.cw)}gv(){this.cv(this.fw)}yv(){this.cv(this.dw)}Sv(){this.cv(this.pw)}wv(){this.cv(this.mw)}vv(){this.cv(this.gw)}bv(){this.cv(this.yw)}Mv(){this.cv(this.Sw)}xv(){this.cv(this.ww)}Tv(t){this.Mw=t}Cv(){return this.Mw}Iv(t,s,e,i){const n=Fl.DS.Gv._v(t,s,e,i);let r=this.bw.get(n);return r||(r=Fl.zn(Fl.DS.Gv,this,t,s,e,i),this.bw.set(n,r)),r.Pv(),r}Av(t){t.Rv(),0===t.Ev()&&(this.Mw===t&&(this.Mw=null),this.bw.delete(t.Ov()),t.Hn())}Fv(t){Fl.bh(this.xw),this.Tw.clear();let s=0;for(const e of t){const t=e[0],i=e[1],n=e[2];this.xw.push([i,n]),this.Tw.set(t,{number:s,Dv:i,Lv:n}),s++}}kv(t){return this.xw[t]}Nv(t){return this.kv(t)[0]}Bv(t){return this.kv(t)[1]}$v(t){const s=this.Tw.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Wv(t){const s=this.Tw.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Vv(t){this.Cw=t}jv(){return this.Cw}Uv(t){this.Iw=t,this.Mw=null}zv(){return this.Iw}iy(t,s,e,i){const n=Fl.rr(t,s,e,i),r=Math.sin(n),h=Math.cos(n),o=.5*this._w,a=r*o,l=h*o,u=this.Pw;2===u?this.Hv(t,s,0,e,i,0,a,l):1===u?this.Jv(t,s,0,e,i,0,a,l):this.qv(t,s,0,e,i,0,a,l)}Yv(t,s,e,i,n,r){const h=Fl.rr(t,s,i,n),o=Math.sin(h),a=Math.cos(h),l=.5*this._w,u=o*l,c=a*l,f=this.Pw;2===f?this.Hv(t,s,e,i,n,r,u,c):1===f?this.Jv(t,s,e,i,n,r,u,c):this.qv(t,s,e,i,n,r,u,c)}Hv(t,s,e,i,n,r,h,o){const a=this.Rw,l=t+a-o,u=s+a-h,c=i+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,S=u+o+p,w=c+h,v=f-o,b=c-h-d,M=f+o-p;this.Xv(m,g,e,w,v,r,b,M,r,y,S,e,Jl)}Jv(t,s,e,i,n,r,h,o){const a=this.Rw,l=t+a-o,u=s+a-h,c=i+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,S=f-o,w=c-h,v=f+o;this.Xv(d,p,e,y,S,r,w,v,r,m,g,e,Jl)}qv(t,s,e,i,n,r,h,o){const a=this.Rw,l=t+a,u=s+a,c=i+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,S=f-o,w=c-h,v=f+o;this.Xv(d,p,e,y,S,r,w,v,r,m,g,e,Jl)}Kv(t,s,e,i,n,r){const h=Fl.rr(t,s,e,i),o=Math.sin(h),a=Math.cos(h),l=.5*this._w,u=o*l,c=a*l,f=this.Pw;2===f?this.Zv(t,s,e,i,u,c,n,r):1===f?this.Qv(t,s,e,i,u,c,n,r):this.tb(t,s,e,i,u,c,n,r)}Zv(t,s,e,i,n,r,h,o){const a=this.Rw,l=t+a-r,u=s+a-n,c=e+a+r,f=i+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,S=u+r+p,w=c+n,v=f-r,b=c-n-d,M=f+r-p;zl.set(m,g,w,v,b,M,y,S),Hl.set(h,0,o,0),this.sb(zl,Hl)}Qv(t,s,e,i,n,r,h,o){const a=this.Rw,l=t+a-r,u=s+a-n,c=e+a+r,f=i+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,S=f-r,w=c-n,v=f+r;zl.set(d,p,y,S,w,v,m,g),Hl.set(h,0,o,0),this.sb(zl,Hl)}tb(t,s,e,i,n,r,h,o){const a=this.Rw,l=t+a,u=s+a,c=e+a,f=i+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,S=f-r,w=c-n,v=f+r;zl.set(d,p,y,S,w,v,m,g),Hl.set(h,0,o,0),this.sb(zl,Hl)}eb(t,s,e,i){const n=.5*this._w,r=this.Pw;2===r?this.ib(t,s,e,i,n):1===r?this.nb(t,s,e,i,n):this.rb(t,s,e,i,n)}ib(t,s,e,i,n){this.Hv(t,s,0,e,s,0,0,n),this.Hv(e,s,0,e,i,0,n,0),this.Hv(e,i,0,t,i,0,0,-n),this.Hv(t,i,0,t,s,0,-n,0)}nb(t,s,e,i,n){this.Jv(t,s,0,e,s,0,0,n),this.Jv(e,s,0,e,i,0,n,0),this.Jv(e,i,0,t,i,0,0,-n),this.Jv(t,i,0,t,s,0,-n,0)}rb(t,s,e,i,n){this.qv(t,s,0,e,s,0,0,n),this.qv(e,s,0,e,i,0,n,0),this.qv(e,i,0,t,i,0,0,-n),this.qv(t,i,0,t,s,0,-n,0)}hb(t){this.eb(t.Za(),t.Qa(),t.tl(),t.sl())}ob(t){const s=Fl.rr(t.Br(),t.$r(),t.Wr(),t.Vr()),e=Math.sin(s),i=Math.cos(s),n=.5*this._w,r=e*n,h=i*n,o=this.Pw;2===o?this.ab(t,r,h):1===o?this.lb(t,r,h):this.ub(t,r,h)}ab(t,s,e){this.Hv(t.Br(),t.$r(),0,t.Wr(),t.Vr(),0,s,e),this.Hv(t.Wr(),t.Vr(),0,t.jr(),t.Ur(),0,e,-s),this.Hv(t.jr(),t.Ur(),0,t.zr(),t.Hr(),0,-s,-e),this.Hv(t.zr(),t.Hr(),0,t.Br(),t.$r(),0,-e,s)}lb(t,s,e){this.Jv(t.Br(),t.$r(),0,t.Wr(),t.Vr(),0,s,e),this.Jv(t.Wr(),t.Vr(),0,t.jr(),t.Ur(),0,e,-s),this.Jv(t.jr(),t.Ur(),0,t.zr(),t.Hr(),0,-s,-e),this.Jv(t.zr(),t.Hr(),0,t.Br(),t.$r(),0,-e,s)}ub(t,s,e){this.qv(t.Br(),t.$r(),0,t.Wr(),t.Vr(),0,s,e),this.qv(t.Wr(),t.Vr(),0,t.jr(),t.Ur(),0,e,-s),this.qv(t.jr(),t.Ur(),0,t.zr(),t.Hr(),0,-s,-e),this.qv(t.zr(),t.Hr(),0,t.Br(),t.$r(),0,-e,s)}cb(t){this._w=t,this.Gw[this.Gw.length-1]=t}fb(){return this._w}pb(t){if(this.Gw.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.Gw.push(t),this._w=t}mb(){if(this.Gw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Gw.pop(),this._w=this.Gw.at(-1)}gb(){this.Pw=0,this.Aw[this.Aw.length-1]=0}yb(){this.Pw=1,this.Aw[this.Aw.length-1]=0}Sb(){this.Pw=2,this.Aw[this.Aw.length-1]=0}wb(t){if("butt"===t)this.bb();else if("square"===t)this.Mb();else{if("zag"!==t)throw new Error("invalid line cap");this.xb()}}bb(){if(this.Aw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Aw.push(0),this.Pw=0}Mb(){if(this.Aw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Aw.push(1),this.Pw=1}xb(){if(this.Aw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Aw.push(2),this.Pw=2}Tb(){if(this.Aw.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Aw.pop(),this.Pw=this.Aw.at(-1)}Cb(t){this.Rw=t,this.Ew[this.Ew.length-1]=t}Ib(){return this.Rw}_b(t){if(this.Ew.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.Ew.push(t),this.Rw=t}Gb(){if(this.Ew.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Ew.pop(),this.Rw=this.Ew.at(-1)}Pb(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const e=s-2,i=e-1,n=t[0],r=t[1];for(let s=0;s<e;s+=2){const e=2*s,h=t[e+2],o=t[e+3],a=t[e+4],l=t[e+5];if(s===i)this.Ab(n,r,h,o,a,l,a,l);else{const s=t[e+6],i=t[e+7];this.Ab(n,r,h,o,a,l,s,i)}}}Rb(){return 3}Eb(){this.Ob(!0),this.Ow++}Fb(){return this.Ow}Db(){this.Ow++}Lb(t){this.Fw=!!t}kb(){return this.Fw}Nb(t){this.Dw=!!t}Bb(){return this.Dw}$b(){return!1}sv(){return!1}Wb(){}Vb(){}jb(){}Ub(){return this.Wb()+this.Vb()+this.jb()}zb(){return Fl.zn(Fl.DS.Hb,this)}}}{const Xl=self._s;Xl.DS.Jb=class{constructor(t,s){this.Yn=s.name,this.qb=t,this.Yb=s.Xb||0,this.Kb=s.Zb||0,this.Qb=!!s.tM,this.sM=!!s.eM,this.iM=!!s.nM,this.rM=!!s.hM,this.oM=!!s.animated,this.aM=!!s.lM,this.uM=!!s.cM,this.fM=!1,this.dM=this.Qb||this.aM||0!==this.Yb||0!==this.Kb}Hn(){this.qb=null}pM(){return this.qb}Pc(){return this.Yn}mM(){return 0!==this.Yb||0!==this.Kb}gM(){return this.Yb}yM(){return this.Kb}SM(){return this.Qb}wM(){return this.sM}vM(){return this.iM}bM(){return this.rM}MM(){return this.oM}xM(){return this.aM}TM(){return this.uM}CM(){return this.fM}IM(){return this.dM}_M(){return!1}}}{const Kl=self._s;Kl.DS.Gv=class{constructor(t,s,e,i,n){this.qb=t,this.Up=0,this.GM=null,this.PM="",this.AM=e,this.RM=Kl.zn(Kl.To),this.RM.set(i),this.EM=n,"string"==typeof s?this.PM=s:(this.GM=s,this.PM=this.GM.Pc())}Hn(){if(this.Up>0)throw new Error("releasing state group still in use");this.qb=null,this.GM=null,this.PM=""}OM(){const t=this.qb;t.cv(this.GM),t.FM(this.AM),t.DM(this.RM),t.Uv(this.EM),t.Tv(this)}Ov(){return Kl.DS.Gv._v(this.PM,this.AM,this.RM,this.EM)}Pv(){++this.Up}Rv(){--this.Up}Ev(){return this.Up}LM(){this.GM=null}kM(t){if(this.GM=t.av(this.PM),!this.GM)throw new Error("failed to restore shader program")}static _v(t,s,e,i){return("string"==typeof t?t:t.Pc())+","+s+","+e.No()+","+e.Bo()+","+e.$o()+","+e.Wo()+","+i}}}{let Zl=function(t,s,e){const i=e.Br(),n=e.$r(),r=e.Wr()-i,h=e.Vr()-n;return[i+r*t+(e.zr()-i)*s,n+h*t+(e.Hr()-n)*s]};interpolateQuad=Zl;const Ql=self._s,tu=Ql.zn(Ql.Gl);Ql.DS.NM=class{constructor(t,s,e){this.BM=t,this.$M=s,this.WM=e,this.Pa=NaN,this.Aa=NaN,this.EM=NaN,this.VM=NaN,this.jM=NaN,this.Pa=0,this.Aa=0,this.EM=0,this.VM=0,this.jM=0}UM(t,s,e,i){this.Pa=t,this.Aa=s,this.VM=e,this.jM=i}zM(){return this.Pa}HM(t){this.Pa!==t&&(this.Pa=t,this.BM.JM())}qM(){return this.Aa}YM(t){this.Aa!==t&&(this.Aa=t,this.BM.JM())}XM(){return this.EM}KM(t){this.EM!==t&&(this.EM=Math.max(t,0),this.BM.JM())}ZM(){return this.VM}QM(t){this.VM=t}tx(){return this.jM}sx(t){this.jM=t}ix(t,s,e){[this.Pa,this.Aa]=Zl(t.Pa,t.Aa,s),this.EM=t.EM,this.VM=Ql._t(e.Za(),e.tl(),t.VM),this.jM=Ql._t(e.Qa(),e.sl(),t.jM)}nx(t,s,e){[this.Pa,this.Aa]=Zl(t.Pa,t.Aa,s),this.EM=t.EM,[this.VM,this.jM]=Zl(t.VM,t.jM,e)}hx(){return{x:this.zM(),y:this.qM(),z:this.XM(),u:this.ZM(),v:this.tx()}}ox(t){this.HM(t.x),this.YM(t.y),t.hasOwnProperty("z")&&this.KM(t.z),this.QM(t.u),this.sx(t.v)}lx(){return this.BM}ux(){return this.$M}mx(){return this.WM}},Ql.DS.gx=class{constructor(t,s,e){if(t<2||s<2)throw new Error("invalid mesh size");this.yx=t,this.Sx=s,this.wx=e||null,this.vx=[],this.bx=0,this.Mx=0,this.xx=1,this.Tx=1,this.Cx=0,this.Ix=!1;const i=t-1,n=s-1;for(let e=0;e<s;++e){const s=[];for(let r=0;r<t;++r){const t=Ql.zn(Ql.DS.NM,this,r,e),h=r/i,o=e/n;t.UM(h,o,h,o),s.push(t)}this.vx.push(s)}}Hn(){Ql.bh(this.vx)}_x(){return this.yx}Gx(){return this.Sx}Px(){return this.wx}Ax(){return this.vx}JM(){this.Ix=!0}Rx(){if(!this.Ix)return;let t=1/0,s=1/0,e=-1/0,i=-1/0,n=0;for(const r of this.vx)for(const h of r){const r=h.zM(),o=h.qM();t=Math.min(t,r),s=Math.min(s,o),e=Math.max(e,r),i=Math.max(i,o),n=Math.max(n,h.XM())}this.bx=t,this.Mx=s,this.xx=e,this.Tx=i,this.Cx=n,this.Ix=!1}Ex(){return this.Rx(),this.bx}Ox(){return this.Rx(),this.Mx}Fx(){return this.Rx(),this.xx}Dx(){return this.Rx(),this.Tx}Lx(){return this.Rx(),this.Cx}kx(){return this.Lx()>0}Nx(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.yx||s<0||s>=this.Sx?null:this.vx[s][t]}Bx(t,s,e){const i=e instanceof Ql.Rect;if(t._x()!==this._x()||t.Gx()!==this.Gx())throw new Error("source mesh wrong size");const n=t.vx,r=this.vx;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];i?r.ix(n,s,e):r.nx(n,s,e)}}}$x(t){const s=this.vx;let e=s[0];for(let i=1,n=s.length;i<n;++i){const n=s[i];let r=e[0],h=n[0];for(let s=1,i=n.length;s<i;++s){const i=e[s],o=n[s];tu.set(r.ZM(),r.tx(),i.ZM(),i.tx(),o.ZM(),o.tx(),h.ZM(),h.tx()),t.Xv(r.zM(),r.qM(),r.XM(),i.zM(),i.qM(),i.XM(),o.zM(),o.qM(),o.XM(),h.zM(),h.qM(),h.XM(),tu),r=i,h=o}e=n}}Wx(t,s){s||(s=(t,s,e)=>[t,s,e]);const e=this.vx;let i=e[0];for(let n=1,r=e.length;n<r;++n){const h=e[n];let o=i[0],a=h[0];for(let e=1,l=h.length;e<l;++e){const u=i[e],c=h[e],[f,d,p]=s(o.zM(),o.qM(),o.XM()),[m,g,y]=s(u.zM(),u.qM(),u.XM()),[S,w,v]=s(c.zM(),c.qM(),c.XM()),[b,M,x]=s(a.zM(),a.qM(),a.XM());t.Yv(f,d,p,m,g,y),t.Yv(f,d,p,S,w,v),t.Yv(f,d,p,b,M,x),e===l-1&&t.Yv(m,g,y,S,w,v),n===r-1&&t.Yv(b,M,x,S,w,v),o=u,a=c}i=h}}Vx(t){const s=.001,e=.99999999,i=t.du(),n=[],r=this._x()-1,h=this.Gx()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=i[0],f=i[1],d=Ql.Kn(Math.floor(c*r),0,l),p=Ql.Kn(Math.floor(f*h),0,u),m=!0,g=0,y=0,S=0,w=-1;const v=()=>{c=Ql.Kn(Ql._t(c,g,S),0,1),f=Ql.Kn(Ql._t(f,y,S),0,1),n.push(c,f)};for(let t=0,b=i.length;t<b;t+=2){c=i[t],f=i[t+1],n.push(c,f),d=Ql.Kn(Math.floor(c*r),0,l),p=Ql.Kn(Math.floor(f*h),0,u);const M=(t+2)%b;for(g=i[M],y=i[M+1],w=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,i=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Ql.Xr(c,f,t,i,r,i,r,h),0!==w&&(S=Ql.Yr(c,f,g,y,t,i,r,h,-.001),S>=0&&S<=e))v(),m=!m,w=0;else if(p>0&&2!==w&&(S=Ql.Yr(c,f,g,y,t,i,r,i,s),S>=0&&S<=e))v(),p--,m=!1,w=4;else if(d<l&&3!==w&&(S=Ql.Yr(c,f,g,y,r,i,r,h,s),S>=0&&S<=e))v(),d++,m=!1,w=1;else if(d>0&&1!==w&&(S=Ql.Yr(c,f,g,y,t,i,t,h,s),S>=0&&S<=e))v(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&(S=Ql.Yr(c,f,g,y,t,h,r,h,s),S>=0&&S<=e)))break;v(),p++,m=!0,w=2}}}return Ql.zn(Ql.au,n)}jx(t,s){const e=this.Ux(t);this.zx(e),s.mu(e)}Ux(t){const s=[],e=t.du();for(let t=0,i=e.length;t<i;t+=2){const i=e[t],n=e[t+1],[r,h]=this.Hx(i,n);s.push(r,h)}return s}Hx(t,s){const e=this._x()-1,i=this.Gx()-1,n=1/e,r=1/i,h=Ql.Kn(Math.floor(t*e),0,e-1),o=Ql.Kn(Math.floor(s*i),0,i-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.Nx(h,o),d=this.Nx(h+1,o+1),p=Ql.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.Nx(h+(p?1:0),o+(p?0:1)),[S,w,v]=Ql.Kr(t,s,a,l,m,g,u,c);return Ql.Zr(S,w,v,f.zM(),f.qM(),f.XM(),y.zM(),y.qM(),y.XM(),d.zM(),d.qM(),d.XM())}zx(t){const s=[],e=1e-7;let i=t[0],n=t[1],r=i-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-i,d=c-n,p=Math.abs(f)<e&&Math.abs(r)<e&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<e&&Math.abs(h)<e&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(i,n),i=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Ql.Ch(t,s)}hx(){return{cols:this._x(),rows:this.Gx(),points:this.vx.map((t=>t.map((t=>t.hx()))))}}ox(t){const s=this._x(),e=this.Gx();if(t.cols!==s||t.rows!==e)throw new Error("mesh data wrong size");const i=t.points;for(let t=0;t<e;++t){const e=i[t];for(let i=0;i<s;++i)this.Nx(i,t).ox(e[i])}}}}{let su=function(t,s){let e,i,n,r;switch(t){case"rgba8":e=s.RGBA8,i=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":e=s.RGB8,i=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":e=s.RGBA4,i=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":e=s.RGB5_A1,i=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":e=s.RGB565,i=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{Jx:e,qx:i,format:n,type:r}};GetFormatSpecifiers=su;const eu=self._s,iu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),nu=new Set(["nearest","bilinear","trilinear"]),ru=new Set(["default","low","high"]),hu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),ou={Yx:"clamp-to-edge",Xx:"clamp-to-edge",Kx:"trilinear",Zx:0,Qx:"rgba8",tT:!0,sT:"default",eT:!0,iT:!1,width:-1,height:-1},au={eT:!0,flipY:!1},lu=new Set;eu.DS.nT=class{constructor(t){this.qb=t,this.rT=null,this.Py=0,this.Ay=0,this.hT=!0,this.oT="clamp-to-edge",this.aT="clamp-to-edge",this.lT="trilinear",this.uT=0,this.cT="rgba8",this.fT=!1,this.dT="default",this.Up=0}pT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer||null===t))throw new Error("invalid texture source");if(s=Object.assign({},ou,s),this.rT)throw new Error("already created texture");if(this.oT=s.Yx,this.aT=s.Xx,this.lT=s.Kx,this.uT=s.Zx,this.cT=s.Qx,this.fT=!!s.tT&&this.qb.kb(),this.dT=s.sT,!hu.has(this.oT)||!hu.has(this.aT))throw new Error("invalid wrap mode");if(!nu.has(this.lT))throw new Error("invalid sampling");if(!iu.has(this.cT))throw new Error("invalid pixel format");if(!ru.has(this.dT))throw new Error("invalid mipmap quality");if(this.hT=!0,t instanceof ArrayBuffer||null===t||s.iT){if(this.Py=s.width,this.Ay=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Py*this.Ay*4)throw new Error("ArrayBuffer wrong size")}else this.Py=t.width,this.Ay=t.height;if(this.Py<=0||this.Ay<=0)throw new Error("invalid texture data size");if(s.iT){const s=eu.co(this.Py,this.Ay);s.getContext("2d").drawImage(t,0,0,this.Py,this.Ay),t=s}const e=eu.vr(this.Py)&&eu.vr(this.Ay),i=this.qb.mT();if(this.Py>i||this.Ay>i)throw new Error("texture data exceeds maximum texture size");const n=this.qb.gT(),r=this.qb.yT();this.rT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.rT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.eT),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=su(this.cT,n);if(this.qb.ST()||e||!this.wT())if(r>=2){let s;s=this.fT?Math.floor(Math.log2(Math.max(this.Py,this.Ay))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.Jx,this.Py,this.Ay),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Py,this.Ay,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.qx,this.Py,this.Ay,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.qx,this.Py,this.Ay,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.qx,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Py,this.Ay)),t instanceof ImageData){const s=eu.co(this.Py,this.Ay);s.getContext("2d").putImageData(t,0,0),t=s}const s=eu.co(eu.br(this.Py),eu.br(this.Ay)),e=s.getContext("2d");e.imageSmoothingEnabled="nearest"!==this.lT,e.drawImage(t,0,0,this.Py,this.Ay,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.qx,h.format,h.type,s)}null!==t&&this.vT(n),n.bindTexture(n.TEXTURE_2D,null),this.qb.bT(),this.Up=1,lu.add(this)}MT(t,s,e){if(e=Object.assign({},ou,e),this.rT)throw new Error("already created texture");if(this.oT=e.Yx,this.aT=e.Xx,this.lT=e.Kx,this.cT=e.Qx,this.fT=!!e.tT&&this.qb.kb(),this.dT=e.sT,!hu.has(this.oT)||!hu.has(this.aT))throw new Error("invalid wrap mode");if(!nu.has(this.lT))throw new Error("invalid sampling");if(!iu.has(this.cT))throw new Error("invalid pixel format");if(!ru.has(this.dT))throw new Error("invalid mipmap quality");this.hT=!1,this.Py=Math.floor(t),this.Ay=Math.floor(s);const i=eu.vr(this.Py)&&eu.vr(this.Ay),n=this.qb.mT();if(this.Py<=0||this.Ay<=0)throw new Error("invalid texture size");if(this.Py>n||this.Ay>n)throw new Error("texture exceeds maximum texture size");if(!this.qb.ST()&&this.wT()&&!i)throw new Error("non-power-of-two tiled textures not supported");const r=this.qb.gT(),h=this.qb.yT();this.rT=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.rT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.eT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=su(this.cT,r),a=h>=2?o.Jx:o.qx;r.texImage2D(r.TEXTURE_2D,0,a,this.Py,this.Ay,0,o.format,o.type,null),this.vT(r),r.bindTexture(r.TEXTURE_2D,null),this.qb.bT(),this.Up=1,lu.add(this)}xT(t){if("default"===this.dT)return this.hT?t.NICEST:t.FASTEST;if("low"===this.dT)return t.FASTEST;if("high"===this.dT)return t.NICEST;throw new Error("invalid mipmap quality")}wT(){return"clamp-to-edge"!==this.oT||"clamp-to-edge"!==this.aT}TT(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}vT(t){const s=eu.vr(this.Py)&&eu.vr(this.Ay);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.TT(t,this.oT)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.TT(t,this.aT)),"nearest"===this.lT)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.fT=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.qb.ST())&&this.fT){t.hint(t.GENERATE_MIPMAP_HINT,this.xT(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.lT&&!this.qb.Bb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.fT=!1;const e=this.qb.CT();e&&this.uT>0&&"nearest"!==this.lT&&t.texParameterf(t.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.uT,this.qb.IT()))}_T(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.rT||this.Up<=0)throw new Error("texture not created");if(this.hT)throw new Error("cannot update static texture");s=Object.assign({},au,s);const e=t.width||t.videoWidth,i=t.height||t.videoHeight,n=this.qb.yT(),r=this.qb.gT();r.bindTexture(r.TEXTURE_2D,this.rT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.eT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=su(this.cT,r),o=n>=2?h.Jx:h.qx;try{if(this.Py===e&&this.Ay===i){const s=eu.vr(this.Py)&&eu.vr(this.Ay);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.qb.ST())&&this.fT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.xT(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Py=e,this.Ay=i;const s=eu.vr(this.Py)&&eu.vr(this.Ay);if(!this.qb.ST()&&this.wT()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.qb.ST())&&this.fT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.xT(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.qb.bT()}GT(){if(this.Up>0)throw new Error("texture still has references");if(!this.rT)throw new Error("already deleted texture");lu.delete(this),this.qb.gT().deleteTexture(this.rT),this.rT=null}PT(){return!!this.rT}AT(){return this.rT}pM(){return this.qb}RT(){this.Up++}ET(){if(this.Up<=0)throw new Error("no more references");this.Up--}OT(){return this.Up}Vg(){return this.Py}Zg(){return this.Ay}FT(){return this.hT}DT(){let t=this.Py*this.Ay;switch(this.cT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.fT&&(t+=Math.floor(t/3)),t}static LM(){lu.clear()}static LT(){return lu.values()}}}{const uu=self._s,cu=self.assert,fu=self.ls,du=fu.Ss,pu=fu.ds,mu=new Set(["nearest","bilinear","trilinear"]),gu={Kx:"trilinear",alpha:!0,depth:!1,kT:!0,NT:!0,BT:0},yu=new Set;uu.DS.$T=class{constructor(t){this.qb=t,this.WT=null,this.VT=null,this.rT=null,this.jT=null,this.Py=0,this.Ay=0,this.UT=!0,this.lT="trilinear",this.zT=!0,this.HT=!1,this.JT=!0,this.qT=0,this.YT=pu.create(),this.XT=0,this.KT=0,this.ZT=0}QT(t,s,e){e=Object.assign({},gu,e);const i=this.qb.yT();if(this.rT||this.jT)throw new Error("already created render target");if(this.lT=e.Kx,this.zT=!!e.alpha,this.HT=!!e.depth,this.JT=!!e.kT,this.UT=!!e.NT,this.qT=e.BT,!mu.has(this.lT))throw new Error("invalid sampling");if(this.qT>0&&(i<2||this.JT))throw new Error("invalid use of multisampling");if(i<2&&(this.JT=!0),this.Py=t,this.Ay=s,this.Py<=0||this.Ay<=0)throw new Error("invalid render target size");this.tC();const n=this.qb.gT();if(this.WT=n.createFramebuffer(),this.HT&&(this.VT=n.createFramebuffer()),this.JT){this.rT=this.qb.sC(this.Py,this.Ay,{Kx:this.lT,Qx:this.zT?"rgba8":"rgb8",tT:!1});const t=this.rT.AT();n.bindFramebuffer(n.FRAMEBUFFER,this.WT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.HT&&(n.bindFramebuffer(n.FRAMEBUFFER,this.VT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.jT=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.jT);const t=this.zT?n.RGBA8:n.RGB8;if(this.qT>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.qT>t&&(this.qT=t)}else this.qT=0}0===this.qT?n.renderbufferStorage(n.RENDERBUFFER,t,this.Py,this.Ay):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.qT,t,this.Py,this.Ay),n.bindFramebuffer(n.FRAMEBUFFER,this.WT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.jT),this.HT&&(n.bindFramebuffer(n.FRAMEBUFFER,this.VT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.jT)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.qb.eC();this.HT&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.WT),this.qb.iC()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),yu.add(this)}nC(t,s){if(this.Py===t&&this.Ay===s)return;this.Py=t,this.Ay=s,this.tC();const e=this.qb.gT();e.bindFramebuffer(e.FRAMEBUFFER,this.WT),this.rT?this.rT._T(new ImageData(this.Py,this.Ay)):(e.bindRenderbuffer(e.RENDERBUFFER,this.jT),e.renderbufferStorage(e.RENDERBUFFER,this.zT?e.RGBA8:e.RGB8,this.Py,this.Ay),e.bindRenderbuffer(e.RENDERBUFFER,null));const i=this.qb.eC();this.HT&&i&&(this.qb.iC()?e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0):e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i)),e.bindFramebuffer(e.FRAMEBUFFER,null)}GT(){if(!this.rT&&!this.jT)throw new Error("already deleted render target");yu.delete(this);const t=this.qb.gT();this.rT?(t.bindFramebuffer(t.FRAMEBUFFER,this.WT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.HT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.VT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.qb.rC(this.rT),this.rT=null):this.jT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.WT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.HT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.VT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.jT),this.jT=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.qb.yT()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.WT),this.HT&&t.deleteFramebuffer(this.VT);const s=this.qb.hC();s.oC=null,s.aC=null,this.WT=null}tC(){this.qb.tv(this.YT,this.Py/this.Ay),this.XT=this.qb.Xw(),this.KT=this.qb.Hw(),this.ZT=this.qb.qw()}lC(){return this.WT}uC(){return this.VT}pM(){return this.qb}cC(){return this.rT}fC(){return this.qb.Xw()===this.XT&&this.qb.Hw()===this.KT&&this.qb.qw()===this.ZT||this.tC(),this.YT}dC(){return"nearest"!==this.lT}pC(){return this.zT}mC(){return this.JT}gC(){return this.HT}Vg(){return this.Py}Zg(){return this.Ay}yC(){return this.UT}SC(){return this.qT}wC(){const t={Kx:this.lT,alpha:this.zT,kT:this.JT};return this.UT||(t.width=this.Py,t.height=this.Ay),t}vC(t){return"nearest"!==(t=Object.assign({},gu,t)).Kx===this.dC()&&!!t.alpha===this.pC()&&!!t.depth===this.gC()&&!(this.qb.yT()>=2&&!!t.kT!==this.mC())&&("number"==typeof t.width||"number"==typeof t.height?!this.yC()&&this.Vg()===Math.floor(t.width)&&this.Zg()===Math.floor(t.height):this.yC())}bC(){return this.rT?this.rT.AT():null}DT(){return this.rT?this.rT.DT():this.Py*this.Ay*(this.zT?4:3)}static async MC(t,s){const e=await t.xC(s,!0);return await uu.po(e)}static LM(){yu.clear()}static TC(){return yu.values()}static CC(t,s){for(const e of yu)e.yC()&&e.nC(t,s)}}}{const Su=self._s,wu=self.ls,vu=wu.Ss,bu=wu.ds,Mu=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);Su.DS.IC=class extends Su.DS.Jb{static async _C(t,s){const e=t.gT(),i=s.src,n=s.GC,r=s.name,h=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(h,i),e.compileShader(h);const o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,n),e.compileShader(o);const a=e.createProgram();e.attachShader(a,h),e.attachShader(a,o),e.bindAttribLocation(a,0,"aPos"),e.bindAttribLocation(a,1,"aTex"),e.bindAttribLocation(a,2,"aPoints"),e.linkProgram(a);const l=t.PC();if(l?await t.AC((()=>e.getProgramParameter(a,l.COMPLETION_STATUS_KHR))):await Su.ph(5),!e.getShaderParameter(h,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(h);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!e.getShaderParameter(o,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(o);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!e.getProgramParameter(a,e.LINK_STATUS)){const t=e.getProgramInfoLog(a);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=Su.Mm(e.getProgramInfoLog(a)||"").trim();return u&&!Su.wm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),e.deleteShader(h),e.deleteShader(o),a}static async RC(t,s){const e=await Su.DS.IC._C(t,s);return new Su.DS.IC(t,e,s)}constructor(t,s,e){super(t,e);const i=t.gT(),n=t.hC();t.Ob(),i.useProgram(s),this.EC=i,this.GM=s,this.OC="<default-device-transform>"===e.name;const r=i.getAttribLocation(s,"aPos"),h=i.getAttribLocation(s,"aTex");this.FC=i.getAttribLocation(s,"aPoints"),-1!==r&&(i.bindBuffer(i.ARRAY_BUFFER,t.DC),i.vertexAttribPointer(r,t.Rb(),i.FLOAT,!1,0,0),i.enableVertexAttribArray(r)),-1!==h&&(i.bindBuffer(i.ARRAY_BUFFER,t.LC),i.vertexAttribPointer(h,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(h)),-1!==this.FC&&(i.bindBuffer(i.ARRAY_BUFFER,t.kC),i.vertexAttribPointer(this.FC,4,i.FLOAT,!1,0,0),i.enableVertexAttribArray(this.FC)),i.bindBuffer(i.ARRAY_BUFFER,null),this.NC=new Su.DS.BC(this,"matP","mat4"),this.$C=new Su.DS.BC(this,"matMV","mat4"),this.WC=new Su.DS.BC(this,"color","vec4"),this.VC=new Su.DS.BC(this,"samplerFront","sampler"),this.jC=new Su.DS.BC(this,"pointTexStart","vec2"),this.UC=new Su.DS.BC(this,"pointTexEnd","vec2"),this.zC=new Su.DS.BC(this,"zElevation","float"),this.HC=new Su.DS.BC(this,"tileSize","vec2"),this.JC=new Su.DS.BC(this,"tileSpacing","vec2"),this.qC=new Su.DS.BC(this,"color2_","vec4"),this.YC=new Su.DS.BC(this,"outlineThickness","float"),this.XC=new Su.DS.BC(this,"samplerBack","sampler"),this.KC=new Su.DS.BC(this,"samplerDepth","sampler"),this.ZC=new Su.DS.BC(this,"destStart","vec2"),this.QC=new Su.DS.BC(this,"destEnd","vec2"),this.tI=new Su.DS.BC(this,"srcStart","vec2"),this.sI=new Su.DS.BC(this,"srcEnd","vec2"),this.eI=new Su.DS.BC(this,"srcOriginStart","vec2"),this.iI=new Su.DS.BC(this,"srcOriginEnd","vec2"),this.nI=new Su.DS.BC(this,"pixelSize","vec2"),this.rI=new Su.DS.BC(this,"seconds","float"),this.hI=new Su.DS.BC(this,"devicePixelRatio","float"),this.oI=new Su.DS.BC(this,"layerScale","float"),this.aI=new Su.DS.BC(this,"layerAngle","float"),this.lI=new Su.DS.BC(this,"layoutStart","vec2"),this.uI=new Su.DS.BC(this,"layoutEnd","vec2"),this.cI=new Su.DS.BC(this,"zNear","float"),this.fI=new Su.DS.BC(this,"zFar","float"),this.dI=!!(this.nI.pI()||this.rI.pI()||this.XC.pI()||this.ZC.pI()||this.QC.pI()||this.tI.pI()||this.sI.pI()||this.eI.pI()||this.iI.pI()||this.hI.pI()||this.oI.pI()||this.aI.pI()||this.lI.pI()||this.uI.pI());const o=e.parameters||[];this.mI=[],this.fM=this.nI.pI()||this.tI.pI()||this.sI.pI()||this.eI.pI()||this.iI.pI(),this.gI=!1,this.yI=!1,this.WC.SI(1,1,1,1),this.qC.SI(1,1,1,1),this.VC.wI(0),this.XC.wI(1),this.KC.wI(2),this.jC.vI(0,0),this.UC.vI(1,1),this.zC.bI(0),this.HC.vI(0,0),this.JC.vI(0,0),this.ZC.vI(0,0),this.QC.vI(1,1),this.tI.vI(0,0),this.sI.vI(0,0),this.eI.vI(0,0),this.iI.vI(0,0),this.nI.vI(0,0),this.hI.bI(1),this.cI.bI(t.Hw()),this.fI.bI(t.qw()),this.oI.bI(1),this.aI.bI(0),this.rI.bI(0),this.lI.vI(0,0),this.uI.vI(0,0),this.YC.bI(1);for(const t of o){const s=t[0],e=t[2],i=new Su.DS.BC(this,s,e);"color"===e?i.MI(0,0,0):i.bI(0),this.mI.push(i)}this.OC?this.xI(n.TI):(this.CI(n.TI,!0),this.II(n._I,!0));const a=n.GI;i.useProgram(a?a.GM:null)}Hn(){this.EC.deleteProgram(this.GM),this.GM=null,this.qb.ov(this),this.EC=null,super.Hn()}AI(){return this.EC}RI(){return this.GM}EI(){return this.mI.length}OI(t){return t<0||t>=this.mI.length?null:this.mI[t].FI()}DI(t){for(let s=0,e=t.length;s<e;++s)if(!this.mI[s].LI(t[s]))return!1;return!0}kI(t){for(let s=0,e=t.length;s<e;++s)this.mI[s].NI(t[s])}BI(t,s,e,i,n,r,h,o,a,l){return!(this.XC.pI()||this.nI.pI()&&!this.nI.$I(n,r)||this.ZC.pI()&&!this.ZC.$I(t.Za(),t.Qa())||this.QC.pI()&&!this.QC.$I(t.tl(),t.sl())||this.hI.pI()&&!this.hI.WI(h)||this.oI.pI()&&!this.oI.WI(o)||this.aI.pI()&&!this.aI.WI(a)||this.tI.pI()&&!this.tI.$I(s.Za(),s.Qa())||this.sI.pI()&&!this.sI.$I(s.tl(),s.sl())||this.eI.pI()&&!this.eI.$I(e.Za(),e.Qa())||this.iI.pI()&&!this.iI.$I(e.tl(),e.sl())||this.lI.pI()&&!this.lI.$I(i.Za(),i.Qa())||this.uI.pI()&&!this.uI.$I(i.Qa(),i.sl())||this.rI.pI()&&!this.rI.WI(l))}VI(t,s,e,i,n,r,h,o,a,l){this.XC.pI()||(this.nI.pI()&&this.nI.jI(n,r),this.ZC.pI()&&this.ZC.jI(t.Za(),t.Qa()),this.QC.pI()&&this.QC.jI(t.tl(),t.sl()),this.hI.pI()&&this.hI.UI(h),this.oI.pI()&&this.oI.UI(o),this.aI.pI()&&this.aI.UI(a),this.tI.pI()&&this.tI.jI(s.Za(),s.Qa()),this.sI.pI()&&this.sI.jI(s.tl(),s.sl()),this.eI.pI()&&this.eI.jI(e.Za(),e.Qa()),this.iI.pI()&&this.iI.jI(e.tl(),e.sl()),this.lI.pI()&&this.lI.jI(i.Za(),i.Qa()),this.uI.pI()&&this.uI.jI(i.Qa(),i.sl()),this.rI.pI()&&this.rI.UI(l))}CI(t,s){this.gI&&!s||this.OC||(this.NC.pI()&&this.NC.zI(t),this.gI=!0)}HI(){this.gI=!1}II(t,s){this.yI&&!s||this.OC||(this.$C.pI()&&this.$C.zI(t),this.yI=!0)}JI(){this.yI=!1}xI(t){if(!this.OC)throw new Error("not device transform shader");this.NC.zI(t);const s=this.qb,e=s.Vg()/2,i=s.Zg()/2,n=s.rv(e,i,s.Ww(s.Zg()),e,i,0,s.Zg());this.$C.zI(n)}qI(t){this.WC.pI()&&this.WC.YI(t[0],t[1],t[2],t[3])}static XI(){return Mu}static KI(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static ZI(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static QI(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static t_(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static s_(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static e_(t){return["#version 300 es",Su.DS.IC.KI(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static i_(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static n_(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static r_(t){return["#version 300 es",Su.DS.IC.KI(t),"in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static h_(t,s,e,i){let n="";return t>=2?n="#version 300 es\n"+Su.DS.IC.KI(i):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),e&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\nuniform lowp vec4 color;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&e?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!e?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||e?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||e?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= color;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static o_(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static a_(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static l_(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static u_(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static c_(t){return["#version 300 es",Su.DS.IC.KI(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static f_(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static d_(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static p_(){return["precision lowp float;","varying highp vec2 vTex;","uniform vec4 color;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static m_(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static g_(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static y_(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static S_(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static w_(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const xu=self._s,Tu=self.ls,Cu=Tu.ds,Iu=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);xu.DS.BC=class{constructor(t,s,e){if(!Iu.has(e))throw new Error("invalid uniform type");this.wx=t,this.EC=this.wx.AI(),this.Yn=s,this.Hc=e,this.v_="color"===this.Hc,this.b_=this.EC.getUniformLocation(this.wx.RI(),s),this.M_=!!this.b_;const i=Iu.get(e);this.x_=new Float32Array(i),this.T_=new Float32Array(i)}Hn(){this.wx=null,this.EC=null,this.b_=null}pI(){return this.M_}FI(){return this.Hc}C_(){return this.v_}bI(t){this.pI()&&(this.x_[0]=t,this.T_.set(this.x_),this.EC.uniform1f(this.b_,t))}wI(t){this.pI()&&(this.x_[0]=t,this.T_.set(this.x_),this.EC.uniform1i(this.b_,t))}vI(t,s){this.pI()&&(this.x_[0]=t,this.x_[1]=s,this.T_.set(this.x_),this.EC.uniform2f(this.b_,t,s))}MI(t,s,e){this.pI()&&(this.x_[0]=t,this.x_[1]=s,this.x_[2]=e,this.T_.set(this.x_),this.EC.uniform3f(this.b_,t,s,e))}SI(t,s,e,i){this.pI()&&(this.x_[0]=t,this.x_[1]=s,this.x_[2]=e,this.x_[3]=i,this.T_.set(this.x_),this.EC.uniform4f(this.b_,t,s,e,i))}I_(t){t=Math.fround(t);const s=this.x_;s[0]!==t&&(s[0]=t,this.EC.uniform1f(this.b_,t))}__(t){const s=this.x_;s[0]!==t&&(s[0]=t,this.EC.uniform1i(this.b_,t))}G_(t,s){t=Math.fround(t),s=Math.fround(s);const e=this.x_;e[0]===t&&e[1]===s||(e[0]=t,e[1]=s,this.EC.uniform2f(this.b_,t,s))}P_(t,s,e){t=Math.fround(t),s=Math.fround(s),e=Math.fround(e);const i=this.x_;i[0]===t&&i[1]===s&&i[2]===e||(i[0]=t,i[1]=s,i[2]=e,this.EC.uniform3f(this.b_,t,s,e))}YI(t,s,e,i){t=Math.fround(t),s=Math.fround(s),e=Math.fround(e),i=Math.fround(i);const n=this.x_;n[0]===t&&n[1]===s&&n[2]===e&&n[3]===i||(n[0]=t,n[1]=s,n[2]=e,n[3]=i,this.EC.uniform4f(this.b_,t,s,e,i))}zI(t){const s=this.x_;Cu.F(s,t)||(xu.Sh(s,t,0),this.EC.uniformMatrix4fv(this.b_,!1,t))}LI(t){const s=this.T_;return this.C_()?s[0]===Math.fround(t.No())&&s[1]===Math.fround(t.Bo())&&s[2]===Math.fround(t.$o()):s[0]===Math.fround(t)}NI(t){const s=this.T_;this.C_()?(s[0]=t.No(),s[1]=t.Bo(),s[2]=t.$o()):s[0]=t}WI(t){return this.T_[0]===Math.fround(t)}$I(t,s){const e=this.T_;return e[0]===Math.fround(t)&&e[1]===Math.fround(s)}UI(t){this.T_[0]=t}jI(t,s){const e=this.T_;e[0]=t,e[1]=s}}}{const _u=self._s,Gu=self.ls,Pu=Gu.ws,Au=Gu.ds,Ru=0,Eu=1,Ou=2,Fu=3,Du=4,Lu=5,ku=6,Nu=7,Bu=8,$u=9,Wu=10,Vu=11,ju=12,Uu=13,zu=14,Hu=15,Ju=16,qu=17,Yu=18,Xu=19,Ku=20,Zu=21,Qu=22,tc=23,sc=24,ec=25,ic=26,nc=27,rc=28,hc=29;_u.DS.A_=class{constructor(t){this.R_=t,this._I=Au.create(),this.TI=Au.create(),this.oC=null,this.aC=null,this.E_=!1,this.O_=Pu.v(1,1,1,1),this.GI=null,this.F_=new _u.Rect,this.clearColor=_u.zn(_u.To,0,0,0,0)}},_u.DS.D_=class{constructor(t){const s=new ArrayBuffer(96);this.Hc=0,this.L_=t,this.EC=t.R_.gT(),this.k_=0,this.N_=0,this.B_=null,this.W_=new Float32Array(s,0,16),this.V_=new Float32Array(s,64,4),this.j_=new Float32Array(s,80,4),this.U_=[]}z_(t,s){this.Hc=1,this.k_=t,this.N_=s}H_(){const t=this.EC;t.drawElements(t.TRIANGLES,this.N_,t.UNSIGNED_SHORT,this.k_)}J_(t){this.Hc=2,this.B_=t}q_(){const t=this.EC,s=this.B_;t.bindTexture(t.TEXTURE_2D,s?s.AT():null)}Y_(t){this.Hc=3,t.jo(this.V_,0)}X_(){const t=this.V_,s=this.L_;Pu.S(s.O_,t),s.GI.qI(t)}K_(t){this.Hc=21,t.jo(this.V_,0)}Z_(){const t=this.V_,s=this.L_.GI;s.qC.pI()&&s.qC.YI(t[0],t[1],t[2],t[3])}Q_(t,s){this.Hc=4,this.k_=t,this.N_=s}tG(){this.EC.blendFunc(this.k_,this.N_)}sG(t,s,e,i){this.Hc=5;const n=this.V_;n[0]=t,n[1]=s,n[2]=e,n[3]=i}eG(){const t=this.V_;this.EC.viewport(t[0],t[1],t[2],t[3])}iG(t){this.Hc=6,Au.S(this.W_,t)}nG(){const t=this.L_,s=t.R_.hw,e=t.GI,i=this.W_;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===e?n.CI(i,!0):n.HI()}Au.S(t.TI,i)}rG(t){this.Hc=7,Au.S(this.W_,t)}hG(){const t=this.L_,s=t.R_.hw,e=t.GI,i=this.W_;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===e?n.II(i,!0):n.JI()}Au.S(t._I,i)}oG(t){this.Hc=8,this.B_=t}aG(){const t=this.EC,s=this.B_,e=this.L_;s?(e.oC=s.lC(),e.aC=s.uC(),e.E_&&e.aC?t.bindFramebuffer(t.FRAMEBUFFER,e.aC):t.bindFramebuffer(t.FRAMEBUFFER,e.oC)):(e.oC=null,e.aC=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}lG(t){this.Hc=9,t.jo(this.W_,0)}uG(t,s,e,i){this.Hc=9;const n=this.W_;n[0]=t,n[1]=s,n[2]=e,n[3]=i}cG(){const t=this.EC,s=this.W_,e=this.L_.clearColor,i=s[0],n=s[1],r=s[2],h=s[3];e.Jo(i,n,r,h)||(t.clearColor(i,n,r,h),e.Po(i,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}fG(t){this.Hc=15,t.jo(this.W_,0)}dG(){const t=this.W_;this.L_.F_.set(t[0],t[1],t[2],t[3])}pG(t,s){this.Hc=10,this.k_=t,this.N_=1,this.W_[0]=s}mG(){const t=this.EC,s=this.L_,e=s.R_.lw;t.useProgram(e.GM),e.CI(s.TI,!1),e.II(s._I,!1);const i=s.F_;e.jC.pI()&&e.jC.G_(i.Za(),i.Qa()),e.UC.pI()&&e.UC.G_(i.tl(),i.sl());const n=this.W_[0];if(e.zC.pI()&&e.zC.I_(n),e.WC.pI()){const t=s.O_;e.WC.YI(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.k_/4,this.N_),t.useProgram(s.GI.GM)}gG(t){this.Hc=11,this.B_=t}yG(){const t=this.EC,s=this.L_,e=this.B_;if(s.GI=e,t.useProgram(e.GM),e.CI(s.TI,!1),e.II(s._I,!1),e.WC.pI()){const t=s.O_;e.WC.YI(t[0],t[1],t[2],t[3])}}SG(){this.Hc=12}wG(){const t=this.L_.GI,s=this.EC,e=this.W_,i=this.V_,n=this.j_;if(t.XC.pI()){const t=this.L_.R_,e=this.B_;t.vG!==e&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,e?e.AT():null),t.vG=e,s.activeTexture(s.TEXTURE0))}t.nI.pI()&&t.nI.G_(e[0],e[1]),t.ZC.pI()&&t.ZC.G_(e[2],e[3]),t.QC.pI()&&t.QC.G_(e[4],e[5]),t.hI.pI()&&t.hI.I_(this.N_),t.oI.pI()&&t.oI.I_(e[6]),t.aI.pI()&&t.aI.I_(e[7]),t.tI.pI()&&t.tI.G_(e[12],e[13]),t.sI.pI()&&t.sI.G_(e[14],e[15]),t.eI.pI()&&t.eI.G_(n[0],n[1]),t.iI.pI()&&t.iI.G_(n[2],n[3]),t.lI.pI()&&t.lI.G_(i[0],i[1]),t.uI.pI()&&t.uI.G_(i[2],i[3]),t.rI.pI()&&t.rI.I_(this.k_)}bG(){this.Hc=13}MG(){const t=this.L_.GI.mI,s=this.U_;for(let e=0,i=t.length;e<i;++e){const i=t[e],n=s[e];i.C_()?i.P_(n.No(),n.Bo(),n.$o()):i.I_(n)}}xG(t){this.Hc=14,this.B_=t}TG(){const t=this.EC,s=this.B_,e=this.L_.oC;s!==e&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==e&&t.bindFramebuffer(t.FRAMEBUFFER,e)}CG(t,s,e){this.Hc=17;const i=this.W_,n=this.L_.R_;i[0]=t.Vg(),i[1]=t.Zg(),i[2]=s?s.Vg():n.Vg(),i[3]=s?s.Zg():n.Zg(),i[4]=t.dC()?1:0,i[5]="stretch"===e;const r=this.U_;_u.bh(r),r.push(t.lC()),r.push(s?s.lC():null)}IG(){const t=this.W_,s=this.U_,e=this.EC,i=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(e.bindFramebuffer(e.READ_FRAMEBUFFER,l),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,u),a)e.blitFramebuffer(0,0,i,n,0,0,r,h,e.COLOR_BUFFER_BIT,o?e.LINEAR:e.NEAREST);else{const t=Math.min(i,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);e.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,e.COLOR_BUFFER_BIT,e.NEAREST)}}_G(t){this.Hc=18,this.B_=t}GG(){this.B_.PG(),this.B_=null}AG(t){this.Hc=19,this.B_=t}EG(){this.B_.OG(),this.B_=null}FG(t,s,e){this.Hc=20;const i=this.W_;i[0]=t,i[1]=s,i[2]=e}DG(){const t=this.L_.GI,s=this.W_;t.nI.pI()&&t.nI.G_(s[0],s[1]),t.YC.pI()&&t.YC.I_(s[2])}LG(t,s,e,i,n,r,h){this.Hc=16;const o=this.W_;t.jo(o,0),o[4]=1/s,o[5]=1/e,o[6]=i/s,o[7]=n/e,o[8]=r/s,o[9]=h/e}kG(){const t=this.L_.GI,s=this.W_;t.tI.pI()&&t.tI.G_(s[0],s[1]),t.nI.pI()&&t.nI.G_(s[4],s[5]),t.HC.pI()&&t.HC.G_(s[6],s[7]),t.JC.pI()&&t.JC.G_(s[8],s[9])}NG(t,s,e,i,n,r,h){this.Hc=29;const o=this.W_;o[0]=1/t,o[1]=1/s,o[2]=e,o[3]=i,o[4]=n,o[5]=r,o[6]=h}BG(){const t=this.L_.GI,s=this.W_;t.nI.pI()&&t.nI.G_(s[0],s[1]),t.HC.pI()&&t.HC.G_(s[2],s[3]),t.YC.pI()&&t.YC.I_(s[4]),t.JC.pI()&&t.JC.G_(s[5],s[6])}$G(t){this.Hc=22,this.k_=t?1:0}WG(){const t=this.EC,s=0!==this.k_;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}VG(t){this.Hc=23,this.k_=t?1:0}jG(){const t=this.EC;0===this.k_?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}UG(t){this.Hc=24,this.k_=t?1:0}zG(){const t=this.EC,s=this.L_,e=s.R_,i=0!==this.k_;s.E_=i,t.activeTexture(t.TEXTURE2),i?(s.aC&&t.bindFramebuffer(t.FRAMEBUFFER,s.aC),t.bindTexture(t.TEXTURE_2D,e.eC())):(t.bindTexture(t.TEXTURE_2D,null),s.aC&&t.bindFramebuffer(t.FRAMEBUFFER,s.oC)),t.activeTexture(t.TEXTURE0)}HG(){this.Hc=25}JG(){const t=this.EC;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}qG(){this.Hc=26}YG(){const t=this.EC;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}XG(){this.Hc=27}KG(){const t=this.EC;t.disable(t.STENCIL_TEST)}ZG(t,s,e,i,n){this.Hc=28,this.k_=t?1:0;const r=this.W_;r[0]=s,r[1]=e,r[2]=i,r[3]=n}QG(){const t=this.EC,s=this.W_;1===this.k_?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}tP(){switch(this.Hc){case 1:return void this.H_();case 2:return void this.q_();case 3:return void this.X_();case 4:return void this.tG();case 5:return void this.eG();case 6:return void this.nG();case 7:return void this.hG();case 8:return void this.aG();case 9:return void this.cG();case 10:return void this.mG();case 11:return void this.yG();case 12:return void this.wG();case 13:return void this.MG();case 14:return void this.TG();case 15:return void this.dG();case 16:return void this.kG();case 17:return void this.IG();case 18:return void this.GG();case 19:return void this.EG();case 20:return void this.DG();case 21:return void this.Z_();case 22:return void this.WG();case 23:return void this.jG();case 24:return void this.zG();case 25:return void this.JG();case 26:return void this.YG();case 27:return void this.KG();case 28:return void this.QG();case 29:return void this.BG()}}}}{let oc=function(t,s,e,i,n,r){s?t.strokeRect(e,i,n,r):t.fillRect(e,i,n,r)},ac=function(t){return t*(4/3)},lc=function(t,s){t=t.trim();const e=parseFloat(t);return isFinite(e)?t.endsWith("%")?s*e/100:e:0};fillOrStrokeRect=oc,ptToPx=ac,getOffsetParam=lc;const uc=self._s,cc=4096,fc=4,dc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),pc={timeout:60},mc=new uc.To(0,0,0,1),gc=new Set(["left","center","right"]),yc=new Set(["top","center","bottom"]),Sc=new Set(["word","cjk","character"]),wc=new Set(["ltr","rtl"]),vc=new Set;uc.sP&&uc.sP.addEventListener("fontload",(t=>{const s=t.font.Pc();for(const t of vc)(t.eP()||uc.Zi(t.iP(),s))&&t.nP()}));let bc=!1,Mc=!1;uc.DS.Hb=class{constructor(t,s){s=Object.assign({},pc,s),this.qb=t,this.rP="Arial",this.hP=16,this.oP=1,this.aP=0,this.lP=!1,this.uP=!1,this.cP="black",this.fP=!1,this.kg=null,this.dP=!0,this.pP=null,this.mP=new Set,this.gP="left",this.yP="top",this.Bc="",this.SP=null,this.wP=uc.zn(uc.Dg),this.vP="word",this.bP="ltr",this.MP=!1,this.xP=!1,this.TP=!1,this.CP=-1,this.IP=0,this._P=0,this.GP=0,this.Py=0,this.Ay=0,this.PP=1,this.AP=null,this.RP=null,this.EP=null,this.OP=null,this.FP=-1,this.DP=-1,this.LP="",this.kP="",this.NP="",this.BP=1,this.$P=1,this.WP=t=>this.VP(t),this.rT=null,this.jP=new uc.Rect,this.UP=1,this.zP=new uc.Ff((()=>{this.HP(),this.JP(8,8)}),s.timeout),this.qP=null,this.YP=!1,vc.add(this)}Hn(){this.pP=null,this.mP.clear(),this.kg=null,this.SP=null,this.AP=null,this.RP=null,this.EP=null,this.OP=null,this.WP=null,this.zP.Hn(),this.qP=null,this.HP(),this.wP.Pu(),this.wP=null,this.qb=null,this.YP=!0,vc.delete(this)}XP(){this.TP=!0}KP(){this.XP(),this.xP=!0}nP(){this.KP(),this.MP=!0}ZP(t){if(t=!!t,this.fP===t)return;this.fP=t;const s=this.fP?"alphabetic":"top";this.RP&&(this.RP.textBaseline=s),this.EP&&(this.EP.textBaseline=s),this.nP()}eP(){return this.fP}$g(t){this.kg!==t&&(this.kg=t,this.wP.$g(t),this.kg&&this.kg.MS()&&this.kg.xS().then((()=>this.XP())),this.nP())}QP(t){t=!!t,this.dP!==t&&(this.dP=t,this.XP())}tA(t){t||(t="serif"),this.rP!==t&&(this.rP=t,this.nP())}iP(){return this.rP}sA(t){t<.1&&(t=.1),this.hP!==t&&(this.hP=t,this.nP())}eA(){return this.hP}iA(t){this.oP!==t&&(this.oP=t,this.nP())}nA(t){this.aP!==t&&(this.aP=t,this.KP())}rA(){return this.aP}hA(t){t=!!t,this.lP!==t&&(this.lP=t,this.nP())}oA(){return this.lP}aA(t){t=!!t,this.uP!==t&&(this.uP=t,this.nP())}lA(){return this.uP}uA(t){t=Math.floor(t),this.CP!==t&&(this.CP=t,this.XP())}cA(){return this.CP}fA(t,s){let e=[];(this.lP||s.zy("b"))&&e.push("bold"),(this.uP||s.zy("i"))&&e.push("italic");const i=s.Uy("size"),n=(i?parseFloat(i.Gg):this.hP)*this.oP;t?e.push(n+"pt"):e.push(n*this.dA()+"pt");let r=this.rP;const h=s.Uy("font");return h&&h.Gg&&(r=h.Gg,this.pP&&!this.mP.has(r)&&(this.pP(r),this.mP.add(r))),r&&(dc.has(r)?e.push(r):e.push('"'+r+'"')),e.join(" ")}DM(t){t instanceof uc.To&&(t=t.ta()),this.cP!==t&&(this.cP=t,this.XP())}pA(t,s,e){mc.Ao(t,s,e),this.DM(mc)}mA(t){if(!gc.has(t))throw new Error("invalid horizontal alignment");this.gP!==t&&(this.gP=t,this.KP())}gA(){return this.gP}yA(t){if(!yc.has(t))throw new Error("invalid vertical alignment");this.yP!==t&&(this.yP=t,this.KP())}SA(){return this.yP}wA(t){if(!Sc.has(t))throw new Error("invalid word wrap mode");this.vP!==t&&(this.vP=t,this.nP())}vA(){return this.vP}bA(t){if(!wc.has(t))throw new Error("invalid text direction");this.bP!==t&&(this.bP=t,this.RP&&(this.RP.direction=this.bP),this.EP&&(this.EP.direction=this.bP),this.nP())}MA(){return this.bP}Vc(t){this.Bc!==t&&(this.Bc=t,this.nP())}xA(){return this.Bc}dA(){return this.UP*this.PP*self.devicePixelRatio}TA(t,s,e){if(void 0===e&&(e=1),t<=0||t<=0)return;if(this._P===t&&this.GP===s&&this.PP===e)return;const i=this._P;this._P=t,this.GP=s,this.PP=e;const n=self.devicePixelRatio;this.Py=this._P*this.PP*n,this.Ay=this.GP*this.PP*n;const r=Math.max(this.Py,this.Ay),h=Math.min(this.qb.mT(),4096);let o=1;r>h&&(o=h/r,this.Py=Math.min(this.Py*o,h),this.Ay=Math.min(this.Ay*o,h)),this.UP=o,this._P!==i?this.nP():this.KP()}Vg(){return this.Py}Zg(){return this.Ay}CA(){return this.PP}IA(){return this._A(),this.wP._y()}GA(){return this._A(),this.wP.Gy()+this.wP.Bg()*(this.aP+4)-this.aP}PA(){this._A();let t=0;for(const s of this.wP.Ng())for(const e of s.ny())t+=e.hy();return t}cC(){return this.zP.Bf(),this.AA(),this.rT}RA(t,s){this._A();const e=this.dA(),i=this.wP.Ng();for(const n of i){const i=n.ty()*e;if(s>=n.Wy()-n.Zg()*e+i&&s<n.Wy()+i)for(const s of n.ny())if(t>=s.By()&&t<s.By()+s.Vg()*e)return s}return null}*EA(t){this._A();const s=this.wP.Ng();for(const e of s)for(const s of e.ny()){const e=s.Uy("tag");e&&uc.Zi(e.Gg,t)&&(yield s)}}OA(t,s){for(const e of this.EA(t)){if(0===s)return e;--s}return null}FA(t){let s=0;for(const e of this.EA(t))++s;return s}AA(){(!this.rT||this.TP||this.xP||this.MP)&&(this.YP||this.Py<=0||this.Ay<=0||(this.TP=!1,this.DA()))}DA(){this.YP||(this._A(),this.JP(Math.max(uc.br(Math.ceil(this.Py)),128),Math.max(uc.br(Math.ceil(this.Ay)),64)),this.LA(),this.kA(),this.zP.Bf())}JP(t,s){this.AP||(this.AP=uc.co(16,16));let e=!1;this.FP===t&&this.DP===s||(this.FP=t,this.DP=s,this.AP.width=t,this.AP.height=s,e=!0),this.RP||(this.RP=this.AP.getContext("2d"),e=!0),e?(this.RP.textBaseline=this.fP?"alphabetic":"top",this.RP.direction=this.bP,this.RP.font=this.LP,this.RP.fillStyle=this.NP,this.RP.strokeStyle=this.NP,this.RP.globalAlpha=this.BP,this.RP.lineWidth=this.$P):this.RP.clearRect(0,0,t,s)}NA(){this.EP||(this.EP=uc.co(16,16).getContext("2d"),this.OP=uc.co(16,16).getContext("2d"),this.EP.textBaseline=this.fP?"alphabetic":"top",this.OP.textBaseline="top",this.EP.direction=this.bP,this.OP.direction=this.bP)}BA(t){this.kP!==t&&(this.kP=t,this.EP.font=t,this.OP.font=t)}$A(){if(!bc){bc=!0,this.NA();const t=this.EP.measureText("test");Mc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Mc}_A(){this.WA(),this.VA()}WA(){this.MP&&(this.NA(),!this.fP||this.SP&&this.SP.toString()===this.Bc||(this.SP=new uc.pn(this.Bc,{dg:!0})),this.wP.Dg(this.fP?this.SP.Ig():this.Bc,this.WP,this._P,this.vP,0),this.MP=!1)}VA(){this.xP&&(this.jA(),this.xP=!1)}VP(t){const s=t.qg()?t.yy().join(""):" ";this.BA(this.fA(!0,t));const e=t.Uy("size"),i=(e?parseFloat(e.Gg):this.hP)*this.oP,n=this.EP.measureText(s);let r=0;if(this.fP&&this.$A()){const t=this.OP.measureText(s);r=n.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:n.width,height:ac(i),fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,Jg:r}}UA(t){this.LP!==t&&(this.LP=t,this.RP.font=t)}zA(t){this.NP!==t&&(this.NP=t,this.RP.fillStyle=t,this.RP.strokeStyle=t)}HA(t){this.BP!==t&&(this.BP=t,this.RP.globalAlpha=t)}JA(t){this.$P!==t&&(this.$P=t,this.RP.lineWidth=t)}jA(){const t=this.dA(),s=(4+this.aP)*t;let e=0;const i=this.wP.Ng();if(0===i.length)return;for(const t of i){t.Ny(NaN),t.$y(NaN);for(const s of t.ny())s.Ny(NaN),s.$y(NaN)}const n=this.fP&&this.$A();let r=i[0].Zg()*t;if("center"===this.yP){const h=i.reduce(((e,i)=>e+i.Zg()*t+s),0)-s;e=Math.max(this.Ay/2-h/2,0),n&&(r=i[0].sy()*t)}else if("bottom"===this.yP){const r=i.reduce(((e,i)=>e+i.Zg()*t+s),0)-this.aP*t,h=n?i.at(-1).ty()*t:0;e=this.Ay-r-h-2}for(let n=0,h=i.length;n<h;++n){const h=i[n],o=h.Zg()*t,a=e;if(this.fP){if(e+=0===n?r:o,n>0&&e>this.Ay-4*t)break}else if(n>0&&e>=this.Ay-o)break;a>=0&&this.qA(h,e,t),this.fP||(e+=o),e+=s}}qA(t,s,e){let i=0;"center"===this.gP?i=Math.floor((this.Py-t.Vg()*e)/2):"right"===this.gP&&(i=this.Py-t.Vg()*e),t.Ny(i),t.$y(s);for(const n of"ltr"===this.bP?t.ny():t.Ly())this.YA(n,i,s,e),i+=n.Vg()*e}YA(t,s,e,i){const n=t.Uy("offsetx");s+=n?lc(n.Gg,t.Zg())*i:0;const r=t.Uy("offsety");if(e+=r?lc(r.Gg,t.Zg())*i:0,t.Xg()){const s=t.Uy("iconoffsety");e+=s?lc(s.Gg,t.Zg())*i:.2*t.Zg()*i}t.Ny(s),t.$y(e)}LA(){this.RP.imageSmoothingEnabled=this.dP,this.RP.imageSmoothingQuality="high",this.IP=0;const t=this.dA(),s=this.wP.Ng();for(const e of s)this.XA(e,t)}XA(t,s){const e=t.By(),i=t.Wy();if(Number.isFinite(e)&&Number.isFinite(i))for(const e of"ltr"===this.bP?t.ny():t.Ly())this.KA(e,s,t.Zg())}KA(t,s,e){const i=this.RP,n=t.By(),r=t.Wy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=e/16;let o=t.Vg()*s;const a=t.Zg()*s,l=t.Zg()/16,u=(4+this.aP)*s;let c=t.qg()?t.yy():null;if(-1!==this.CP){if(this.IP>=this.CP)return;t.qg()&&this.IP+c.length>this.CP&&(c=c.slice(0,this.CP-this.IP),o=this.VP(t).width*s),this.IP+=t.hy()}const f=t.Uy("background"),d=t.zy("u"),p=t.zy("s");if(t.qg()&&uc.vm(c)&&!f&&!d&&!p||t.zy("hide"))return;const m=t.Uy("color"),g=t.Uy("opacity");this.HA(g?parseFloat(g.Gg)/100:1),f&&(this.zA(f.Gg),i.fillRect(n,r-a,o,a+u));const y=t.Uy("linethickness"),S=y?parseFloat(y.Gg):1,w=t.zy("stroke");if(w&&this.JA(.5*l*S*this.dA()),t.qg()){const s=c.join("");if(this.UA(this.fA(!1,t)),!w){this.JA(.5*l*S*this.dA());const e=t.Uy("outlineback");e&&(this.zA(e.Gg),this.ZA(!0,s,n,r,o))}if(this.zA(m?m.Gg:this.cP),this.ZA(w,s,n,r,o),!w){this.JA(.5*l*S*this.dA());const e=t.Uy("outline");e&&(this.zA(e.Gg),this.ZA(!0,s,n,r,o))}}else if(t.Xg()&&t.Vg()>0){const s=t.Qy(this.kg);s&&i.drawImage(s,n,r-a,o,a)}if(this.zA(m?m.Gg:this.cP),d&&oc(i,w,n,r+s*h,o,s*h*S),p){const t=s*l,e=r-a/4+t/2;i.fillRect(n,e-t*S/2,o,t*S)}}ZA(t,s,e,i,n){"rtl"===this.bP&&(e+=n),t?"Gecko"===uc.Zs.ne?this.RP.strokeText(s,e,i,n):this.RP.strokeText(s,e,i):"Gecko"===uc.Zs.ne?this.RP.fillText(s,e,i,n):this.RP.fillText(s,e,i)}kA(){this.qb.QA()||(this.rT||(this.rT=this.qb.sC(this.AP.width,this.AP.height,{tT:!0,sT:"high"})),this.qb.tR(this.AP,this.rT),this.jP.set(0,0,this.Py/this.rT.Vg(),this.Ay/this.rT.Zg()),this.qP&&this.qP())}sR(){return this.jP}HP(){this.rT&&(this.qb.QA()||this.qb.rC(this.rT),this.rT=null)}static LM(){for(const t of vc)t.HP()}static eR(){return vc.values()}}}{const xc=self._s;class Tc{constructor(t){this.EC=t.gT(),this.iR=t.yT(),this.nR=t.rR(),this.hR=null,this.Nf=!1,this.oR=!1,this.aR=0,1===this.iR?this.hR=this.nR.createQueryEXT():this.hR=this.EC.createQuery()}Hn(){this.lR(),this.EC=null,this.nR=null,this.oR=!1}lR(){this.hR&&(1===this.iR?this.nR.deleteQueryEXT(this.hR):this.EC.deleteQuery(this.hR),this.hR=null)}PG(){if(this.Nf)throw new Error("query already active");1===this.iR?this.nR.beginQueryEXT(this.nR.TIME_ELAPSED_EXT,this.hR):this.EC.beginQuery(this.nR.TIME_ELAPSED_EXT,this.hR),this.Nf=!0}OG(){if(!this.Nf)throw new Error("query not active");1===this.iR?this.nR.endQueryEXT(this.nR.TIME_ELAPSED_EXT):this.EC.endQuery(this.nR.TIME_ELAPSED_EXT),this.Nf=!1}uR(){if(!this.hR||this.oR||this.Nf)return;let t=!1;t=1===this.iR?this.nR.getQueryObjectEXT(this.hR,this.nR.QUERY_RESULT_AVAILABLE_EXT):this.EC.getQueryParameter(this.hR,this.EC.QUERY_RESULT_AVAILABLE);const s=this.EC.getParameter(this.nR.GPU_DISJOINT_EXT);t&&!s&&(1===this.iR?this.aR=this.nR.getQueryObjectEXT(this.hR,this.nR.QUERY_RESULT_EXT):this.aR=this.EC.getQueryParameter(this.hR,this.EC.QUERY_RESULT),this.aR/=1e9,this.oR=!0),(t||s)&&this.lR()}cR(){return this.oR}fR(){if(!this.oR)throw new Error("no result available");return this.aR}}xc.DS.dR=class{constructor(t){this.qb=t,this.Ow=t.Fb(),this.Nf=!1,this.pR=null,this.mR=!1,this.gR=null,this.yR=[]}Hn(){for(const t of this.yR)t instanceof Tc&&t.Hn();xc.bh(this.yR),this.pR=null,this.gR=null,this.qb=null}PG(){if(this.Nf)throw new Error("query already active");const t=this.qb.SR();t.length>0?(this.mR=!0,this.pR=t.at(-1),this.pR.wR(),this.pR.yR.push(this)):(this.mR=!1,this.pR=null),this.Nf=!0,t.push(this),this.vR()}OG(){if(!this.Nf)throw new Error("query not active");if(this.qb.SR().pop()!==this)throw new Error("can only end most nested query");this.Nf=!1,this.wR(),this.pR&&(this.pR.vR(),this.pR=null)}vR(){this.gR=xc.zn(Tc,this.qb),this.yR.push(this.gR),this.gR.PG()}wR(){this.gR.OG(),this.gR=null}uR(){for(const t of this.yR)t.uR()}bR(){return this.mR}cR(){return this.yR.every((t=>t.cR()))}fR(){return this.yR.reduce(((t,s)=>t+s.fR()),0)}Fb(){return this.Ow}}}{const Cc=self._s;Cc.DS.MR=class{constructor(t,s=1e3){this.qb=t,this.xR=s,this.TR=[],this.qb.CR(this)}Hn(){this.Pu(),this.qb.IR(this),this.qb=null}Pu(){for(const t of this.TR)t.Hn();Cc.bh(this.TR)}_R(){const t=new Cc.DS.dR(this.qb);return this.TR.push(t),this.TR.length>this.xR&&this.TR.shift().Hn(),t}GR(t){for(const s of this.TR){if(s.Fb()>=t)return;if(s.bR())return;s.uR()}}PR(t,s){if(s<=t)return NaN;let e=0;for(const i of this.TR){if(i.Fb()>=s)break;if(!(i.Fb()<t)){if(!i.cR())return NaN;e+=i.fR()}}return e}AR(t){for(let s=0,e=this.TR.length;s<e;++s){const e=this.TR[s];if(!(e.Fb()<t))return void(s>0&&this.TR.splice(0,s));e.Hn()}}}}{let Ic=function(){Jc=-1;for(const t of Hc)t.RR()&&(t.resolve(),Hc.delete(t));Hc.size>0&&(Jc=self.requestAnimationFrame(Ic))};CheckPendingPolls=Ic;const _c=self._s,Gc=self.assert,Pc=self.ls,Ac=Pc.Ss,Rc=Pc.ws,Ec=Pc.ds,Oc={powerPreference:"default",ER:!0,alpha:!1,depth:!1,OR:!1,FR:2,failIfMajorPerformanceCaveat:!1},Fc=new Set(["default","low-power","high-performance"]),Dc=8e3,Lc=12e3,kc=8e3,Nc=7996,Bc=262144,$c=new _c.Gl(0,0,1,0,1,1,0,1),Wc=Ec.create(),Vc=Ec.create(),jc=new _c.Gl,Uc=new _c.Rect;let zc=null;_c.Ls&&(self.DR=function(){zc?zc.loseContext():console.warn("WEBGL_lose_context not supported")},self.LR=function(){zc?zc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Hc=new Set;let Jc=-1;_c.DS.kR=class extends _c.DS.KS{constructor(t,s){if(super(s),s=Object.assign({},Oc,s),!Fc.has(s.powerPreference))throw new Error("invalid power preference");const e={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let i=null,n=0;if(s.FR>=2&&(i=t.getContext("webgl2",e),n=2),i||(i=t.getContext("webgl",e),n=1),!i)throw new Error("renderer-unavailable (could not get WebGL context)");this.EC=i,this.NR=i.getContextAttributes(),this.BR=i.getParameter(i.VERSION),this.iR=n,this.$R=Rc.create(),this.WR=!1,this.VR=Ec.create(),this.jR=!!s.depth,this.UR=!(!s.depth||!s.OR),this.zR=this.jR,this.HR=!1,this.JR=null,this.qR=!0,this.YR=0,this.XR=0,this.DC=null,this.LC=null,this.KR=null,this.kC=null,this.ZR=new Float32Array(8e3*this.Rb()),this.QR=new Uint16Array(12e3),this.tE=new Float32Array(16e3),this.sE=new Float32Array(32e3),this.eE=0,this.iE=0,this.nE=0,this.rE=0,this.hE=null,this.oE=null,this.aE=[],this.lE=0,this.uE=0,this.cE=null,this.fE=0,this.L_=_c.zn(_c.DS.A_,this),this.dE=_c.zn(_c.To,1,1,1,1),this.pE=null,this.vG=null,this.mE=0,this.gE=0,this.yE=new _c.Rect,this.SE=_c.zn(_c.Rect,0,0,-1,-1),this.wE=0,this.vE=-1,this.bE=0,this.ME=0,this.xE="(unavailable)",this.TE="(unavailable)",this.CE=[],this.IE=!1,this._E=null,this.GE=null,this.PE=null,this.AE=null,this.RE=null,this.EE=null,this.OE=null,this.FE=0,this.DE=!!s.ER,this.nR=null,this.LE=new Set,this.kE=[],this.Lw(this.QR)}$b(){return!0}async Bw(){super.Bw();const t=this.EC,s=this.Rb();this.dE.Po(1,1,1,1),this.pE=null,this.vG=null,this.eE=0,this.nE=0,this.rE=8e3*s-4*s,_c.bh(this.aE),this.lE=0,this.uE=0,this.hE=null,this.cE=null,this.yE.set(0,0,1,1),this.fE=0;const e=this.L_;e.GI=null,e.oC=null,e.aC=null,Rc.set(e.O_,1,1,1,1),e.clearColor.Po(0,0,0,0),e.F_.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.mE=t.ONE,this.gE=t.ONE_MINUS_SRC_ALPHA,this.NE(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.jR?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.zR=this.jR,this.HR=!1,this.kC=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.kC),t.bufferData(t.ARRAY_BUFFER,this.sE.byteLength,t.DYNAMIC_DRAW),this.DC=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.DC),t.bufferData(t.ARRAY_BUFFER,this.ZR.byteLength,t.DYNAMIC_DRAW),this.LC=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.LC),t.bufferData(t.ARRAY_BUFFER,this.tE.byteLength,t.DYNAMIC_DRAW),this.KR=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.KR),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.QR,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.vE=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.bE=i[0],this.ME=i[1],this.ME>2048&&(this.ME=2048),this.CE=t.getSupportedExtensions();const n=t.getExtension("WEBGL_debug_renderer_info");if(n&&(this.xE=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.TE=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this._E=t.getExtension("KHR_parallel_shader_compile"),this.iR>=2&&("Chromium"!==_c.Zs.ne||_c.Zs.ie>=135)&&(this.PE=t.getExtension("EXT_conservative_depth")),_c.Ls&&(zc=t.getExtension("WEBGL_lose_context")),this.DE&&(1===this.yT()?this.nR=t.getExtension("EXT_disjoint_timer_query"):this.nR=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.GE=t.getExtension("EXT_texture_filter_anisotropic"),this.GE?this.FE=t.getParameter(this.GE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.FE=0,this.yT()<2&&this.jR&&this.UR&&(this.AE=t.getExtension("WEBGL_depth_texture"),!this.AE))throw new Error("no depth texture support");this.yT()<2&&(this.RE=t.getExtension("EXT_frag_depth"),this.EE=t.getExtension("OES_standard_derivatives"),this.OE=t.getExtension("EXT_shader_texture_lod"));const r=_c.DS.IC,h=r.ZI(!1);let o=r.t_(),a=h,l=r.l_(),u=r.o_(),c=r.i_(),f=r.ZI(!0),d=!1;this.jR&&(this.yT()<2?this.RE&&(o=r.s_(),l=r.u_(),c=r.n_(),d=!0):(a=r.QI(),o=r.e_(this.BE()),l=r.c_(this.BE()),u=r.a_(),c=r.r_(this.BE()),f=r.QI(!0)));const p=r.h_(this.yT(),d,this.EE&&this.OE,this.BE()),m=this.yT()>=2?r.QI():h,g=[[o,a,"<default>"],[o,a,"<default-device-transform>"],[l,u,"<point>"],[r.f_(),h,"<fill>"],[r.d_(),h,"<lineargradient>"],[r.p_(),h,"<penumbra>"],[r.g_(),h,"<hardellipse>"],[r.y_(),h,"<hardellipseoutline>"],[r.S_(),h,"<smoothellipse>"],[r.w_(),h,"<smoothellipseoutline>"],[r.m_(),h,"<smoothline>"],[c,f,"<tilemap>"],[p,m,"<tilerandomization>"]],y=await Promise.all(g.map((t=>this.$E({src:t[0],GC:t[1],name:t[2]}))));this.aw=y[0],this.oE=y[1],this.lw=y[2],this.fw=y[3],this.dw=y[4],this.pw=y[5],this.mw=y[6],this.gw=y[7],this.yw=y[8],this.Sw=y[9],this.ww=y[10],this.uw=y[11],this.cw=y[12],this.uv()}async $E(t){const s=await _c.DS.IC.RC(this,t);return this.hv(s),s}WE(){this.hE=null}TA(t,s,e){if(this.Py===t&&this.Ay===s&&!e)return;this.Ob();const i=this.EC,n=this.L_;this.Py=t,this.Ay=s,this.VE(0,0,t,s),this.tv(this.VR,t/s),this.jE(this.VR),this.oE&&(i.useProgram(this.oE.RI()),this.oE.xI(this.tw),this.hE=this.oE,this.L_.GI=this.oE),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE0),this.pE=null,this.vG=null,this.jR&&this.qR&&this.UE(this.Py,this.Ay),this.cE&&this.cE.nC(this.Py,this.Ay),i.bindFramebuffer(i.FRAMEBUFFER,null),this.cE=null,n.oC=null,n.aC=null}UE(t,s){const e=this.EC;this.JR&&this.YR===t&&this.XR===s||(this.UR?(this.JR&&e.deleteTexture(this.JR),this.JR=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.JR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.yT()>=2?e.texImage2D(e.TEXTURE_2D,0,e.DEPTH24_STENCIL8,t,s,0,e.DEPTH_STENCIL,e.UNSIGNED_INT_24_8,null):this.AE&&e.texImage2D(e.TEXTURE_2D,0,e.DEPTH_STENCIL,t,s,0,e.DEPTH_STENCIL,this.AE.UNSIGNED_INT_24_8_WEBGL,null),e.bindTexture(e.TEXTURE_2D,null)):(this.JR&&e.deleteRenderbuffer(this.JR),this.JR=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.JR),e.renderbufferStorage(e.RENDERBUFFER,this.iR>=2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t,s),e.bindRenderbuffer(e.RENDERBUFFER,null)),this.YR=t,this.XR=s)}zE(t,s){this.jR&&(this.qR=!1,this.UE(t,s))}HE(){this.jR&&(this.qR=!0,this.UE(this.Py,this.Ay))}VE(t,s,e,i){const n=this.$R;n[0]===t&&n[1]===s&&n[2]===e&&n[3]===i||(this.JE().sG(t,s,e,i),Rc.set(n,t,s,e,i),this.uE=0)}Yw(t){super.Yw(t),this.tv(this.VR,this.Py/this.Ay)}zw(t){super.zw(t),this.tv(this.VR,this.Py/this.Ay)}Jw(t){super.Jw(t),this.tv(this.VR,this.Py/this.Ay)}jE(t){Ec.F(this.tw,t)||(this.JE().iG(t),Ec.S(this.tw,t),this.uE=0,this.WR=!0)}qE(){let t,s,e;const i=this.cE;null===i?(t=this.VR,s=this.Vg(),e=this.Zg()):(t=i.fC(),s=i.Vg(),e=i.Zg()),this.jE(t),this.VE(0,0,s,e)}YE(t){Ec.F(this.sw,t)||(this.JE().rG(t),Ec.S(this.sw,t),this.uE=0,this.WR=!0)}XE(){this.WR=!1}KE(){return this.WR}hC(){return this.L_}JE(){const t=this.aE;return this.lE===t.length&&t.push(new _c.DS.D_(this.L_)),t[this.lE++]}Ob(){0!==this.lE&&(this.QA()||(this.ZE(),this.QE(),this.lE=0,this.eE=0,this.iE=0,this.nE=0,this.uE=0))}ZE(){const t=this.EC;this.nE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.kC),t.bufferSubData(t.ARRAY_BUFFER,0,this.sE.subarray(0,this.nE))),this.eE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.DC),t.bufferSubData(t.ARRAY_BUFFER,0,this.ZR.subarray(0,this.eE)),t.bindBuffer(t.ARRAY_BUFFER,this.LC),t.bufferSubData(t.ARRAY_BUFFER,0,this.tE.subarray(0,this.iE)))}QE(){const t=this.aE;for(let s=0,e=this.lE;s<e;++s)t[s].tP()}tO(){return this.dE.Wo()}sO(t,s,e,i){const n=this.dE;n.Jo(t,s,e,i)||(n.Po(t,s,e,i),this.JE().Y_(n),this.uE=0,this.Mw=null)}eO(t){const s=this.dE;s.Wo()!==t&&(s.Lo(t),this.JE().Y_(s),this.uE=0,this.Mw=null)}DM(t){const s=this.dE;s.equals(t)||(s.set(t),this.JE().Y_(s),this.uE=0,this.Mw=null)}iO(){this.sO(1,1,1,1)}nO(){return this.dE}rO(t){t!==this.pE&&(this.JE().J_(t),this.pE=t,this.uE=0)}bT(){this.pE=null}FM(t){const s=this.kv(t);this.hO(s[0],s[1])}oO(t){const s=this.$v(t);this.hO(s.Dv,s.Lv)}hO(t,s){t===this.mE&&s===this.gE||(this.JE().Q_(t,s),this.mE=t,this.gE=s,this.uE=0,this.Mw=null)}aO(){return this.mE===this.EC.ONE&&this.gE===this.EC.ONE_MINUS_SRC_ALPHA}lO(){this.hO(this.EC.ONE,this.EC.ONE_MINUS_SRC_ALPHA)}uO(){this.hO(this.EC.SRC_ALPHA,this.EC.ONE_MINUS_SRC_ALPHA)}cO(){this.hO(this.EC.ONE,this.EC.ZERO)}Rect(t){this.fO(t.Za(),t.Qa(),t.tl(),t.sl())}fO(t,s,e,i){this.Ab(t,s,e,s,e,i,t,i)}dO(){let t=this.eE;t>=this.rE&&(this.Ob(),t=0),1===this.uE?this.aE[this.lE-1].N_+=6:(this.JE().z_(t,6),this.uE=1)}pO(t){t.ql(this.ZR,this.eE,this.Cw+this.Iw),this.eE+=12}Gl(t){this.dO(),this.pO(t),$c.jo(this.tE,this.iE),this.iE+=8}Ab(t,s,e,i,n,r,h,o){this.dO();const a=this.ZR;let l=this.eE;const u=this.Cw+this.Iw;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=e,a[l++]=i,a[l++]=u,a[l++]=n,a[l++]=r,a[l++]=u,a[l++]=h,a[l++]=o,a[l++]=u,this.eE=l,$c.jo(this.tE,this.iE),this.iE+=8}sb(t,s){this.dO(),this.pO(t),s.nl(this.tE,this.iE),this.iE+=8}mO(t,s){this.dO(),this.pO(t),s.jo(this.tE,this.iE),this.iE+=8}gO(t,s,e,i,n,r,h,o,a,l,u,c,f){this.dO();const d=this.ZR;let p=this.eE;const m=this.Cw+this.Iw;d[p++]=t,d[p++]=s,d[p++]=m+e,d[p++]=i,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.eE=p,f.nl(this.tE,this.iE),this.iE+=8}Xv(t,s,e,i,n,r,h,o,a,l,u,c,f){this.dO();const d=this.ZR;let p=this.eE;const m=this.Cw+this.Iw;d[p++]=t,d[p++]=s,d[p++]=m+e,d[p++]=i,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.eE=p,f.jo(this.tE,this.iE),this.iE+=8}yO(t,s,e){const i=this.ZR,n=this.tE;if(e.length%3!=0)throw new Error("invalid index buffer length");for(let r=0,h=e.length;r<h;){const h=e[r++],o=e[r++],a=e[r++],l=3*h,u=3*o,c=3*a,f=2*h,d=2*o,p=2*a;this.dO();let m=this.eE,g=this.iE;i[m++]=t[l+0],i[m++]=t[l+1],i[m++]=t[l+2],i[m++]=t[u+0],i[m++]=t[u+1],i[m++]=t[u+2],i[m++]=t[c+0],i[m++]=t[c+1],i[m++]=t[c+2],i[m++]=t[c+0],i[m++]=t[c+1],i[m++]=t[c+2],n[g++]=s[f+0],n[g++]=s[f+1],n[g++]=s[d+0],n[g++]=s[d+1],n[g++]=s[p+0],n[g++]=s[p+1],n[g++]=s[p+0],n[g++]=s[p+1],this.eE=m,this.iE=g}}SO(t,s){this.Uv(0),Ec.S(Wc,this.tw),Ec.S(Vc,this.sw),this.qE();const[e,i]=this.wO(this.cE),n=this.rv(0,0,this.Ww(i),0,0,0,i);if(this.YE(n),"crop"===t&&this.cE&&s){const t=this.Py/2,e=this.Ay/2,i=s.Vg(),n=s.Zg(),r=this.cE.Vg(),h=this.cE.Zg(),o=Math.min(r,i),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Uc.set(-t,e-u,-t+o,e-a-u),jc.Yl(Uc),Uc.set(0,l,o,a+l),Uc.wt(i,n),this.sb(jc,Uc)}else{const t=e/2,s=i/2;this.fO(-t,s,t,-s)}this.jE(Wc),this.YE(Vc)}vO(t){this.yE.equals(t)||(this.yE.S(t),this.JE().fG(t),this.uE=0)}bO(){}MO(t,s,e,i){this.nE>=7996&&this.Ob();let n=this.nE;const r=this.Cw+this.Iw;2===this.uE&&this.fE===r?this.aE[this.lE-1].N_++:(this.JE().pG(n,r),this.uE=2,this.fE=r);const h=this.sE;h[n++]=t,h[n++]=s,h[n++]=e,h[n++]=i,this.nE=n}cv(t){this.hE!==t&&(this.JE().gG(t),this.hE=t,this.uE=0,this.Mw=null)}xO(){return this.hE}TO(){this.cv(this.oE)}CO(t){this.JE().K_(t),this.uE=0}IO(t,s,e=1){this.JE().FG(t,s,e),this.uE=0}_O(t,s,e,i,n,r,h){if(this.hE!==this.uw)throw new Error("must set tilemap fill mode first");this.JE().LG(t,s,e,i,n,r,h),this.uE=0}GO(t,s,e,i,n,r,h){if(this.hE!==this.cw)throw new Error("must set tile randomization mode first");this.JE().NG(t,s,e,i,n,r,h),this.uE=0}PO(t,s,e,i,n,r,h,o,a,l,u){const c=this.hE;if(u%=10800,!c.dI||c.BI(s,e,i,n,r,h,o,a,l,u))return;const f=this.JE();f.SG(),c.VI(s,e,i,n,r,h,o,a,l,u);const d=f.W_;d[0]=r,d[1]=h,s.jo(d,2),d[6]=a,d[7]=l,e.jo(d,12);const p=f.V_;n.jo(p,0);const m=p[1];p[1]=p[3],p[3]=m,i.jo(f.j_,0),f.k_=u,f.N_=o,c.XC.pI()?f.B_=t?t.cC():null:f.B_=null,this.uE=0}AO(t){const s=this.hE;if(0===t.length||s.DI(t))return;const e=this.JE();e.bG(),s.kI(t),_c.Ch(e.U_,t),this.uE=0}RO(t,s,e,i){this.JE().uG(t,s,e,i),this.uE=0}Pu(t){this.JE().lG(t),this.uE=0}EO(){}Eb(){super.Eb(),this.EC.flush()}OO(){this.jR&&this.cE&&this.cE.gC()&&(this.JE().$G(this.zR),this.uE=0)}FO(t){t=!!t,this.zR!==t&&this.jR&&(this.zR=t,this.JE().VG(t),this.uE=0)}DO(){return this.zR}eC(){return this.JR}iC(){return this.UR}LO(t){if(t=!!t,this.UR&&this.HR!==t){if(t&&this.DO())throw new Error("depth still enabled");this.HR=t,this.JE().UG(t),this.uE=0}}kO(t,s,e,i,n=0){t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),i=Math.floor(i),this.SE.Ka(t,s,e,i)||(this.SE.Ua(t,s,e,i),s=(n||this.wO(this.NO())[1])-s-i,this.JE().ZG(!0,t,s,e,i),this.uE=0)}BO(){-1!==this.SE.tl()&&(this.SE.set(0,0,-1,-1),this.JE().ZG(!1,0,0,0,0),this.uE=0)}$O(){for(const t of this.LE)t.GR(this.Ow)}QA(){return!this.EC||this.EC.isContextLost()||this.IE}LM(){super.$w(),_c.DS.nT.LM(),_c.DS.$T.LM(),_c.DS.Hb.LM();for(const t of this.LE)t.Pu();this.CE=[],this.nR=null,this._E=null,this.PE=null,this.GE=null,this.AE=null,this.RE=null,this.EE=null,this.OE=null,this.FE=0,this.xE="(unavailable)",this.TE="(unavailable)",this.hE=null,this.oE=null,this.JR=null;for(const t of this.bw.values())t.LM()}async kM(){this.IE=!0,await this.Bw(),this.IE=!1;for(const t of this.bw.values())t.kM(this);this.TA(this.Py,this.Ay,!0)}WO(t,s){if(this.QA())throw new Error("context lost");this.Ob();const e=_c.zn(_c.DS.nT,this);return e.pT(t,s),e}async VO(t,s){if(this.QA())throw new Error("context lost");if(s=Object.assign({},s),_c.Pe.ImageBitmapOptions){let e=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const i=s.Yx&&"clamp-to-edge"!==s.Yx||s.Xx&&"clamp-to-edge"!==s.Xx,n=_c.vr(e.width)&&_c.vr(e.height);return this.ST()||n||!i?s.eT=!1:_c.Pe.Oe?(e=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:_c.br(e.width),resizeHeight:_c.br(e.height)}),s.eT=!1):e=await createImageBitmap(t,{premultiplyAlpha:"none"}),await _c.df((()=>this.WO(e,s)))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await _c.uo(t);t=s}return await _c.df((()=>this.WO(t,s)))}sC(t,s,e){this.Ob();const i=_c.zn(_c.DS.nT,this);return i.MT(t,s,e),i}tR(t,s,e){this.Ob(),s._T(t,e)}rC(t){t&&(t.ET(),t.OT()>0||(this.Ob(),t===this.pE&&(this.EC.bindTexture(this.EC.TEXTURE_2D,null),this.pE=null),t===this.vG&&(this.EC.activeTexture(this.EC.TEXTURE1),this.EC.bindTexture(this.EC.TEXTURE_2D,null),this.EC.activeTexture(this.EC.TEXTURE0),this.vG=null),t.GT()))}jO(t){let s=this.Py,e=this.Ay,i=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),i=!1),"number"==typeof t.height&&(e=Math.floor(t.height),i=!1)),s<=0||e<=0)throw new Error("invalid size");this.Ob();const n=_c.zn(_c.DS.$T,this);return n.QT(s,e,Object.assign({NT:i},t)),this.cE=null,this.L_.oC=null,this.L_.aC=null,n}UO(t,s=!0){t!==this.cE&&(t&&t.yC()&&t.nC(this.Py,this.Ay),this.JE().oG(t),this.cE=t,this.uE=0,s&&this.qE())}NO(){return this.cE}wO(t){return t?[t.Vg(),t.Zg()]:[this.Py,this.Ay]}zO(t,s="stretch"){this.iR<2||this.cE&&this.cE.SC()>0?(this.cO(),this.iO(),this.HO(t,s)):(this.JE().CG(t,this.cE,s),this.uE=0)}HO(t,s="stretch"){const e=t.cC();if(!e)throw new Error("not a texture-backed render target");this.rO(e),this.SO(s,e)}JO(t){this.iR<2||(this.JE().xG(t.lC()),this.uE=0)}qO(t){this.UO(null),this.Ob();const s=t.cC();s===this.pE&&(this.EC.bindTexture(this.EC.TEXTURE_2D,null),this.pE=null),s===this.vG&&(this.EC.activeTexture(this.EC.TEXTURE1),this.EC.bindTexture(this.EC.TEXTURE_2D,null),this.EC.activeTexture(this.EC.TEXTURE0),this.vG=null),t.GT()}async xC(t,s,e){this.Ob();const i=this.cE;let n,r,h;t?(n=t.Vg(),r=t.Zg(),h=t.lC()):(n=this.Vg(),r=this.Zg(),h=null);let o=0,a=0,l=n,u=r;if(e){o=_c.Kn(Math.floor(e.Za()),0,n-1),a=_c.Kn(Math.floor(e.Qa()),0,r-1);let t=e.width();t=0===t?n-o:_c.Kn(Math.floor(t),0,n-o);let s=e.height();s=0===s?r-a:_c.Kn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.EC;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.cE=null,this.L_.oC=null,this.L_.aC=null,this.UO(i)};let d;if(!s&&this.yT()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,e=c.PIXEL_PACK_BUFFER;c.bindBuffer(e,t),c.bufferData(e,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(e,null),f();const i=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.AC((()=>c.getSyncParameter(i,c.SYNC_STATUS)===c.SIGNALED)),c.deleteSync(i),d=new ImageData(l,u),c.bindBuffer(e,t),c.getBufferSubData(e,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(e,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}YO(){this.FO(!0),this.JE().HG(),this.uE=0,this.wE=1}XO(){this.FO(!1),this.JE().qG(),this.uE=0,this.wE=2}KO(){return 2===this.wE}ZO(){this.FO(!0),this.JE().XG(),this.uE=0,this.wE=0}QO(t){this.tF()&&(this.JE()._G(t),this.uE=0)}sF(t){this.tF()&&(this.JE().AG(t),this.uE=0)}AC(t){const s=new Promise((s=>Hc.add({resolve:s,RR:t})));return-1===Jc&&(Jc=self.requestAnimationFrame(Ic)),s}Wb(){return this.Py*this.Ay*(this.NR.alpha?4:3)}Vb(){let t=0;for(const s of _c.DS.$T.TC())s.cC()||(t+=s.DT());return t}jb(){let t=0;for(const s of _c.DS.nT.LT())t+=s.DT();return t}eF(){return this.BR}yT(){return this.iR}iF(){return"webgl"+this.yT()}ST(){return this.yT()>=2}mT(){return this.vE}nF(){return this.bE}rF(){return this.ME}hF(){return this.xE}oF(){return this.TE}aF(){if(this.yT()>=2)return"webgl2";{const t=[];return this.RE&&t.push("EXT_frag_depth"),this.EE&&t.push("OES_standard_derivatives"),this.OE&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}lF(){return this.CE}tF(){return!!this.nR}rR(){return this.nR}PC(){return this._E}BE(){return!!this.PE}CT(){return this.GE}IT(){return this.FE}CR(t){this.LE.add(t)}IR(t){this.LE.delete(t)}SR(){return this.kE}gT(){return this.EC}NE(t){this.Fv([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}uF(){return this.zb()}}}{const qc=self._s,Yc={cF:null,fF:null,dF:null,getTime:null,pF:null};qc.DS.mF=class{constructor(t){t=Object.assign({},Yc,t),this.gF=t.cF,this.yF=t.fF,this.SF=t.dF,this.wF=t.getTime,this.vF=t.pF,this.bF=null,this.MF=new Set}xF(t){this.MF.add(t)}TF(t){this.MF.delete(t)}LM(){this.bF=null;for(const t of this.MF)t.LM()}CF(t){return this.gF?this.gF(t):[t.Vg(),t.Zg()]}NO(t){return this.yF(t)}IF(t,s){this.SF(t,s)}_F(){return this.wF()}Op(t){this.vF(t)}GF(t,s,e){return s=Math.floor(s),e=Math.floor(e),!this.bF||this.bF.Vg()===s&&this.bF.Zg()===e||(t.rC(this.bF),this.bF=null),null===this.bF&&(this.bF=t.WO(null,{width:s,height:e,Kx:"nearest",tT:!1})),this.bF}}}{const Xc=self._s,Kc=self.assert,Zc=self.ls,Qc=Zc.ds,tf=Xc.zn(Xc.Rect),sf=Xc.zn(Xc.Rect),ef=Xc.zn(Xc.Rect),nf=Xc.zn(Xc.Rect),rf=Qc.create(),hf=Qc.create(),of={PF:null,AF:null,RF:null,EF:!1},af={OF:null,FF:!1,DF:!1,LF:!1,kF:!1,NF:!1,BF:!1};Xc.DS.$F=class{constructor(t,s){s=Object.assign({},of,s),this.Vp=t,this.WF=s.PF,this.VF=s.AF,this.jF=s.RF,this.UF=null,this.zF=[],this.HF=[],this.JF=[],this.qF=!1,this.AM=0,this.YF=!1,this.XF=!1,this.KF=!1,this.ZF=!1,this.QF=!1,this.tD=!1,this.WR=!1,this.sD=!1,this.eD=!1,this.iD=!1,this.nD=!1,this.rD=!1,this.hD=0,this.oD=[null,null,null],this.aD=!!s.EF,this.lD=0,this.uD=0,this.cD=0,this.fD=0,this.dD=null,this.pD=null,this.mD=Xc.zn(Xc.Rect),this.gD=Xc.zn(Xc.Rect),this.yD=Xc.zn(Xc.Rect),this.SD=Xc.zn(Xc.Rect),this.wD=Xc.zn(Xc.Rect),this.vD=1,this.bD=1,this.MD=0,this.xD=0,this.TD=null,this.CD=null,this.ID=0,this._D=0,this.GD=0,this.PD=0,this.AD=!1,this.YT=Qc.create(),this.RD=Qc.create(),this.Vp.xF(this)}Hn(){this.Vp.TF(this),Xc.bh(this.JF),Xc.bh(this.zF),Xc.bh(this.HF),this.dD=null,this.pD=null,this.WF=null,this.VF=null,this.jF=null}LM(){this.qF=!0,Xc.bh(this.JF),Xc.bh(this.zF),Xc.bh(this.HF)}ED(){return this.qF}OD(t,s){if(s=Object.assign({},af,s),Xc.bh(this.JF),this.lD=0,this.uD=0,this.YF=!1,this.XF=!1,this.KF=!1,this.ZF=!1,this.QF=!1,this.tD=!1,this.hD=0,this.rD=!!s.kF,this.nD=!!s.BF,this.qF=!1,Xc.Ch(this.zF,t),0===t.length)return;if(s.OF){if(s.OF.length!==t.length)throw new Error("incorrect indexMap length");Xc.Ch(this.HF,s.OF)}else{Xc.bh(this.HF);for(let s=0,e=t.length;s<e;++s)this.HF.push(s)}for(const s of t)this.lD+=s.gM(),this.uD+=s.yM(),s.MM()&&(this.YF=!0),s.TM()&&(this.XF=!0),s.xM()&&(this.KF=!0),s.SM()&&(this.ZF=!0),s._M()&&(this.QF=!0);this.tD=this.FD(t[0].pM());const e=this.DD(t[0],s),i=this.LD(t.at(-1),s);if(1===t.length&&!e&&!i)return void(this.iD=!0);this.iD=!1;let n=0;e&&(this.hD=1,this.JF.push(Xc.zn(Xc.DS.$F.ND.kD,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||e){let t=1===n?2:1;s!==r-1||i||(t=0),this.hD=Math.max(this.hD,t),this.JF.push(Xc.zn(Xc.DS.$F.ND.BD,this,n,t,s)),n=t}else this.hD=1,this.JF.push(Xc.zn(Xc.DS.$F.ND.$D,this,-1,1,s)),n=1;i&&this.JF.push(Xc.zn(Xc.DS.$F.ND.WD,this,n,0))}DD(t,s){return!!(s.FF||t.wM()||s.LF&&!t.bM()||t.TM()&&!this.nD||0!==this.lD||0!==this.uD)||(t.pM().$b()?t.xM()&&(s.NF||s.kF)||t.CM()&&s.kF:t.xM()&&!this.tD&&s.NF)}LD(t,s){return!!s.DF||(t.pM().$b()?t.xM()||t.SM():(t.xM()||t.SM())&&this.VD())}FD(t){return t.sv()&&this.KF&&!this.ZF}jD(t,s,e){t.sv()&&null===s&&(s=t.UD()),this.TD=s,this.dD=e.zD||null,this.pD=e.HD||null,this.AM=e.JD||0,this.vD=e.devicePixelRatio||1,this.bD=e.qD||1,this.MD=e.YD||0,this.xD="number"==typeof e.time?e.time:this.Vp._F(),this.WR=!1,t.XE(),this.YF&&this.XD();let i=!1;if(this.KD()&&(this.ZD(t,e),i=!0,this.CD=this.Vp.GF(t,this.cD,this.fD),tf.S(this.gD),tf.vl(),t.sv()&&t.QD(this.TD),t.tL(this.TD.cC(),this.CD,tf.Za(),tf.Qa(),tf.width(),tf.height())),this.iD)this.sL(t,e);else if(i||this.ZD(t,e),0!==this.yD.width()||0!==this.yD.height()){t.lO(),t.iO(),t.Vv(0),t.Uv(0),this.UF=e.eL||null,this.ID=e.iL||0,this._D=e.nL||0,this.GD=e.rL||0,this.PD=e.hL||0,this.AD=!!e.oL,this.aL(t),this.oD[0]=s,this.oD[1]=this.hD>=1?this.lL():null,this.oD[2]=2===this.hD?this.lL():null;for(const s of this.JF){const e=this.uL(s.cL()),i=this.uL(s.fL());t.sv()?s.dL(t,e,i):s.pL(t,e,i)}t.rO(null),this.oD[1]&&this.mL(this.oD[1]),this.oD[2]&&this.mL(this.oD[2]),this.oD.fill(null),this.gL(t),this.TD=null,this.CD=null,this.dD=null,this.pD=null,this.UF=null}}ZD(t,s){const[e,i]=this.Vp.CF(t);this.yL(t,e,i),this.SL(s)}yL(t,s,e){if(s<=0||e<=0)throw new Error("invalid draw size");this.cD===s&&this.fD===e||this.wL(t,s,e,0,0,this.YT,this.RD),this.cD=s,this.fD=e}wL(t,s,e,i,n,r,h){const o=s/2+i,a=e/2+n;t.tv(r,s/e);const l=t.rv(o,a,t.Ww(e),o,a,0,e);Qc.S(h,l)}SL(t){this.mD.S(t.vL),t.bL?this.gD.S(t.bL):this.gD.set(0,0,this.cD,this.fD),this.yD.S(this.gD),this.yD.wt(this.cD,this.fD);const s=this.bD*this.vD;this.gD.cl(this.lD*s,this.uD*s),this.wD.S(this.gD),this.wD.wt(this.cD,this.fD),this.gD.bl(0,0,this.cD,this.fD),this.SD.S(this.gD),this.SD.wt(this.cD,this.fD)}aL(t){if(this.sD=t.DO(),this.eD=t.KO(),this.nD)t.FO(!1),this.XF&&t.LO(!0);else{if(tf.S(this.gD),t.$b()){const t=this.bD*this.vD;tf.cl(Math.max(this.lD,1)*t,Math.max(this.uD,1)*t),tf.vl(),tf.Kn(0,0,this.cD,this.fD)}else tf.vl();t.kO(tf.Za(),tf.Qa(),tf.width(),tf.height(),this.fD)}}ML(t){t.iO(),this.nD||(this.eD&&t.ZO(),t.FO(!1),this.XF&&t.LO(!0)),t.sv()&&t.xL(!0)}gL(t){t.LO(!1),this.eD&&t.XO(),t.FO(this.sD),this.nD||t.BO(),t.sv()&&t.xL(!1),this.WR=t.KE()}TL(){this.wD.Kn(0,0,1,1)}uL(t){return t<0?null:this.oD[t]}lL(){return this.Vp.NO(this)}CL(){return this.TD}mL(t){this.Vp.IF(t,this)}IL(t){return this.zF[t]}_L(t){this.UF?this.UF(this,t,(()=>this.WF(t,this))):this.WF(t,this),this.iD||this.ML(t)}GL(t){if(this.nD)return!0;if(0!==this.ID||0!==this._D||0!==this.GD||0!==this.PD)return!1;const[s,e]=t.wO(t.NO());return s===this.cD&&e===this.fD}PL(t,s){let e=this.YT,i=this.RD;if(s&&!this.GL(t)){let s,n;e=rf,i=hf,0!==this.GD&&0!==this.PD?[s,n]=[this.GD,this.PD]:[s,n]=t.wO(t.NO()),this.wL(t,s,n,this.ID,this._D,e,i),this.nD||t.BO()}t.jE(e),t.YE(i)}XD(){this.Vp.Op(this)}AL(t,s){return this.jF(this.HF[t],s)}RL(t,s){let e=this.wD,i=this.SD,n=this.yD;t.$b()&&(sf.S(e),sf.pl(1),e=sf,ef.S(i),ef.pl(1),i=ef,nf.S(n),nf.pl(1),n=nf),this.EL(t,s,i,n,e,1/this.cD,1/this.fD)}OL(t,s){let e=this.SD,i=this.yD,n=1/this.cD,r=1/this.fD;if(this.VF){let{FL:t,DL:s,LL:h}=this.VF(this.dD);t||(tf.set(0,0,0,0),t=tf),s||(s=this.cD),h||(h=this.fD),e=t,i=t,n=1/s,r=1/h}else t.$b()&&(ef.S(e),ef.pl(1),e=ef,nf.S(i),nf.pl(1),i=nf);let h=this.wD;t.$b()&&(h=sf,h.S(this.wD),h.pl(1)),this.EL(t,s,e,i,h,n,r),t.sv()&&this.QF&&t.kL(this.rD)}NL(t){return this.KF?t.sv()?this.KD()?this.CD:this.TD.cC():this.TD:null}EL(t,s,e,i,n,r,h){t.PO(this.NL(t),n,e,i,this.mD,r,h,this.vD,this.bD,this.MD,this.xD),t.AO(this.AL(s,t))}sL(t,s){const e=this.zF[0],i=t.DO(),n=e.TM();n&&(t.FO(!1),t.LO(!0),this.wD.set(0,0,1,1),this.yD.set(0,0,1,1)),t.cv(e),t.FM(this.AM),t.UO(this.TD);let r=0,h=1;if(this.yD.set(0,0,1,1),e.CM()&&this.VF){const{FL:t,DL:s,LL:e}=this.VF(this.dD);t&&this.yD.S(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(e)?1/e:0}else{const[s,e]=this.Vp.CF(t);r=1/s,h=1/e}s.vL?this.mD.S(s.vL):this.mD.set(0,0,0,0),t.PO(this.NL(t),this.wD,this.yD,this.yD,this.mD,r,h,this.vD,this.bD,this.MD,this.xD),t.AO(this.AL(0,t)),t.sv()&&this.QF&&t.kL(this.rD),t.Vv(0),this._L(t),n&&(t.LO(!1),t.FO(i))}KD(){return this.tD}VD(){return!this.tD}BL(){return this.KF}$L(){return!!this.iD&&!this.KD()}WL(){return this.nD}VL(){return this.dD}jL(){return this.pD}UL(){return this.AM}zL(){return this.AD}KE(){return this.WR}HL(){return this.gD}JL(){return this.SD}qL(){return this.aD}async YL(t,s,e){}}}{const lf=self._s;lf.DS.$F.ND=class{constructor(t,s,e,i=-1){this.XL=t,this.KL=s,this.ZL=e,this.GS=i}QL(){return this.XL}cL(){return this.KL}fL(){return this.ZL}tk(){return this.GS}RI(){return this.QL().IL(this.tk())}pL(t,s,e){}dL(t,s,e){}}}{const uf=self._s;uf.DS.$F.ND.kD=class extends uf.DS.$F.ND{constructor(t,s,e,i){super(t,s,e,i)}pL(t,s,e){const i=this.QL();t.lO(),t.uv(),t.UO(e,i.zL()),t.RO(0,0,0,0),i._L(t),i.TL()}dL(t,s,e){const i=this.QL();t.lO(),t.uv(),t.UO(e,!1),t.RO(0,0,0,0),i._L(t),i.TL()}}}{const cf=self._s,ff=cf.zn(cf.Rect),df=cf.zn(cf.Gl);cf.DS.$F.ND.WD=class extends cf.DS.$F.ND{constructor(t,s,e,i){super(t,s,e,i)}pL(t,s,e){const i=this.QL();t.uv(),t.UO(e),i.PL(t,!0),t.FM(i.UL()),t.rO(s.cC()),df.Yl(i.HL()),ff.S(i.JL()),ff.pl(1),t.sb(df,ff),i.qL()&&t.JO(s)}dL(t,s,e){const i=this.QL();t.uv(),t.UO(e,!1),i.GL(t)?df.Yl(i.JL()):(t.xL(!1),i.PL(t,!0),df.Yl(i.HL())),t.sk(null),t.FM(i.UL()),t.rO(s.cC()),i.WL()?t.SO():t.sb(df,i.JL())}}}{const pf=self._s;pf.DS.$F.ND.$D=class extends pf.DS.$F.ND{constructor(t,s,e,i){super(t,s,e,i)}pL(t,s,e){const i=this.QL();t.UO(e,i.zL()),t.RO(0,0,0,0),t.cO(),t.cv(this.RI()),i.OL(t,this.tk()),i._L(t),i.TL()}dL(t,s,e){const i=this.QL();t.UO(e,!1),t.RO(0,0,0,0),t.cO(),t.cv(this.RI()),i.OL(t,this.tk()),i._L(t),i.TL()}}}{const mf=self._s,gf=mf.zn(mf.Rect),yf=mf.zn(mf.Gl);mf.DS.$F.ND.BD=class extends mf.DS.$F.ND{constructor(t,s,e,i){super(t,s,e,i)}pL(t,s,e){const i=this.QL();t.UO(e);const n=0===this.fL();n?t.FM(i.UL()):(t.RO(0,0,0,0),t.cO()),t.cv(this.RI()),i.RL(t,this.tk()),t.rO(s.cC()),i.PL(t,n),yf.Yl(i.HL()),gf.S(i.JL()),gf.pl(1),t.sb(yf,gf),i.qL()&&t.JO(s)}dL(t,s,e){const i=this.QL();t.UO(e,!1),0===this.fL()?(t.FM(i.UL()),t.sk(null),i.GL(t)?yf.Yl(i.JL()):(t.xL(!1),i.PL(t,!0),yf.Yl(i.HL()))):(t.RO(0,0,0,0),t.cO(),yf.Yl(i.JL())),t.cv(this.RI()),i.RL(t,this.tk()),t.rO(s.cC()),i.WL()?t.SO():t.sb(yf,i.JL())}}}{let Sf=function(t,s){const e=t[0]-s[0];return 0!==e?e:t[1]-s[1]};SortZOrderList=Sf;const wf=self._s,vf=self.Ns;let bf=null;const Mf=new Set,xf=[],Tf=[];let Cf=!1,If=!1,_f=!1;const Gf=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.ek=class{constructor(t){bf=t,Object.defineProperties(this,{ik:{value:bf.rk().nk(),writable:!1},hk:{value:bf.lk().ak(),writable:!1},uk:{value:{},writable:!1},ck:{value:{},writable:!1},fk:{value:bf.dk(),writable:!1},pk:{value:bf.mk(),writable:!1},gk:{value:bf.yk(),writable:!1},Sk:{value:bf.wk(),writable:!1},vk:{value:new Date(bf.bk()),writable:!1},storage:{value:new self.Mk(bf),writable:!1},xk:{value:bf.Tk(),writable:!1},Ck:{value:bf.Ik(),writable:!1},_k:{value:bf.Gk(),writable:!1},Kx:{value:bf.Pk(),writable:!1},Ak:{value:bf.Rk(),writable:!1},Ek:{value:new self.Ok(t),writable:!1},Fk:{value:new self.Dk(t),writable:!1}}),bf.Lk().addEventListener("keydown",(t=>{Mf.has(t.key)?t.stopPropagation():Mf.add(t.key)})),bf.Lk().addEventListener("keyup",(t=>Mf.delete(t.key))),bf.Sf().addEventListener("window-blur",(()=>Mf.clear())),bf.Tk()&&(self.alert=t=>(Cf||(Cf=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}kk(t){Object.defineProperties(this.uk,t)}Nk(t){Object.defineProperties(this.ck,t)}addEventListener(t,s){bf.Lk().addEventListener(t,s)}removeEventListener(t,s){bf.Lk().removeEventListener(t,s)}Bk(t,...s){vf.oi(t);const e=bf.$k(),i=e.Wk(t);if(!i)throw new Error(`cannot find function name '${t}'`);if(!i.Iu())return i.Vk();if(s.length<i.jk())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${i.jk()} expected)`);const n=i.Uk();let r=n.zk();const h=e.Hk();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.zk())t.has(s)||(r.push(s),t.add(s));for(const s of e.Jk())t.has(s)||(r.push(s),t.add(s))}return n.qk(r,i.Yk(),i.Xk(),i.Vk(),...s)}Kk(t){const s=bf.Qk().Zk();if(!s)throw new Error("not in a function which returns a value");switch(s.tN()){case 1:"number"==typeof t&&s.sN(t);break;case 2:"string"==typeof t&&s.sN(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.sN(t)}}signal(t){vf.oi(t),bf.$k().eN(t)}iN(t){return vf.oi(t),bf.$k().nN(t)}rN(){return[bf.Ik(),bf.Gk()]}get hN(){return bf.oN()}get aN(){return bf.lN()}get uN(){return bf.cN()}get fN(){return bf.dN()}get pN(){return bf.mN()}get gN(){return bf.yN()}get SN(){return bf.wN()}set SN(t){vf.ii(t),bf.vN(t)}get bN(){return If||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),If=!0),bf.MN()}get framesPerSecond(){return bf.MN()}get xN(){return bf.TN()}get CN(){return bf.IN()}get _N(){return bf.GN()}get PN(){return bf.AN()}set PN(t){if(!Gf.has(t))throw new Error("invalid framerate mode");bf.RN(t)}get EN(){return bf.ON()}set EN(t){vf.ii(t),bf.FN(t)}get DN(){return bf.LN()}set DN(t){bf.kN(t)}get NN(){return bf.rk().BN()}get $N(){return bf.rk().WN()}random(){return bf.VN()}get layout(){const t=bf.jN();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.UN()}zN(t){const s=bf.HN();let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(e=s.JN(t),!e)throw new Error("invalid layout");return e.UN()}qN(){return bf.HN().YN().map((t=>t.UN()))}XN(t){const s=bf.HN();let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(e=s.JN(t),!e)throw new Error("invalid layout");s.KN()||s.ZN(e)}get keyboard(){const t=bf.QN().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get tB(){const t=bf.QN().tB;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get sB(){const t=bf.QN().sB;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get eB(){const t=bf.QN().eB;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}iB(t,s){vf.oi(t),vf.oi(s),bf.nB(t,s)}rB(t){vf.ii(t);const s=bf.hB(t);return s?s.oB():null}aB(t,s){vf.Ri(s);const e=bf.lB();for(const s of t){const t=bf.uB(s),e=t.cB();xf.push([e.fB().tk(),e.dB()]),Tf.push(t)}if(0===xf.length)return;xf.sort(Sf),Tf.sort(((t,e)=>s(t.oB(),e.oB())));let i=!1;for(let t=0,s=xf.length;t<s;++t){const s=Tf[t],n=e.pB(xf[t][0]),r=xf[t][1],h=n.mB();h[r]!==s&&(h[r]=s,s.cB().gB(n,!0),n.yB(s),i=!0)}i&&bf.SB(),wf.bh(xf),wf.bh(Tf)}async wB(t,s){_f||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),_f=!0);const e=new MessageChannel,i=e.port1,n=e.port2;return await bf.vB("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),i}alert(t){return bf.vB("runtime","alert",{message:t+(bf.Tk()?" [via Web Worker]":"")})}bB(t){return vf.ii(t),bf.MB(t)}xB(t){bf.TB(t)}async CB(t,s,e){vf.ai(t),vf.Qe(s),vf.Bi(e,DOMRect),e||(e=new DOMRect(0,0,0,0));const i=bf.IB();if(!i)return;bf.SB();const n=await i._B(t||"image/png",s,e.x,e.y,e.width,e.height);return await bf.GB(wf.EB.RB.AB.PB,null),n}}}{const Pf=self._s,Af=self.Ns;let Rf=null;self.OB=class{constructor(t){Rf=t,Object.defineProperties(this,{DB:{value:!0,writable:!1}})}LB(t){const s=self.NB.kB(t);if(!s)throw new Error("invalid IImageInfo");s.BB(Rf.$B())}WB(t){return Rf.eo(t)}VB(t){return Rf.io(t)}jB(t){return Rf.no(t)}UB(t){return Rf.ro(t)}zB(t){return Rf.HB(t)}JB(t){return"flat"===Rf.qB()&&Pf.Zh(t)&&(t=t.toLowerCase()),Rf.YB(t)}get XB(){return Rf.KB()}async ZB(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}QB(...t){return Rf.t$(...t)}s$(t){return Rf.e$(t)}i$(t){return Rf.n$(t)}}}{const Ef=self._s,Of=self.Ns;let Ff=null;self.r$=class{constructor(t){Ff=t,Object.defineProperties(this,{runtime:{value:Ff.$B(),writable:!1}})}h$(t,s){const e=Ff.$B(),i=e.uB(t),n=e.uB(s);return Ff.o$(i,n)}a$(t,s){const e=Ff.$B(),i=e.uB(t);for(const t of s){const s=e.uB(t);if(Ff.o$(i,s))return t}return null}l$(t){const s=Ff.$B().uB(t),e=Ff.u$(s);return e?e.oB():null}c$(t,s){if(Of.ii(t),Of.ii(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Ff.f$(t,s)}d$(){return Ff.p$()}m$(t,s){const e=Ff.$B();let i;i=Array.isArray(t)?t.map((t=>e.g$(t))):[e.g$(t)];const n=Ef.Rect.Xa(s),r=[];return Ff.y$(null,i,n,r),r.map((t=>t.oB()))}}}{const Df=self._s,Lf=self.Ns;let kf=null;const Nf=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Bf=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),$f=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.Ok=class{constructor(t){kf=t,Object.defineProperties(this,{S$:{value:Df.Zs.oe,writable:!1},os:{value:Nf.get(Df.Zs.Qs)||"unknown",writable:!1},w$:{value:Df.Zs.te,writable:!1},browser:{value:Bf.get(Df.Zs.se)||"unknown",writable:!1},v$:{value:Df.Zs.ee,writable:!1},b$:{value:$f.get(Df.Zs.ne)||"unknown",writable:!1}})}get M$(){let t=kf.x$();return kf.T$()?t="nwjs":kf.C$()?t="windows-webview2":"cordova"===t?t="Android"===Df.Zs.Qs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get R_(){return kf.IB().I$()}get _$(){return kf.IB().G$()}get P$(){return kf.IB().A$()}get R$(){return kf.IB().E$()}get O$(){return kf.IB().F$()}get D$(){return kf.IB().L$()}get k$(){return kf.IB().N$()}get B$(){return kf.IB().$$()}get devicePixelRatio(){return kf.W$()}}}{const Wf=self._s,Vf=self.Ns;self.Mk=class{constructor(t){this.V$=t.j$()}getItem(t){return Vf.oi(t),this.V$.getItem(t)}setItem(t,s){return Vf.oi(t),this.V$.setItem(t,s)}removeItem(t){return Vf.oi(t),this.V$.removeItem(t)}clear(){return this.V$.clear()}keys(){return this.V$.keys()}}}{const jf=self._s,Uf=self.Ns,zf=jf.Gs();self.U$=class{#t;constructor(){const t=jf.H$.z$(zf);this.#t=t,Object.defineProperties(this,{runtime:{value:t.$B().J$(),writable:!1},id:{value:t.q$(),writable:!1},Y$:{value:t.X$(),writable:!1},K$:{value:t.Z$(),writable:!1},Q$:{value:t.tW(),writable:!1},sW:{value:t.eW(),writable:!1},iW:{value:t.nW(),writable:!1},rW:{value:t.hW(),writable:!1},oW:{value:t.aW(),writable:!1},lW:{value:t.uW(),writable:!1}}),t.$B().cW(this,t)}static fW(t){if(!t)return null;const s=jf.H$.dW(t);return s?s.pW():null}mW(){return this.#t.yW().gW()}SW(){return this.#t.wW().oB()}}}{const Hf=globalThis._s,Jf=globalThis.Ns,qf=Hf.Gs();globalThis.vW=class{#t;constructor(){const t=Hf.H$.z$(qf);this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},runtime:{value:t.$B().J$(),writable:!1},bW:{value:t.MW().pW(),writable:!1}}),t.$B().cW(this,t)}addEventListener(t,s){Jf.oi(t),Jf.Ri(s),this.#t.Lk().addEventListener(t,s)}removeEventListener(t,s){Jf.oi(t),Jf.Ri(s),this.#t.Lk().removeEventListener(t,s)}xW(){return[...this.TW()]}IW(){return Hf.$h(this.TW())}_W(){return[...this.GW()]}PW(){return Hf.$h(this.GW())}AW(t){const s=this.#t,e=s.$B().RW(t),i=s.EW(e);return i?i.oB():null}*TW(){for(const t of this.#t.OW())yield t.oB()}*GW(){for(const t of this.#t.DW().FW())yield t.oB()}}}{const Yf=globalThis._s,Xf=globalThis.Ns,Kf=Yf.Gs();globalThis.LW=class extends globalThis.vW{#t;constructor(){super();const t=Yf.H$.z$(Kf);this.#t=t}kW(t){Xf.Ri(t);const s=this.#t;if(s.NW()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.BW(t)}Te(t,s,e,i,n){if(Xf.Ze(s),Xf.Ze(e),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.$B(),o=h.jN().fB(t);if(!o)throw new Error("invalid layer");const a=h.$W(r,o,s,e,i,n);i&&o.WW(a);const l=h.$k();return l.VW(!0),a.jW(),l.VW(!1),l.UW()||h.HN().zW()||h.HW(),a.oB()}JW(){return this.#t.qW().map((t=>t.gW()))}*YW(){for(const t of this.#t.qW())yield t.gW()}XW(t){return Xf.Ni(t,globalThis.KW),t.ZW(this)}}}{const Zf=globalThis._s,Qf=globalThis.Ns,td=globalThis.LW,sd=Zf.Gs();globalThis.KW=class extends globalThis.vW{#t;constructor(){super();const t=Zf.H$.z$(sd);this.#t=t}QW(){return this.#t.tV().map((t=>t.gW()))}*sV(){for(const t of this.#t.tV())yield t.gW()}ZW(t){Qf.Ni(t,td);const s=this.#t,e=s.$B().g$(t);return s.eV(e)}}}{const ed=self._s,id=self.Ns,nd=new WeakMap,rd=["above","below","top-sublayer","bottom-sublayer"];self.iV=class{constructor(t){nd.set(this,t);const s=[],e=t.nV(),i=e.rV().length;for(let t=0;t<i;++t)s.push(new self.hV(e,t));Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},index:{value:t.tk(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){id.oi(t),id.Ri(s),nd.get(this).Lk().addEventListener(t,s)}removeEventListener(t,s){id.oi(t),id.Ri(s),nd.get(this).Lk().removeEventListener(t,s)}get width(){return nd.get(this).Vg()}set width(t){id.ii(t),nd.get(this).Yg(t)}get height(){return nd.get(this).Zg()}set height(t){id.ii(t),nd.get(this).jg(t)}oV(t,s){id.ii(t),id.ii(s);const e=nd.get(this);e.Yg(t),e.jg(s)}getSize(){const t=nd.get(this);return[t.Vg(),t.Zg()]}set scale(t){id.ii(t),nd.get(this).aV(t)}get scale(){return nd.get(this).lV()}set angle(t){id.ii(t),nd.get(this).uV(t)}get angle(){return nd.get(this).cV()}set scrollX(t){id.Ze(t),nd.get(this).fV(t)}get scrollX(){return nd.get(this).dV()}set scrollY(t){id.Ze(t),nd.get(this).pV(t)}get scrollY(){return nd.get(this).mV()}scrollTo(t,s){id.Ze(t),id.Ze(s);const e=nd.get(this);e.fV(t),e.pV(s)}gV(){const t=nd.get(this);return[t.dV(),t.mV()]}yV(t){const s=nd.get(this);let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return e=s.fB(t),e?e.SV():null}wV(){return nd.get(this).vV().map((t=>t.SV()))}*bV(){for(const t of nd.get(this).bV())yield t.SV()}MV(t,s,e){const i=nd.get(this),n=self.xV;id.oi(t),id.Bi(s,n);const r=s?i.$B().TV(s):null,h=rd.indexOf(e);if(h<0)throw new Error("invalid location");i.CV(t,r,h)}IV(t,s,e){const i=nd.get(this),n=i.$B(),r=self.xV;id.Ni(t,r);const h=n.TV(t);if(!h)throw new Error("invalid layer");id.Bi(s,r);const o=s?n.TV(s):null,a=rd.indexOf(e);if(a<0)throw new Error("invalid location");i._V(h,o,a)}GV(t){const s=nd.get(this),e=self.xV;id.Ni(t,e);const i=s.$B().TV(t);if(!i)throw new Error("invalid layer");const n=i.$B();s.PV(i),n.$k().UW()||n.HW()}AV(){const t=nd.get(this),s=t.$B();t.RV(),s.$k().UW()||s.HW()}EV(t,s){id.ii(t),id.ii(s),nd.get(this).OV(t,s)}FV(){return nd.get(this).DV()}set j(t){id.oi(t);const s=nd.get(this);if("perspective"===t)s.LV();else{if("orthographic"!==t)throw new Error("invalid projection");s.kV()}}get j(){return nd.get(this).NV()?"orthographic":"perspective"}}}{const hd=self._s,od=self.Ns,ad=new WeakMap,ld=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ud=new Map([...ld.entries()].map((t=>[t[1],t[0]]))),cd=new Set(["2d","3d"]),fd=hd.zn(hd.To);self.xV=class{constructor(t){ad.set(this,t);const s=[],e=t.nV(),i=e.rV().length;for(let t=0;t<i;++t)s.push(new self.hV(e,t));Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},layout:{value:t.JN().UN(),writable:!1},effects:{value:s,writable:!1}}),t.$B().cW(this,t)}get BV(){const t=ad.get(this).$V();return t?t.SV():null}*WV(){for(const t of ad.get(this).WV())yield t.SV()}*VV(){for(const t of ad.get(this).jV())yield t.SV()}*UV(){for(const t of ad.get(this).jV())for(const s of t.zV())yield s.SV()}get index(){return ad.get(this).tk()}get isVisible(){return ad.get(this).HV()}set isVisible(t){ad.get(this).JV(t)}get qV(){return ad.get(this).YV()}get XV(){return ad.get(this).KV()}set XV(t){ad.get(this).ZV(t)}get QV(){return ad.get(this).tj()}set QV(t){ad.get(this).sj(!!t)}get ej(){return ad.get(this).ij()}get opacity(){return ad.get(this).tO()}set opacity(t){t=hd.Kn(+t,0,1),isNaN(t)||ad.get(this).eO(t)}set scale(t){od.ii(t),ad.get(this).nj(t)}get scale(){return ad.get(this).rj()}set hj(t){od.ii(t),ad.get(this).oj(t)}get hj(){return ad.get(this).aj()}set angle(t){od.ii(t),ad.get(this).uV(t)}get angle(){return ad.get(this).lj()}set uj(t){od.ii(t),ad.get(this).cj(t)}get uj(){return ad.get(this).fj()}set dj(t){od.ii(t),ad.get(this).pj(t)}get dj(){return ad.get(this).mj()}set gj(t){od.ii(t),ad.get(this).KM(t)}get gj(){return ad.get(this).XM()}set renderingMode(t){if(!cd.has(t))throw TypeError("invalid rendering mode");ad.get(this).yj("3d"===t)}get renderingMode(){return ad.get(this).Sj()?"3d":"2d"}set wj(t){ad.get(this).vj(t)}get wj(){return ad.get(this).bj()}set Mj(t){ad.get(this).xj(t)}get Mj(){return ad.get(this).Tj()}set JD(t){od.oi(t);const s=ld.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");ad.get(this).FM(s)}get JD(){return ud.get(ad.get(this).Cj())}set backgroundColor(t){if(od.Ti(t),t.length<3)throw new Error("expected 3 elements");fd.Ao(t[0],t[1],t[2]);const s=ad.get(this),e=s.Ij();e.zo(fd)||(e.ko(fd),s.$B().SB())}get backgroundColor(){const t=ad.get(this).Ij();return[t.No(),t.Bo(),t.$o()]}set scrollX(t){od.Ze(t);const s=ad.get(this);s._j(!0),s.fV(t)}get scrollX(){return ad.get(this).dV()}set scrollY(t){od.Ze(t);const s=ad.get(this);s._j(!0),s.pV(t)}get scrollY(){return ad.get(this).mV()}scrollTo(t,s){od.Ze(t),od.Ze(s);const e=ad.get(this);e._j(!0),e.fV(t),e.pV(s)}gV(){const t=ad.get(this);return[t.dV(),t.mV()]}Gj(){ad.get(this)._j(!1)}getViewport(){return ad.get(this).Pj().el()}Aj(t,s,e=0){od.Ze(t),od.Ze(s),od.Ze(e);const i=ad.get(this),n=i.$B();return i.Rj(t-n.A$(),s-n.E$(),e)}Ej(t,s,e=0){od.Ze(t),od.Ze(s),od.Ze(e);const i=ad.get(this),n=i.$B(),[r,h]=i.Oj(t,s,e);return[r+n.A$(),h+n.E$()]}Fj(t,s,e=0){return od.Ze(t),od.Ze(s),od.Ze(e),ad.get(this).Dj(t,s,e)}Lj(t,s,e=0){return od.Ze(t),od.Ze(s),od.Ze(e),ad.get(this).kj(t,s,e)}get Nj(){return ad.get(this).Bj()}}}{let dd=function(t){let s=gd.get(t);return s||(s=pd.zn(pd.Event.Sf),gd.set(t,s),s)};GetDispatcher=dd;const pd=self._s,md=self.Ns,gd=new WeakMap,yd=pd.Gs();self.$j=class{#t;constructor(){const t=pd.H$.z$(yd);this.#t=t;const s={runtime:{value:t.$B().J$(),writable:!1},objectType:{value:t.Wj().gW(),writable:!1},bW:{value:t.MW().pW(),writable:!1}};t.Vj(s),t.jj(s),Object.defineProperties(this,s),t.$B().cW(this,t)}static Uj(){return pd.H$.zj()}Hj(){const t=gd.get(this);t&&(t.Hn(),gd.delete(this))}addEventListener(t,s,e){md.oi(t),md.Ri(s),dd(this).addEventListener(t,s,e)}removeEventListener(t,s,e){md.oi(t),md.Ri(s),dd(this).removeEventListener(t,s,e)}dispatchEvent(t){dd(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.$B();s.Jj(t),s.$k().UW()||s.HN().zW()||s.$k().qj()||s.HW()}Yj(){const t=this.#t.Xj();return t?t.map((t=>t.oB())):[]}*Kj(){const t=this.#t;if(t.Zj())for(const s of t.Qj())yield s.oB()}get uid(){return this.#t.tU()}get sU(){return this.#t.eU()}get iU(){return this.#t.nU()}set SN(t){md.ii(t),this.#t.vN(t)}get SN(){return this.#t.rU()}hU(){this.#t.oU()}get aN(){const t=this.#t;return t.$B().lN(t)}aU(...t){md.Ti(t);const s=new Set(t),e=this.#t.lU();return s.isSubsetOf(e)}uU(t){md.Ni(t,Set),this.#t.cU(t)}fU(){return new Set(this.#t.lU())}signal(t){md.oi(t);const s=this.#t;s.$B().$k().dU(s,t)}iN(t){md.oi(t);const s=this.#t;return s.$B().$k().pU(s,t)}}}{const Sd=self._s,wd=self.Ns,vd=Sd.Gs();self.mU=class extends self.$j{#t;#s=!1;#e=null;#i=!1;#n=null;#r;#h;constructor(t){super(),this.#t=Sd.H$.z$(vd),this.#s=!1,this.#e=null,this.#i=!1,this.#n=null,this.#r=t?.gU,this.#h=t?.yU}Hj(){this.SU(!1),this.wU(!1),super.Hj()}vU(){return Sd.H$.bU()}MU(t){const s=this.#t;s.$B().xU(t,s)}TU(t){const s=this.#t;return s.$B().GB(t,s)}CU(t,s){if(wd.oi(t),wd.Ri(s),!this.#r)throw new Error("no DOM component id set");this.#t.$B().IU(this.#r,t,s)}_U(t){wd.Ti(t);for(const[s,e]of t)this.CU(s,e)}GU(t,s){if(wd.oi(t),!this.#r)throw new Error("no DOM component id set");this.#t.$B().Wc(this.#r,t,s)}PU(t,s){if(wd.oi(t),!this.#r)throw new Error("no DOM component id set");return this.#t.$B().vB(this.#r,t,s)}AU(t,s){if(!this.#t.$B().Tk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.GU(t,s)}SU(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.$B();if(t){if(!this.#e)if(this.#t.$B().RU()){const t=globalThis.EU,s=this.bW;this.#e=()=>{const e=performance.now();this.OU(),t.FU(s,performance.now()-e)}}else this.#e=()=>this.OU();s.Sf().addEventListener("tick",this.#e)}else s.Sf().removeEventListener("tick",this.#e)}DU(){return this.#s}OU(){}wU(t){if(t=!!t,this.#i===t)return;this.#i=t;const s=this.#t.$B();if(t){if(!this.#n)if(this.#t.$B().RU()){const t=globalThis.EU,s=this.bW;this.#n=()=>{const e=performance.now();this.LU(),t.FU(s,performance.now()-e)}}else this.#n=()=>this.LU();s.Sf().addEventListener("tick2",this.#n)}else s.Sf().removeEventListener("tick2",this.#n)}kU(){return this.#i}LU(){}NU(){return[]}BU(){return null}$U(t){}WU(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.$B().VU(this.#h)}jU(t,s){if(wd.oi(t),wd.Ri(s),!this.#h)throw new Error("no wrapper component id set");this.#t.$B().UU(this.#h,t,s)}zU(t){wd.Ti(t);for(const[s,e]of t)this.jU(s,e)}HU(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.Fk.JU(this.#h,t,s)}qU(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.Fk.YU(this.#h,t,s)}}}{let bd=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=Md.H$.z$(Pd),e=s.cB();this.#t=s,this.#s=e,Gd.set(this,s);const i=[],n=e.XU();if(n){const t=e.Wj().nV().rV().length;for(let s=0;s<t;++s)i.push(new self.hV(n,s))}const r={effects:{value:i,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.JN().UN()}get KU(){return this.#s.fB().SV()}get x(){return this.#s.zM()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.zM()===t||(s.HM(t),s.ZU())}get y(){return this.#s.qM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.qM()===t||(s.YM(t),s.ZU())}setPosition(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.zM()===t&&e.qM()===s||(e.QU(t,s),e.ZU())}tz(){const t=this.#s;return[t.zM(),t.qM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const e=this.#s;e.sz(t,s),e.ZU()}set ez(t){t=+t;const s=this.#s;isNaN(t)||s.iz()===t||(s.nz(t),s.ZU())}get ez(){return this.#s.iz()}set rz(t){t=+t;const s=this.#s;isNaN(t)||s.hz()===t||(s.oz(t),s.ZU())}get rz(){return this.#s.hz()}az(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.iz()===t&&e.hz()===s||(e.nz(t),e.oz(s),e.ZU())}lz(){const t=this.#s;return[t.iz(),t.hz()]}get gj(){return this.#s.XM()}set gj(t){t=+t;const s=this.#t,e=this.#s;isNaN(t)||e.XM()===t||(e.KM(t),s.$B().SB())}get uz(){return this.#s.cz()}get width(){return this.#s.Vg()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.Vg()===t||(s.Yg(t),s.ZU())}get height(){return this.#s.Zg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Zg()===t||(s.jg(t),s.ZU())}oV(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.Vg()===t&&e.Zg()===s||(e.TA(t,s),e.ZU())}getSize(){const t=this.#s;return[t.Vg(),t.Zg()]}get angle(){return this.#s.cV()}set angle(t){t=Md.Zn(+t);const s=this.#s;isNaN(t)||s.cV()===t||(s.uV(t),s.ZU())}get fz(){return Md.tr(this.angle)}set fz(t){this.angle=Md.Qn(t)}Zl(t){return t?(this.#s.dz(Id,_d,!1),Id.el()):this.#s.pz().el()}mz(t){return t?(this.#s.dz(Id,_d,!1),_d.Hl()):this.#s.gz().Hl()}yz(){return this.#s.Sz()}get isVisible(){return this.#s.YV()}set isVisible(t){t=!!t;const s=this.#t,e=this.#s;e.YV()!==t&&(e.JV(t),s.$B().SB())}get opacity(){return this.#s.tO()}set opacity(t){t=Md.Kn(+t,0,1);const s=this.#t,e=this.#s;isNaN(t)||e.tO()===t||(e.eO(t),s.$B().SB())}set wz(t){if(xd.Ti(t),t.length<3)throw new Error("expected 3 elements");Ed.Ao(t[0],t[1],t[2]);const s=this.#t,e=this.#s;e.vz().zo(Ed)||(e.bz(Ed),s.$B().SB())}get wz(){const t=this.#s.vz();return[t.No(),t.Bo(),t.$o()]}set JD(t){xd.oi(t);const s=Ad.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const e=this.#t;this.#s.FM(s),e.$B().SB()}get JD(){return Rd.get(this.#s.Cj())}Mz(){this.#s.xz()}Tz(){this.#s.Cz()}Iz(t){xd.Ni(t,Cd);const s=this.#t,e=s.$B().TV(t);if(!e)throw new Error("invalid layer");s.cB()._z(e)}Gz(t,e){xd.Ni(t,s),this.#s.Pz(Gd.get(t),e)}get zIndex(){return this.#s.dB()}get Az(){return this.#s.Rz()}set Az(t){this.#s.Ez(!!t)}Tl(t,s){return xd.Ze(t),xd.Ze(s),this.#s.Oz(+t,+s)}h$(t){xd.Ni(t,s);const e=this.#t,i=Gd.get(t);return e.$B().lk().o$(e,i)}l$(){const t=this.#t,s=t.$B().lk().u$(t);return s?s.oB():null}getParent(){const t=this.#t.Fz();return t?t.oB():null}Dz(){const t=this.#t.Lz();return t?t.oB():null}*kz(){for(const t of this.#t.kz())yield t.oB()}Nz(){return this.#t.Bz()}$z(t){const s=this.#t.Wz(t);return s?s.oB():null}*children(){for(const t of this.#t.children())yield t.oB()}*Vz(){for(const t of this.#t.Vz())yield t.oB()}jz(t,e){xd.Ni(t,s),xd.gi(e),e||(e={});const i=this.#t,n=Gd.get(t);i.Uz(n,e)}removeChild(t){xd.Ni(t,s);const e=this.#t,i=Gd.get(t);e.zz(i)}Jz(){const t=this.#t;t.qz()&&t.Fz().zz(t)}Yz(){const t=this.#s;return{Xz:t.Kz(),Zz:t.Qz(),tH:t.sH(),eH:t.iH(),nH:t.rH(),hH:t.oH(),aH:t.lH(),uH:t.cH(),fH:t.dH()}}pH(t,s){xd.ii(t),xd.ii(s),this.#s.mH(t,s)}gH(){const t=this.#s;t.yH(),t.ZU()}SH(t,s,e){xd.ii(t),xd.ii(s),xd.mi(e);const i=this.#s;i.wH(t,s,e)&&i.ZU()}vH(t,s){let e=NaN,i=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.bH()){const a=o.MH().Nx(t,s);null!==a&&(e=a.zM(),i=a.qM(),n=a.XM(),r=a.ZM(),h=a.tx())}return{x:e,y:i,gj:n,xH:r,TH:h}}CH(){const t=this.#s;if(!t.bH())return[0,0];const s=t.MH();return[s._x(),s.Gx()]}}};MakeIWorldInstanceClass=bd;const Md=self._s,xd=self.Ns,Td=self.$j,Cd=self.xV,Id=Md.zn(Md.Rect),_d=Md.zn(Md.Gl),Gd=new WeakMap,Pd=Md.Gs(),Ad=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Rd=new Map([...Ad.entries()].map((t=>[t[1],t[0]]))),Ed=Md.zn(Md.To);self.IH=bd(self.$j),self._H=bd(self.mU)}{const Od=self._s,Fd=self.Ns;self.GH=class extends self.IH{#t;constructor(){super(),this.#t=self.$j.Uj()}PH(){return this.#t.RH().AH()}focus(){this.#t.RH().EH()}blur(){this.#t.RH().OH()}FH(t,s){Fd.oi(t),this.#t.RH().DH(t,s)}}}{let Dd=function(t){let s=Nd.get(t);return s||(s=Ld.zn(Ld.Event.Sf),Nd.set(t,s),s)};GetDispatcher=Dd;const Ld=self._s,kd=self.Ns,Nd=new WeakMap,Bd=Ld.Gs();self.LH=class{#t;constructor(){const t=Ld.H$.z$(Bd);this.#t=t;const s={runtime:{value:t.$B().J$(),writable:!1},behavior:{value:t.NH().kH(),writable:!1},BH:{value:t.WH().$H(),writable:!1}};Object.defineProperties(this,s),t.$B().cW(this,t)}static Uj(){return Ld.H$.zj()}get VH(){return this.#t.jH().oB()}Hj(){const t=Nd.get(this);t&&(t.Hn(),Nd.delete(this))}addEventListener(t,s,e){kd.oi(t),kd.Ri(s),Dd(this).addEventListener(t,s,e)}removeEventListener(t,s,e){kd.oi(t),kd.Ri(s),Dd(this).removeEventListener(t,s,e)}dispatchEvent(t){Dd(this).dispatchEvent(t)}}}{const $d=self._s,Wd=self.Ns,Vd=$d.Gs();self.UH=class{constructor(){const t=$d.H$.z$(Vd),s={runtime:{value:t.$B().J$(),writable:!1},behavior:{value:t.NH().kH(),writable:!1},name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{const jd=self._s,Ud=self.Ns,zd=jd.Gs();self.zH=class{#s;constructor(){const t=jd.H$.z$(zd);this.#s=t;const s={runtime:{value:t.$B().J$(),writable:!1},id:{value:t.q$(),writable:!1}};Object.defineProperties(this,s),t.$B().cW(this,t)}xW(){return this.#s.FW().map((t=>t.oB()))}static fW(t){if(!t)return null;const s=jd.H$.HH(t);return s?s.kH():null}}}{const Hd=self._s,Jd=self.Ns,qd=Hd.zn(Hd.To);self.hV=class{#t;constructor(t,s){this.#t=t;const e={index:{value:s,writable:!1}};Object.defineProperties(this,e)}get name(){return this.#t.rV()[this.index].Pc()}get isActive(){return this.#t.JH(this.index)}set isActive(t){t=!!t;const s=this.#t;s.JH(this.index)!==t&&(s.qH(this.index,t),s.YH(),s.$B().SB())}setParameter(t,s){Jd.ii(t),t=Math.floor(+t);const e=this.#t,i=e.XH(this.index,t);if(null===i)throw new RangeError("invalid index");if(i instanceof Hd.To){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");qd.Ao(s[0],s[1],s[2]),s=qd}else if("number"!=typeof s)throw new TypeError("expected number");e.KH(this.index,t,s)&&e.JH(this.index)&&e.$B().SB()}getParameter(t){Jd.ii(t),t=Math.floor(+t);const s=this.#t.XH(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof Hd.To?[s.No(),s.Bo(),s.$o()]:s}}}{const Yd=self._s,Xd=self.Ns;self.ZH=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1}})}get speed(){return this.#t.QH()}get tJ(){return this.#t.sJ()}get eJ(){return this.#t.iJ()}get nJ(){return this.#t.rJ()}get hJ(){return this.#t.oJ()}get frameCount(){return this.#t.aJ()}lJ(){return this.#t.uJ().map((t=>t.cJ()))}*frames(){for(const t of this.#t.uJ())yield t.cJ()}}}{const Kd=self._s,Zd=self.Ns;self.NB=class{#s;constructor(t){this.#s=t}static kB(t){return t.#s}get width(){return this.#s.Vg()}get height(){return this.#s.Zg()}getSize(){const t=this.#s;return[t.Vg(),t.Zg()]}fJ(t){return t.dJ(this)}pJ(){return this.#s.sR().el()}}}{const Qd=self._s,tp=self.Ns;self.mJ=class extends self.NB{#s;constructor(t){super(t.gJ()),this.#s=t,Object.defineProperties(this,{duration:{value:t.yJ(),writable:!1},ez:{value:t.iz(),writable:!1},rz:{value:t.hz(),writable:!1}})}lz(){const t=this.#s;return[t.iz(),t.hz()]}SJ(){return this.#s.wJ()}vJ(t){return this.bJ(t)[0]}MJ(t){return this.bJ(t)[1]}bJ(t){const s=this.#s;let e=null;if("number"==typeof t)e=s.xJ(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");e=s.TJ(t)}return e?[e.zM(),e.qM()]:this.lz()}CJ(){const t=this.#s.IJ();return t?t.pu():0}_J(t){return this.GJ(t)[0]}PJ(t){return this.GJ(t)[1]}GJ(t){tp.ii(t),t=Math.floor(t);const s=this.#s.IJ();if(!s||t<0||t>=s.pu())return[0,0];const e=s.du();return[e[2*t],e[2*t+1]]}get tag(){return this.#s.AJ()}}}{let sp=function(t){const s=np.get(t);if(s.RJ())throw new Error("timeline/tween was released and is no longer valid");return s};GetTimelineState=sp;const ep=self._s,ip=self.Ns,np=new WeakMap;self.EJ=class{constructor(t){np.set(this,t),t.$B().cW(this,t)}pause(){sp(this).OJ()}resume(){sp(this).FJ()}stop(){sp(this).Bf()}aU(t){return sp(this).DJ(t)}set time(t){ip.ii(t),sp(this).LJ(t)}get time(){return sp(this)._F()}set totalTime(t){ip.ii(t),sp(this).kJ(t)}get totalTime(){return sp(this).NJ()}set tJ(t){sp(this).BJ(!!t)}get tJ(){return sp(this).$J()}set hJ(t){sp(this).WJ(!!t)}get hJ(){return sp(this).VJ()}set playbackRate(t){ip.ii(t),sp(this).jJ(t)}get playbackRate(){return sp(this).UJ()}get progress(){const t=sp(this);return t._F()/t.NJ()}get tags(){return sp(this).zJ()}get finished(){return sp(this).HJ()}get JJ(){return sp(this).IsPlaying()}get qJ(){return sp(this).YJ()}get XJ(){return np.get(this).RJ()}}}{let rp=function(t){const s=ap.get(t);if(s.RJ())throw new Error("timeline was released and is no longer valid");return s};GetTimelineState=rp;const hp=self._s,op=self.Ns,ap=new WeakMap;let lp=null;self.KJ=class extends self.EJ{constructor(t){super(t),ap.set(this,t);const s={name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{let up=function(t){const s=dp.get(t);if(s.RJ())throw new Error("tween was released and is no longer valid");return s};GetTweenState=up;const cp=self._s,fp=self.Ns,dp=new WeakMap,pp=new WeakMap;let mp=null;self.ZJ=class extends self.EJ{constructor(t,s,e){super(t),mp||(mp=e.QJ),dp.set(this,t),s&&pp.set(this,s)}stop(){const t=up(this);pp.get(this).tq(t)}sq(t){fp.oi(t);const s=self.Vu.oc(mp(t));up(this).eq(s)}get VH(){const t=up(this).iq();return t?t.oB():null}get nq(){return up(this).rq()}set nq(t){up(this).hq(!!t)}get value(){const t=up(this);if("value"!==t.oq())throw new Error("not a value tween");return t.lq("value").aq()}}}{const gp=self._s,yp=self.Ns;self.uq=class extends self.U${constructor(){super()}}}{const Sp=self._s,wp=self.Ns,vp=Sp.Gs();self.cq=class extends self.uq{#t;#e;#s=0;#r=new Map;constructor(t){if(super(),this.#t=Sp.H$.z$(vp),!t?.gU)throw new Error("no DOM component ID specified");this.#e=t.gU,this.fq("elem-focused",(t=>t.pq())),this.fq("elem-blurred",(t=>{t&&t.mq()}))}gq(t){const s=this.#s++;return this.#r.set(s,t),s}yq(t){this.#r.delete(t)}fq(t,s){this.#t.$B().IU(this.#e,t,(t=>{const e=this.#r.get(t.elementId);s(e,t)}))}Sq(t){wp.Ti(t);for(const[s,e]of t)this.Sq(s,e)}}}{const bp=self._s,Mp=self.Ns,xp=new WeakMap,Tp=bp.Gs();self.wq=class extends self.LW{#t;constructor(){super(),this.#t=bp.H$.z$(Tp)}vq(){}bq(){return this.#t.gJ().Mq()}xq(t){}Tq(t){}Cq(){}Iq(t){}}}{const Cp=self._s,Ip=self.Ns,_p=new WeakMap,Gp=Cp.Gs();self._q=class extends self._H{#t;#n=null;#s=null;constructor(t){super(t),this.#t=Cp.H$.z$(Gp)}Hj(){if(super.Hj(),this.#n){const t=this.#t.$B().Sf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}Gq(){if(this.#n)return;this.#n=()=>this.Pq(),this.#s=()=>this.Aq();const t=this.#t.$B().Sf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}Pq(){}Aq(){}Rq(t){}}}{const Pp=self._s,Ap=self.Ns,Rp=Pp.zn(Pp.Rect),Ep=new WeakMap,Op=Pp.Gs();self.Eq=class extends self._q{#t=-1;#s=!0;#r=!1;#i=!1;#e=-.2;#h=Pp.zn(Pp.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.gU)throw new Error("no DOM component ID specified");super(t);const s=Pp.H$.z$(Op);Ep.set(this,s),this.#t=this.bW.gq(this);const e=s.$B().IB();this.#o=e.Oq(),this.#a=e.Fq(),this.SU(!0)}Hj(){super.Hj(),this.bW.yq(this.#t),this.Dq("destroy"),this.#t=-1,Ep.delete(this)}Lq(){if(Ep.get(this).$B().Tk())throw new Error("not valid in worker mode");return this.kq("get-element")}Dq(t,s){s||(s={}),s.elementId=this.#t,this.GU(t,s)}kq(t,s){return s||(s={}),s.elementId=this.#t,this.AU(t,s)}Nq(t,s){return s||(s={}),s.elementId=this.#t,this.PU(t,s)}Bq(t){t||(t={});const s=Ep.get(this).cB();t.elementId=this.#t,t.isVisible=s.YV(),t.htmlIndex=s.fB().$q(),t.htmlZIndex=s.Wq(),Object.assign(t,this.Vq()),this.#s=!!t.isVisible,this.AU("create",t),this.jq(!0)}Uq(t){t=!!t,this.#s!==t&&(this.#s=t,this.Dq("set-visible",{isVisible:t}))}OU(){this.jq(!1)}zq(){const t=Ep.get(this).$B().IB().Hq();return"Android"===Pp.Zs.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}jq(t){const s=Ep.get(this);if(s.Jq())return;const e=s.cB(),i=e.fB(),n=e.pz();let[r,h]=i.Oj(n.Za(),n.Qa()),[o,a]=i.Oj(n.tl(),n.sl());const l=s.$B().IB(),u=l.F$(),c=l.L$();if(!e.YV()||!i.YV())return void this.Uq(!1);if(!this.zq()&&(o<=0||a<=0||r>=u||h>=c))return void this.Uq(!1);Rp.set(r,h,o,a);const f=l.Oq(),d=l.Fq(),p=i.$q(),m=e.Wq();if(!t&&Rp.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.Uq(!0);this.#h.S(Rp),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.Uq(!0);let g=null;this.#i&&(g=i.qq()+this.#e),this.Dq("update-position",{left:Math.round(this.#h.Za()),top:Math.round(this.#h.Qa()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}Yq(){this.kq("focus",{focus:!0})}Xq(){this.kq("focus",{focus:!1})}pq(){this.#r=!0}mq(){this.#r=!1}Kq(){return this.#r}Zq(t,s){this.Qq("set-css-style",{prop:Pp.bo(t),val:s})}tY(t,s){this.Qq("set-attribute",{name:t,val:s})}sY(t){this.Qq("remove-attribute",{name:t})}eY(){this.#c||(this.#c=!0,Promise.resolve().then((()=>{this.#c=!1,this.Dq("update-state",this.Vq())})))}Vq(){}iY(){return this.#t}}}{const Fp=self._s,Dp=self.Ns;self.nY=class extends self.zH{constructor(){super()}}}{const Lp=self._s,kp=self.Ns;self.rY=class extends globalThis.UH{constructor(){super()}vq(){}}}{const Np=self._s,Bp=self.Ns,$p=new WeakMap,Wp=Np.Gs();self.hY=class extends self.LH{#i=!1;#s=!1;#t=!1;constructor(){super(),$p.set(this,Np.H$.z$(Wp))}Hj(){super.Hj(),this.SU(!1),this.wU(!1),this.oY(!1),$p.delete(this)}vU(){return Np.H$.bU()}aY(){}MU(t){const s=$p.get(this);s.$B().xU(t,s.jH(),s.WH())}TU(t){const s=$p.get(this);return s.$B().GB(t,s.jH(),s.WH())}SU(t){if(t=!!t,this.#i===t)return;this.#i=t;const s=$p.get(this).$B();t?s.lY(this):s.uY(this)}DU(){return this.#i}OU(){}wU(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=$p.get(this).$B();t?s.cY(this):s.fY(this)}kU(){return this.#s}LU(){}oY(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=$p.get(this).$B();t?s.dY(this):s.pY(this)}mY(){return this.#t}gY(){}NU(){return[]}BU(){return null}$U(t){}}}{const Vp=self._s,jp=self.Ns;let Up=null;self.Dk=class{constructor(t){Up=t}xB(t){Up.TB(t)}JU(t,s,e){jp.oi(t),jp.oi(s),jp.Ci(e),Up.yY(t,s,e)}YU(t,s,e){return jp.oi(t),jp.oi(s),jp.Ci(e),Up.SY(t,s,e)}wY(t){return jp.ai(t),new self.vY(Up,t)}set bY(t){Up.MY(!!t)}get bY(){return Up.xY()}TY(t){Up.CY(!!t)}IY(t){jp.Ze(t);const s=Up._Y(t);return s?s.gW():null}}}{const zp=self._s,Hp=self.Ns;self.vY=class{#t;#s;#h;#e;#r;#n;constructor(t,s){this.#t=t;const e=t.$k(),i=t.Hk();this.#s=i,this.#h=i.GY();const n=t.Qk();this.#e=n.PY(),this.#r=n.AY(i);const r=e.RY().AY();this.#n=r,s&&r.EY(s),t.OY(!1)}FY(){const t=this.#t.$k(),s=this.#h,e=this.#n;t.DY(s),this.#s.LY(this.#e,this.#r),t.kY(s),e.NY(e.tk()+1)}get BY(){return this.#n.$Y()}release(){const t=this.#t,s=t.Qk(),e=t.$k().RY();t.OY(!0),e.WY(),s.WY()}}}{const Jp=self._s,qp=self.Ns;let Yp=null,Xp=null;self.VY=class{constructor(t,s){Xp=t,Yp=s}jY(){Yp.lO()}UY(t){Yp.oO(t)}zY(){Yp.gv()}HY(){Yp.uv()}JY(){Yp.xv()}setColor(t){Yp.sO(t[0],t[1],t[2],t[3])}qY(t,s,e,i){Yp.sO(t,s,e,i)}YY(){Yp.iO()}XY(t){Yp.eO(t)}KY(t){Yp.Uv(t)}ZY(){Yp.zv()}rect(t){Yp.fO(t.left,t.top,t.right,t.bottom)}QY(t,s,e,i){Yp.fO(t,s,e,i)}tX(t){Yp.Gl(Jp.Gl.Jl(t))}sX(t,s,e,i,n,r,h,o){Yp.Ab(t,s,e,i,n,r,h,o)}eX(t,s){Yp.sb(Jp.Gl.Jl(t),Jp.Rect.il(s))}iX(t,s){Yp.mO(Jp.Gl.Jl(t),Jp.Gl.Jl(s))}nX(t,s,e,i,n,r,h,o,a,l,u,c,f){Yp.gO(t,s,e,i,n,r,h,o,a,l,u,c,Jp.Rect.il(f))}rX(t,s,e,i,n,r,h,o,a,l,u,c,f){Yp.Xv(t,s,e,i,n,r,h,o,a,l,u,c,Jp.Gl.Jl(f))}hX(t,s,e){Yp.yO(t,s,e)}oX(t){Yp.Pb(t)}line(t,s,e,i){Yp.iy(t,s,e,i)}aX(t,s,e,i,n,r){Yp.Kv(t,s,e,i,n,r)}lX(t,s,e,i){Yp.eb(t,s,e,i)}uX(t){Yp.hb(Jp.Rect.il(t))}cX(t){Yp.ob(Jp.Gl.Jl(t))}fX(t){Yp.pb(t)}dX(){Yp.mb()}pX(t){Yp.wb(t)}mX(){Yp.Tb()}gX(t){qp.Bi(t,self.yX);const s=t?Xp.TV(t):null;Yp.rO(s)}SX(t,s){const e=self.NB.kB(t);if(!e)throw new Error("invalid IImageInfo");return e.wX(Yp,{Yx:s?.Yx??"clamp-to-edge",Xx:s?.Xx??"clamp-to-edge",Kx:s?.Kx??"trilinear",tT:s?.tT??!0})}vX(t){const s=self.NB.kB(t);if(!s)throw new Error("invalid IImageInfo");s.HP()}dJ(t){const s=self.NB.kB(t);if(!s)throw new Error("invalid IImageInfo");const e=s.cC();return self.yX.bX(Xp,e)}MX(t,s,e){qp.ii(t),qp.ii(s);const i=Yp.sC(t,s,{Yx:e?.Yx??"clamp-to-edge",Xx:e?.Xx??"clamp-to-edge",Kx:e?.Kx??"trilinear",tT:e?.tT??!0});return self.yX.bX(Xp,i)}xX(t,s,e){qp.Ni(s,self.yX);const i=Xp.TV(s);Yp.tR(t,i,{eT:e?.eT??!0})}deleteTexture(t){qp.Ni(t,self.yX);const s=Xp.TV(t);Yp.rC(s)}TX(){const t=Yp.zb();return new self.CX(Xp,t)}IX(){Xp.IB()._X(Yp)}GX(t){qp.Ni(t,globalThis.xV),Xp.TV(t).PX(Yp)}}}{const Kp=self._s,Zp=self.Ns,Qp=new WeakMap,tm=new WeakMap;self.yX=class{constructor(t,s){Qp.set(this,{runtime:t,texture:s}),tm.set(s,this),t.cW(this,s),Object.defineProperties(this,{width:{value:s.Vg(),writable:!1},height:{value:s.Zg(),writable:!1}})}static bX(t,s){if(!s)return null;return tm.get(s)||new self.yX(t,s)}}}{let sm=function(t){return nm.get(t).AX};getActual=sm;const em=self._s,im=self.Ns,nm=new WeakMap;self.CX=class{constructor(t,s){nm.set(this,{runtime:t,AX:s}),t.cW(this,s)}release(){sm(this).Hn()}set RX(t){im.oi(t),sm(this).tA(t)}get RX(){return sm(this).iP()}set EX(t){im.ii(t),sm(this).sA(t)}get EX(){return sm(this).eA()}set lineHeight(t){im.ii(t),sm(this).nA(t)}get lineHeight(){return sm(this).rA()}set OX(t){sm(this).hA(t)}get OX(){return sm(this).oA()}set FX(t){sm(this).aA(t)}get FX(){return sm(this).lA()}setColor(t){im.Ti(t),this.DX(t[0],t[1],t[2])}DX(t,s,e){sm(this).pA(t,s,e)}LX(t){im.oi(t),sm(this).DM(t)}set kX(t){sm(this).mA(t)}get kX(){return sm(this).gA()}set verticalAlign(t){sm(this).yA(t)}get verticalAlign(){return sm(this).SA()}set NX(t){sm(this).wA(t)}get NX(){return sm(this).vA()}set BX(t){sm(this).bA(t)}get BX(){return sm(this).MA()}set text(t){im.oi(t),sm(this).Vc(t)}get text(){return sm(this).xA()}oV(t,s,e){im.ii(t),im.ii(s),im.ii(e),sm(this).TA(t,s,e)}fJ(){const{runtime:t,AX:s}=nm.get(this),e=s.cC();return self.yX.bX(t,e)}pJ(){return sm(this).sR().el()}$X(t){im.Ri(t),sm(this).qP=t}WX(){sm(this).HP()}get VX(){return sm(this).IA()}get jX(){return sm(this).GA()}}}{let rm=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const e=s.at(-1).toLowerCase();return lm.get(e)||""},hm=function(t){return new Promise(((s,e)=>{const i=document.createElement("script");i.onload=s,i.onerror=e,i.async=!1,i.type="module",i.src=t,document.head.appendChild(i)}))};GetTypeFromFileExtension=rm,AddScript=hm;const om=self._s,am=new Set(["local","remote"]),lm=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);om.UX=class extends om.jn{constructor(t,s){super();const e=s.exportType;this.Nc=t,this.zX="folders",this.HX=new Map,this.JX="cordova"===e,this.qX=!!s.isiOSCordova,this.YX=!!s.isFileProtocol,this.XX=s.swClientId,this.KX=s.supportedAudioFormats||{},this.ZX=new Map,this.QX=!1,this.tK=s.scriptFolder,this.sK="",this.eK="",this.iK="",this.nK=s.fileMap||new Map,this.rK=new Map;const i="html5"===e||"scirra-arcade"===e||"instant-games"===e;this.hK=i?"remote":"local",this.oK=new Map,this.aK=[],this.lK=[],this.uK=!1,this.cK=0,this.fK=0,this.dK=0,this.pK=!1,this.mK=om.zn(om.Qd,(()=>this.gK()),50),this.yK=om.zn(om.Ud,Math.max(om.hardwareConcurrency,8)),this.SK=om.zn(om.Ud,20),this.wK=new self.OB(this)}Hn(){for(const t of this.oK.values())t.Hn();this.oK.clear(),om.bh(this.lK),this.Nc=null}$B(){return this.Nc}vK(t){this.zX=t}qB(){return this.zX}bK(){return this.tK}MK(t){this.sK=t}KB(){return this.sK}xK(t){this.eK=t}TK(){return this.eK}CK(t){this.iK=t}IK(){return this.iK}_K(){return this.YX}no(t,s){return s=s||this.hK,om.Zh(t)?("flat"===this.zX&&(t=t.toLowerCase()),this.JX&&this.YX?this.GK(t):"playable-ad-single-file"===this.Nc.x$()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.yK.Bu((()=>om.no(t))):this.SK.Bu((()=>om.no(t)))):om.no(t)}ro(t){return om.Zh(t)?("flat"===this.zX&&(t=t.toLowerCase()),this.JX&&this.YX?this.PK(t):"playable-ad-single-file"===this.Nc.x$()?om.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.hK?this.yK.Bu((()=>om.ro(t))):this.SK.Bu((()=>om.ro(t)))):om.ro(t)}eo(t){return om.Zh(t)?("flat"===this.zX&&(t=t.toLowerCase()),this.JX&&this.YX?this.AK(t):"playable-ad-single-file"===this.Nc.x$()?om.ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.hK?this.yK.Bu((()=>om.eo(t))):this.SK.Bu((()=>om.eo(t)))):om.eo(t)}async io(t){const s=await this.eo(t);return JSON.parse(s)}RK(t,s){return"flat"===this.zX&&(t=t.toLowerCase()),this.Nc.vB("runtime","cordova-fetch-local-file",{filename:t,as:s})}AK(t){return this.RK(t,"text")}async GK(t){const s=await this.RK(t,"buffer"),e=rm(t);return new Blob([s],{type:e})}async EK(t){"flat"===this.zX&&(t=t.toLowerCase());let s=this.HX.get(t);if(s)return s;const e=await this.GK(t);return s=URL.createObjectURL(e),this.HX.set(t,s),s}PK(t){return this.RK(t,"buffer")}YB(t){"flat"===this.zX&&(t=t.toLowerCase());let s=this.sK+t;return"Gecko"===om.Zs.ne&&"preview"===this.Nc.x$()&&(s=this.FK(s)),s}HB(t){return om.Kh(t)?Promise.resolve(t):this.JX&&this.YX?this.EK(t):"playable-ad-single-file"===this.Nc.x$()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.zX&&(t=t.toLowerCase()),Promise.resolve(t))}DK(t){if(om.Kh(t)||"preview"!==this.Nc.x$()||!this.XX||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.XX),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}LK(t){return this.HB(t)}kK(t,s){return(s?"true":"false")+"|"+t}NK(t){const s=!!t.BK;if(t.$K&&!am.has(t.$K))throw new Error("invalid load policy");const e=this.kK(t.url,s);let i=this.oK.get(e);return i||(i=om.zn(om.WK,this,{url:t.url,size:t.size||0,$K:t.$K||this.hK,BK:s}),this.oK.set(e,i),this.uK||(this.cK+=i.Ou(),this.lK.push(i.VK().then((()=>this.jK(i.Ou()))))),i)}UK(t){const s=this.kK(t.zK(),t.HK());this.oK.delete(s)}async JK(){try{await Promise.all(this.lK),this.dK=1}catch(t){console.error("Error loading: ",t),this.pK=!0,this.gK()}}qK(){this.uK=!0}YK(){return this.pK}jK(t){this.fK+=t,this.mK.pp()}gK(){const t=om.zn(om.Event,"loadingprogress");this.dK=om.Kn(this.fK/this.cK,0,1),t.progress=this.dK,this.Nc.Sf().dispatchEvent(t),this.Nc.XK(om.zn(om.Event,"loadingprogress"))}BN(){return this.dK}WN(){return this.Nc.ZK().KK()}QK(t){om.Ch(this.aK,t),this.aK.length&&this.lK.push(this.tZ())}async tZ(){const t=[],s=[];for(const[e,i,n]of this.aK)this.cK+=n,t.push(this.sZ(e,i,s).then((()=>this.jK(n))));await Promise.all(t),this.Nc.Tk()&&s.length>0&&await this.Nc.vB("runtime","load-webfonts",{webfonts:s})}async sZ(t,s,e){try{let i=await this.HB(s);"Gecko"===om.Zs.ne&&(t=`'${t}'`),("Gecko"===om.Zs.ne&&"preview"===this.Nc.x$()||"playable-ad-single-file"===this.Nc.x$())&&(i=this.FK(i));const n=new FontFace(t,`url('${i}')`);this.Nc.Tk()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.Nc.Tk()&&e.push({name:t,url:i})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}eZ(t){return!!this.KX[t]}iZ(t,s){this.QX=!!s;for(const[s,e,i]of t)this.ZX.set(s,{fileName:s,nZ:e.map((t=>({type:t[0],rZ:t[1],fullName:s+t[1],fileSize:t[2]}))),hZ:i})}oZ(t){"flat"===this.zX&&(t=t.toLowerCase());const s=this.ZX.get(t);if(!s)return null;let e=null;for(const t of s.nZ)if(e||"audio/webm; codecs=opus"!==t.type||(e=t),this.eZ(t.type))return t;return e}aZ(t){const s=this.oZ(t);return s?{url:this.YB(s.fullName),type:s.type}:null}lZ(){if(this.QX){const t=[];for(const s of this.ZX.values()){if(s.hZ)continue;const e=this.oZ(s.fileName);e&&t.push({uZ:s.fileName,url:this.YB(e.fullName),type:e.type,fileSize:e.fileSize})}return t}return[]}cZ(t){return"preview"===this.Nc.x$()&&(t=new URL(t,location.href).toString()),this.nK.get(t)||null}FK(t){let s=this.rK.get(t);if(s)return s;const e=this.cZ(t);return e?(s=URL.createObjectURL(e),this.rK.set(t,s),s):t}nk(){return this.wK}async t$(...t){const s=await Promise.all(t.map((t=>this.HB(t))));if(this.Nc.Tk())if(1===t.length){const s=t[0];await import((om.Zh(s)?"./":"")+s)}else{const s=t.map((t=>`import "${om.Zh(t)?"./":""}${t}";`)).join("\n"),e=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(e)}else await Promise.all(s.map((t=>hm(t))))}async e$(t){if(WebAssembly.compileStreaming){const s=await this.HB(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await om.ro(t);return await WebAssembly.compile(s)}}async n$(t){const s=await this.HB(t);return await this.Nc.vB("runtime","add-stylesheet",{url:s})}}}{const um=self._s;um.fZ=class extends um.jn{constructor(t,s){super(),this.dZ=t,this.Nc=t.$B(),this.pZ=s.url||"",this.mZ=s.size,this.gZ=s.$K,this.yZ=s.blob||null,this.SZ=!!this.yZ,this.SS=null}Hn(){this.SS=null,this.dZ=null,this.Nc=null,this.yZ=null}zK(){return this.pZ}Ou(){return this.mZ}VK(){return"local"===this.gZ||this.yZ?(this.SZ=!0,Promise.resolve()):(this.SS||(this.SS=this.dZ.no(this.pZ,this.gZ).then((t=>(this.SZ=!0,this.SS=null,this.yZ=t,t))).catch((t=>{console.error("Error loading resource: ",t),this.SS=null}))),this.SS)}wZ(){return this.SZ}vZ(){return this.yZ?Promise.resolve(this.yZ):this.SS?this.SS:this.dZ.no(this.pZ,this.gZ)}}}{const cm=self._s,fm=new cm.Ud,dm=new Set;cm.WK=class extends cm.fZ{constructor(t,s){super(t,s),this.bZ=null,this.MZ=null,this.Up=0,this.xZ=-1,this.TZ=-1,this.CZ=!!s.BK,dm.add(this)}Hn(){if(0!==this.Up)throw new Error("released image asset which still has texture references");this.dZ.UK(this),this.bZ=null,dm.delete(this),super.Hn()}static IZ(){for(const t of dm)t.bZ=null,t.MZ=null,t.Up=0}wX(t,s){return s=s||{},this.Up++,this.MZ?Promise.resolve(this.MZ):(this.bZ||(s.Zx=this.Nc.IB()._Z(),this.bZ=this.GZ(t,s)),this.bZ)}async GZ(t,s){try{const e=await this.vZ();return 0===this.Up?(this.bZ=null,null):await fm.Bu((async()=>{const i=await t.VO(e,s);return this.bZ=null,0===this.Up?(t.rC(i),null):(this.MZ=i,this.xZ=i.Vg(),this.TZ=i.Zg(),this.MZ)}))}catch(t){throw console.error("Failed to load texture: ",t),t}}HP(){if(this.Up<=0)throw new Error("texture released too many times");this.Up--,0===this.Up&&this.MZ&&(this.MZ.pM().rC(this.MZ),this.MZ=null)}PZ(){return this.Up}cC(){return this.MZ}Vg(){return this.xZ}Zg(){return this.TZ}HK(){return this.CZ}async AZ(){const t=await this.vZ();return cm.Pe.ImageBitmap?await createImageBitmap(t):await cm.uo(t)}}}{let pm=function(t,s){return t.cB().RZ()-s.cB().RZ()};SortByInstLastCachedZIndex=pm;const mm=self._s,gm=self.assert;mm.EZ=class extends mm.jn{constructor(t,s,e){super(),this.OZ=t,this.Pa=s,this.Aa=e,this.FZ=[],this.DZ=!0,this.LZ=new Set,this.kZ=!1}Hn(){mm.bh(this.FZ),this.LZ.clear(),this.OZ=null}Bf(){mm.bh(this.FZ),this.DZ=!0,this.LZ.clear(),this.kZ=!1}NZ(){this.DZ=!1}Au(){return!this.FZ.length||!(this.FZ.length>this.LZ.size)&&(this.BZ(),!0)}$Z(t){if(this.LZ.has(t))return this.LZ.delete(t),void(0===this.LZ.size&&(this.kZ=!1));this.FZ.push(t),this.DZ=1===this.FZ.length}Kf(t){this.LZ.add(t),this.kZ=!0,this.LZ.size>=50&&this.BZ()}BZ(){this.kZ&&(this.FZ.length!==this.LZ.size?(mm.Ah(this.FZ,this.LZ),this.LZ.clear(),this.kZ=!1):this.Bf())}WZ(){this.DZ||(this.FZ.sort(pm),this.DZ=!0)}VZ(t){this.BZ(),this.WZ(),this.FZ.length&&t.push(this.FZ)}}}{const ym=self._s;ym.jZ=class extends ym.jn{constructor(t,s){super(),this.UZ=t,this.zZ=s,this.HZ=ym.zn(ym._u)}Hn(){this.HZ.Hn(),this.HZ=null}JZ(t,s,e){let i=this.HZ.Hs(t,s);return i||(e?(i=ym.zn(ym.EZ,this,t,s),this.HZ.Set(t,s,i),i):null)}qZ(t){return Math.floor(t/this.UZ)}YZ(t){return Math.floor(t/this.zZ)}XZ(t,s,e){if(s)for(let i=s.Za(),n=s.tl();i<=n;++i)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(e&&e.Tl(i,n))continue;const s=this.JZ(i,n,!1);s&&(s.Kf(t),s.Au()&&this.HZ.Ru(i,n))}if(e)for(let i=e.Za(),n=e.tl();i<=n;++i)for(let n=e.Qa(),r=e.sl();n<=r;++n)s&&s.Tl(i,n)||this.JZ(i,n,!0).$Z(t)}KZ(t,s){let e=this.qZ(t.Za());const i=this.YZ(t.Qa()),n=this.qZ(t.tl()),r=this.YZ(t.sl());for(;e<=n;++e)for(let t=i;t<=r;++t){const i=this.JZ(e,t,!1);i&&i.VZ(s)}}ZZ(t){let s=t.Za();const e=t.Qa(),i=t.tl(),n=t.sl();for(;s<=i;++s)for(let t=e;t<=n;++t){const e=this.JZ(s,t,!1);e&&e.NZ()}}}}{let Sm=function(t,s){return t.cB().RZ()-s.cB().RZ()},wm=function(t,s){return t.cB().XM()-s.cB().XM()};SortByInstLastCachedZIndex=Sm,SortByInstZElevation=wm;const vm=self._s,bm=self.assert,Mm=new vm.Rect,xm=new vm.Gl,Tm=[],Cm=new vm.Rect,Im=new vm.Rect,_m=self.ls,Gm=_m.Ss,Pm=_m.ws,Am=_m.ds,Rm=Am.create(),Em=Gm.create(),Om=Pm.create(),Fm=Gm.create(),Dm=Gm.create(),Lm=Gm.create(),km=vm.zn(vm.Ga),Nm=vm.zn(vm.Rect),Bm=[],$m=[],Wm=[],Vm={name:"",QZ:-1,tQ:!1,isVisible:!0,XV:!0,QV:!1,backgroundColor:[1,1,1,1],wj:!0,sQ:[1,1],opacity:1,Mj:!1,eQ:!1,iQ:!1,nQ:!1,hj:1,JD:0,gj:0,rQ:[],hQ:[],oQ:[]};vm.aQ=class extends vm.jn{constructor(t,s,e){super(),e=Object.assign({},Vm,e),this.lQ=t,this.Nc=t.$B(),this.uQ=s,this.Yn=e.name,this.GS=-1,this.cQ=!!e.QV,this.fQ=-1,this.dQ=e.QZ,this.pQ=!!e.tQ,this.mQ=!!e.isVisible,this.gQ=!!e.XV,this.yQ=vm.zn(vm.To),this.yQ.Sa(e.backgroundColor),this.SQ=!!e.wj,this.wQ=e.sQ[0],this.vQ=e.sQ[1],this.RM=vm.zn(vm.To,1,1,1,e.opacity),this.bQ=vm.zn(vm.To),this.MQ=!!e.Mj,this.xQ=!!e.eQ,this.TQ=!!e.iQ,this.CQ=!!e.nQ,this.IQ=e.hj,this.AM=e.JD,this._Q=null,this.GQ=1,this.EM=e.gj,this.PQ=0,this.AQ=0,this.RQ=0,this.EQ=!1,this.$R=vm.zn(vm.Rect),this.OQ=vm.zn(vm.Rect),this.FQ=vm.zn(vm.Rect),this.DQ=!0,this.YT=Am.create(),this.LQ=!0,this.RD=Am.create(),this.kQ=!0,this.NQ=vm.zn(vm.DS.BS),this.BQ=!0,this.$Q=[],this.WQ=e.rQ,this.VQ=[],this.jQ=[],this.UQ=new Map,this.FZ=[],this.zQ=!1,this.HQ=!1,this.JQ=!1;const i=this.Nc.IB();this.qQ=vm.zn(vm.YQ,this,e.hQ),this.XL=vm.zn(vm.DS.$F,i.XQ(),{PF:(t,s)=>{const e=s.VL(),n=e.NO();t.DM(e.KQ()),t.HO(n),t.JO(n),i.ZQ(n)},RF:t=>this.nV().QQ(t)}),this.t0=!0,this.s0=!0,this.e0=null,this.i0=[],this.n0=!1,this.r0=vm.zn(vm.Rect,0,0,-1,-1),this.h0=vm.zn(vm.Rect,0,0,-1,-1),this.o0=new self.xV(this),this.a0(),this.l0()&&(this.e0=vm.zn(vm.jZ,this.Nc.Ik(),this.Nc.Gk())),this.u0=e.oQ.map((t=>vm.aQ.c0(this.lQ,this,t)))}f0(){for(const t of this.WQ){const s=this.Nc.d0(t[1]);this.lQ.p0(s),s.m0()||(s.g0(t),s.y0(this.GS)),this.VQ.push(t),this.UQ.set(t[2],t)}vm.Ch(this.$Q,this.VQ),this.WQ=null}static c0(t,s,e){return vm.zn(vm.aQ,t,s,{name:e[0],QZ:e[2],isVisible:e[3],XV:e[13],QV:e[19],backgroundColor:e[4].map((t=>t/255)),wj:e[5],sQ:[e[6],e[7]],opacity:e[8],Mj:e[9],eQ:e[17],iQ:e[18],nQ:e[10],hj:e[11],JD:e[12],gj:e[16],rQ:e[14],hQ:e[15],oQ:e[20]})}Hn(){for(const t of this.u0)t.Hn();vm.bh(this.u0);for(const t of this.FZ)this.Nc.Jj(t);vm.bh(this.FZ),this.qQ.Hn(),this.qQ=null,this.XL.Hn(),this.XL=null,this.o0=null,this.uQ=null,this.lQ=null,this.Nc=null}Jn(){return!this.lQ}S0(t){return this.UQ.get(t)}w0(t){const s=this.lQ.v0(),e=this.VQ;let i=0;for(let n=0,r=e.length;n<r;++n){const r=e[n],h=this.Nc.d0(r[1]);let o=!0;if(!h.b0()||s){const s=this.Nc.M0(r,this,!0);t.push(s),h.x0()&&(o=!1,this.jQ.push(s.tU()))}o&&(e[i]=e[n],++i)}vm.wh(e,i),this.Nc.HW(),this.yB()}T0(t,s){if(!t.MW().Z$())throw new Error("instance is not of world type");const e=t.cB();if(e.fB()!==this)throw new Error("instance added to wrong layer");this.FZ.push(t),0!==e.XM()&&(this.JQ=!0),s&&this.l0()&&t.cB().ZU(),this.yB(t)}C0(t){this.FZ.includes(t)||(this.FZ.push(t),0!==t.cB().XM()&&(this.JQ=!0),this.yB(t))}I0(t,s){const e=t.cB();if(e.fB()!==this)throw new Error("instance added to wrong layer");this.FZ.unshift(t),0!==e.XM()&&(this.JQ=!0),this.yB(t),s&&this.l0()&&t.cB().ZU()}_0(t,s){const e=this.FZ.indexOf(t);e<0||(s&&this.l0()&&t.cB().G0(),this.FZ.splice(e,1),this.yB(t),this.P0())}A0(){this.JQ=!0}P0(){0===this.FZ.length&&(this.JQ=!1)}R0(t){if(t){const t=new Set;for(const s of this.FZ){const e=s.cB().RZ();e>=0&&t.add(e)}let s=-1;for(const e of this.FZ){const i=e.cB();if(!(i.RZ()>=0)){for(++s;t.has(s);)++s;i.E0(s)}}}this.FZ.sort(Sm)}O0(){}F0(){for(const t of this.FZ)t.Wj().x0()||this.Nc.Jj(t);this.Nc.HW(),vm.bh(this.FZ),this.JQ=!1,this.yB()}D0(t,s,e,i,n,r){const h=this.Nc.$k(),o=this.Nc.L0(),a=t.k0(),l=[];for(const u of this.VQ){const c=u[0],f=c[0],d=c[1];if(!s.Tl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.eV(p))continue}let m=n;if(!m){const t=this.Nc.lB();this.JN()===t?m=this:(m=t.N0(this.Pc()),m||(m=t.pB(this.tk())))}const g=this.Nc.M0(u,m,!1,void 0,void 0,!1,r);m.WW(g);const y=g.cB();y.sz(e,i),y.ZU(),h.VW(!0),g.jW(),h.VW(!1),l.push(g)}return l}NW(){return this.FZ.length}JN(){return this.lQ}Pc(){return this.Yn}B0(t){this.GS=t}tk(){return this.GS}$0(t){this.fQ=t}$q(){return this.fQ}tj(){return this.cQ}sj(t){t=!!t,this.cQ!==t&&(this.cQ=t,this.lQ.W0(),this.Nc.SB())}V0(){let t=-1;const s=this.$V();return t=s?s.jV().indexOf(this):this.JN().j0().indexOf(this),t}U0(){return this.dQ}$B(){return this.Nc}z0(){return this.pQ}H0(){for(const t of this.WV())if(t.z0())return!0;return!1}W$(){return this.Nc.W$()}nV(){return this.qQ}QL(){return this.J0(),this.XL}J0(){const t=this.q0();if(!this.t0&&t===this.s0&&!this.XL.ED())return;const s=this.nV().Y0();this.XL.OD(s.map((t=>t.RI())),{OF:s.map((t=>t.tk())),FF:!t,BF:!0}),this.t0=!1,this.s0=t}YH(){this.nV().YH(),this.t0=!0}l0(){return this.CQ&&!this.TQ}X0(){return this.e0}K0(){this.n0=!1}YV(){for(const t of this.Z0())if(!t.HV())return!1;return!0}HV(){return this.mQ}JV(t){t=!!t,this.mQ!==t&&(this.mQ=t,this.Nc.SB())}ZV(t){this.gQ=!!t}KV(){return this.gQ}ij(){for(const t of this.Z0())if(!t.KV())return!1;return!0}_j(t){if(t=!!t,this.EQ!==t){if(this.EQ=t,t){const t=this.JN();this.AQ=t.dV(),this.RQ=t.mV()}this.Q0(),this.Nc.SB()}}t1(){return this.EQ}fV(t){const s=this.JN(),e=s.s1(),i=s.e1();t>i&&(t=i),t<e&&(t=e),this.AQ!==t&&(this.AQ=t,this.t1()&&(this.Q0(),this.Nc.SB()))}pV(t){const s=this.JN(),e=s.i1(),i=s.n1();t>i&&(t=i),t<e&&(t=e),this.RQ!==t&&(this.RQ=t,this.t1()&&(this.Q0(),this.Nc.SB()))}dV(){return this.t1()?this.AQ:this.JN().dV()}mV(){return this.t1()?this.RQ:this.JN().mV()}Pj(){return this.h1(),this.$R}o1(){return this.h1(),this.OQ}a1(){return this.h1(),this.FQ}DV(){const t=this.JN();return[t.l1(),t.u1()]}Ww(t){return this.Nc.Ww(t)}c1(t,s){const e=this.o1();if(0===t)s.S(e);else{let i=e.hl(),n=e.ol();const r=this.f1(t),h=e.width()/r,o=e.height()/r,[a,l]=this.DV();if(.5!==a||.5!==l){const s=this.d1(),e=this.Nc,r=this.Ww()/s;let h=(a-.5)*e.m1()/r,o=(l-.5)*e.g1()/r;const u=this.cV();0!==u&&(km.set(h,o),km.rotate(u),h=km.Oa(),o=km.Da());const c=vm.mr(s,0,t);i+=vm._t(h,0,c),n+=vm._t(o,0,c)}s.set(i-h/2,n-o/2,i+h/2,n+o/2)}}tO(){return this.RM.Wo()}eO(t){t=vm.Kn(t,0,1),this.RM.Wo()!==t&&(this.RM.Lo(t),this.a0(),this.Nc.SB())}a0(){this.bQ.S(this.RM),this.bQ.Ko()}KQ(){return this.bQ}q0(){return this.RM.Jo(1,1,1,1)}aj(){return this.IQ}oj(t){this.IQ!==t&&(this.IQ=t,this.Q0(),this.Nc.SB())}fj(){return this.wQ}mj(){return this.vQ}S1(t,s){this.wQ===t&&this.vQ===s||(this.wQ=t,this.vQ=s,this.Q0(),this.Nc.SB())}cj(t){this.S1(t,this.mj())}pj(t){this.S1(this.fj(),t)}KM(t){this.EM!==t&&(this.EM=t,this.Nc.SB())}XM(){return this.EM}uV(t){t=vm.Zn(t),this.PQ!==t&&(this.PQ=t,this.Q0(),this.Nc.SB())}cV(){return vm.Zn(this.lQ.cV()+this.PQ)}lj(){return this.PQ}w1(){return this.FZ.length>0}mB(){return this.FZ}v1(){return this.b1()&&this.TQ?(vm.Ch(Wm,this.mB()),Wm.sort(((t,s)=>this.M1(t,s))),Wm):this.mB()}T1(t){vm.On(t,this.v1());for(const s of this.u0)s.YV()&&s.tO()>0&&s.T1(t)}M1(t,s){const e=this.JN().C1(),i=e[0],n=e[1],r=e[2],h=t.cB(),o=s.cB(),a=h.zM()-i,l=h.qM()-n,u=h.XM()-r,c=o.zM()-i,f=o.qM()-n,d=o.XM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}Ij(){return this.yQ}bj(){return this.SQ}vj(t){t=!!t,this.SQ!==t&&(this.SQ=t,this.Nc.SB())}Tj(){return this.MQ}xj(t){t=!!t,this.MQ!==t&&(this.MQ=t,this.Nc.SB())}yj(t){t=!!t,this.xQ!==t&&(this.xQ=t,this.Q0(),this.Nc.SB())}Sj(){return this.xQ}I1(){return!this.$B()._1()||!this.xQ}b1(){return!this.I1()}G1(){return this.b1()&&this.JN().P1()}A1(){if(!this.G1())return!1;for(const t of this.u0)if(!t.A1())return!1;return!0}FM(t){this.AM!==t&&(this.AM=t,this.Nc.SB())}Cj(){return this.AM}R1(){return!this.uQ}$V(){return this.uQ}E1(t){this.uQ=t}jV(){return this.u0}O1(){return this.u0.length>0}F1(t,s=!0){s?this.u0.push(t):this.u0.unshift(t)}D1(t,s,e){let i=this.u0.indexOf(s);if(-1===i)throw new Error("cannot find layer to insert by");e&&++i,this.u0.splice(i,0,t)}L1(t){const s=this.u0.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.u0.splice(s,1)}N1(){for(const t of this.u0)if(t.B1())return!0;return!1}*zV(){for(const t of this.u0)yield*t.zV();yield this}*WV(){let t=this.$V();for(;t;)yield t,t=t.$V()}*Z0(){yield this,yield*this.WV()}W1(t){for(const s of this.WV())if(s===t)return!0;return!1}V1(t){return this===t||this.wQ===t.wQ&&this.vQ===t.vQ&&this.GQ===t.GQ&&this.IQ===t.IQ&&this.PQ===t.PQ&&this.dV()===t.dV()&&this.mV()===t.mV()}j1(){return{parallaxX:this.fj(),parallaxY:this.mj(),scale:this.rj(),scaleRate:this.aj(),angle:this.lj(),hasOwnScroll:this.t1(),scrollX:this.dV(),scrollY:this.mV()}}U1(t){this.S1(t.parallaxX,t.parallaxY),this.nj(t.scale),this.oj(t.scaleRate),this.uV(t.angle),this._j(t.hasOwnScroll),this.fV(t.scrollX),this.pV(t.scrollY),this.h1()}z1(t){0!==t.size&&vm.Ah(this.FZ,t)>0&&(this.P0(),this.yB())}yB(t){this.zQ=!1,this.n0=!1,t&&!t.Wj().MW().tW()||(this.HQ=!1)}H1(){if(!this.zQ){if(this.FZ.sort(wm),this.l0())for(let t=0,s=this.FZ.length;t<s;++t){const s=this.FZ[t].cB();s.E0(t),this.e0.ZZ(s.J1())}else for(let t=0,s=this.FZ.length;t<s;++t)this.FZ[t].cB().E0(t);this.zQ=!0}}q1(){if(this.HQ)return;const t=this.lQ.Y1(this.$q()).map((t=>[...t.zV()])).flat();let s=0;for(const e of t){for(const t of e.mB())t.Wj().MW().tW()&&t.cB().X1(s++);e.K1()}}K1(){this.HQ=!0}Z1(){return{isVisible:this.YV(),opacity:this.tO(),isInteractive:this.KV()}}Q1(t,s,e){const i=t.cB(),n=s.cB();if(i.fB()!==this||n.fB()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=i.dB();let h=n.dB();return r!==h+(e?1:-1)&&(vm.Ih(this.FZ,r),r<h&&h--,e&&h++,h===this.FZ.length?this.FZ.push(t):this.FZ.splice(h,0,t),this.yB(t),!0)}t2(t,s){const e=[];let i=0,n=0,r=t.length,h=s.length;for(;i<r&&n<h;){const r=t[i],h=s[n];r.cB().RZ()<h.cB().RZ()?(e.push(r),++i):(e.push(h),++n)}for(;i<r;++i)e.push(t[i]);for(;n<h;++n)e.push(s[n]);return e}s2(t){const s=[],e=t.length;for(let i=0;i<e-1;i+=2){const e=t[i],n=t[i+1];s.push(this.t2(e,n))}return e%2==1&&s.push(t[e-1]),s}e2(t){for(;t.length>1;)t=this.s2(t);return t[0]}i2(){return this.H1(),vm.bh(Tm),this.e0.KZ(this.Pj(),Tm),Tm.length?1===Tm.length?Tm[0]:this.e2(Tm):[]}B1(){return this.YV()&&this.tO()>0&&this.n2()}n2(){if(this.w1()||!this.bj())return!0;for(const t of this.u0)if(t.n2())return!0;return!1}h2(){return this.Tj()||!this.q0()||0!==this.Cj()||this.qQ.o2()}a2(){if(this.h2())return!0;for(const t of this.u0)if(t.a2())return!0;return!1}NO(){return this._Q}f1(t){if(this.lQ.NV())return 1;{const s=this.l2();return s/(s-t)}}u2(t){const s=this.Nc.Bj();if(this.lQ.NV())return s;{const e=this.l2();return this.Ww()/Math.abs(e-t)*s}}Q0(){this.kQ=!0,this.BQ=!0,this.DQ=!0}c2(t){return this.kQ&&(this.f2(t,this.RD,0,0,null),this.kQ=!1),this.RD}d1(t){return this.Ww(t)/this.d2()}l2(){return this.G1()?this.JN().C1()[2]:this.d1()}m2(){if(this.G1()){const t=this.JN().C1();return[t[0],t[1],t[2]]}return this.g2()}g2(t=0,s=0,e=0){const i=this.Nc,n=this.JN(),r=i.S2(),h=i.w2();let o=(this.dV()-r)*this.wQ+r,a=(this.mV()-h)*this.vQ+h;i.Rk()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.NV()?this.Ww(e):this.d1(e),[f,d]=this.DV();if(.5!==f||.5!==d){const t=this.Ww(e)/c;let s=(f-.5)*i.m1()/t,n=(d-.5)*i.g1()/t;const r=this.cV();0!==r&&(km.set(s,n),km.rotate(r),s=km.Oa(),n=km.Da()),l+=s,u+=n}return[l,u,c]}f2(t,s,e,i,n){const r=this.Nc,h=this.JN();if(this.G1()){Gm.S(Fm,h.C1()),Gm.S(Dm,h.v2()),Gm.S(Lm,h.b2());const t=r.S2(),s=r.w2(),e=Dm[0]-Fm[0],i=Dm[1]-Fm[1],n=Dm[2]-Fm[2];Fm[0]=(Fm[0]-t)*this.wQ+t,Fm[1]=(Fm[1]-s)*this.vQ+s,Fm[2]*=Math.max(this.wQ,this.vQ),Dm[0]=Fm[0]+e,Dm[1]=Fm[1]+i,Dm[2]=Fm[2]+n}else{const[t,s,r]=this.g2(e,i,n);Gm.set(Fm,t,s,r),Gm.set(Dm,t,s,r-100);const h=this.cV();0===h?Gm.set(Lm,0,1,0):Gm.set(Lm,Math.sin(h),Math.cos(h),0)}t.nv(s,Fm,Dm,Lm,n||r.g1())}M2(){this.LQ=!0,this.BQ=!0,this.DQ=!0}T2(t){return this.LQ&&(this.C2(t),this.LQ=!1),this.YT}C2(t){const s=this.Nc.IB(),[e,i]=this.DV();if(this.lQ.NV())t.ev(this.YT,s.I2(),s._2());else if(.5===e&&.5===i)Am.S(this.YT,s.G2());else{const n=s.I2(),r=s._2();t.tv(this.YT,n/r,e,i)}}PX(t,s=!0,e=0,i=0,n=0){s&&t.jE(this.T2(t));let r=null;0===e&&0===i&&0===n?r=this.c2(t):(this.f2(t,Rm,e,i,n),r=Rm),t.YE(r)}P2(t){this.PX(t),t.Vv(this.XM())}A2(t){let s=null;if(t.$b()&&this.Nc.R2()){const e=this.Nc.IB().E2(this);e&&(s=e._R(),t.QO(s))}return s}O2(t){if(t.sv()&&this.Nc.R2()){const s=2*(this.tk()+1);t.F2(s,s+1)}}$x(t,s,e){const i=this.Nc.IB(),n=this.h2();let r=null;const h=this.A2(t);if(this.O2(t),n){const s={Kx:this.Nc.Pk(),kT:!0,D2:!!t.sv()&&this.Nc.L2()};"low"===i.N2()&&(s.width=i.I2(),s.height=i._2()),r=this.Nc.B2(s),this._Q=r,t.UO(r),this.bj()&&t.RO(0,0,0,0)}else this._Q=s,t.UO(s);if(this.bj()||t.Pu(this.yQ),this.lQ.W2(t,this._Q,this.u0,n&&this.bj()),this.O2(t),this.PX(t),t.Vv(this.XM()),t.FO(this.b1()),this.d2()>Number.EPSILON){this.H1();const s=this.l0()&&0===this.XM()&&!this.JQ;this.G1()?this.V2(t):s?this.j2(t):this.U2(t,this.v1())}t.Vv(0),t.Uv(0),n&&(t.FO(!1),this.z2(t,r,s,e)),h&&t.sF(h),this._Q=null}U2(t,s){const e=this.Pj(),i=this._Q,n=this.JN().NV(),r=this.JN().H2();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.cB();l.YV()&&l.J2(e,r,n)&&this.q2(a,l,t,i)}}V2(t){const s=this._Q,e=this.Y2(),i=Bm,n=$m,r=this.v1();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.cB();if(!l.YV()||!l.X2(e)){++h;continue}(!a.K2()||l.Z2()>0)&&n.push(a);const u=a.cB().cz();i.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.cB();if(s.YV()&&s.X2(e)){if(s.cz()!==u)break;t.K2()?(s.Z2()>0&&n.push(t),i.push(t)):n.push(t)}}if(1!==i.length||i[0].Q2()){this.t3(t,i);for(let e=0,i=n.length;e<i;++e){const i=n[e],r=i.cB();r.s3(!0),this.q2(i,r,t,s),r.s3(!1)}}else{this.q2(a,l,t,s);for(let e=0,i=n.length;e<i;++e){const i=n[e];if(i===a)continue;const r=i.cB();r.fB().q2(i,r,t,s)}}h=c,vm.bh(i),vm.bh(n)}}t3(t,s){const e=this._Q;t.YO();for(let e=0,i=s.length;e<i;++e){const i=s[e],n=i.cB();n.e3(!0),this.i3(i,n,t)}t.XO();for(let i=0,n=s.length;i<n;++i){const n=s[i],r=n.cB();this.q2(n,r,t,e),r.e3(!1)}t.ZO()}j2(t){const s=this.e0,e=this.h0,i=this.r0,n=this.Pj();let r;e.set(s.qZ(n.Za()),s.YZ(n.Qa()),s.qZ(n.tl()),s.YZ(n.sl())),this.n0&&e.equals(i)?r=this.i0:(r=this.i2(),this.n0=!0,i.S(e)),this.U2(t,r),r!==this.i0&&vm.Ch(this.i0,r)}q2(t,s,e,i){s.o2()?this.n3(t,s,e,i):this.i3(t,s,e)}i3(t,s,e){const i=s.r3();e.Cv()!==i&&i.OM(),t.$x(e)}n3(t,s,e,i){this.h3(t,s,e,i,null)&&this.PX(e)}h3(t,s,e,i,n){const r=s.XU().QL();return r.jD(e,i,{zD:t,JD:s.Cj(),devicePixelRatio:this.Nc.o3(),time:t.a3(),qD:this.Nc.l3()*this.d2(),YD:this.cV(),vL:s.pz(),bL:r.$L()?null:this.u3(s),eL:n&&n.eL,iL:n&&n.iL,nL:n&&n.nL,rL:n&&n.rL,hL:n&&n.hL,oL:n&&n.oL}),e.Vv(this.XM()),r.KE()}z2(t,s,e,i){const n=this.qQ.Y0(),r=this.Nc;0===n.length?(t.UO(e),t.uv(),i&&0===this.AM&&this.q0()?t.zO(s):(t.FM(this.AM),t.DM(this.bQ),t.HO(s)),t.JO(s),r.ZQ(s)):this.QL().jD(t,e,{zD:this,JD:this.Cj(),devicePixelRatio:r.o3(),qD:r.l3()*this.d2(),YD:this.cV(),vL:this.Pj(),bL:null,EF:!0})}rj(){return this.GQ}nj(t){this.GQ!==t&&(this.GQ=t,this.lQ.c3(),this.Q0(),this.Nc.SB())}Bj(){return this.d2()*this.Nc.Bj()}qq(){return this.d2()*this.Nc.qq()}d2(){return(this.GQ*this.lQ.lV()-1)*this.IQ+1}h1(){if(!this.DQ)return;this.DQ=!1;const t=this.Nc.S2(),s=this.Nc.w2(),e=(this.dV()-t)*this.wQ+t,i=(this.mV()-s)*this.vQ+s,n=this.d2(),r=this.Nc.m1()/n,h=this.Nc.g1()/n;let o=e-r/2,a=i-h/2;this.Nc.Rk()&&(o=Math.round(o),a=Math.round(a));const l=this.OQ;l.set(o,a,o+r,a+h);const u=this.cV();0!==u&&(Mm.S(l),Mm.offset(-l.hl(),-l.ol()),xm.Xl(Mm,u),xm.Zl(Mm),Mm.offset(l.hl(),l.ol()),l.S(Mm));const c=this.EM;this.c1(c,this.$R),this.G1()?this.f3(c,this.FQ):this.FQ.S(this.$R)}f3(t,s){const e=this.Nc.IB(),i=e.F$(),n=e.L$(),[r,h]=this.Rj(0,0,t),[o,a]=this.Rj(i,0,t),[l,u]=this.Rj(i,n,t),[c,f]=this.Rj(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}Rj(t,s,e=0){return this.d3(t,s,e,this.qq())}Dj(t,s,e=0){return this.d3(t,s,e,this.Bj()*this.W$())}d3(t,s,e,i){const n=this.Nc,r=n.pM(),h=this.d2(),o=n.m1()/h,a=n.g1()/h,l=Om;Pm.set(l,0,0,o,a),t/=i,s=l[3]-s/i;const u=this.T2(r),c=this.c2(r),f=Em;return vm.DS.NS(t,s,e,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}m3(t,s){const e=this.GQ,i=this.IQ,n=this.wQ,r=this.vQ,h=this.PQ;this.GQ=1,this.IQ=1,this.wQ=1,this.vQ=1,this.PQ=0,this.Q0();const o=this.Rj(t,s);return this.GQ=e,this.IQ=i,this.wQ=n,this.vQ=r,this.PQ=h,this.Q0(),o}Oj(t,s,e=0){return this.g3(t,s,e,this.qq())}kj(t,s,e=0){return this.g3(t,s,e,this.Bj()*this.W$())}g3(t,s,e,i){const n=this.Nc,r=n.pM(),h=this.d2(),o=n.m1()/h,a=n.g1()/h,l=Om;Pm.set(l,0,0,o,a);const u=this.T2(r),c=this.c2(r),f=Em;return vm.DS.LS(t,s,e,c,u,l,f)?[f[0]*i,(l[3]-f[1])*i]:[NaN,NaN]}y3(t,s){return t*=this.Bj()*this.W$(),0!==s&&(t*=this.f1(s)),t}u3(t){const s=t.pz(),e=t.cz(),i=t.Z2(),n=e+i,r=s.Za(),h=s.Qa(),o=s.tl(),a=s.sl();if(this.G1()){if(this.S3(r,h,e)||this.S3(o,h,e)||this.S3(o,a,e)||this.S3(r,a,e))return null;if(i>0&&(this.S3(r,h,n)||this.S3(o,h,n)||this.S3(o,a,n)||this.S3(r,a,n)))return null}else if(n>=this.d1())return null;let[l,u]=this.kj(r,h,e),[c,f]=this.kj(o,a,e);if(0!==this.cV()||i>0||this.G1()){const[t,s]=this.kj(o,h,e),[d,p]=this.kj(r,a,e);if(i>0){const[e,i]=this.kj(r,h,n),[m,g]=this.kj(o,h,n),[y,S]=this.kj(o,a,n),[w,v]=this.kj(r,a,n);let b=Math.min(l,c,t,d,e,m,y,w);c=Math.max(l,c,t,d,e,m,y,w),l=b,b=Math.min(u,f,s,p,i,g,S,v),f=Math.max(u,f,s,p,i,g,S,v),u=b}else{let e=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=e,e=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=e}}return Mm.set(l,u,c,f),Mm}Y2(){return this.BQ&&(this.w3(),this.BQ=!1),this.NQ}w3(){const t=this.Nc.pM(),s=this.T2(t),e=this.c2(t);this.NQ.HS(e,s)}S3(t,s,e){return this.Y2().qS(t,s,e)}v3(){return{d:this.z0(),s:this.rj(),a:this.lj(),v:this.HV(),i:this.KV(),html:this.tj(),bc:this.yQ.toJSON(),t:this.bj(),sx:this.AQ,sy:this.RQ,hosp:this.EQ,px:this.fj(),py:this.mj(),c:this.RM.toJSON(),sr:this.aj(),fx:this.qQ.hx(),cg:this.jQ}}b3(t){this.pQ=!!t.d,this.GQ=t.s,this.PQ=t.a,this.mQ=!!t.v,this.gQ=!t.hasOwnProperty("i")||t.i,this.cQ=!!t.html,this.yQ.Sa(t.bc),this.SQ=!!t.t,t.hasOwnProperty("sx")&&(this.AQ=t.sx),t.hasOwnProperty("sy")&&(this.RQ=t.sy),t.hasOwnProperty("hosp")&&(this.EQ=!!t.hosp),this.wQ=t.px,this.vQ=t.py,this.RM.Sa(t.c),this.a0(),this.IQ=t.sr,vm.Ch(this.jQ,t.cg),vm.Ch(this.VQ,this.$Q);const s=new Set(this.jQ);let e=0;for(let t=0,i=this.VQ.length;t<i;++t)s.has(this.VQ[t][2])||(this.VQ[e]=this.VQ[t],++e);vm.wh(this.VQ,e),this.qQ.ox(t.fx),this.t0=!0}M3(){this.R0(!1),this.yB(),this.Q0(),this.M2()}SV(){return this.o0}WW(t,s=!1,e=!1){if(this.FZ.includes(t))return s&&this.FZ.sort(((t,s)=>(t.cB().x3()??0)-(s.cB().x3()??0))),void(e&&this.FZ.forEach(((t,s)=>t.cB().E0(s))));if(t.T3()){const s=[...t.Vz()];s.push(t),s.sort(((t,s)=>(t.cB().x3()??0)-(s.cB().x3()??0)));for(const t of s)if(t.Zj())for(const e of t.Qj()){if(s.includes(e))continue;const t=[...e.Vz()];t.push(e),t.sort(((t,s)=>(t.cB().x3()??0)-(s.cB().x3()??0))),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.MW().Z$()&&this.T0(t,!0);e&&this.FZ.forEach(((t,s)=>t.cB().E0(s)))}else{if(t.MW().Z$()&&this.T0(t,!0),!t.Zj())return void(e&&this.FZ.forEach(((t,s)=>t.cB().E0(s))));for(const s of t.Qj()){const t=[...s.Vz()];if(t.push(s),t.sort(((t,s)=>(t.cB().x3()??0)-(s.cB().x3()??0))),t&&t.length)for(const s of t)s.MW().Z$()&&this.T0(s,!0)}e&&this.FZ.forEach(((t,s)=>t.cB().E0(s)))}}}}{let jm=function(t,s,e,i){return t[0]===Math.fround(s)&&t[1]===Math.fround(e)&&t[2]===Math.fround(i)},Um=function(t,s){ng!==t&&(t.P2(s),ng=t)};vec3EqualsXYZ=jm,MaybePrepareLayerDraw=Um;const zm=self._s,Hm=self.EU,Jm=self.assert,qm=zm.zn(zm.Rect),Ym=zm.zn(zm.Rect),Xm=zm.zn(zm.Rect),Km=zm.zn(zm.To),Zm=self.ls,Qm=Zm.Ss,tg=[],sg=[],eg=[],ig=[];let ng=null;zm.C3=class extends zm.jn{constructor(t,s,e){super(),this.I3=t,this.Nc=t.$B(),this.Yn=e[0],this._3=e[1],this.G3=e[2],this.Py=e[1],this.Ay=e[2],this.P3=!!e[3],this.A3=!!e[4],this.R3=e[5],this.E3=e[6],this.O3=e[7],this.F3=null,this.dQ=e[8],this.GS=s,this.AQ=0,this.RQ=0,this.GQ=1,this.PQ=0,this.D3=new Set,this.L3=new Set,this.N3=new Set,this.B3=[],this.W3=[],this.V3=new Map,this.j3=new Map,this.U3=[],this.z3=!1,this.H3=Qm.create(),this.J3=Qm.create(),this.q3=Qm.create(),this.Y3=[],this.X3=[],this.K3=new Map,this.Z3=new Map,this.Q3=-1;const i=this.Nc.IB();this.qQ=zm.zn(zm.YQ,this,e[11]),this.XL=zm.zn(zm.DS.$F,i.XQ(),{PF:(t,s)=>{const e=s.VL().NO();t.iO(),t.HO(e),t.JO(e),i.ZQ(e)},RF:t=>this.nV().QQ(t)}),this.t0=!0,this.t5=!1,this._Q=null,this.s5={},this.e5=new Map,this.i5=!0,this.n5=new self.iV(this),this.r5=zm.zn(zm.Event.Sf);for(const t of e[9])this.Y3.push(zm.aQ.c0(this,null,t));this.h5();for(const t of this.bV())t.f0();for(const t of e[10]){const s=this.Nc.d0(t[1]);if(!s)throw new Error("missing nonworld object class");s.m0()||s.g0(t),this.U3.push(t),this.p0(s)}}Hn(){for(const t of this.X3)t.Hn();zm.bh(this.X3),this.N3.clear(),this.F3=null,this.I3=null,this.Nc=null}$B(){return this.Nc}Pc(){return this.Yn}U0(){return this.dQ}tk(){return this.GS}nV(){return this.qQ}QL(){return this.J0(),this.XL}J0(){const t="low"===this.Nc.IB().N2();if(!this.t0&&this.t5===t&&!this.XL.ED())return;const s=this.nV().Y0();this.XL.OD(s.map((t=>t.RI())),{OF:s.map((t=>t.tk())),DF:t,BF:!0}),this.t0=!1,this.t5=t}YH(){this.nV().YH(),this.t0=!0}o5(){let t=this.X3[0].d2();for(let s=1,e=this.X3.length;s<e;++s){const e=this.X3[s];0===e.fj()&&0===e.mj()||(t=Math.min(t,e.d2()))}return t}a5(){return.5*this.Nc.m1()/this.o5()}l5(){return.5*this.Nc.g1()/this.o5()}s1(){return this.u5()?-1/0:this.a5()}e1(){return this.u5()?1/0:this.Vg()-this.a5()}i1(){return this.u5()?-1/0:this.l5()}n1(){return this.u5()?1/0:this.Zg()-this.l5()}fV(t){const s=this.s1(),e=this.e1();t>e&&(t=e),t<s&&(t=s),this.AQ!==t&&(this.AQ=t,this.c5(),this.Nc.SB())}dV(){return this.AQ}pV(t){const s=this.i1(),e=this.n1();t>e&&(t=e),t<s&&(t=s),this.RQ!==t&&(this.RQ=t,this.c5(),this.Nc.SB())}mV(){return this.RQ}u5(){return this.P3}c3(){this.fV(this.dV()),this.pV(this.mV());for(const t of this.X3)t.t1()&&(t.fV(t.dV()),t.pV(t.mV()))}OV(t,s){this.R3===t&&this.E3===s||(this.R3=t,this.E3=s,this.f5()&&(this.d5(),this.c5(),this.Nc.SB()))}l1(){return this.NV()?.5:this.R3}u1(){return this.NV()?.5:this.E3}H2(){const t=this.l1(),s=this.u1();return t<0||t>1||s<0||s>1}LV(){this.A3&&(this.A3=!1,this.d5(),this.c5(),this.Nc.SB())}kV(){this.A3||(this.A3=!0,this.d5(),this.c5(),this.Nc.SB())}NV(){return this.A3}f5(){return!this.NV()}p5(t){t=!!t,this.z3!==t&&(this.z3=t,this.c5(),this.Nc.SB())}P1(){return this.z3}m5(t,s,e,i,n,r,h,o,a){jm(this.H3,t,s,e)&&jm(this.J3,i,n,r)&&jm(this.q3,h,o,a)||(Qm.set(this.H3,t,s,e),Qm.set(this.J3,i,n,r),Qm.set(this.q3,h,o,a),this.g5())}g5(){this.c5(),this.Nc.SB()}C1(){return this.H3}v2(){return this.J3}b2(){return this.q3}lV(){return this.GQ}aV(t){this.GQ!==t&&(this.GQ=t,this.c5(),this.c3(),this.Nc.SB())}uV(t){t=zm.Zn(t),this.PQ!==t&&(this.PQ=t,this.c5(),this.Nc.SB())}cV(){return this.PQ}Vg(){return this.Py}Yg(t){!isFinite(t)||t<1||(this.Py=t)}Zg(){return this.Ay}jg(t){!isFinite(t)||t<1||(this.Ay=t)}y5(){return this.F3}j0(){return this.Y3}*bV(){for(const t of this.Y3)yield*t.zV()}vV(){return this.X3}S5(){return this.X3.length}fB(t){return"number"==typeof t?this.pB(t):this.N0(t.toString())}pB(t){return t=zm.Kn(Math.floor(t),0,this.X3.length-1),this.X3[t]}N0(t){return this.K3.get(t.toLowerCase())||null}w5(t){return!!this.N0(t)}v5(t){return this.Z3.get(t)||null}d5(){for(const t of this.X3)t.M2()}c5(){for(const t of this.X3)t.Q0()}CV(t,s,e){if(this.w5(t))throw new Error(`layer name '${t}' already in use`);if(!s&&e<2)throw new Error("invalid insert position");const i=e>=2?s:s.$V(),n=zm.zn(zm.aQ,this,i,{name:t,QZ:Math.floor(1e15*Math.random()),tQ:!0});this.b5(n,s,e),this.$B().SB(),this.W0()}_V(t,s,e){if(!s&&e<2)throw new Error("invalid insert position");t===s&&e<2||(this.M5(t),this.b5(t,s,e),this.$B().SB(),this.W0())}PV(t){if(this.M5(t)){const s=this.Nc.$k();s.VW(!0),t.Hn(),s.VW(!1),this.$B().SB(),this.W0()}}RV(){const t=new Set;for(const s of this.bV())s.z0()&&!s.H0()&&t.add(s);if(0===t.size)return;const s=this.Nc.$k();s.VW(!0);for(const s of t)this.M5(s),s.Hn();s.VW(!1),this.$B().SB(),this.W0()}b5(t,s,e){if(e>=2)if(s){if(s===t||s.W1(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);s.F1(t,2===e),t.E1(s)}else 2===e?this.Y3.push(t):this.Y3.unshift(t),t.E1(null);else{const i=s.$V();if(i){if(s.W1(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);i.D1(t,s,0===e),t.E1(i)}else{let i=this.Y3.indexOf(s);if(-1===i)throw new Error("cannot find layer to insert by");0===e&&++i,this.Y3.splice(i,0,t),t.E1(null)}}}M5(t){const s=t.$V();if(s)return s.L1(t),!0;if(this.Y3.length>1){const s=this.Y3.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.Y3.splice(s,1),!0}return!1}h5(){this.X3=[...this.bV()],this.K3.clear(),this.Z3.clear();for(let t=0,s=this.X3.length;t<s;++t){const s=this.X3[t];s.B0(t),this.K3.set(s.Pc().toLowerCase(),s),this.Z3.set(s.U0(),s)}}x5(){let t=0;for(const s of this.Y3){for(const e of s.zV())e.$0(t);s.tj()&&t++}}T5(){return this.Y3.at(-1).$q()+1}async W0(){this.h5(),this.x5(),this.Q3=this.T5()}C5(){return this.Q3}I5(){this.Q3=-1}Y1(t){const s=[];for(const e of this.Y3){const i=e.$q();if(i===t)s.push(e);else if(i>t)break}return s}j1(){return{scrollX:this.dV(),scrollY:this.mV(),scale:this.lV(),angle:this.cV(),vpX:this.l1(),vpY:this.u1()}}U1(t){this.fV(t.scrollX),this.pV(t.scrollY),this.aV(t.scale),this.uV(t.angle),this.OV(t.vpX,t.vpY)}_5(){let t=this.Y3.filter((t=>t.B1()))[0];for(;t;){if(!t.bj())return Km.ko(t.Ij()),Km.Lo(1),Km;if(t.h2())return Km.Po(0,0,0,0),Km;t=t.jV().filter((t=>t.B1()))[0]}return Km.Po(0,0,0,0),Km}v0(){return this.i5}G5(){return[...this.D3]}p0(t){if(t.Zj())for(const s of t.A5().P5())this.D3.add(s);else this.D3.add(t)}R5(){return[...this.L3]}E5(t,s){if(t===this||!s)return Promise.resolve();t&&(zm.mo(this.L3,t.L3),t.L3.clear());const e=[];for(const t of this.D3)this.L3.has(t)||(e.push(t.O5(s)),this.L3.add(t));return Promise.all(e)}async F5(t){if(t.k0())throw new Error("cannot load textures for family");const s=this.Nc.pM();if(!s||s.QA()||this.L3.has(t))return;this.L3.add(t);const e=t.O5(s);this.D5(e),await e,t.L5(),this.Nc.SB()}D5(t){this.N3.add(t),t.then((()=>this.N3.delete(t))).catch((()=>this.N3.delete(t)))}k5(){return Promise.all([...this.N3])}N5(t){if(t.k0()||t.NW()>0)throw new Error("cannot unload textures");const s=this.Nc.pM();s&&this.L3.has(t)&&(this.L3.delete(t),t.B5(s))}W5(t,s){if(t!==this&&s)for(const s of this.L3)s.x0()||t.D3.has(s)||(s.B5(),this.L3.delete(s))}V5(){this.L3.clear()}async j5(t){const s=this.Nc,e=this.I3,i=s.$k();this.O3&&(this.F3=i.U5(this.O3),this.F3.z5()),e.H5(this),this.Py=this._3,this.Ay=this.G3,this.AQ=s.Ik()/2,this.RQ=s.Gk()/2,this.c3(),this.d5(),this.c5(),this.x5(),await this.Nc.IB().J5(this.T5(),!0),this.q5(t),this.Nc.Y5(!0),this.X5(),this.i5||this.K5(),this.Z5(this.B3),this.Z5(this.W3),this.Q5(),e.t4(),s.HW(),this.Nc.Y5(!1);const n=this.Nc.s4();if(await Promise.all(n),zm.bh(n),!s.e4()){for(const t of this.B3)t.i4();for(const t of this.W3)t.n4(this.V3,this.j3);for(const[t,s]of Object.entries(this.s5)){const e=this.Nc._Y(parseInt(t,10));e&&!e.k0()&&e.b0()&&zm.bh(s)}for(const t of this.B3)t.r4();for(const t of this.W3)t.r4();for(const t of this.B3)t.qz()||t.h4();for(const t of this.W3)t.qz()||t.h4()}zm.bh(this.B3),zm.bh(this.W3),this.V3.clear(),this.j3.clear(),await Promise.all([...this.D3].map((t=>t.o4(this.Nc.pM())))),t&&(s.Sf().dispatchEvent(new zm.Event("beforefirstlayoutstart")),await s.a4(new zm.Event("beforeprojectstart"))),await this.l4(new zm.Event("beforeanylayoutstart")),s.Sf().dispatchEvent(new zm.Event("beforelayoutstart")),await this.a4(new zm.Event("beforelayoutstart")),s.e4()||await s.GB(zm.EB.RB.AB.u4,null,null),s.Sf().dispatchEvent(new zm.Event("afterlayoutstart")),await this.a4(new zm.Event("afterlayoutstart")),await this.l4(new zm.Event("afteranylayoutstart")),t&&(s.Sf().dispatchEvent(new zm.Event("afterfirstlayoutstart")),await s.a4(new zm.Event("afterprojectstart"))),i.c4(e),await this.k5(),this.i5=!1}q5(t){for(const t of this.Nc.L0())if(!t.k0()&&t.Z$())for(const s of t.FW()){const t=s.cB(),e=t.fB(),i=zm.Kn(e.tk(),0,this.X3.length-1),n=this.X3[i];t.gB(n,!0),n.C0(s)}if(!t)for(const t of this.X3)t.R0(!1)}X5(){for(const t of this.X3)t.w0(this.B3),t.O0()}K5(){let t=!1;for(const[s,e]of Object.entries(this.s5)){const i=this.Nc._Y(parseInt(s,10));if(i&&!i.k0()&&i.b0())for(const s of e){let e=null;if(i.Z$()&&(e=s.hasOwnProperty("instJson")?this.v5(s.instJson.w.l):this.v5(s.w.l),!e))continue;const n=this.Nc.M0(i,e,!1,0,0,!0);s.hasOwnProperty("instJson")?n.ox(s.instJson):n.ox(s),t=!0,this.W3.push(n),s.hasOwnProperty("instJson")&&(this.V3.set(n,s),this.j3.set(s.index,n))}}for(const t of this.X3)t.R0(!0),t.yB();t&&(this.Nc.HW(),this.Nc.f4())}Z5(t){for(const s of t){if(!s.Zj())continue;const e=s.cB(),i=s.eU();for(const n of s.Wj().A5().sV()){if(n===s.Wj())continue;const r=n.FW();if(r.length>i)s.d4(r[i]);else{let i;i=e?this.Nc.M0(n,e.fB(),!0,e.zM(),e.qM(),!0):this.Nc.M0(n,null,!0,0,0,!0),this.Nc.HW(),n.m4(),s.d4(i),t.push(i)}}}}Q5(){for(const t of this.U3)this.Nc.d0(t[1]).Zj()||this.Nc.M0(t,null,!0)}g4(){const t=[],s=this.U3;let e=0;for(let i=0,n=s.length;i<n;++i){const n=s[i],r=this.Nc.d0(n[1]);r.x0()?r.Zj()&&r.A5().y4()||t.push(this.Nc.M0(n,null,!0)):(s[e]=n,++e)}zm.wh(s,e),this.Nc.HW(),this.Z5(t)}D0(t,s,e,i,n,r,h){if(e)return e.D0(t,s,n,r,i,h);{const e=[];for(const o of this.X3)e.push(o.D0(t,s,n,r,i,h));return e.flat()}}async S4(){const t=this.I3;this.Nc.e4()||(await this.l4(new zm.Event("beforeanylayoutend")),await this.a4(new zm.Event("beforelayoutend")),await this.Nc.GB(zm.EB.RB.AB.w4,null,null),await this.a4(new zm.Event("afterlayoutend")),await this.l4(new zm.Event("afteranylayoutend"))),t.v4(!0),this.Nc.$k().b4(),this.i5||this.M4();for(const t of this.X3)t.F0();for(const t of this.Nc.L0())if(!(t.x0()||t.Z$()||t.MW().X$()||t.k0())){for(const s of t.FW())this.Nc.Jj(s);this.Nc.HW()}t.v4(!1),t.jN()===this&&t.H5(null)}x4(t,s){const e=t.Wj().U0().toString();this.s5.hasOwnProperty(e)||(this.s5[e]=[]);const i=this.s5[e],n={index:s,instJson:t.hx(),sceneGraphJson:{children:[]}};i.push(n),this.e5.set(t,n)}T4(t){const s=this.e5.get(t);for(const e of t.C4()){const t=this.e5.get(e);t&&s.sceneGraphJson.children.push({index:t.index,flags:zm._4.I4(e.cB())})}}M4(){this.e5.clear();let t=0;for(const s of this.X3){s.H1();for(const e of s.mB()){const s=e.Wj();!s.x0()&&s.b0()&&(this.x4(e,t),t++)}}for(const t of this.X3)for(const s of t.mB()){const t=s.Wj();!t.x0()&&t.b0()&&this.T4(s)}this.e5.clear()}G4(){this.s5={},this.i5=!0}NO(){return this._Q}h2(){const t=this.Nc,s=t.pM().$b();return"low"===t.IB().N2()||s&&t.L2()||this.qQ.o2()||s&&t._1()}P4(t){const s=this.Nc.IB();if(this.h2()){t.UO(null),t.RO(0,0,0,0);const e={Kx:this.Nc.Pk(),kT:t.sv()||this.Nc.L2()||this.qQ.o2(),D2:!!t.sv()&&this.Nc.L2()};"low"===s.N2()&&(e.width=s.I2(),e.height=s._2()),this._Q=this.Nc.B2(e)}else this._Q=null}A4(t){this.Nc.R4(t)&&(t.FO(!1),t.UO(null),t.uv(),t.zO(this._Q))}E4(t){this.h2()&&(t.FO(!1),this.O4(t,this._Q))}F4(t){t.UO(this._Q),t.Pu(this._5()),this.Nc._1()&&t.OO();const s=this.Y1(0);this.W2(t,this._Q,s,!0),t.sv()&&t.F2(0,1),this.E4(t),this._Q=null}D4(t,s){let e=null;this.Nc.R4(t)&&(e=this._Q),t.UO(e),t.RO(0,0,0,0),this.Nc._1()&&t.OO();const i=this.Y1(s);this.W2(t,e,i,!0),this.A4(t),t.Ob(),this.Nc.IB().L4(s)}W2(t,s,e,i){const n=e.filter((t=>t.B1()));for(let e=0,r=n.length;e<r;){const h=n[e];if(h.A1()&&!h.a2()){tg.push(h);for(let t=e+1;t<r;++t){const s=n[t];if(!s.A1()||s.a2())break;tg.push(n[t])}if(tg.length>=2||1===tg.length&&tg[0].N1()){this.N4(t,s,tg),e+=tg.length,zm.bh(tg);continue}zm.bh(tg)}h.$x(t,s,i&&0===e),++e}}O4(t,s){const e=this.qQ.Y0(),i=this.Nc;0===e.length?(t.UO(null),t.uv(),t.zO(s),t.JO(s),i.ZQ(s)):(Xm.set(0,0,i.m1(),i.g1()),this.QL().jD(t,null,{zD:this,JD:3,devicePixelRatio:this.Nc.o3(),qD:this.Nc.l3()*this.lV(),YD:this.cV(),vL:Xm,bL:null,EF:!0}))}N4(t,s,e){e[0].bj()||(Km.ko(e[0].Ij()),Km.Lo(1),t.Pu(Km)),this.Nc.IB(),t.FO(!0);const i=sg,n=eg,r=ig;for(const t of e)t.H1(),t.T1(i);const h=e[0],o=h.A2(t);h.O2(t);for(let e=0,h=i.length;e<h;){const o=i[e],a=o.cB(),l=a.fB();if(!a.YV()||!a.X2(l.Y2())){++e;continue}(!o.K2()||a.Z2()>0)&&r.push(o);const u=o.cB().cz();n.push(o);let c=e+1;for(;c<h;++c){const t=i[c],s=t.cB();if(s.YV()&&s.X2(s.fB().Y2())){if(s.cz()!==u)break;t.K2()?(s.Z2()>0&&r.push(t),n.push(t)):r.push(t)}}if(1!==n.length||n[0].Q2()){this.B4(t,s,n);for(let e=0,i=r.length;e<i;++e){const i=r[e],n=i.cB(),h=n.fB();n.s3(!0),Um(h,t),h.q2(i,n,t,s),n.s3(!1)}}else{Um(l,t),l.q2(o,a,t,s);for(let e=0,i=r.length;e<i;++e){const i=r[e];if(i===o)continue;const n=i.cB(),h=n.fB();Um(h,t),h.q2(i,n,t,s)}}e=c,zm.bh(n),zm.bh(r)}o&&t.sF(o),zm.bh(i),ng=null}B4(t,s,e){t.YO();for(let s=0,i=e.length;s<i;++s){const i=e[s],n=i.cB(),r=n.fB();n.e3(!0),Um(r,t),r.i3(i,n,t)}t.XO();for(let i=0,n=e.length;i<n;++i){const n=e[i],r=n.cB(),h=r.fB();Um(h,t),h.q2(n,r,t,s),r.e3(!1)}t.ZO()}v3(){const t={sx:this.dV(),sy:this.mV(),s:this.lV(),a:this.cV(),w:this.Vg(),h:this.Zg(),ortho:this.NV(),vpX:this.l1(),vpY:this.u1(),fv:this.i5,persist:this.s5,fx:this.qQ.hx(),layers:{},dynamicLayers:[]};for(const s of this.X3)if(s.z0()){const e=s.$V();t.dynamicLayers.push({sid:s.U0(),name:s.Pc(),parentSid:e?e.U0():null,siblingIndex:s.V0(),data:s.v3()})}else t.layers[s.U0().toString()]=s.v3();return t}b3(t){this.AQ=t.sx,this.RQ=t.sy,this.GQ=t.s,this.PQ=t.a,this.Py=t.w,this.Ay=t.h,this.A3=!!t.ortho,t.hasOwnProperty("vpX")&&(this.R3=t.vpX),t.hasOwnProperty("vpY")&&(this.E3=t.vpY),this.i5=!!t.fv,this.s5=t.persist,this.qQ.ox(t.fx),this.t0=!0;for(const[s,e]of Object.entries(t.layers)){const t=parseInt(s,10),i=this.v5(t);i&&i.b3(e)}if(t.hasOwnProperty("dynamicLayers")){this.RV(),this.Nc.HW();const s=new Map,e=t.dynamicLayers;for(let t=e.length-1;t>=0;--t){const i=e[t],n=i.sid,r=i.name,h=i.parentSid,o=i.siblingIndex,a=i.data;if(this.h5(),this.w5(r)||this.v5(n))continue;let l,u;if(null===h)l=null,u=this.Y3;else{if(l=this.v5(h),!l)continue;u=l.jV()}const c=zm.zn(zm.aQ,this,l,{name:r,QZ:n,tQ:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({KU:c,W4:o}),c.b3(a)}for(const[t,e]of s){e.sort(((t,s)=>t.W4-s.W4));for(const s of e){const e=s.KU,i=s.W4;let n=t.indexOf(e);t.splice(n,1),t.splice(i,0,e)}}}this.W0(),this.d5(),this.c5()}UN(){return this.n5}Lk(){return this.r5}XK(t){t.layout=this.UN();const s=this.Nc,e=s.RU()&&!s.$k().UW();e&&Hm.V4(),this.r5.dispatchEvent(t),e&&Hm.j4()}a4(t){return t.layout=this.UN(),this.r5.If(t)}l4(t){return t.layout=this.UN(),this.Nc.a4(t)}U4(){this.z4(this.Y3)}z4(t,s=0){const e=t.slice(0);e.reverse();for(const t of e)console.log(`${"\t".repeat(s)}- ${t.Pc()}`),this.z4(t.jV(),s+1)}}}{const rg=self._s;rg.H4=class extends rg.jn{#s;#e=[];#f=new Map;#a=new Map;#i=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}Hn(){this.#s=null,this.#i=null,this.#r=null,this.#d=null,rg.bh(this.#e),this.#f.clear(),this.#a.clear(),rg.bh(this.#t)}RC(t){const s=rg.zn(rg.C3,this,this.#e.length,t);this.#e.push(s),this.#f.set(s.Pc().toLowerCase(),s),this.#a.set(s.U0(),s)}$B(){return this.#s}J4(t){this.#r=t}q4(){if(this.#r)return this.#r;if(this.#e.length)return this.#e[0];throw new Error("no first layout")}Y4(t){return this.#f.get(t.toLowerCase())||null}X4(t){return this.#a.get(t)||null}K4(t){return t=rg.Kn(Math.floor(t),0,this.#e.length-1),this.#e[t]}JN(t){return"number"==typeof t?this.K4(t):this.Y4(t.toString())}YN(){return this.#e}H5(t){this.#i=t}jN(){return this.#i}Z4(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}Q4(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*t6(){this.#i&&(yield this.#i),this.#t.length&&(yield*this.#t)}s6(t){return this.#i===t||this.#t.includes(t)}v4(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}zW(){return this.#h>0}ZN(t){this.#d=t}t4(){this.#d=null}KN(){return!!this.#d}e6(){return this.#d}i6(){const t=this.jN();t&&t.d5()}n6(){const t=this.jN();t&&t.c5()}}}{const hg=self._s,og=new RegExp("<(.+?)>","g");hg.r6=class extends hg.jn{constructor(t){super(),this.Nc=t,this.h6=hg.zn(hg.o6),this.a6=null,this.l6=[],this.u6=new Map,this.c6=new Map,this.f6=new Map,this.d6=[],this.p6=[],this.m6=[],this.g6=!1,this.y6=!1,this.S6=!1,this.w6=()=>this.v6(),this.b6=()=>this.M6(),this.x6=()=>this.T6(),this.C6=()=>this.I6(),this._6=t=>this.G6(t.VH),this.P6=t=>this.A6(),this.R6=t=>this.E6(),this.O6=t=>this.F6(),this.D6=[],this.L6=0}Hn(){this.k6(),this.w6=null,this.b6=null,this.x6=null,this.C6=null,this._6=null,this.R6=null;for(const t of this.l6)t.OJ(),t.Hn();hg.bh(this.l6),this.l6=null,this.h6.Hn(),this.h6=null,hg.bh(this.d6),this.d6=null,hg.bh(this.p6),this.p6=null,hg.bh(this.m6),this.m6=null,this.u6.clear(),this.u6=null,this.c6.clear(),this.c6=null,this.f6.clear(),this.f6=null,hg.bh(this.D6),this.D6=null,this.Nc=null}N6(){const t=this.Nc.Sf();t.addEventListener("pretick",this.w6),t.addEventListener("tick2",this.b6),t.addEventListener("beforelayoutchange",this.x6),t.addEventListener("layoutchange",this.C6),t.addEventListener("instancedestroy",this._6),t.addEventListener("beforeload",this.P6),t.addEventListener("afterload",this.R6),t.addEventListener("afterlayoutstart",this.O6)}k6(){const t=this.Nc.Sf();t.removeEventListener("pretick",this.w6),t.removeEventListener("tick2",this.b6),t.removeEventListener("beforelayoutchange",this.x6),t.removeEventListener("layoutchange",this.C6),t.removeEventListener("instancedestroy",this._6),t.removeEventListener("beforeload",this.P6),t.removeEventListener("afterload",this.R6),t.removeEventListener("afterlayoutstart",this.O6)}RC(t){this.h6.Bu(t);const s=hg.W6.B6(t,this);this.Bu(s),this.V6(s),this.f6.set(s.Pc(),0)}j6(t){const s=this.U6(),e=t.nU(),i=s.Hs(e),n=hg.W6.j6(`${e}:${this.f6.get(e)}`,i,this);return this.z6(e),this.Bu(n),n}z6(t){this.f6.set(t,this.f6.get(t)+1)}H6(){for(const t of this.l6){if(t.J6())continue;const s=t.nU();this.z6(s)}}q6(){for(const t of this.f6.keys())this.f6.set(t,0)}Bu(t){this.l6.push(t),this.u6.set(t.Pc().toLowerCase(),t)}Kf(t){t.Y6(),t.J6()||(hg._h(this.l6,t),hg._h(this.d6,t),hg._h(this.p6,t),hg._h(this.m6,t),this.u6.delete(t.Pc().toLowerCase()),this.X6(t),t.RJ()||t.Hn())}xU(t){this.Nc.xU(t,this.a6,null)}$B(){return this.Nc}U6(){return this.h6}K6(t){this.a6=t}Z6(){return this.a6}*Q6(){for(const t of this.l6)yield t}*t8(){for(const t of this.p6)yield t}s8(t,s){this.c6.has(t)||this.c6.set(t,new Set),this.c6.get(t).add(s)}V6(t){for(const s of t.e8())this.s8(s,t)}X6(t){for(const[s,e]of this.c6.entries())e.has(t)&&(e.delete(t),0===e.size&&this.c6.delete(s))}i8(t){if(this.c6.has(t))return this.c6.get(t)}n8(t,s){if(s)for(const e of this.l6)if(s.every((t=>e.r8(t.VH,t.trackId)))&&e.Pc().includes(t.Pc()))return e}h8(t){return this.u6.get(t.toLowerCase())||null}o8(t){for(const s of this.d6)if(s.Pc()===t)return s;for(const s of this.p6)if(s.Pc()===t)return s;return null}*a8(t){if(og.test(t)){let s;og.lastIndex=0;const e=new Set;do{if(s=og.exec(t),s){const t=s[1].split(",");for(const s of t)e.add(s)}}while(s);for(const t of e.values()){const s=this.h8(t);s&&(yield s)}e.clear()}else{const s=this.h8(t);s&&(yield s)}}*l8(t){for(const s of this.l6)s.DJ(t)&&(yield s)}u8(t){this.d6.includes(t)||this.d6.push(t),this.c8()}f8(t){hg._h(this.p6,t),this.d8()}p8(t){this.p6.includes(t)?(t.m8(!0),t.g8(!1),t.y8(!1)):(t.m8(!1),t.g8(!0),t.y8(!1),this.d6.includes(t)||this.d6.push(t)),this.c8()}S8(t){t.m8(!1),t.g8(!1),t.w8(),hg._h(this.d6,t),this.d8()}v8(t){t.m8(!1),t.g8(!1),this.p6.includes(t)&&(t.y8(!0),this.m6.push(t),hg._h(this.p6,t)),this.d6.includes(t)&&t.y8(!0)}b8(t){t.m8(!1),t.g8(!1),t.y8(!1),t.jJ(1),hg._h(this.p6,t)}M8(t){this.v8(t),t.w8()}v6(){const t=this.$B();if(t.e4())return;if(!this.g6)return;if(this.y6)return;let s=0;for(t.RU()&&(s=performance.now()),this.S6=!0;this.d6.length;){const t=this.d6.pop();t.x8()?(t.T8(),this.m6.push(t)):(t.C8(),this.p6.push(t)),0!==t.I8()&&(this.L6=1)}const e=this.Nc._8(),i=this.Nc.G8(),n=this.Nc.wN();for(let t=this.p6.length-1;t>=0;t--){const s=this.p6[t];s&&s.P8(e,n,i)}this.S6=!1,t.RU()&&globalThis.EU.A8(performance.now()-s),0!==this.L6&&t.SB()}M6(){const t=this.$B();if(t.e4())return;if(!this.g6)return;if(this.y6)return;let s,e=0;t.RU()&&(e=performance.now());for(let t=0,e=this.m6.length;t<e;t++){const e=this.m6[t];s||(s=new Set),e.Y6(),this.E8(e),s.add(e)}if(s){hg.Ah(this.m6,s),this.L6=0;for(let t=0,s=this.p6.length;t<s;t++)if(0!==this.p6[t].I8()){this.L6=1;break}}this.d8(),t.RU()&&globalThis.EU.A8(performance.now()-e)}E8(t){t.RJ()||t.O8()&&t.F8()&&t.D8()&&t.L8()}c8(){this.g6||(this.g6=!0)}d8(){this.m6.length||this.p6.length||this.d6.length||this.S6||(this.g6=!1)}T6(){for(this.y6=!0;this.d6.length;)this.S8(this.d6.pop());const t=new Set;for(const s of this.p6)s.T6()&&(s.Y6(),t.add(s));hg.Ah(this.p6,t),t.clear();for(const s of this.m6)s.T6()&&(s.Y6(),t.add(s));hg.Ah(this.m6,t),this.d8();for(const t of this.l6)t.k8()}I6(){this.y6=!1}G6(t){const s=t.Wj(),e=this.i8(s);if(e)if(this.Nc.e4())this.D6.push(t);else for(const t of e)t.J6()||(t.RJ()?this.Kf(t):t.O8()||(this.E8(t),this.Kf(t)))}A6(){for(const t of this.d6.map((t=>t)))this.E8(t),this.Kf(t);for(const t of this.p6.map((t=>t)))this.E8(t),this.Kf(t)}E6(){for(const t of this.D6)this.G6(t);hg.bh(this.D6);for(const t of this.l6)t.E6()}F6(){const t=this.Nc.HN().jN();if(t)for(const s of this.l6){const e=s.N8();e&&t.Pc()===e&&this.p8(s)}}v3(){return{timelinesJson:this.B8(),scheduledTimelinesJson:this.W8(),playingTimelinesJson:this.V8(),markedForRemovalTimelinesJson:this.j8(),hasRuntimeListeners:this.g6,changingLayout:this.y6,isTickingTimelines:this.S6}}b3(t){t&&(this.q6(),this.U8(t.timelinesJson),this.z8(t.scheduledTimelinesJson),this.H8(t.playingTimelinesJson),this.J8(t.markedForRemovalTimelinesJson),this.g6=!t.hasRuntimeListeners,this.y6=!!t.changingLayout,this.S6=!!t.isTickingTimelines,this.H6(),this.c8(),this.d8())}B8(){return this.l6.map((t=>t.v3()))}U8(t){for(const s of t){let t=this.h8(s.name);if(t)t.b3(s);else{const e=this.q8(s);if(!e)continue;const i=this.h8(e);t=this.j6(i),t.b3(s)}t.Y8()||this.Kf(t)}}q8(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}W8(){return this.X8(this.d6)}z8(t){this.K8(t,this.d6)}V8(){return this.X8(this.p6)}H8(t){this.K8(t,this.p6)}j8(){return this.X8(this.m6)}J8(t){this.K8(t,this.m6)}Z8(t,s){if(!s)return!1;for(const e of s)if(e===t.Pc())return!0;return!1}X8(t){return t.map((t=>t.Pc()))}K8(t,s){const e=new Set;for(const i of s)this.Z8(i,t)||e.add(i);if(hg.Ah(s,e),t){const e=t=>s=>s.Pc()===t;for(const i of t){const t=this.h8(i);t&&(s.find(e(i))||s.push(t))}}}}}{const ag=self._s,lg=100,ug=.01,cg=25,fg=20,dg=5,pg=[0,0],mg=[0,0],gg=[0,0],yg=[0,0,0,0,0],Sg=new Array(4),wg=[{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0}],vg={x:0,y:0,t:0,bt:0};ag.Q8=class{constructor(t,s){this.t7=!1,this.s7=t,this.e7=[];let e=null;if(e=s?this.s7.i7(s):ag.$h(this.s7.n7()),!e)return;const i=e.lq("offsetX"),n=e.lq("offsetY");if(!i||!n)return;this.r7=i,this.h7=n;const r=i.o7(),h=n.o7();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],e=(s.a7(),s.l7()),i=h[t],n=(i.a7(),i.l7());e&&"cubic-bezier"===e.u7()&&n&&"cubic-bezier"===n.u7()?this.e7.push(ag.zn(ag.c7,e,n,s,i,this.e7.length)):(e&&"line"===e.u7()&&n&&n.u7(),this.e7.push(ag.zn(ag.f7,s,i,this.e7.length)))}this.t7=!0}Hn(){for(const t of this.e7)t.Hn();ag.bh(this.e7),this.e7=null,this.s7=null,this.r7=null,this.h7=null}d7(){return this.t7}p7(){return this.e7}m7(t){const s="relative"===this.r7.g7()?t.zM():0,e="relative"===this.h7.g7()?t.qM():0;for(const t of this.e7)t.m7(s,e)}LS(t,s,e){let i=NaN,n=this.e7.length;for(let e=0;e<n;e++){const n=this.e7[e];if("cubic-bezier"===n.FI()){const e=n.LS(t,s);(isNaN(i)||e[3]<i)&&(i=e[3],gg[0]=e[2],gg[1]=n.tk())}}return gg}y7(t,s,e){const i=e.S7;ag.Ke(i[0])||(i[0]=0),ag.Ke(i[1])||(i[1]=1);let n=NaN,r=this.e7.length;for(let e=0;e<r;e++){const r=this.e7[e];if("cubic-bezier"===r.FI()){const e=r.w7(t,s,i);(isNaN(n)||e[3]<n)&&(n=e[3],gg[0]=e[2],gg[1]=r.tk())}}return gg}v7(t,s){return this.e7[s].v7(t)}b7(t,s){return this.e7[s].b7(t)}},ag.c7=class{constructor(t,s,e,i,n){this.GS=n;const r=t.M7("cubic-bezier"),h=e.M7("cubic-bezier"),o=s.M7("cubic-bezier"),a=i.M7("cubic-bezier");this.x7=t.T7(),this.C7=s.T7(),this.I7=t.T7()+r._7(),this.G7=s.T7()+o._7(),this.P7=e.T7()+h.A7(),this.R7=i.T7()+a.A7(),this.E7=e.T7(),this.O7=i.T7(),this.F7=0,this.D7=0,this.L7=0,this.k7=0,this.N7=0,this.B7=0,this.W7=0,this.V7=0,this.j7=0,this.U7=0,this.z7=0,this.H7=0,this.J7=0,this.q7=0,this.Y7=0,this.X7=0,this.K7=0,this.Z7=0,this.Q7=0,this.t9=0,this.s9=NaN,this.t7=!1,this.e9=100,this.i9=new Array(this.e9+1),this.i9[0]=0,this.n9=0,this.r9=[],this.h9=[];for(let t=0;t<100;t++)this.h9.push({x:0,y:0,t:0,bt:0});this.o9()}Hn(){ag.bh(this.i9),this.i9=null,ag.bh(this.r9),this.r9=null,ag.bh(this.h9),this.h9=null}FI(){return"cubic-bezier"}tk(){return this.GS}a9(){return Math.floor(this.n9/25)}l9(){return 1/this.a9()}m7(t,s){this.u9=t,this.c9=s,this.i9=new Array(this.e9+1),this.i9[0]=0,this.o9(),this.F7=this.x7+this.u9,this.D7=this.C7+this.c9,this.L7=this.I7+this.u9,this.k7=this.G7+this.c9,this.N7=this.P7+this.u9,this.B7=this.R7+this.c9,this.W7=this.E7+this.u9,this.V7=this.O7+this.c9,this.j7=3*(this.L7-this.F7),this.U7=3*(this.k7-this.D7),this.z7=3*(this.N7-this.L7),this.H7=3*(this.B7-this.k7),this.J7=3*(this.W7-this.N7),this.q7=3*(this.V7-this.B7),this.Y7=3*(this.L7-this.F7),this.X7=3*(this.F7+this.N7-2*this.L7),this.K7=this.W7-this.F7+3*(this.L7-this.N7),this.Z7=3*(this.k7-this.D7),this.Q7=3*(this.D7+this.B7-2*this.k7),this.t9=this.V7-this.D7+3*(this.k7-this.B7)}Map(t){if(!this.t7)return NaN;const s=this.f9(t);return mg[0]=this.d9(s),mg[1]=this.p9(s),mg}LS(t,s){const e=this.m9(100),i=this.g9(t,s,e),n=this.y9(t,s,e,i);return yg[0]=n.x,yg[1]=n.y,yg[2]=n.t,yg[3]=n.bt,yg}w7(t,s,e){const i=this.m9(100),n=this.S9(t,s,i,e),r=this.y9(t,s,i,n);return yg[0]=r.x,yg[1]=r.y,yg[2]=r.t,yg[3]=r.bt,yg}v7(t){const s=1-t,e=s*s,i=2*s*t,n=t*t,r=e*this.j7+i*this.z7+n*this.J7,h=e*this.U7+i*this.H7+n*this.q7,o=ag.sr(r,h);return pg[0]=r/o,pg[1]=h/o,pg}b7(t){const s=1-t,e=s*s,i=2*s*t,n=t*t,r=e*this.j7+i*this.z7+n*this.J7,h=e*this.U7+i*this.H7+n*this.q7;return Math.atan2(h,r)}f9(t){if(!this.t7)return;let s=t*this.i9[this.e9],e=0,i=this.e9,n=0;for(;e<i;)n=e+((i-e)/2|0),this.i9[n]<s?e=n+1:i=n;this.i9[n]>s&&n--;const r=this.i9[n];return r===s?n/this.e9:(n+(s-r)/(this.i9[n+1]-r))/this.e9}d9(t){return this.t7?self.Vu.rc("cubicbezier")(t,this.x7+this.u9,this.I7+this.u9,this.P7+this.u9,this.E7+this.u9):NaN}p9(t){return this.t7?self.Vu.rc("cubicbezier")(t,this.C7+this.c9,this.G7+this.c9,this.R7+this.c9,this.O7+this.c9):NaN}m9(t){if(t=t||100,this.r9.length>=t)return this.r9;this.r9=new Array(t),t++;for(let s=0;s<t-1;s++){const e=s/(t-1),i=e**2,n=e**3,r=this.Y7*e,h=this.X7*i,o=this.K7*n,a=this.Z7*e,l=this.Q7*i,u=this.t9*n,c=this.F7+r+h+o,f=this.D7+a+l+u;this.h9[s].x=c,this.h9[s].y=f,this.h9[s].t=e,this.h9[s].bt=0,this.r9[s]=this.h9[s]}return this.r9}g9(t,s,e,i=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.s9))for(let i=0;i<100;i++){const h=e[i],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=i)}else{for(let i=this.s9;i<this.s9+5&&!(i>=e.length);i++){const h=e[i],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=i)}for(let i=this.s9;i>this.s9-5&&!(i<0);i--){const h=e[i],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=i)}}return this.s9=r,r}S9(t,s,e,i,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.s9))for(let h=0;h<100;h++){const o=e[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.bt<n&&(n=o.bt,r=h)}else{for(let h=this.s9;h<this.s9+5&&!(h>=e.length);h++){const o=e[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.bt<n&&(n=o.bt,r=h)}for(let h=this.s9;h>this.s9-5&&!(h<0);h--){const o=e[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.bt<n&&(n=o.bt,r=h)}}return this.s9=r,r}y9(t,s,e,i){let n=e[i],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=e.length;let o=0===i?0:i-1,a=i===r-1?r-1:i+1,l=e[o].t,u=(e[a].t-l)/4;if(u<.001)break;Sg[0]=e[o];for(let e=1;e<=2;e++){const r=l+e*u,o=r**2,a=r**3,c=this.Y7*r,f=this.X7*o,d=this.K7*a,p=this.Z7*r,m=this.Q7*o,g=this.t9*a,y=this.F7+c+f+d,S=this.D7+p+m+g,w=y-t,v=S-s,b=w*w+v*v;if(b<h){h=b,i=e,vg.x=y,vg.y=S,vg.t=r,vg.bt=b,n=vg;break t}const M=wg[e-1];M.x=y,M.y=S,M.t=r,M.bt=b,Sg[e]=M}Sg[3]=e[a],e=Sg}while(r++<20);return n}o9(){this.t7=!0;let t=this.d9(0),s=this.p9(0),e=0;for(let i=1;i<=this.e9;i++){const n=this.d9(.01*i),r=this.p9(.01*i),h=t-n,o=s-r;e+=ag.sr(h,o),this.i9[i]=e,t=n,s=r}this.n9=e}},ag.f7=class{constructor(t,s,e){this.GS=e,this.w9=t.T7(),this.v9=s.T7(),this.u9=0,this.c9=0}Hn(){}FI(){return"line"}tk(){return this.GS}m7(t,s){this.u9=t,this.c9=s}zM(){return this.w9+this.u9}qM(){return this.v9+this.c9}}}{const bg=self._s,Mg=0,xg=1;bg.W6=class extends bg.jn{constructor(t,s,e){super(),this.Nc=e.$B(),this.b9=e,this.M9=s,this.Yn=t,this.x9=[],this.T9=0,this.C9=null,this.I9=0,this._9(),this.G9=null,this.P9=null,this.A9=0,this.R9=0,this.E9=1,this.O9=0,this.F9=-1,this.D9=1,this.L9=!1,this.k9=!1,this.N9=!1,this.B9=!0,this.W9=!1,this.V9=!1,this.j9=-1,this.U9=!1,this.z9=!1,this.H9=!1,this.J9=!1,this.q9=NaN,this.Y9=[""],this.X9="",this.K9=!1,this.L6=0,this.Z9=0,this.Q9=null,this.ttt=null}static B6(t,s){const e=s.U6(),i=e.stt(),n=e.Hs(t[i]),r=bg.zn(bg.W6,t[i],n,s);return r.ett(!0),r}static j6(t,s,e){return bg.zn(bg.W6,t,s,e)}Hn(){if(this.RJ())return;const t=this.Nc.Sf();this.b9.S8(this),this.b9.M8(this);for(const t of this.x9)t.Hn();bg.bh(this.x9),this.x9=null,this.Nc=null,this.b9=null,this.M9=null,this.W9=!0,this.G9=null,this.P9=null,this.itt(t)}itt(t){const s=bg.zn(bg.Event,"timelinestatereleased");s.ntt=this,t.dispatchEvent(s)}FI(){return 0}_9(){for(const t of this.M9.ott().htt())this.T9=this.x9.push(bg.att.RC(this,t))}ltt(){return this.b9}$B(){return this.Nc}n7(){return this.x9}utt(t,s,e,i){if(!this.Z9)return;let n;for(let r=0;r<this.x9.length;r++){let h=this.x9[r];if(t!==h.iq())continue;const o=h.lq(e);o&&s.constructor===o.ctt().constructor&&o.g7()===i.g7()&&(n||(n=[]),n.push(o))}return n}Y8(){return!!this.x9.length}i7(t){for(const s of this.x9)if(bg.Zi(s.oq(),t))return s;return null}ftt(t){for(const s of this.x9)if(!s.dtt()&&bg.Zi(s.Pc(),t))return s;return null}EY(t){this.Yn=t}Pc(){return this.Yn}ptt(){return this.M9}nU(){return this.M9.Pc()}NJ(){return this.M9.NJ()}kJ(t){this.M9.kJ(t)}mtt(){return this.M9.mtt()}gtt(t){this.M9.gtt(t)}ytt(){return this.M9.ytt()}Stt(t){this.M9.Stt(t)}g7(){return this.M9.g7()}wtt(t){this.M9.g7(t)}eq(t){for(const s of this.n7())s.eq(t)}$J(){return this.M9.$J()}BJ(t){return this.M9.BJ(t)}VJ(){return this.M9.VJ()}WJ(t){return this.M9.WJ(t)}iJ(){return this.M9.iJ()}vtt(t){return this.M9.vtt(t)}jJ(t){return this.E9=t}UJ(){return this.E9}N8(){return this.M9.N8()}btt(){return this.M9.btt()}Mtt(){return this.M9.Mtt()}xtt(){return this.O9}Ttt(){return!this.IsPlaying()||this.E9>0}HJ(){return this.G9||(this.G9=new Promise((t=>{this.P9=t}))),this.G9}w8(){this.G9&&(this.P9(),this.G9=null,this.P9=null)}Ctt(t){this.Y9=bg.W6.Itt(t),this.K9=!0}zJ(){return this.Y9}_tt(){return this.K9&&(this.X9=this.Y9.join(" ")),this.K9=!1,this.X9}DJ(t){if(!this.Y9)return!1;if(!this.Y9.length)return!1;const s=bg.W6.Itt(t);return!!s&&!!s.length&&s.every(bg.W6.Gtt,this)}Ptt(){bg.EB.Att&&this.constructor===bg.W6&&(bg.EB.Att.AB.Rtt(this),this.b9.xU(bg.EB.Att.AB.Ett),this.b9.xU(bg.EB.Att.AB.Ott),this.b9.xU(bg.EB.Att.AB.Ftt),this.b9.xU(bg.EB.Att.AB.Dtt),bg.EB.Att.AB.Ltt())}ktt(){this.j9=this.Nc.mN()}L8(){this.H9||(this.H9=!0,bg.EB.Att&&this.constructor===bg.W6&&(bg.EB.Att.AB.Rtt(this),this.b9.xU(bg.EB.Att.AB.Ntt),this.b9.xU(bg.EB.Att.AB.Btt),this.b9.xU(bg.EB.Att.AB.$tt),this.b9.xU(bg.EB.Att.AB.Wtt),bg.EB.Att.AB.Ltt()))}m8(t){this.L9=t}Vtt(){return this.j9===this.Nc.mN()}IsPlaying(t=!1){return!!this.Vtt()||!(!this.jtt()||t)||this.L9}Utt(){return this.IsPlaying(!0)}YJ(){return this.ztt()}ztt(){return!(this.RJ()||this.jtt()||this.Utt()||this.F8())}g8(t){this.k9=t}jtt(){return this.k9}Htt(t){this.B9=t;const s=this.$J(),e=this.VJ();if(s||e){if(s&&!e);else if(!s&&e){const t=this._F();1===this.O9&&(t<=0||t>=this.NJ())&&(this.B9=!0)}}else{const t=this._F();(t<=0||t>=this.NJ())&&(this.B9=!0)}}F8(){return this.B9}RJ(){return this.W9}y8(t){this.V9=t}x8(){return this.V9}Jtt(t){this.U9=t}qtt(){return this.U9}ett(t){this.z9=!!t}J6(){return this.z9}D8(){return this.N9}_F(){return this.A9}LJ(t){const s=this._F();this.Ytt(t),this.Htt(!1),this.F8()||this.Jtt(!0),(this.Utt()||this.jtt()||!this.N9)&&(this.Utt()||this.jtt()||this.N9?this.Utt()?this.OJ():this.jtt()&&(this.b9.S8(this),this.Xtt()):this.Xtt()),this.Ktt(),this.Ztt(this._F(),!1,!0,!0,s),this.Qtt(),this.L6&&this.$B().SB(),this.tst()}Ytt(t){bg.Ke(t)||(t=this.NJ()),t<0?this.A9=0:t>=this.NJ()?this.A9=this.NJ():this.A9=t}sst(t){bg.Ke(t)||(t=this.NJ()),t<0?this.A9=0:t>=this.NJ()?this.A9=this.NJ():this.A9=t;for(const t of this.x9)t.est()}tst(){bg.EB.Att&&this.constructor===bg.W6&&(bg.EB.Att.AB.Rtt(this),this.b9.xU(bg.EB.Att.AB.ist),this.b9.xU(bg.EB.Att.AB.nst),this.b9.xU(bg.EB.Att.AB.rst),bg.EB.Att.AB.Ltt())}hst(){if(this.$J())return!0;if(this.VJ()&&1===this.O9){if(this.Ttt()){if(this._F()>=this.NJ())return!1}else if(this._F()<=0)return!1}else if(!this.$J()&&!this.VJ())if(this.Ttt()){if(this._F()>=this.NJ())return!1}else if(this._F()<=0)return!1;return!0}FJ(){this.RJ()||this.hst()&&this.Play(!0)}Play(t=!1){return!this.RJ()&&!this.jtt()&&(this.Utt()&&this.Vtt()?this.ost():!this.Utt()&&!!(this.F8()||t||this.qtt())&&this.ast())}ost(){return this.Jtt(!1),this.b9.f8(this),this.b9.p8(this),this.HJ(),!0}ast(){return this.Jtt(!1),this.b9.p8(this),this.HJ(),!0}OJ(t=!1){this.RJ()||(this.Htt(t),this.b9.v8(this),this.F8()&&this.w8())}Bf(t=!0,s=!1){if(this.RJ())return;if(!this.Utt()&&this.jtt())return this.b9.S8(this);if(this.F8())return;this.OJ(!0),this.Ttt()?this.Ytt(0):this.Ytt(this.NJ());const e=this._F();this.Ktt(),s?this.lst(e):this.Ztt(e,!1,!1,!0),t&&this.tst(),this.Qtt(),this.L6&&t&&this.$B().SB()}ust(){this.Bf(!1,!0)}lst(t){this.Ztt(t,!1,!1,!0,NaN,!1,!0)}T6(){return!!this.RJ()||!(!this.$B().e4()&&this.cst())&&(this.b9.b8(this),this.$B().e4()||this.ust(),!0)}Xtt(){this.C8(!0)}T8(){this.C8(!1,!0),this.m8(!1),this.g8(!1)}C8(t=!1,s=!1){if(!this.x8()||s)if(t){this.H9=!1,this.N9=!0,this.J9=!0,this.Ktt();for(const t of this.x9)t.C8();this.Qtt()}else if(this.m8(!0),this.g8(!1),this.Ptt(),this.F8()){this.j9=-1,0!==this.O9&&(this.E9=Math.abs(this.E9)),this.O9=0,this.F9=-1,this.D9=1,this.B9=!1,this.H9=!1,this.N9=!0,this.J9=!0,this.Ttt()?this.Ytt(0):this.Ytt(this.NJ()),this.Ktt();for(const t of this.x9)t.C8();this.Qtt()}else{-1!==this.F9&&(this.O9=this.F9),this.J9=!0,this.H9=!1,this.Ktt();for(const t of this.x9)t.fst();this.Qtt()}}I8(){return this.L6}Ktt(){this.Z9=0;for(const t of this.x9)t.bR()&&(this.Z9=1)}Qtt(){this.L6=0;for(const t of this.x9)t.dst(),0===this.L6&&1===t.I8()&&(this.L6=1),this.C9||1!==t.pst()||(this.C9||(this.C9=[]),this.I9=this.C9.push(t))}P8(t,s,e){if(this.Mtt()){if(0===t&&0===this.q9)return;this.q9=t,t=e}else{if(0===e&&0===this.q9)return;this.q9=e,t=e,s=1}const i=this.A9+this.R9,n=i+t*s*this.E9,r=this.M9.mst;n<0?(this.A9=0,this.R9=-n):n>=r?(this.A9=r,this.R9=this.A9-n):(this.A9=n,this.R9=0);let h=!1,o=!1;const a=this.$J(),l=this.VJ();let u;a||l?a&&!l?this.E9>0?this.A9>=r&&(this.sst(0),o=!0):this.A9<=0&&(this.sst(r),o=!0):!a&&l?this.E9>0?this.A9>=r&&(this.Ytt(r),this.jJ(-1*this.UJ()),o=!0,1===this.O9?this.D9<this.iJ()?(this.D9++,this.O9=0):h=!0:0===this.O9&&(this.O9=1)):this.A9<=0&&(this.Ytt(0),this.jJ(-1*this.UJ()),o=!0,1===this.O9?this.D9<this.iJ()?(this.D9++,this.O9=0):h=!0:0===this.O9&&(this.O9=1)):a&&l&&(this.E9>0?this.A9>=r&&(this.Ytt(r),this.jJ(-1*this.UJ()),o=!0,this.O9++,bg.wrap(this.O9,0,2)):this.A9<=0&&(this.Ytt(0),this.jJ(-1*this.UJ()),o=!0,this.O9++,bg.wrap(this.O9,0,2))):this.E9>0?this.A9>=r&&(this.D9<this.iJ()?(this.D9++,this.sst(0),o=!0):(this.Ytt(r),h=!0)):this.A9<=0&&(this.D9<this.iJ()?(this.D9++,this.sst(r),o=!0):(this.Ytt(0),h=!0));const c=this.T9;if(h){for(u=0;u<c;u++)this.x9[u].gst();return this.OJ(!0),void this.ktt()}const f=this.I9;for(u=0;u<f;u++)this.C9[u].yst();if(1===this.Z9)for(u=0;u<c;u++){const t=this.x9[u],s=t.Sst();this.A9-s<0&&i-s>0?(this.A9=s<0?0:s>=r?r:s,t.wc(s,!0,!1,o,this.J9,!1)):t.wc(this.A9,!0,!1,o,this.J9,!1)}else for(u=0;u<c;u++)this.x9[u].wc(this.A9,!0,!1,o,this.J9,!1);if(!this.IsPlaying()&&this.Q9){const t=this.Q9._F()+this.Q9.vst().wst().Sst(),s=this.A9-t;this.A9-=s,0!==this.R9&&(this.R9-=s),this.Q9=null}for(u=0;u<f;u++)this.C9[u].bst();this.J9&&(this.J9=!1)}Mst(t){this.Q9=t}xst(){return this.Q9}Ztt(t,s=!1,e=!1,i=!1,n=NaN,r=!1,h=!1){for(const t of this.x9)t.yst();for(const r of this.x9){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this._F()-r.Sst(),s=n-r.Sst();t<0&&s>0&&(o=r.Sst(),this.Ytt(o))}r.wc(o,s,e,i,this.J9,h)}for(const t of this.x9)t.bst();this.J9&&r&&(this.J9=!1)}Tst(){const t=this.M9.ott().Cst(),s=bg.att.RC(this,t);return this.T9=this.x9.push(s),s}Y6(){if(!this.RJ())for(const t of this.x9)t.Ist()}k8(){for(const t of this.x9)t.k8()}_st(){for(const t of this.x9)t.Gst()}Pst(t,s,e){if(s){if("number"==typeof e&&e>=0){const t=this.x9[e];if(!t)return;return t.Ast(s),void this.b9.s8(s.Wj(),this)}for(const e of this.x9)if(e.dtt()){if(t){if(e.oq()!==t)continue;e.Ast(s),this.b9.s8(s.Wj(),this);break}if(!e.Rst()){e.Ast(s),this.b9.s8(s.Wj(),this);break}}}}r8(t,s){for(const e of this.x9)if(e.dtt())if(s){if(s===e.oq()&&t===e.iq())return!0}else if(t===e.iq())return!0;return!1}O8(){return this.x9.some((t=>!t.dtt()||t.Est()))}cst(){return this.x9.some((t=>{if(t.dtt()){if(!t.Est())return!1;const s=t.Wj();return!!s&&s.x0()}return!1}))}lq(t){for(const s of this.n7())for(const e of s.Ost())if(e.Fst()===t)return e}Dst(t){for(const s of this.x9)if(t===s.iq())return s;return null}Lst(t){let s=t?t.split(" "):[];const e=new Set(s.map((t=>t.toLowerCase().trim())));s=[...e.values()];for(const t of this.n7())for(const e of t.kst())if(s.every((t=>e.Nst(t))))return e}e8(){const t=[];for(const s of this.n7())t.push(s.Wj());return t.filter((t=>t))}E6(){for(const t of this.n7())t.E6()}v3(){return{tracksJson:this.Bst(),name:this.Yn,playheadTime:this._F(),playbackRate:this.E9,pingPongState:this.O9,resumePingPongState:this.F9,currentRepeatCount:this.D9,isPlaying:this.L9,isScheduled:this.k9,initialStateSet:this.N9,finishedTriggers:this.H9,complete:this.B9,released:this.W9,markedForRemoval:this.V9,completedTick:this.j9,implicitPause:this.U9,isTemplate:this.z9,tags:this.Y9.join(" "),stringTags:this.X9,tagsChanged:this.K9,firstTick:this.J9}}b3(t){t&&(this.$st(t.tracksJson),this.Yn=t.name,this.A9=t.playheadTime,this.E9=t.playbackRate,this.O9=t.pingPongState,this.F9=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.D9=t.currentRepeatCount,this.L9=!!t.isPlaying,this.k9=!!t.isScheduled,this.N9=!!t.initialStateSet,this.H9=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.B9=!!t.complete,this.W9=!!t.released,this.V9=!!t.markedForRemoval,this.j9=t.completedTick,this.U9=!!t.implicitPause,this.z9=!!t.isTemplate,this.Y9=t.tags.split(" "),this.X9=t.stringTags,this.K9=!!t.tagsChanged,this.J9=!!t.firstTick)}Bst(){return this.x9.map((t=>t.v3()))}$st(t){this._st(),t.forEach(((t,s)=>{this.x9[s].b3(t)})),this.x9.filter((t=>t.Est()))}static Gtt(t){const s=this.zJ();return""===t?1===s.length&&""===s[0]:s.map((t=>t.toLowerCase())).includes(t.toLowerCase())}static Itt(t){if(bg.xi(t))return t.slice(0);if(bg.hi(t))return t.split(" ");throw new Error("invalid tags")}Wst(){return this.ttt||(this.ttt=bg.zn(self.KJ,this)),this.ttt}}}{const Tg=self._s,Cg=0,Ig=1,_g=2;Tg.att=class extends Tg.jn{constructor(t,s){super(),this.s7=t,this.Vst=s,this.jst=s.ott(),this.Ust=NaN,this.zst=NaN,this.Hst=null,this.Jst=null,this.qst=!1,this.mR=s.Sst()>0,this.Yst=!1,this.Xst=!1,this.Kst=NaN,this.Zst=null,this.Qst=this.Vst.vst().tet(),this.eet=[],this.iet(),this.net=0,this.L6=0,this.ret=0}static RC(t,s){return Tg.zn(Tg.att,t,s)}Hn(){this.Qst=null;for(const t of this.eet)t.Hn();Tg.bh(this.eet),this.eet=null,this.s7=null,this.Hst=null,this.Jst=null,this.Vst=null,this.Zst=null}iet(){for(const t of this.Vst.oet().het())this.eet.push(Tg.aet.RC(this,t))}Ist(){for(const t of this.eet)t.Ist()}k8(){for(const t of this.eet)t.k8();this.Hst=null,this.Jst=null}let(){return this.s7}$B(){return this.s7.$B()}kst(){return this.Qst||(this.Qst=this.Vst.vst().tet()),this.Qst}Ost(){return this.eet}lq(t){for(let s=0;s<this.eet.length;s++){const e=this.eet[s];if(e.Fst()===t)return e}}uet(){this.Hst||this.iq()}cet(){return!!this.Hst&&!this.Hst.Jq()}Est(){if(!this.dtt())return!1;const t=this.fet(),s=this.$B().hB(t);return!!s&&!s.Jq()}Wj(){if(!this.dtt())return;const t=this.det();return-1!==t?this.$B().d0(t):void 0}pet(){return this.s7.n7().indexOf(this)}Gst(){this.Hst=null,this.Ust=NaN,this.Jst=null,this.zst=NaN,this.qst=!0}Rst(){return!!this.Hst}iq(){if(this.qst)return;if(this.Hst&&this.cet())return this.Hst;const t=this.fet();return this.Hst=this.$B().hB(t),this.Hst}Ast(t){if(this.qst=!1,this.Hst!==t){this.k8(),this.Hst=t,this.zst=t.Wj().tk(),this.Ust=t.tU(),this.Jst=t.cB();for(const s of this.met()){const e=s.yet,i=s.wet;switch(e.vet()){case"instance-variable":{i.bet();const e=t.Wj(),n=e.Met(s.name),r=e.xet(n),h=e.Tet(n);r===s.name&&h===s.type&&i.Cet(n);break}case"behavior":{const e=s.BH,n=this.Wj(),r=t.Wj(),h=i.WH(r);if(e&&h){const t=e.Pc();n.Iet(t),r.Iet(t),i.bet(),i._et(h.U0())}break}}}}}*met(){for(const t of this.eet){const s=t.ctt(),e=this.Wj(),i={yet:t,wet:s};switch(t.vet()){case"world-instance":i.Get=t.Fst();break;case"instance-variable":{const t=s.bet();i.name=e.xet(t),i.type=e.Tet(t);break}case"effect":{const t=e.nV(),n=s.Pet(t);i.Aet=n;break}case"behavior":{const t=s.WH(e);i.BH=t;break}case"plugin":i.bW=e.MW()}yield i}}cB(){if(this.Jst&&this.cet())return this.Jst;const t=this.iq();return t&&(this.Jst=t.cB()),this.Jst}wst(){return this.Vst}fet(){return isNaN(this.Ust)?this.Vst.fet():this.Ust}Ret(t){this.Vst.Ret(t)}ytt(){return this.Vst.ytt()}Stt(t){this.Vst.Stt(t)}g7(){return this.Vst.g7()}oq(){return this.Vst.oq()}Sst(){return this.Vst.Sst()}Eet(){return this.Vst.Eet()}Oet(t){this.Vst.Oet(t)}wtt(t){this.Vst.wtt(t)}eq(t){for(const s of this.kst())s.eq(t);for(const s of this.Ost())s.eq(t)}Fet(){return this.Vst.Fet()}Det(t){this.Vst.Det(t)}det(){return isNaN(this.zst)?this.Vst.det():this.zst}Let(t){this.Vst.Let(t)}ket(t){this.Vst.ket(t)}Net(){const t=this.iq();return t&&t.RH().Bet()?t.RH().Net():this.Vst.Net()}$et(t){this.Vst.$et(t)}Wet(){const t=this.iq();return t&&t.RH().Bet()?t.RH().Wet():this.Vst.Wet()}FI(){return this.Vst.FI()}Pc(){return this.Vst.Pc()}dtt(){return 0===this.FI()}Vet(){return 1===this.FI()}jet(){return 2===this.FI()}Uet(){return this.net}I8(){return this.L6}pst(){return this.ret}bR(){return this.mR}est(){for(const t of this.eet)t.est()}C8(){if(this.uet(),!this.cet()&&this.dtt())return;const t=this.let().Ttt(),s=t?0:this.Eet();for(const t of this.eet)t.C8(s),0===this.net&&1===t.Uet()&&(this.net=1),0===this.L6&&1===t.I8()&&(this.L6=1);this.ret=0,this.eet.some((t=>t.pst()))&&(this.ret=1),this.Zst=t?this.zet(s):this.Het(s),this.Yst=!1,this.Xst=!1,this.wc(s),this.Jet(this.Zst)}fst(){if(this.uet(),!this.cet()&&this.dtt())return;const t=this.s7.Ttt(),s=this.s7._F()-this.Sst();this.Zst=t?this.zet(s):this.Het(s);for(const t of this.eet)t.fst(s)}gst(){if(!this.let().F8()&&(this.uet(),(this.cet()||!this.dtt())&&!this.mR)){const t=this.s7._F();t>=this.Sst()+this.Eet()?this.wc(this.Eet(),!0,!1,!0,!1,!1,!0):t<=0&&this.wc(0,!0,!1,!0,!1,!1,!0)}}dst(){for(let t=0,s=this.eet.length;t<s;t++){const s=this.eet[t];s.dst(),0===this.net&&1===s.Uet()&&(this.net=1),0===this.L6&&1===s.I8()&&(this.L6=1)}}yst(){const t=this.eet.length;for(let s=0;s<t;s++)this.eet[s].yst()}wc(t,s=!1,e=!1,i=!1,n=!1,r=!1,h=!1){this.Hst||this.iq();const o=this.Hst&&!this.Hst.Jq(),a=0===this.Vst.Hc;if((o||!a)&&!(r&&a&&this.Wj().x0()||(t-=this.Sst())<0)){this.qet(t,s),this.Yet(t,s,n),!this.let().IsPlaying()&&this.let().xst()&&(t=this.let().xst()._F());for(let s=0,n=this.eet.length;s<n;s++)this.eet[s].wc(t,e,i,h);this.Xet(t,s),0!==this.net&&(this.Jst||(this.Jst=this.Hst.cB()),this.Jst&&this.Jst.ZU())}}bst(){const t=this.eet.length;for(let s=0;s<t;s++)this.eet[s].bst()}qet(t,s){if(s&&this.mR&&!this.Yst){if(this.let().Ttt()){if(t<0)return}else if(t>this.Eet())return;for(const t of this.eet)t.C8();this.Yst=!0}}Xet(t,s){if(s&&this.mR&&!this.Xst)if(this.let().Ttt()){if(t>=this.Eet()){for(const t of this.eet)t.wc(this.Eet(),!1,!0);this.Xst=!0}}else if(t<=0){for(const t of this.eet)t.wc(0,!1,!0);this.Xst=!0}}Yet(t,s,e){if(e)return;if(!s)return;if(!Tg.EB.Att)return;const i=this.let();if(i.Ttt()){const s=this.Zst.a7(),e=this.Zst._F(),n=s?s._F():i.NJ();(t<=e||t>=n)&&(this.Zst=this.jst.Ket(t,this.Vst),s&&this.Zet(this.Zst))}else{if(!this.jst.Qet(t,this.Vst))return;this.Zst||(this.Zst=this.jst.Qet(t,this.Vst));const s=this.Zst.tit(),e=this.Zst._F(),i=s?s._F():0;(t>=e||t<=i)&&(this.Zst=this.jst.Qet(t,this.Vst),this.Zst&&this.Zet(this.Zst))}}zet(t){return this.jst.sit(t,this.Vst)||this.jst.Ket(t,this.Vst)}Het(t){return this.jst.sit(t,this.Vst)||this.jst.Qet(t,this.Vst)}Zet(t,s=!1){if(!Tg.EB.Att)return;const e=this.let(),i=e.ltt();Tg.EB.Att.AB.Rtt(e),Tg.EB.Att.AB.eit(t),i.xU(Tg.EB.Att.AB.iit),i.xU(Tg.EB.Att.AB.Zet),e.IsPlaying()||s||e.Mst(t),Tg.EB.Att.AB.Ltt(e),Tg.EB.Att.AB.nit(t)}Jet(t){this.Zet(t,!0)}rit(){return this.Vst.vst().hit()}oit(){const t=this.Vst.oet().ait(),s=Tg.aet.RC(this,t);return this.eet.push(s),s}lit(t){this.Vst.vst().uit(t)}cit(t){for(const s of this.eet)s.cit(t)}fit(){for(const t of this.eet)t.fit()}dit(){if(this.uet(),this.cet()||!this.dtt())for(const t of this.eet)t.dit()}pit(){if(this.uet(),!this.cet()&&this.dtt())return;let t=!1;for(const s of this.eet){const e=s.pit();!t&&e&&(t=!0)}if(t){const t=this.rit();t.LJ(this.let()._F()),t.eq("noease"),t.Det(!0),t.Ctt("")}}E6(){isNaN(this.Kst)||this.mit(this.Kst),this.Kst=NaN}v3(){const t=this.iq(),s=t?t.tU():this.fet();return{propertyTracksJson:this.git(),lastKeyframeDataItemJson:this.yit(),initialStateOfNestedSet:this.Yst,endStateOfNestedSet:this.Xst,instanceUid:s,cleared:this.qst}}b3(t){if(t){this.Sit(t.propertyTracksJson),this.wit(t.lastKeyframeDataItemJson),this.Kst=t.instanceUid,this.Yst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Yst=t.initialStateOfNestedSet),this.Xst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Xst=t.endStateOfNestedSet),this.qst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.eet)0===this.net&&1===t.Uet()&&(this.net=1),0===this.L6&&1===t.I8()&&(this.L6=1);this.ret=0,this.eet.some((t=>t.pst()))&&(this.ret=1)}}yit(){return this.Vst.vst().vit(this.Zst)}git(){return this.eet.map((t=>t.v3()))}Sit(t){t.forEach(((t,s)=>{this.eet[s].b3(t)}))}mit(t){if(!Tg.Ke(t))return;const s=this.$B().hB(t);s&&this.let().Pst(this.Vst.oq(),s,this.pet())}wit(t){const s=this.Vst.vst();this.Zst=s.bit(t)}}}{const Gg=self._s;Gg.aet=class extends Gg.jn{constructor(t,s){super(),this.Mit=t,this.xit=s,this.Tit=s.oet(),this.net=0,this.L6=0,this.ret=0,this.Cit=this.ctt(),this.Iit=this.xit.Git()._it(),this.Pit=null,this.Ait=null}static RC(t,s){return Gg.zn(Gg.aet,t,s)}Hn(){this.Mit=null,this.Cit&&(this.Cit.Hn(),this.Cit=null),this.Iit=null,this.xit=null,this.Tit=null}Uet(){return this.net}I8(){return this.L6}pst(){return this.ret}Rit(){return!!this.Ait}Eit(t){this.Ait=t}Oit(){return this.Ait}Fit(){return this.Mit}Dit(){return this.xit}oet(){return this.Tit}let(){return this.Mit.let()}$B(){return this.Mit.$B()}iq(){return this.Mit.iq()}ctt(){if(this.Cit)return this.Cit;let t;switch(this.xit.vet()){case"behavior":t=new Gg.aet.Lit(this);break;case"effect":t=new Gg.aet.kit(this),this.L6=1;break;case"instance-variable":t=new Gg.aet.Nit(this);break;case"plugin":t=new Gg.aet.Bit(this),this.L6=1;break;case"world-instance":t=new Gg.aet.$it(this),this.L6=1,this.net=1;break;case"value":t=new Gg.aet.Wit(this);break;case"audio":t=new Gg.aet.Vit(this)}return this.Cit=t,this.Cit}vet(){return this.xit.vet()}jit(t){this.xit.jit(t)}Uit(){return this.xit.zit()}Hit(t){this.xit.Jit(t)}aq(){return this.ctt().qit()}Fst(){return this.xit.Yit()}Xit(t){this.xit.Kit(t)}Zit(){return this.xit.FI()}Qit(t){this.xit.tnt(t)}snt(){return this.oet().ent(this.xit).FI()}int(){return this.xit.int()}nnt(t){this.xit.nnt(t)}rnt(){return this.xit.rnt()}hnt(t){this.xit.hnt(t)}Fet(){return this.xit.Fet()}Det(t){this.xit.Det(t)}ytt(){return this.xit.ytt()}Stt(t){this.xit.Stt(t)}g7(){return this.xit.g7()}wtt(t){this.xit.wtt(t)}eq(t){for(const s of this.ont())s.eq(t)}ant(){return this.xit.ant()}ont(){return this.Iit||(this.Iit=this.xit.Git()._it()),this.Iit}o7(){return this.xit.Git().o7()}lnt(t){return this.Tit.lnt(t,this.xit)}unt(t){return this.Tit.unt(t,this.xit)}cnt(t){let s,e=this.Tit.lnt(t,this.xit);return e?s=this.Tit.fnt(t,this.xit):(e=this.Tit.unt(t,this.xit),s=this.Tit.dnt(t,this.xit)),{start:e,end:s}}*pnt(){for(const t of this.ont())yield t.T7()}*mnt(){for(const t of this.ont())yield t._F()}Ist(){this.ctt().Ist()}k8(){this.ctt().k8()}gnt(){return this.ctt().gnt()}est(){this.ctt().est()}C8(t){this.ctt().C8(),this.Pit=this.ynt(t),this.dst()}fst(t){this.ctt().fst(),this.Pit=this.ynt(t)}dst(){const t=this.Fit();if(this.ret=0,t.dtt()){const s=this.let(),e=t.iq(),i=this.ctt(),n=this.Fst();if(i.Snt()){const t=s.utt(e,i,n,this);t&&t.length&&(this.ret=1)}else this.ret=0}}ynt(t){const s=this.let();return this.Tit.lnt(t,this.xit)||(s.Ttt()?this.Tit.unt(t,this.xit):this.Tit.dnt(t,this.xit))}yst(){this.Cit.yst()}wc(t,s=!1,e=!1,i=!1){let n,r,h=!1;if(s)n=this.Tit.unt(t,this.xit);else{if(this.Pit){const s=this.let(),e=this.Pit.a7(),i=this.Pit._F(),n=e?e._F():s.NJ();(t<=i||t>=n)&&(this.Pit=this.Tit.unt(t,this.xit),h=!0)}else this.Pit=this.Tit.unt(t,this.xit),h=!0;n=this.Pit}n&&(r=n.a7()),this.Cit.wc(t,n,r,s,e,i,h)}wnt(t){if(this.Pit){const s=this.let(),e=this.Pit.a7(),i=this.Pit._F(),n=e?e._F():s.NJ();(t<=i||t>=n)&&(this.Pit=this.Tit.unt(t,this.xit))}else this.Pit=this.Tit.unt(t,this.xit);const s=this.Pit,e=s.a7();return this.Cit.wnt(t,s,e)}vnt(t,s,e){return this.Cit.wnt(t,s,e)}bst(){this.Cit.bst()}static bnt(t,s){const e=s.Dit();return s.Tit.unt(t,e)}static Mnt(t,s){const e=s.Dit();return s.Tit.dnt(t,e)}xnt(){const t=this.xit.Git().Tnt();return this.Pit=null,t}cit(t){this.Pit=null,this.xit.Git().Cnt(t)}fit(){this.ctt().fit()}dit(){if(this.ctt().dit()){const t=this.Tit.ent(this.xit),s=this.ctt().gnt();t.Int(s)}}pit(){const t=this.ctt().pit();return t&&this._nt(),this.ctt().Gnt(),t}_nt(){const t=this.let()._F(),s=this.ctt(),e=Gg.aet.bnt(t,this),i=this.xnt();i.tnt(e.FI()),i.LJ(t),i.eq(e.Pnt()),i.Det(!0),i.Ant(s.Rnt()),i.Int(s.gnt())}v3(){return{sourceAdapterJson:this.ctt().v3()}}b3(t){t&&this.ctt().b3(t.sourceAdapterJson)}}}{const Pg=self._s,Ag=Pg.aet;Ag.$it=class{constructor(t){this.Ent=t,this.Ont=null,this.Fnt()}Hn(){this.Ont&&(this.Ont.Hn(),this.Ont=null),this.Ent=null}Snt(){return this.Ont.Snt()}lq(){return this.Ent}Ist(){this.Ont&&this.Ont.Ist()}k8(){this.Ont&&this.Ont.k8()}Fnt(){return this.Ont||(this.Ont=this.Dnt()),this.Ont}bet(){}tk(){return this.bet()}Lnt(){}est(){this.Fnt().est()}C8(){this.Fnt().C8()}fst(){this.Fnt().fst()}yst(){this.Ont.knt()}wc(t,s,e,i,n,r,h){let o;switch(this.Ent.snt()){case"numeric":o=Ag.Nnt.wc(t,s,e,this.Ent);break;case"angle":o=Ag.Bnt.wc(t,s,e,this.Ent);break;case"boolean":o=Ag.$nt.wc(t,s,e,this.Ent);break;case"color":o=Ag.Wnt.wc(t,s,e,this.Ent);break;case"text":o=Ag.Vnt.wc(t,s,e,this.Ent)}this.Ont.jnt(t,o,s,e,i,n,r,h)}wnt(t,s,e){switch(this.Ent.snt()){case"numeric":return Ag.Nnt.wc(t,s,e,this.Ent);case"angle":return Ag.Bnt.wc(t,s,e,this.Ent);case"boolean":return Ag.$nt.wc(t,s,e,this.Ent);case"color":return Ag.Wnt.wc(t,s,e,this.Ent);case"text":return Ag.Vnt.wc(t,s,e,this.Ent)}}bst(){this.Ont.Unt()}fit(){this.Fnt().znt()}Gnt(){this.Fnt().Gnt()}gnt(){return this.Fnt().gnt()}dit(){return this.Fnt().dit()}pit(){return this.Fnt().pit()}Rnt(){const t=this.Ent,s=t.Fit().let()._F(),e=Ag.bnt(s,t),i=e.a7();switch(t.snt()){case"numeric":return Ag.Nnt.wc(s,e,i,t);case"angle":return Ag.Bnt.wc(s,e,i,t);case"boolean":return Ag.$nt.wc(s,e,i,t);case"color":return Ag.Wnt.wc(s,e,i,t);case"text":return Ag.Vnt.wc(s,e,i,t)}}Dnt(){const t=this.Ent;switch(t.ant()?t.snt():""){case"combo":case"boolean":case"text":case"string":return new Ag.Jnt.Hnt(this);case"numeric":case"number":case"angle":return"combo"===this.Ent.Zit()?new Ag.Jnt.Hnt(this):new Ag.Jnt.qnt(this);case"color":case"offsetColor":return new Ag.Jnt.Ynt(this);default:return new Ag.Jnt.qnt(this)}}v3(){return{propertyAdapterJson:this.Fnt().v3()}}b3(t){t&&this.Fnt().b3(t.propertyAdapterJson)}}}{const Rg=self._s,Eg=0;class Og extends Rg.aet.$it{constructor(t){super(t),this.Xnt=NaN}bet(){return this.Ent.Dit().zit()[0]}tk(){return this.Xnt?this.Xnt:super.tk()}Lnt(){return this.Ent.Fit().iq()}Cet(t){this.Ent.Dit().zit()[0]!==t&&(this.Xnt=t)}wc(t,s,e,i,n,r,h){this.Fnt().Knt(s.qit())&&super.wc(t,s,e,i,n,r,h)}wnt(t,s,e){if(this.Fnt().Knt(s.qit()))return super.wnt(t,s,e)}v3(){return Object.assign(super.v3(),{index:this.Xnt})}b3(t){t&&(super.b3(t),this.Xnt=t.index)}}Rg.aet.Nit=Og}{const Fg=self._s,Dg=0,Lg=1,kg=2;class Ng extends Fg.aet.$it{constructor(t){super(t),this.dQ=NaN}bet(){return this.Ent.Dit().zit()[1]}Lnt(){const t=this.Ent.Dit(),s=this.Ent.Fit(),e=this.dQ?this.dQ:t.zit()[0],i=s.iq(),n=i.Znt(e);return i.Qnt()[n].RH()}WH(t){const s=this.Ent.Dit().zit()[2];return t.trt(s)}_et(t){this.Ent.Dit().zit()[0]!==t&&(this.dQ=t)}wc(t,s,e,i,n,r,h){const o=this.Ent.Fit().iq();this.WH(o.Wj())&&super.wc(t,s,e,i,n,r,h)}wnt(t,s,e){const i=this.Ent.Fit().iq();if(this.WH(i.Wj()))return super.wnt(t,s,e)}v3(){return Object.assign(super.v3(),{sid:this.dQ})}b3(t){t&&(super.b3(t),this.dQ=t.sid)}}Fg.aet.Lit=Ng}{const Bg=self._s,$g=0,Wg=1;class Vg extends Bg.aet.$it{constructor(t){super(t)}bet(){return this.Ent.Dit().zit()[1]}Lnt(){const t=this.Ent.Fit().cB().XU(),s=t.nV(),e=this.Pet(s).tk();return t.JH(e)?t.srt(e):null}Pet(t){const s=this.Ent.Dit().zit()[0];return t.ert(s)}wc(t,s,e,i,n,r,h){this.irt()&&super.wc(t,s,e,i,n,r,h)}wnt(t,s,e){if(this.irt())return super.wnt(t,s,e)}irt(){const t=this.Ent.Fit().cB().XU(),s=t.nV(),e=this.Pet(s);if(!e)return;const i=e.tk();return t.JH(i)}}Bg.aet.kit=Vg}{const jg=self._s,Ug=0;class zg extends jg.aet.$it{constructor(t){super(t)}bet(){return this.Ent.Dit().zit()[0]}Lnt(){return this.Ent.Fit().iq().RH()}wc(t,s,e,i,n,r,h){const o=this.Ent.Fit();o.Wj().MW()===o.iq().Wj().MW()&&super.wc(t,s,e,i,n,r,h)}wnt(t,s,e){const i=this.Ent.Fit();if(i.Wj().MW()===i.iq().Wj().MW())return super.wnt(t,s,e)}nrt(){const t=this.Ent.Fit(),s=t.Wj().MW();if(jg.EB.rrt&&s instanceof jg.EB.rrt&&("initial-frame"===this.Ent.Fst()||"initial-animation"===this.Ent.Fst()))switch(this.Ent.g7()){case"relative":return{hrt:(s,e,i,n,r)=>{if(e!==n){const i=n/e,r=t.lq("offsetWidth"),h=t.lq("offsetScaleX");if(r||h){const o=r?.ctt()?.Fnt(),a=h?.ctt()?.Fnt();if(s.qz()&&s.sH())a&&a.ort(n),s.Yg(this.art(n,e,s,t,o,a));else{const e=n*((s.urt()?.lrt()??this.crt(s,t))/this.crt(s,t));a&&a.ort(n);const r=o?.frt()??0,h=a?.frt()??0;s.Yg(e+(r+h*i))}}else s.Yg(s.Vg()*i)}if(i!==r){const e=r/i,n=t.lq("offsetHeight"),h=t.lq("offsetScaleY");if(n||h){const o=n?.ctt()?.Fnt(),a=h?.ctt()?.Fnt();if(s.qz()&&s.iH())a&&a.ort(r),s.jg(this.drt(r,i,s,t,o,a));else{const i=r*((s.urt()?.prt()??this.mrt(s,t))/this.mrt(s,t));a&&a.ort(r);const n=o?.frt()??0,h=a?.frt()??0;s.jg(i+(n+h*e))}}else s.jg(s.Zg()*e)}}};case"absolute":return null}}grt(t,s,e,i=0){const n=s.let().Dst(t.iq());if(!n)return i;const r=n.lq(e);if(!r)return i;const h=r.Dit().Git();if(!h)return i;const o=h.yrt();return o?o.qit():i}crt(t,s){const e=s.let().Dst(t.iq());if(e)return e.Net();const i=t.iq().RH();return i.Bet()?i.Net():t.urt().lrt()}mrt(t,s){const e=s.let().Dst(t.iq());if(e)return e.Wet();const i=t.iq().RH();return i.Bet()?i.Wet():t.urt().prt()}art(t,s,e,i,n,r){const h=e.urt().lrt(),o=h/e.Fz().urt().lrt();let a=1;const l=r?.Srt()??0;if(0!==l){const t=h/this.crt(e,i);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.wrt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return e.Fz().Vg()*o*a*f}drt(t,s,e,i,n,r){const h=e.urt().prt(),o=h/e.Fz().urt().prt();let a=1;const l=r?.vrt()??0;if(0!==l){const t=h/this.mrt(e,i);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.brt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return e.Fz().Zg()*o*a*f}}jg.aet.Bit=zg}{const Hg=self._s;class Jg extends Hg.aet.$it{constructor(t){super(t),this.Mrt=0,this.xrt=!1}Snt(){return!1}C8(){const t=this.Ent.oet();let s=this.Ent.Dit();s=t.ent(s),this.Mrt=s.T7()}fst(){}qit(){return this.xrt||this.Ent.wc(0),this.Mrt}wc(t,s,e,i,n,r,h){this.Mrt=Hg.aet.Nnt.wc(t,s,e,this.Ent),this.xrt=!0}fit(){}Gnt(){}gnt(){return this.Mrt}dit(){return!1}pit(){return!1}v3(){return{value:this.Mrt,init:this.xrt}}b3(t){t&&(this.Mrt=t.value,this.xrt=!t.hasOwnProperty("init")||t.init)}}Hg.aet.Wit=Jg}{const qg=self._s,Yg=0,Xg=0,Kg=1,Zg=1,Qg=2,ty=3;class sy extends qg.aet.$it{constructor(t){super(t),this.Trt=!1,this.Crt=null,this.Irt=null,this._rt=null,this.s7=this.Ent.let(),this.Mit=this.Ent.Fit(),this.Grt=this.Ent.Uit(),this.Prt=this.Grt[0],this.Art=this.Grt[1],this.Grt[3]?this.Rrt=this.Grt[3]:this.Rrt=Math.random().toString(36).slice(2),this.Ert=NaN,this.Ort=NaN,this.Frt=NaN,this.Drt=null,this.Lrt()}Hn(){super.Hn(),this.Crt=null,this.Irt=null,this._rt=null,this.s7=null,this.Mit=null,this.Grt=null,this.Prt=null,this.Drt=null}Lrt(){if(!self._s.EB.Audio)return;const t=this.Ent.$B().krt(self._s.EB.Audio);t&&(this.Crt=t.wW().RH()),this.Irt=self._s.EB.Audio.Nrt,this._rt=self._s.EB.Audio.Brt}$rt(){if(this.Drt)return;const t=this.Ent.Fit().lq("audioSource");t&&(this.Drt=t.ctt())}Wrt(){const t=this.Ent.Fit().lq("volume");return t?t.ctt().Ort:this.Ort}Ist(){super.Ist(),this.Trt=!1,this.Crt&&(this._rt&&(this.Ert=this._rt.Vrt.call(this.Crt,this.Rrt),this.Ort=this._rt.jrt.call(this.Crt,this.Rrt)),this.Irt&&this.Irt.OJ.call(this.Crt,this.Rrt))}Urt(){return this.Rrt}zrt(){return this.Frt}Hrt(t){this.Frt=t}C8(){super.C8(),this.Ert=NaN,this.Trt=!1}fst(){super.fst();const t=this.Ent.let()._F();switch(this.Ert=t-this.Art,this.Ent.Fst()){case"audioSource":break;case"volume":this.Ort=this.Ent.wnt(t)}this.Trt=!1}wc(t,s,e,i,n,r,h){if(this.Crt)switch(this.Ent.Fst()){case"audioSource":{if(!this.s7.Ttt())return;if(i)return void(this.Irt&&this.Irt.OJ.call(this.Crt,this.Rrt));if(t<this.Art)return void(this.Trt=!1);const s=this._rt.Jrt.call(this.Crt,this.Rrt),e=this.s7.UJ();if(e!==s&&this.Irt.jJ.call(this.Crt,this.Rrt,e),this.Trt)return;if(!this.Ent.let().IsPlaying())return;if(this.Trt=!0,isNaN(this.Ert)){const s=self.performance.now(),e=t-this.Art;if("suspended"===this.Crt.qrt())return void(this.Trt=!1);const i=e+(self.performance.now()-s)/1e3;if(this.Irt){let t=this.zrt();isNaN(t)?(this.Hrt(0),t=0):this.Hrt(t),this.Irt.Yrt.call(this.Crt,this.Prt,t,this.Rrt,i)}}else{const t=this.Ert;this.Ert=NaN;const s=this.Wrt();if(this.Ort=NaN,"suspended"===this.Crt.qrt())return void(this.Trt=!1);this.Irt&&(this.Hrt(s),this.Irt.Yrt.call(this.Crt,this.Prt,s,this.Rrt,t))}break}case"volume":this.$rt(),super.wc(t,s,e,i,n,r,h)}}wnt(t,s,e){if(this.Crt)switch(this.Ent.Fst()){case"audioSource":return;case"volume":return this.$rt(),super.wnt(t,s,e)}}Xrt(t,s){return this.Drt?this.Drt.zrt():0}Krt(t,s,e,i){this.Drt&&this.Drt.Hrt(this.Xrt()+s),this.Irt&&this.Drt&&this.Irt.Hrt.call(this.Crt,this.Drt.Urt(),this.Drt.zrt())}Zrt(t,s,e){this.Drt&&this.Drt.Hrt(s),this.Irt&&this.Drt&&this.Irt.Hrt.call(this.Crt,this.Drt.Urt(),this.Drt.zrt())}Qrt(){return!0}v3(){return{audioPlaybackStarted:this.Trt,audioTag:this.Rrt,pauseTime:this.Ert,pauseVolume:this.Ort,volume:this.Frt}}b3(t){t&&(this.Trt=t.audioPlaybackStarted,this.Rrt=t.audioTag,this.Ert=t.pauseTime,this.Ort=t.pauseVolume,this.Frt=t.volume,this.Lrt())}}qg.aet.Vit=sy}{const ey=self._s;ey.aet.Jnt=class{constructor(t){this.Cit=t,this.Ent=t.lq(),this.Jst=this.Ent.Fit().cB(),this.tht=this.Ent.Fst(),this.sht=!1,this.eht=null,this.iht=null}Hn(){this.Cit=null,this.Ent=null,this.Jst=null,this.eht=null,this.iht=null}Snt(){return!1}Ist(){}k8(){this.Jst=null,this.eht=null,this.iht=null}ctt(){return this.Cit}lq(){return this.Ent}cB(){return this.Jst||(this.Jst=this.Ent.Fit().cB()),this.Jst}nht(t){this.sht=!!t}rht(){return this.sht}est(){}C8(){}fst(){}znt(){this.eht=this.gnt()}Gnt(){this.eht=null}gnt(){}dit(){}pit(){}Knt(t){return typeof this.hht()==typeof t}knt(){}jnt(t,s,e,i,n,r,h,o){}Unt(){}oht(){return this.lht((()=>{const t=this.Ent.Dit();return this.Ent.oet().ent(t)}),(()=>{const t=this.Ent.Dit();return this.Ent.oet().yrt(t)})).aht()}uht(){const t=this.Ent.let()._F()-this.Ent.Fit().Sst();return this.lht((()=>{const s=this.Ent.Dit();return this.Ent.oet().unt(t,s)}),(()=>{const s=this.Ent.Dit(),e=this.Ent.oet();return e.dnt(t,s)||e.yrt(s)})).aht()}lht(t,s){return this.Ent.let().Ttt()?t():s()}cht(t,s){return"relative"===this.Ent.g7()?t():s()}fht(t,s){return this.rht()?(this.nht(!1),t()):s()}dht(t){}pht(){return this.Cit.tk()}mht(){return this.iht||(this.iht=this.Cit.Lnt()),this.iht}ght(t,s,e,i,n,r){switch(this.Ent.vet()){case"behavior":return t();case"effect":return s();case"instance-variable":return e();case"plugin":return i();case"world-instance":return n();case"audio":return r()}}v3(){return{firstAbsoluteUpdate:this.sht,saveState:this.eht}}b3(t){t&&(this.sht=t.firstAbsoluteUpdate,this.eht=t.saveState)}yht(t,s=!1){const e=[];for(const i of t){const t=i.Fit().Sst();for(const n of i.ont())s&&0===n._F()?e.push({time:t+n._F(),value:n.aht()}):s||e.push({time:t+n._F(),value:n.aht()})}return e.sort(((t,s)=>t.time-s.time))}Sht(t,s,e){return this.wht(s,e)}wht(t,s){for(let e=s.length-1;e>=0;e--)if(s[e].time<=t)return s[e];return null}}}{const iy=self._s,ny=new Map,ry=[0,0,0];class hy extends iy.aet.Jnt{constructor(t){super(t)}est(){}C8(){}fst(){}gnt(){const t=this.Ent.vet(),s=this.mht(),e=this.pht();switch(t){case"behavior":case"plugin":return this.vht(s.bht(e));case"effect":return this.vht(s[e]);case"world-instance":return this.vht(this.hht())}}dit(){const t=this.oht();return!this.Mht(t,this.hht())}pit(){return!iy.ti(this.eht)&&!this.Mht(this.eht,this.hht())}Mht(t,s){return t=this.xht(t),s=this.xht(s),t.zo(s)}oht(){const t=super.oht();return this.xht(t)}uht(){const t=super.uht();return this.xht(t)}dht(t){}vht(t){return iy.Li(t,iy.To)?t.toArray().slice(0,3):t.slice(0,3)}xht(t){return iy.Li(t,iy.To)?t:new iy.To(t[0],t[1],t[2],1)}Knt(t){return!0}Snt(){return!0}knt(){const t=this.Ent.let(),s=this.Ent.iq(),e=this.Ent.ctt(),i=t.utt(s,e,this.tht,this.Ent);if(i&&i.length>1){ny.has(s)||ny.set(s,new Map);const t=ny.get(s),e=this.Ent.vet();t.has(e)||t.set(e,new Map);const i=t.get(e);i.has(this.tht)||i.set(this.tht,{Tht:!1,color:new iy.To(0,0,0,1)})}}Cht(t,s,e){const i=ny.get(t).get(s).get(e);return i.Tht=!0,i.color}jnt(t,s,e,i,n,r,h,o){const a=this.Ent.let(),l=this.Ent.Fit(),u=this.Ent.iq(),c=this.Ent.ctt(),f=this.Ent.vet(),d=this.tht,p=a.utt(u,c,d,this.Ent);if(p&&p.length>1){const t=this.yht(p,!0),e=this.Sht(a,a._F(),t);if(e){const t=l.Sst(),i=e.time-t;if(0===i)this.Cht(u,f,this.tht).Ro(s[0],s[1],s[2]);else{if(i<0)return;const t=s[0],e=s[1],n=s[2],r=this.Ent.wc(i,!1,!0),h=iy.To.Ma(t,r[0]),o=iy.To.Ma(e,r[1]),a=iy.To.Ma(n,r[2]);this.Cht(u,f,this.tht).Ro(h,o,a)}}}else this.Iht(s[0],s[1],s[2])}Unt(){const t=this.Ent.iq();if(!ny.has(t))return;const s=ny.get(t),e=this.Ent.vet();if(!s.has(e))return;const i=s.get(e);if(!i.has(this.tht))return;const n=i.get(this.tht),r=n.Tht,h=n.color;r&&this.Iht(h.No(),h.Bo(),h.$o()),0===i.size&&s.delete(e),0===s.size&&ny.delete(t)}hht(){const t=this.Ent.vet(),s=this.mht(),e=this.pht();switch(t){case"behavior":case"plugin":return this.xht(s.bht(e));case"effect":return s[e].clone();case"world-instance":return this.cB().vz().clone()}}Iht(t,s,e){const i=this.Ent.vet(),n=this.mht(),r=this.pht();switch(i){case"behavior":case"plugin":ry[0]=t,ry[1]=s,ry[2]=e,n._ht(r,ry);break;case"effect":n[r].Ao(t,s,e);break;case"world-instance":this.cB().Ght(t,s,e)}}v3(){}b3(t){}}iy.aet.Jnt.Ynt=hy}{const oy=self._s,ay=oy.aet;class ly extends oy.aet.Jnt{constructor(t){super(t)}est(){}C8(){}fst(){}gnt(){return this.hht()}dit(){return this.oht()!==this.gnt()}pit(){return!oy.ti(this.eht)&&this.eht!==this.gnt()}Snt(){return!1}jnt(t,s,e,i,n,r,h,o){const a=this.Ent,l=a.Fit(),u=a.vet(),c=a.let(),f=l.iq(),d=a.ctt(),p=this.tht,m=c.utt(f,d,p,a);if(m&&m.length>1){const e=this.yht(m),i=t+l.Sst(),n=this.Sht(c,i,e);n&&(s=n.value)}switch(a.snt()){case"numeric":if(!ay.Nnt.Pht(this.pht(),this.mht(),s,u))return;break;case"angle":if(!ay.Bnt.Pht(this.pht(),this.mht(),s,u))return;break;case"boolean":if(!ay.$nt.Pht(this.pht(),this.mht(),s,u))return;break;case"color":if(!ay.Wnt.Pht(this.pht(),this.mht(),s,u))return;break;case"text":if(!ay.Vnt.Pht(this.pht(),this.mht(),s,u))return}this.Iht(s)}hht(){const t=this.Ent.vet(),s=this.mht(),e=this.pht();switch(t){case"behavior":case"plugin":return s.bht(e);case"effect":return s[e];case"instance-variable":return s.Aht(e)}}Iht(t){const s=this.Ent.vet(),e=this.mht(),i=this.pht();switch(s){case"behavior":case"plugin":e._ht(i,t);break;case"effect":e[i]=t;break;case"instance-variable":e.Rht(i,t)}}}oy.aet.Jnt.Hnt=ly}{const uy=self._s,cy=uy.aet.Jnt,fy=new Map,dy=(t,s,e,i,n,r=!1,h=null,o=null)=>{fy.set(t,{Eht:s,Oht:e,Fht:i,round:n,Dht:r,init:h,reset:o})},py=(t,s)=>{const e=s.let().Dst(t.iq());if(e)return e.Net();const i=t.iq().RH();return i.Bet()?i.Net():t.urt().lrt()},my=(t,s,e,i=0)=>{const n=s.let().Dst(t.iq());if(!n)return i;const r=n.lq(e);if(!r)return i;const h=r.Dit().Git();if(!h)return i;const o=h.yrt();return o?o.qit():i},gy=t=>{const s=[];let e=t.Fz();for(;e;)s.push(e),e=e.Fz();return s.reverse(),s};dy("offsetX",((t,s,e,i)=>{"relative"===i.Ent.g7()?t.Lht(s,e.let().btt()):t.Lht(s)}),((t,s)=>t.HM(s)),(t=>t.zM()),!0),dy("offsetY",((t,s,e,i)=>{"relative"===i.Ent.g7()?t.kht(s,e.let().btt()):t.kht(s)}),((t,s)=>t.YM(s)),(t=>t.qM()),!0),dy("offsetWidth",((t,s,e,i,n=!1,r=!0)=>{if(0===s)return;const h="relative"===i.Ent.g7(),o=1===i.Nht.FI();if((h||o)&&t.qz()&&t.sH()){if(isNaN(i.Bht)){const s=gy(t);let e;e=o?s[s.length-1].Vg():s[s.length-1].urt().lrt(),i.Bht=0===e?Number.EPSILON:e}if(n)return;i.$ht+=s;const e=s/i.Bht;t.Cy(e,r),i.Wht+=e}else t.Cy(s),i.Wht+=s}),((t,s)=>t.Yg(s)),(t=>t.Vg()),!0,!1,null,(t=>{t.Wht=0,t.$ht=0})),dy("offsetHeight",((t,s,e,i,n=!1,r=!0)=>{if(0===s)return;const h="relative"===i.Ent.g7(),o=1===i.Nht.FI();if((h||o)&&t.qz()&&t.iH()){if(isNaN(i.Bht)){const s=gy(t);let e;e=o?s[s.length-1].Zg():s[s.length-1].urt().prt(),i.Bht=0===e?Number.EPSILON:e}if(n)return;i.Vht+=s;const e=s/i.Bht;t.jht(e,r),i.Wht+=e}else t.jht(s),i.Wht+=s}),((t,s)=>t.jg(s)),(t=>t.Zg()),!0,!1,null,(t=>{t.Wht=0,t.Vht=0})),dy("offsetAngle",((t,s,e,i,n)=>{t.Uht(s)}),((t,s)=>t.uV(s)),(t=>t.cV()),!1,!0),dy("offsetOpacity",((t,s,e,i,n)=>{s/=i.zht?i.zht:1;const r=t.tO()+s;if(0===i.Hht)r>1?i.Hht+=r-1:r<0&&(i.Hht+=r),t.Jht(s);else{const e=t.tO()+s;s>0&&i.Hht>0?e>1&&(i.Hht+=e-1):s>0&&i.Hht<0?(i.Hht+=s,i.Hht>0&&(t.Jht(i.Hht),i.Hht=0)):s<0&&i.Hht>0?(i.Hht+=s,i.Hht<0&&(t.Jht(i.Hht),i.Hht=0)):s<0&&i.Hht<0&&e<0&&(i.Hht+=e)}}),((t,s)=>{t.eO(s)}),(t=>t.tO()),!1,!0,((t,s,e)=>{switch(t.Hht=0,t.Ent.g7()){case"relative":{t.Ent.oet();const s=t.Ent.Dit().Git()._it();let e=t.cB().tO(),i=e;for(const n of s){const s=n._F();i=e+t.Ent.wnt(s),i=uy.Kn(i,0,1)}t.qht=e-i,t.qht=Math.round(100*(t.qht+Number.EPSILON))/100,i=e;for(let e=s.length-1;e>=0;e--){const n=s[e]._F();i-=t.Ent.wnt(n),i=uy.Kn(i,0,1)}t.Yht=i,t.Yht=Math.round(100*(t.Yht+Number.EPSILON))/100;break}}const i="relative"===t.Ent.g7(),n=1===t.Nht.FI();if((i||n)&&s.qz()&&s.lH()){const i=gy(s);let n=i[0].urt().Xht();n+=my(i[0],e,"offsetOpacity");for(let t=1;t<i.length;t++)n+=my(i[t],e,"offsetOpacity");t.zht=0===n?1:n}}),(t=>{switch(t.Ent.g7()){case"relative":{t.Hht=0;const s=t.cB();let e=s.tO();e=Math.round(100*(e+Number.EPSILON))/100,t.Ent.let().Ttt()?(s.eO(e+t.qht),t.x_=0):(s.eO(e-t.Yht),t.x_=t.ctt().Rnt());break}}})),dy("offsetOriginX",((t,s)=>t.Kht(s)),((t,s)=>t.nz(s)),(t=>t.iz()),!1),dy("offsetOriginY",((t,s)=>t.Zht(s)),((t,s)=>t.oz(s)),(t=>t.hz()),!1),dy("offsetZElevation",((t,s)=>t.Qht(s)),((t,s)=>t.KM(s)),(t=>t.XM()),!0),dy("offsetScaleX",((t,s,e,i)=>{if(0===s)return;const n=t.Vg()<0?-1:1;if(i.tot+=s,"relative"===i.Ent.g7()&&t.qz()&&t.sH()){const r=my(t,e,"offsetWidth"),h=isNaN(i.sot)?e.Net():i.sot,o=(h+r/(t.urt().lrt()/h))*n*s;isNaN(i.Bht)&&fy.get("offsetWidth").Eht(t,1,e,i,!0);const a=o/i.Bht;t.Cy(a,!0),i.Wht+=a}else{const r=(isNaN(i.sot)?e.Net():i.sot)*n*s;t.Cy(r),i.Wht+=r}}),((t,s,e)=>{t.Yg(e.Net()*s)}),((t,s)=>{const e=t.Vg()<0?-1:1;if(t.sH()){const i=t.Fz(),n=s.let().Dst(i.iq());let r=NaN;if(n)r=i.Vg()/n.Net();else{const t=i.iq().RH();r=t.Bet()?i.Vg()/t.Net():1}return t.Vg()*e/(s.Net()*r)}return t.Vg()*e/s.Net()}),!1,!1,null,(t=>{t.Wht=0,t.sot=NaN,t.tot=0})),dy("offsetScaleY",((t,s,e,i)=>{if(0===s)return;const n=t.Zg()<0?-1:1;if(i.eot+=s,"relative"===i.Ent.g7()&&t.qz()&&t.iH()){const r=my(t,e,"offsetHeight"),h=isNaN(i.sot)?e.Wet():i.sot,o=(h+r/(t.urt().prt()/h))*n*s;isNaN(i.Bht)&&fy.get("offsetHeight").Eht(t,1,e,i,!0);const a=o/i.Bht;t.jht(a,!0),i.Wht+=a}else{const r=(isNaN(i.sot)?e.Wet():i.sot)*n*s;t.jht(r),i.Wht+=r}}),((t,s,e)=>{t.jg(e.Wet()*s)}),((t,s)=>{const e=t.Zg()<0?-1:1;if(t.iH()){const i=t.Fz(),n=s.let().Dst(i.iq());let r=NaN;if(n)r=i.Zg()/n.Wet();else{const t=i.iq().RH();r=t.Bet()?i.Zg()/t.Wet():1}return t.Zg()*e/(s.Wet()*r)}return t.Zg()*e/s.Wet()}),!1,!1,null,(t=>{t.Wht=0,t.sot=NaN,t.eot=0}));class yy extends uy.aet.Jnt{constructor(t){super(t),this.x_=0,this.Hht=0,this.qht=0,this.Yht=0,this.zht=NaN,this.Bht=NaN,this.Wht=0,this.sot=NaN,this.$ht=0,this.tot=0,this.Vht=0,this.eot=0,this.iot=void 0,this.not=void 0,this.rot=null,this.hot=null,this.oot=null,this.aot=null,this.lot=null,this.uot=null,this.cot=null,this.fot=null,this.dot=!1,this.pot=!1,uy.Li(this.Ent.let(),uy.mot)?this.Nht=new uy.aet.Jnt.got(this):this.Nht=new uy.aet.Jnt.yot(this);const s=this.Ent.Fst();switch(this.Ent.vet()){case"world-instance":{const t=fy.get(s);this.rot=t.Fht,this.hot=t.Eht,this.oot=t.Oht,this.dot=t.round,this.pot=t.Dht,this.lot=t.init,this.aot=t.reset;break}case"audio":this.uot=t.Xrt,this.cot=t.Krt,this.fot=t.Zrt,this.dot=!!t.Qrt(),this.pot=!1}}Hn(){this.Nht=null,this.rot=null,this.hot=null,this.oot=null,this.aot=null,this.lot=null,this.uot=null,this.cot=null,this.fot=null,super.Hn()}Snt(){return this.Nht.Snt()}Sot(){return this.x_}wot(t){this.x_=t}est(){this.aot&&this.aot(this)}C8(){const t=this.Nht.C8();if("number"==typeof t&&(this.x_=t),this.lot){const t=this.cB(),s=this.Ent.Fit();this.lot(this,t,s)}}fst(){const t=this.Nht.fst();"number"==typeof t&&(this.x_=t)}gnt(){return this.hht()}dit(){return this.oht()!==this.gnt()}pit(){return!uy.ti(this.eht)&&this.eht!==this.gnt()}knt(){this.Nht.knt()}jnt(t,s,e,i,n,r,h,o){return this.Nht.jnt(t,s,e,i,n,r,h,o)}Unt(){this.Nht.Unt()}hht(){const t=this.mht(),s=this.pht(),e=this.cB(),i=this.Ent.Fit();switch(this.Ent.vet()){case"behavior":case"plugin":return t.bht(s);case"effect":return t[s];case"instance-variable":return t.Aht(s);case"world-instance":return this.rot(e,i);case"audio":return this.uot.call(this.ctt(),e,i)}}Iht(t,s,e,i=!0){const n=this.mht(),r=this.pht(),h=this.cB(),o=this.Ent.Fit();switch(this.Ent.vet()){case"behavior":n.vot(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.bot(r,t);break;case"plugin":n.vot(r,t,this.ctt().nrt());break;case"world-instance":this.hot(h,t,o,this,!1,i);break;case"audio":this.cot.call(this.ctt(),h,t,o,this)}}Mot(t,s,e){let i=this.Ent.ytt();if(i="default"===i?"continuous":i,"discrete"===i&&!s)return;if("discrete"===i&&e){const t=this.Ent.let()._F();if(!this.Ent.lnt(t))return}const n=this.mht(),r=this.pht(),h=this.cB(),o=this.Ent.Fit();switch(this.Ent.vet()){case"behavior":n._ht(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.Rht(r,t);break;case"plugin":n._ht(r,t,this.ctt().nrt());break;case"world-instance":this.oot(h,t,o);break;case"audio":this.fot.call(this.ctt(),h,t,o)}}xot(t,s,e,i,n,r,h,o){this.Nht.xot(t,s,e,i,n,r,h,o)}Tot(t,s,e,i,n){"angle"===this.Ent.Zit()&&(t=uy.tr(t));const r=(t.toString().split(".")[1]||"").length,h=this.hht();let o;switch(o=0===r?this.dot?Math.round(h):this.pot?"angle"===this.Ent.Zit()?uy.Qn(Math.round(uy.tr(h))):Number(uy.toFixed(h,2)):h:this.dot?Number(uy.toFixed(h,r)):(this.pot,h),this.Iht(o-h,s,e,!1),this.Ent.Fst()){case"offsetWidth":case"offsetScaleX":{const t=this.cB(),s=t.Vg(),e=Number(uy.toFixed(s,2));t.Cy(e-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.cB(),s=t.Zg(),e=Number(uy.toFixed(s,2));t.jht(e-s);break}}}v3(){return Object.assign(super.v3(),{v:this.x_,a:this.Hht,fod:this.qht,bod:this.Yht,of:this.zht,sf:this.Bht,armorf:this.iot,armandf:this.not,ca:this.Wht,os:this.sot,awo:this.$ht,aho:this.Vht,asxo:this.tot,asyo:this.eot})}b3(t){t&&(super.b3(t),this.x_=t.v,this.Hht=t.a,this.qht=uy.Ke(t.fod)?t.fod:0,this.Yht=uy.Ke(t.bod)?t.bod:0,this.zht=uy.Ke(t.of)?t.of:NaN,this.Bht=uy.Ke(t.sf)?t.sf:NaN,this.iot=uy.Ke(t.armorf)?t.armorf:void 0,this.not=uy.Ke(t.armandf)?t.armandf:void 0,this.Wht=uy.Ke(t.ca)?t.ca:0,this.sot=uy.Ke(t.os)?t.os:NaN,this.$ht=uy.Ke(t.awo)?t.awo:0,this.Vht=uy.Ke(t.aho)?t.aho:0,this.tot=uy.Ke(t.asxo)?t.asxo:0,this.eot=uy.Ke(t.asyo)?t.asyo:0)}ort(t){this.sot=t}frt(){return this.Wht}wrt(){return this.$ht}brt(){return this.Vht}Srt(){return this.tot}vrt(){return this.eot}}uy.aet.Jnt.qnt=yy}{const Sy=self._s;class wy{constructor(t){this.Cot=!1,this.Mrt=0,this.Iot=!1,this._ot=!1,this.eet=t;for(let t=0,s=this.eet.length;t<s;t++)this.eet[t].Eit(this)}Ost(){return this.eet}Got(){this.Cot=!0}Pot(){return this.Cot}Ant(t){this.Mrt=t}qit(){return this.Mrt}Aot(t){this.Iot=t}Rot(){return this.Iot}gst(t){this._ot=t}Eot(){return this._ot}Bf(){this.Cot=!1,this.Mrt=0,this.Iot=!1,this._ot=!1}}class vy{constructor(t){this.Oot=t}Hn(){this.Oot=null}FI(){return 0}C8(){const t=this.Oot;return this.Oot.lq(),t.cht((()=>t.lht((()=>0),(()=>t.ctt().Rnt()))),(()=>{}))}fst(){}Snt(){switch(this.Oot,this.Oot.lq().g7()){case"relative":return!1;case"absolute":return!0}}knt(){this.Oot;const t=this.Oot.lq(),s=t.Fst();switch(t.g7()){case"relative":break;case"absolute":if(t.Rit())t.Oit().Bf();else{const e=t.let(),i=t.iq(),n=t.ctt(),r=e.utt(i,n,s,t);r&&r.length>1&&new wy(r)}}}jnt(t,s,e,i,n,r,h,o){const a=this.Oot,l=this.Oot.lq();switch(l.g7()){case"relative":{const h=a.Sot();a.Iht(s-h,e,i),r&&this.xot(t,e,i,n,h,s),a.wot(s);break}case"absolute":{const t=l.let(),e=l.Fit();if(l.iq(),l.ctt(),l.Rit()){const i=l.Oit(),n=i.Ost(),r=a.yht(n,!0),u=a.Sht(t,t._F(),r);if(u){const t=e.Sst(),n=u.time-t;if(0===n)i.gst(h),i.Aot(o),i.Got(),i.Ant(i.qit()+s);else{if(n<0)return;const t=l.wnt(n);i.gst(h),i.Aot(o),i.Got(),i.Ant(i.qit()+(s-t))}}}else a.Mot(s,o,h);break}}}Unt(){const t=this.Oot,s=this.Oot.lq();switch(s.g7()){case"relative":break;case"absolute":if(s.Rit()){const e=s.Oit();e.Pot()&&t.Mot(e.qit(),e.Rot(),e.Eot())}}}xot(t,s,e,i,n,r){const h=this.Oot;i||(s&&t===s._F()?h.Tot(s.T7(),s,e):e&&t===e._F()?h.Tot(e.T7(),s,e):r-n==0&&h.Tot(s.T7(),s,e))}}Sy.aet.Jnt.yot=vy}{const by=self._s;class My{constructor(t){this.Oot=t}Hn(){this.Oot=null}FI(){return 1}C8(){const t=this.Oot;return t.nht(!0),this.dht(t.oht())}fst(){const t=this.Oot;if(t.oht()!==t.uht())return t.nht(!0),this.dht(t.uht())}Snt(){return!1}knt(){}jnt(t,s,e,i,n,r,h,o){const a=this.Oot,l=a.Sot();switch(a.lq().g7()){case"relative":a.Iht(s-l,e,i),r&&this.xot(t,e,i,n,l,s,!1,h);break;case"absolute":a.rht()?(a.nht(!1),a.Iht(l,e,i)):0===t&&0===a.lq().let().NJ()?a.Mot(s,!0,!1):(a.Iht(s-l,e,i),r&&this.xot(t,e,i,n,l,s,this.Fot(),h))}a.wot(s)}Unt(){}dht(t){return t-this.Oot.gnt()}Fot(){const t=this.Oot,s=t.cB().iq(),e=t.lq().$B().ltt();let i=0;for(const t of e.t8())0===t.FI()?t.r8(s)&&i++:1===t.FI()&&t.iq()===s&&i++;return i<=1}xot(t,s,e,i,n,r,h,o){const a=this.Oot;i?s&&t===s._F()?a.Tot(s.T7(),s,e,h,o):e&&t===e._F()?a.Tot(e.T7(),s,e,h,o):e||a.Tot(s.T7(),s,e,h,o):s&&t===s._F()?a.Tot(s.T7(),s,e,h,o):e&&t===e._F()?a.Tot(e.T7(),s,e,h,o):r-n==0&&a.Tot(s.T7(),s,e,h,o)}}by.aet.Jnt.got=My}{const xy=self._s,Ty=self.Vu;xy.aet.Nnt=class{constructor(){}static Pht(t,s,e,i){let n;switch(i){case"behavior":case"plugin":n=s.bht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Aht(t)}return n!==e}static wc(t,s,e,i){if(!e){let t=i.Dit();return t=i.oet().yrt(t),t.T7()}let n=i.ytt();if("default"===n&&(n="continuous"),"combo"===i.Zit()&&(n="discrete"),"discrete"===n)return s.T7();if("continuous"===n||"step"===n){const r=i.let().mtt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.T7(),o=e.T7(),a=s.M7("cubic-bezier"),l=e.M7("cubic-bezier"),u=a&&a.Dot()&&l&&l.Lot();if(!u&&h===o)return h;const c=s._F(),f=e._F();"step"===n&&0!==r&&(t=xy.Kn(t,c,f));const d=xy.normalize(t,c,f),p=s.Pnt();let m;if(u){const t=f-c;m=Ty.rc(p)(t*d,0,1,t),m=Ty.rc("cubicbezier")(m,h,h+a._7(),o+l.A7(),o)}else m=Ty.rc(p)((f-c)*d,h,o-h,f-c);return"integer"===i.Zit()?Math.floor(m):m}}}}{const Cy=self._s;Cy.aet.Bnt=class{constructor(){}static Pht(t,s,e,i){let n;switch(i){case"behavior":case"plugin":n=s.bht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Aht(t)}return n!==e}static wc(t,s,e,i){if(!e){let t=i.Dit();return t=i.oet().yrt(t),t.T7()}let n=i.ytt();if("default"===n&&(n="continuous"),"combo"===i.Zit()&&(n="discrete"),"discrete"===n)return s.T7();if("continuous"===n||"step"===n){const r=i.let().mtt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s._F(),o=e._F(),a=s.T7(),l=e.T7();"step"===n&&0!==r&&(t=Cy.Kn(t,h,o));const u=s.M7("angle");if(!u){if(a===l)return a;const e=Cy.normalize(t,h,o),i=self.Vu.rc(s.Pnt());return Cy.ur(a,l,i(e,0,1,1))}{const e=u.kot();if(a===l&&0===e)return a;const i=Cy.normalize(t,h,o),n=self.Vu.rc(s.Pnt())(i,0,1,1);switch(u.Not()){case"closest":return Cy.ur(a,l,n,e);case"clockwise":return Cy.cr(a,l,n,e);case"anti-clockwise":return Cy.dr(a,l,n,e)}}}}}}{const Iy=self._s;Iy.aet.$nt=class{constructor(){}static Pht(t,s,e,i){let n;switch(i){case"behavior":case"plugin":n=s.bht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Aht(t)}return!!n!=!!e}static wc(t,s,e,i){if(!e){let t=i.Dit();return t=i.oet().yrt(t),t.T7()?1:0}return s.T7()?1:0}}}{const _y=self._s,Gy=[0,0,0],Py=[0,0,0],Ay=[0,0,0];_y.aet.Wnt=class{constructor(){}static Pht(t,s,e,i){let n;switch(i){case"behavior":case"plugin":n=s.bht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Aht(t)}return Array.isArray(e)?(Gy[0]=e[0],Gy[1]=e[1],Gy[2]=e[2]):(Ay.ha(e),Gy[0]=Math.floor(255*Ay.No()),Gy[1]=Math.floor(255*Ay.Bo()),Gy[2]=Math.floor(255*Ay.$o())),Array.isArray(n)?(Py[0]=n[0],Py[1]=n[1],Py[2]=n[2]):(Ay.ha(n),Py[0]=Math.floor(255*Ay.No()),Py[1]=Math.floor(255*Ay.Bo()),Py[2]=Math.floor(255*Ay.$o())),Gy[0]!==Py[0]||Gy[1]!==Py[1]||Gy[2]!==Py[2]}static wc(t,s,e,i){if(!e){let t=i.Dit();t=i.oet().yrt(t);const s=t.T7();return Gy[0]=s[0],Gy[1]=s[1],Gy[2]=s[2],Gy}let n=i.ytt();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.T7();return Gy[0]=t[0],Gy[1]=t[1],Gy[2]=t[2],Gy}if("continuous"===n||"step"===n){const r=i.let().mtt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s._F(),o=e._F(),a=s.T7(),l=e.T7();"step"===n&&0!==r&&(t=_y.Kn(t,h,o));const u=_y.normalize(t,h,o),c=s.Pnt(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],S=self.Vu.rc(c),w=o-h,v=w*u;return Gy[0]=f===m?f:S(v,f,m-f,w),Gy[1]=d===g?d:S(v,d,g-d,w),Gy[2]=p===y?p:S(v,p,y-p,w),Gy}}}}{const Ry=self._s;Ry.aet.Vnt=class{constructor(){}static Pht(t,s,e,i){let n;switch(i){case"behavior":case"plugin":n=s.bht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Aht(t)}return n!==e}static wc(t,s,e,i){if(!e){let t=i.Dit();return t=i.oet().yrt(t),t.T7()}return s.T7()}}}{const Ey=self._s;Ey.o6=class{constructor(){this.Bot=new Map}Hn(){for(const t of this.Bot.values())t.Hn();this.Bot.clear(),this.Bot=null}Bu(t){const s=new Ey.$ot(t),e=s.Pc();this.Bot.set(e,s)}Hs(t){return this.Bot.get(t)}stt(){return 0}static Wot(t,s,e,i){if(s)for(const n of s)Ey.o6.Vot("create",n,t,e,i)}static jot(t,s,e,i){if(s)for(const n of s)Ey.o6.Vot("create-including-disabled",n,t,e,i)}static Uot(t,s,e,i){t.length?s.forEach(((s,e)=>{t[e].b3(s)})):s.forEach((s=>{Ey.o6.Vot("load",s,t,e,i)}))}static Vot(t,s,e,i,n){let r;if("function"==typeof i)switch(t){case"load":r=new i(null,n);break;case"create":case"create-including-disabled":r=new i(s,n)}else if("object"==typeof i){const e=s[i.zot],h=i.map.get(e);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.b3(s),e.push(r);break;case"create":if("function"==typeof r.Fet&&!r.Fet())return r.Hn();e.push(r);break;case"create-including-disabled":e.push(r)}}}}{const Oy=self._s,Fy=0,Dy=1,Ly=2,ky=3,Ny=4,By=5,$y=6,Wy=7,Vy=8,jy=9,Uy=10,zy=11;Oy.$ot=class{constructor(t){this.Yn="",this.mst=NaN,this.Hot=0,this.Jot="default",this.qot="default",this.Yot=!1,this.Xot=!1,this.Kot=1,this.jst=null,this.Zot="",this.Qot=!1,this.tat=!0,t&&(this.Yn=t[0],this.mst=t[1],this.Hot=t[2],this.Jot=t[3],this.qot=t[4],this.Yot=!!t[6],this.Xot=!!t[7],this.Kot=t[8],this.Zot=t[9],this.Qot=!!t[10],this.tat=!!t[11],this.jst=new Oy.sat(t[5],this))}Hn(){this.jst.Hn(),this.jst=null}ott(){return this.jst||(this.jst=new Oy.sat(null,this)),this.jst}Pc(){return this.Yn}EY(t){this.Yn=t}NJ(){return this.mst}kJ(t){this.mst=t}mtt(){return this.Hot}gtt(t){this.Hot=t}ytt(){return this.Jot}Stt(t){this.Jot=t}g7(){return this.qot}wtt(t){this.qot=t}$J(){return this.Yot}BJ(t){this.Yot=t}VJ(){return this.Xot}WJ(t){this.Xot=t}iJ(){return this.Kot}vtt(t){this.Kot=t}N8(){return this.Zot}btt(){return this.Qot}Mtt(){return this.tat}v3(){return{trackDataJson:this.jst.v3(),name:this.Yn,totalTime:this.mst,step:this.Hot,interpolationMode:this.Jot,resultMode:this.qot,loop:this.Yot,pingPong:this.Xot,repeatCount:this.Kot,startOnLayout:this.Zot,transformWithSceneGraph:!!this.Qot,useSystemTimescale:this.tat}}b3(t){t&&(this.ott().b3(t.trackDataJson),this.Yn=t.name,this.mst=t.totalTime,this.Hot=t.step,this.Jot=t.interpolationMode,this.qot=t.resultMode,this.Yot=t.loop,this.Xot=t.pingPong,this.Kot=t.repeatCount,this.Zot=t.startOnLayout,this.Qot=!!t.transformWithSceneGraph,this.tat=!!t.useSystemTimescale)}}}{const Hy=self._s,Jy=0,qy=1,Yy=2,Xy=1,Ky=2,Zy=3,Qy=4,tS=5,sS=6,eS=7,iS=0,nS=1,rS=8,hS=0,oS=1,aS=9,lS=10;class uS{constructor(t,s){this.jst=s,this.eat=null,this.iat=null,this.Ust=NaN,this.zst=NaN,this.Jot="default",this.qot="default",this.fu=!1,this.nat=null,this.Tit=null,this.$c="",this.rat=null,this.hat=0,this.oat=this.jst.ptt().NJ(),this.Hc=0,this.Yn="",t&&(t[0]&&(this.eat=t[0],this.Ust=t[0][2],this.zst=t[0][1]),this.Jot=t[1],this.qot=t[2],this.fu=!!t[3],t[6]&&(this.$c=t[6]),t[7]&&(this.rat=t[7],this.hat=t[7][0],this.oat=t[7][1]),t[8]&&(this.iat=t[8]),t[8]&&(this.iat=t[8]),t[9]&&(this.Hc=t[9]),t[10]&&(this.Yn=t[10]),this.nat=new Hy.aat(t[4],this),this.Tit=new Hy.lat(t[5],this))}Hn(){this.eat=null,this.jst=null,this.nat&&(this.nat.Hn(),this.nat=null),this.Tit&&(this.Tit.Hn(),this.Tit=null),this.rat=null}ott(){return this.jst}vst(){return this.nat||(this.nat=new Hy.aat(null,this)),this.nat}oet(){return this.Tit||(this.Tit=new Hy.lat(null,this)),this.Tit}uat(){return this.eat}det(){return this.zst}Let(t){this.zst=t}fet(){return this.Ust}Ret(t){this.Ust=t}ytt(){return this.Jot}Stt(t){this.Jot=t}g7(){return this.qot}wtt(t){this.qot=t}Fet(){return this.fu}Det(t){this.fu=!!t}oq(){return this.$c}Sst(){return this.hat}Eet(){return this.oat}Oet(t){this.oat=t}Net(){return this.iat[0]}ket(t){this.iat||(this.iat=[]),this.iat[0]=t}Wet(){return this.iat||(this.iat=[]),this.iat[1]}$et(t){this.iat||(this.iat=[]),this.iat[1]=t}FI(){return this.Hc}Pc(){return this.Yn}v3(){return{keyframeDataJson:this.nat.v3(),propertyTrackDataJson:this.Tit.v3(),instanceData:this.eat,additionalInstanceData:this.iat,instanceUid:this.Ust,objectClassIndex:this.zst,interpolationMode:this.Jot,resultMode:this.qot,enabled:this.fu,id:this.$c,nestedData:this.rat,type:this.Hc,name:this.Yn}}b3(t){t&&(this.eat=t.instanceData,this.Ust=t.instanceUid,this.zst=t.objectClassIndex,this.Jot=t.interpolationMode,this.qot=t.resultMode,this.fu=t.enabled,this.$c=t.id,this.Hc=t.type?t.type:0,this.Yn=t.name?t.name:"",this.oat=this.jst.ptt().NJ(),t.nestedData&&(this.rat=t.nestedData,this.hat=this.rat[0],this.oat=this.rat[1]),t.additionalInstanceData&&(this.iat=t.additionalInstanceData),this.vst().b3(t.keyframeDataJson),this.oet().b3(t.propertyTrackDataJson))}}Hy.sat=class{constructor(t,s){this.M9=s,this.cat=[],Hy.o6.Wot(this.cat,t,uS,this)}Hn(){this.M9=null;for(const t of this.cat)t.Hn();Hy.bh(this.cat),this.cat=null}ptt(){return this.M9}Cst(){const t=new uS(null,this);return this.cat.push(t),t}fat(t){return t.vst().tet()[0]}dat(t){return t.vst().tet().at(-1)}sit(t,s){const e=s.vst().tet(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i._F()===t)return i}}pat(t,s){const e=s.vst().tet(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i._F()>t)return i}}Qet(t,s){const e=s.vst().tet(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i._F()>=t)return i}}Ket(t,s){const e=s.vst().tet();for(let s=e.length-1;s>=0;s--){const i=e[s];if(i._F()<=t)return i}}*htt(){for(const t of this.cat)yield t}v3(){return{trackDataItemsJson:this.cat.map((t=>t.v3()))}}b3(t){t&&Hy.o6.Uot(this.cat,t.trackDataItemsJson,uS,this)}}}{const cS=self._s,fS=0,dS=0,pS=1,mS=2,gS=3,yS=4,SS=5,wS=6,vS=7,bS=8,MS=9;class xS{constructor(t,s){this.Tit=s,this.mat="",this.gat=null,this.tht=null,this.Hc=null,this.yat=NaN,this.Sat=NaN,this.Jot="default",this.qot="default",this.fu=!1,this.wat=null,this.vat=!0,t&&(this.mat=t[0][0],this.gat=t[0].slice(1),this.tht=t[1],this.Hc=t[2],this.yat=t[3],this.Sat=t[4],this.Jot=t[5],this.qot=t[6],this.fu=!!t[7],this.wat=new cS.bat(t[8],this),this.vat=t[9])}Hn(){this.wat.Hn(),this.wat=null,this.Tit=null,this.gat=null}oet(){return this.Tit}Git(){return this.wat||(this.wat=new cS.bat(null,this)),this.wat}vet(){return this.mat}jit(t){this.mat=t}zit(){return this.gat}Jit(t){this.gat=t}Yit(){return this.tht}Kit(t){this.tht=t}FI(){return this.Hc}tnt(t){this.Hc=t}int(){return this.yat}nnt(t){this.yat=t}rnt(){return this.Sat}hnt(t){this.Sat=t}ytt(){return this.Jot}Stt(t){this.Jot=t}g7(){return this.qot}wtt(t){this.qot=t}Fet(){return this.fu}Det(t){this.fu=!!t}ant(){return!!this.vat}v3(){return{propertyKeyframeDataJson:this.wat.v3(),sourceAdapterId:this.mat,sourceAdapterArguments:this.gat,property:this.tht,type:this.Hc,min:this.yat,max:this.Sat,interpolationMode:this.Jot,resultMode:this.qot,enabled:this.fu,canHavePropertyKeyframes:this.vat}}b3(t){t&&(this.mat=t.sourceAdapterId,this.gat=t.sourceAdapterArguments,this.tht=t.property,this.Hc=t.type,this.yat=t.min,this.Sat=t.max,this.Jot=t.interpolationMode,this.qot=t.resultMode,this.fu=t.enabled,this.vat=t.canHavePropertyKeyframes,this.Git().b3(t.propertyKeyframeDataJson))}}cS.lat=class{constructor(t,s){this.Vst=s,this.Mat=[],cS.o6.Wot(this.Mat,t,xS,this)}Hn(){this.Vst=null;for(const t of this.Mat)t.Hn();cS.bh(this.Mat),this.Mat=null}wst(){return this.Vst}ait(){const t=new xS(null,this);return this.Mat.push(t),t}ent(t){return t.Git()._it()[0]}yrt(t){return t.Git()._it().at(-1)}lnt(t,s){const e=s.Git()._it(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i._F()===t)return i}}fnt(t,s){const e=s.Git()._it(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i._F()>t)return i}}dnt(t,s){const e=s.Git()._it(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i._F()>=t)return i}}unt(t,s){const e=s.Git()._it();for(let s=e.length-1;s>=0;s--){const i=e[s];if(i._F()<=t)return i}}*het(){for(const t of this.Mat)yield t}v3(){return{propertyTrackDataItemsJson:this.Mat.map((t=>t.v3()))}}b3(t){t&&cS.o6.Uot(this.Mat,t.propertyTrackDataItemsJson,xS,this)}}}{const TS=self._s,CS=0,IS=1,_S=2,GS=3;class PS{constructor(t,s){if(this.nat=s,this.xD=-1,this.xat="noease",this.Tat=!1,this.Y9=null,this.Cat=null,!t)return;this.xD=t[0],this.xat=t[1],this.Tat=!!t[2];const e=t[3];this.Y9=e?e.split(" "):[],this.Cat=new Set(this.Y9.map((t=>t.toLowerCase()))),this.Iat=null,this._at=null}Hn(){this.nat=null,TS.bh(this.Y9),this.Y9=null,this.Cat.clear(),this.Cat=null,this.Iat=null}vst(){return this.nat}a7(){return this.Iat}Gat(t){this.Iat=t}tit(){return this._at}Pat(t){this._at=t}_F(){return this.xD}LJ(t){this.xD=t,this.nat.Aat()}Pnt(){return this.xat}eq(t){this.xat=t}Fet(){return this.Tat}Det(t){this.Tat=!!t}zJ(){return this.Y9}Ctt(t){this.Y9=t?t.split(" "):[],this.Cat=new Set(this.Y9.map((t=>t.toLowerCase())))}Rat(){return this.Cat}Nst(t){return this.Cat.has(t.toLowerCase())}v3(){return{time:this.xD,ease:this.xat,enable:this.Tat,tags:this.Y9}}b3(t){t&&(this.xD=t.time,this.xat=t.ease,this.Tat=t.enable,this.Y9=t.tags,this.Cat=new Set(this.Y9.map((t=>t.toLowerCase()))))}}TS.aat=class{constructor(t,s){this.Vst=s,this.Qst=[],TS.o6.Wot(this.Qst,t,PS,this),this.Aat()}Hn(){this.Vst=null;for(const t of this.Qst)t.Hn();TS.bh(this.Qst),this.Qst=null}Aat(){this.Qst.sort(((t,s)=>t._F()-s._F()));for(let t=0;t<this.Qst.length;t++){const s=this.Qst[t];s.Gat(this.Qst[t+1]),s.Pat(this.Qst[t-1])}}wst(){return this.Vst}Eat(){return this.Qst.length}tet(){return this.Qst}hit(){const t=new PS(null,this);return this.Qst.push(t),this.Aat(),t}uit(t){for(const s of this.Qst){if(!t(s))continue;const e=this.Qst.indexOf(s);-1!==e&&(s.Hn(),this.Qst.splice(e,1))}this.Oat(),this.Aat()}Oat(){this.Qst.sort(((t,s)=>t._F()-s._F()))}vit(t){return this.Qst.indexOf(t)}bit(t){return this.Qst[t]}*Fat(){for(const t of this.Qst)yield t}*Dat(){for(let t=this.Qst.length-1;t>=0;t--)yield this.Qst[t]}v3(){return{keyframeDataItemsJson:this.Qst.map((t=>t.v3()))}}b3(t){t&&(TS.o6.Uot(this.Qst,t.keyframeDataItemsJson,PS,this),this.Aat())}}}{const AS=self._s,RS=0,ES=0,OS=1,FS=2,DS=1,LS=2,kS=3,NS=4,BS=5;class $S{constructor(t,s){this.wat=s,this.Mrt=null,this.Lat=null,this.Hc="",this.xD=NaN,this.xat="noease",this.Tat=!1,this.kat=null,this.Nat=void 0,this.Bat="line",t&&(this.Mrt=t[0][0],this.Lat=t[0][1],this.Hc=t[0][2],this.xD=t[1],this.xat=t[2],this.Tat=!!t[3],this.Bat=t[5],this.kat=null,t[4]&&(this.kat=new AS.$at(t[4],this)),this.Iat=null,this.Wat=null)}Hn(){this.wat=null,this.kat&&(this.kat.Hn(),this.kat=null),this.Iat=null,this.Wat=null}Vat(){return this.kat}Gat(t){this.Iat=t}a7(){return this.Iat}jat(t){this.Wat=t}l7(){return this.Wat}qit(){return this.Mrt}Ant(t){"color"===this.Hc&&AS.Ke(t)?(this.Mrt[0]=AS.Ar(t),this.Mrt[1]=AS.Rr(t),this.Mrt[2]=AS.Er(t)):this.Mrt=t}aht(){return this.Lat}Int(t){"color"===this.Hc&&AS.Ke(t)?(this.Lat[0]=AS.Ar(t),this.Lat[1]=AS.Rr(t),this.Lat[2]=AS.Er(t)):this.Lat=t}T7(){const t=this.wat.Dit().g7();return"relative"===t?this.qit():"absolute"===t?this.aht():void 0}FI(){return this.Hc}tnt(t){this.Hc=t}_F(){return this.xD}LJ(t){this.xD=t,this.wat.Uat()}Pnt(){return this.xat}eq(t){this.xat=t}Fet(){return this.Tat}Det(t){this.Tat=!!t}u7(){return this.Bat}M7(t){if(!this.kat)return;if(this.Nat||null===this.Nat)return this.Nat;const s=this.kat.zat();if(!s)return this.Nat=null,this.Nat;const e=s.length;for(let i=0;i<e;i++){const e=s[i];if(e.oq()===t)return this.Nat=e,this.Nat}return this.Nat=null,this.Nat}v3(){const t=this.kat;return{addonDataJson:t?t.v3():t,value:this.Mrt,aValue:this.Lat,type:this.Hc,time:this.xD,ease:this.xat,enable:this.Tat}}b3(t){t&&(t.addonDataJson&&this.kat.Hat(t.addonDataJson),this.Mrt=t.value,this.Lat=t.aValue,this.Hc=t.type,this.xD=t.time,this.xat=t.ease,this.Tat=t.enable)}}AS.bat=class{constructor(t,s){this.xit=s,this.Iit=[],this.Jat=[],AS.o6.Wot(this.Iit,t,$S,this),AS.o6.jot(this.Jat,t,$S,this),this.Uat()}Hn(){this.xit=null;for(const t of this.Iit)t.Hn();AS.bh(this.Iit),this.Iit=null;for(const t of this.Jat)t.Hn();AS.bh(this.Jat),this.Jat=null}Uat(){let t=this.Iit;t.sort(((t,s)=>t._F()-s._F()));for(let s=0;s<t.length;s++){const e=t[s];s+1<t.length&&e.Gat(t[s+1]),s-1>=0&&e.jat(t[s-1])}t=this.Jat,t.sort(((t,s)=>t._F()-s._F()));for(let s=0;s<t.length;s++){const e=t[s];s+1<t.length&&e.Gat(t[s+1]),s-1>=0&&e.jat(t[s-1])}}Tnt(){const t=new $S(null,this);return this.Iit.push(t),this.Uat(),t}Cnt(t){for(const s of this.Iit){if(!t(s))continue;const e=this.Iit.indexOf(s);-1!==e&&(s.Hn(),this.Iit.splice(e,1))}this.qat(),this.Uat()}qat(){this.Iit.sort(((t,s)=>t._F()-s._F()))}Dit(){return this.xit}Yat(){return this.Iit.length}yrt(){return this.Iit[this.Iit.length-1]}_it(){return this.Iit}o7(){return this.Jat}*Xat(){for(const t of this.Iit)yield t}*Kat(){for(let t=this.Iit.length-1;t>=0;t--)yield this.Iit[t]}v3(){const t=this.Iit,s=this.Jat;return{propertyKeyframeDataItemsJson:t.map((t=>t.v3())),propertyKeyframeDataItemsIncludingDisabledJson:s.map((t=>t.v3()))}}b3(t){t&&(AS.o6.Uot(this.Iit,t.propertyKeyframeDataItemsJson,$S,this),AS.o6.Uot(this.Jat,t.propertyKeyframeDataItemsIncludingDisabledJson,$S,this),this.Uat())}}}{const WS=self._s,VS=0,jS=1;class US{constructor(t,s){this.kat=s,this.$c=t[0],this.Zat=t[1]}Hn(){this.kat=null,this.Zat=null}Vat(){return this.kat}oq(){return this.$c}v3(){return{id:this.$c,data:this.Zat}}b3(t){t&&(this.$c=t.id,this.Zat=t.data)}}const zS=0,HS=1,JS=2,qS=3;class YS extends US{constructor(t,s){super(t,s),this.Qat=this.Zat[0],this.tlt=!!this.Zat[1],this.slt=this.Zat[2],this.elt=!!this.Zat[3]}Hn(){super.Hn()}_7(){return this.Qat}Dot(){return this.tlt}A7(){return this.slt}Lot(){return this.elt}v3(){return Object.assign(super.v3(),{startAnchor:this.Qat,startEnable:!!this.tlt,endAnchor:this.slt,endEnable:!!this.elt})}b3(t){t&&(super.b3(t),this.Qat=t.startAnchor,this.tlt=!!t.startEnable,this.slt=t.endAnchor,this.elt=!!t.endEnable)}}const XS=0,KS=1;class ZS extends US{constructor(t,s){super(t,s),this.ilt=this.Zat[0],this.nlt=this.Zat[1]}Hn(){super.Hn()}Not(){return this.ilt}kot(){return this.nlt}v3(){return Object.assign(super.v3(),{direction:this.ilt,revolutions:this.nlt})}b3(t){t&&(super.b3(t),this.ilt=t.direction,this.nlt=t.revolutions)}}WS.$at=class{constructor(t,s){this.rlt=s,this.hlt=[],WS.o6.Wot(this.hlt,t,{zot:0,map:new Map([["cubic-bezier",YS],["angle",ZS]])},this)}Hn(){this.rlt=null;for(const t of this.hlt)t.Hn();WS.bh(this.hlt),this.hlt=null}olt(){return this.rlt}zat(){return this.hlt}*llt(){for(const t of this.hlt)yield t}v3(){return{addonDataItemsJson:this.hlt.map((t=>t.v3()))}}b3(t){t&&WS.o6.Uot(this.hlt,t.addonDataItemsJson,{zot:"id",map:new Map([["cubic-bezier",YS],["angle",ZS]])},this)}}}{const QS=self._s,tw="start-value",sw="current-state",ew=0,iw=1;let rw=0;QS.mot=class extends QS.W6{constructor(t,s){super("tween-"+rw++,t,s),this.$c="",this.ult=!1,this.clt="start-value",this.Hst=null,this.flt=null,this.dlt=null,this.plt=null,this.Mit=null,this.mlt=null}itt(t){const s=QS.zn(QS.Event,"tweenstatereleased");s.glt=this,t.dispatchEvent(s)}FI(){return 1}_9(){for(const t of this.M9.ott().htt())this.x9.push(QS.ylt.RC(this,t));this.Mit=this.x9[0]}Tst(){const t=this.M9.ott().Cst(),s=QS.ylt.RC(this,t);return this.x9.push(s),this.Slt(),s}Slt(){this.Mit=this.x9[0]}lq(t){return this.Mit.Ost()[0]}Qit(t){this.wlt=t}iq(){const t=this.n7();if(!t||!t.length)return;const s=t[0];if(this.Mit=s,!s)return;const e=s.iq();return s.cet()?e:void 0}vlt(t){this.plt=t}blt(t){this.dlt||(this.dlt=[]),this.dlt.push(t)}Mlt(t){this.flt||(this.flt=[]),this.flt.push(t)}xlt(t){if(!this.dlt)return;const s=this.dlt.indexOf(t);-1!==s&&this.dlt.splice(s,1)}Tlt(t){if(!this.flt)return;const s=this.flt.indexOf(t);-1!==s&&this.flt.splice(s,1)}Clt(t,s){for(const e of this.x9)for(const i of e.eet){if(i.Fst()!==s)continue;const e=i.oet(),n=i.Dit(),r=e.ent(n);r.Ant(t),r.Int(t)}}Ilt(t){for(const s of this.x9)for(const e of s.eet)if(e.Fst()===t)return e}_lt(t){for(const s of t){const t=this.Ilt(s);this.Clt(t.gnt(),s)}if(this.Ttt()){const t=this.NJ()-this._F();this.kJ(t);for(const s of this.x9)s.Oet(t);this.Ytt(0)}else{const t=this._F();this.kJ(t);for(const s of this.x9)s.Oet(t);this.Ytt(t)}this.Xtt()}Glt(t,s){const e=this.Ilt(s),i=e.oet(),n=e.Dit(),r=i.yrt(n);r.LJ(this.NJ()),r.Ant(t),r.Int(t)}Plt(t){this.$c=t}oq(){return this.$c}Alt(t){this.clt=t}Rlt(){return this.clt}hq(t){this.ult=t}rq(){return this.ult}Ptt(){if(this.dlt)for(const t of this.dlt)t(this);if(!this.F8())for(const t of this.x9)t.pit()}ktt(){this.j9=this.Nc.mN()}L8(){if(!this.H9&&(this.H9=!0,this.flt))for(const t of this.flt)t(this)}LJ(t){this.Elt(),super.LJ(t)}sst(t){QS.Ke(t)||(t=this.NJ()),t<0?this.A9=0:t>=this.NJ()?this.A9=this.NJ():this.A9=t,this.Mit.est()}C8(t){if(!this.D8()&&"current-state"===this.Rlt())for(const t of this.x9)t.dit();super.C8(t)}OJ(t=!1){if(super.OJ(t),!this.F8())for(const t of this.x9)t.fit()}Bf(t=!0,s=!1){this.Elt(),super.Bf(t,s)}Elt(){for(const t of this.x9){const s=t=>{const s=t._F(),e=this.NJ();return 0!==s&&s!==e};t.lit(s),t.cit(s)}}T6(){if(this.RJ())return!0;const t=this.iq();return!(t&&t.Wj().x0()||(this.b9.b8(this),this.ust(),0))}P8(t,s,e){if(this.Hst||(this.Hst=this.iq()),!this.Hst||this.Hst.Jq())return this.OJ(!0),void this.ktt();const i=this.Hst.wN();if(-1!==i&&(t=e*i),0===t&&0===this.q9)return;this.q9=t;const n=this.A9+this.R9+t*this.E9,r=this.M9.mst;n<0?(this.A9=0,this.R9=-n):n>=r?(this.A9=r,this.R9=this.A9-n):(this.A9=n,this.R9=0);let h=!1,o=!1;const a=this.$J(),l=this.VJ();if(a||l?a&&!l?this.E9>0?this.A9>=r&&(this.sst(0),this.Olt(QS.Llt.Dlt.AB.Flt),this.Olt(QS.Llt.Dlt.AB.klt),o=!0):this.A9<=0&&(this.sst(r),this.Olt(QS.Llt.Dlt.AB.Flt),this.Olt(QS.Llt.Dlt.AB.klt),o=!0):!a&&l?this.E9>0?this.A9>=r&&(this.Ytt(r),this.jJ(-1*this.UJ()),o=!0,1===this.O9?this.D9<this.iJ()?(this.D9++,this.Olt(QS.Llt.Dlt.AB.Flt),this.Olt(QS.Llt.Dlt.AB.klt),this.Olt(QS.Llt.Dlt.AB.Nlt),this.Olt(QS.Llt.Dlt.AB.Blt),this.IsPlaying()?this.O9=0:this.F9=0):(this.Olt(QS.Llt.Dlt.AB.Nlt),this.Olt(QS.Llt.Dlt.AB.Blt),h=!0):0===this.O9&&(this.Olt(QS.Llt.Dlt.AB.Nlt),this.Olt(QS.Llt.Dlt.AB.Blt),this.IsPlaying()?this.O9=1:this.F9=1)):this.A9<=0&&(this.Ytt(0),this.jJ(-1*this.UJ()),o=!0,1===this.O9?this.D9<this.iJ()?(this.D9++,this.Olt(QS.Llt.Dlt.AB.Flt),this.Olt(QS.Llt.Dlt.AB.klt),this.Olt(QS.Llt.Dlt.AB.Nlt),this.Olt(QS.Llt.Dlt.AB.Blt),this.IsPlaying()?this.O9=0:this.F9=0):(h=!0,this.Olt(QS.Llt.Dlt.AB.Nlt),this.Olt(QS.Llt.Dlt.AB.Blt)):0===this.O9&&(this.Olt(QS.Llt.Dlt.AB.Nlt),this.Olt(QS.Llt.Dlt.AB.Blt),this.IsPlaying()?this.O9=1:this.F9=1)):a&&l&&(this.E9>0?this.A9>=r&&(this.Ytt(r),this.jJ(-1*this.UJ()),o=!0,0===this.O9&&(this.Olt(QS.Llt.Dlt.AB.Nlt),this.Olt(QS.Llt.Dlt.AB.Blt)),1===this.O9&&(this.Olt(QS.Llt.Dlt.AB.Flt),this.Olt(QS.Llt.Dlt.AB.klt),this.Olt(QS.Llt.Dlt.AB.Nlt),this.Olt(QS.Llt.Dlt.AB.Blt)),this.IsPlaying()?(this.O9++,this.O9=QS.wrap(this.O9,0,2)):(this.F9=this.O9+1,this.F9=QS.wrap(this.F9,0,2))):this.A9<=0&&(this.Ytt(0),this.jJ(-1*this.UJ()),o=!0,0===this.O9&&(this.Olt(QS.Llt.Dlt.AB.Nlt),this.Olt(QS.Llt.Dlt.AB.Blt)),1===this.O9&&(this.Olt(QS.Llt.Dlt.AB.Flt),this.Olt(QS.Llt.Dlt.AB.klt),this.Olt(QS.Llt.Dlt.AB.Nlt),this.Olt(QS.Llt.Dlt.AB.Blt)),this.IsPlaying()?(this.O9++,this.O9=QS.wrap(this.O9,0,2)):(this.F9=this.O9+1,this.F9=QS.wrap(this.F9,0,2)))):this.E9>0?this.A9>=r&&(this.D9<this.iJ()?(this.D9++,this.sst(0),this.Olt(QS.Llt.Dlt.AB.Flt),this.Olt(QS.Llt.Dlt.AB.klt),o=!0):(this.Ytt(r),h=!0)):this.A9<=0&&(this.D9<this.iJ()?(this.D9++,this.sst(r),this.Olt(QS.Llt.Dlt.AB.Flt),this.Olt(QS.Llt.Dlt.AB.klt),o=!0):(this.Ytt(0),h=!0)),this.IsPlaying()){if(h)return this.Mit.gst(),this.OJ(!0),void this.ktt();this.Mit.wc(this.A9,!0,!1,o,this.J9,!1),this.J9&&(this.J9=!1)}}Olt(t){const s=this.iq();this.plt.$lt(this),this.Nc.xU(t,s,this.plt.WH()),this.plt.Wlt()}v3(){const t=super.v3(),s=this.ptt();return Object.assign(t,{tweenDataItemJson:s.v3(),id:this.$c,destroyInstanceOnComplete:this.ult,initialValueMode:this.clt})}b3(t){t&&(this.ptt().b3(t.tweenDataItemJson),super.b3(t),this.$c=t.id,this.ult=t.destroyInstanceOnComplete,this.clt=t.initialValueMode,this.Slt())}static IsPlaying(t){return t.IsPlaying()}static YJ(t){return t.YJ()}static Vlt(t){return!!t.VJ()&&0===t.xtt()}static jlt(t){return!!t.VJ()&&1===t.xtt()}static Ult(t){const s=t.runtime.ltt(),e=new QS.$ot;if(t.json){e.b3(t.json.tweenDataItemJson);const i=new QS.mot(e,s);return i.b3(t.json),i}{const i=new QS.mot(e,s);QS.xi(t.zlt)||(t.zlt=[t.zlt]),i.Plt(t.id),i.Ctt(t.tags),i.Alt(t.Hlt),i.hq(t.Jlt),i.BJ(t.loop),i.WJ(t.qlt),i.kJ(t.time),i.gtt(0),i.Stt("default"),i.wtt(t.zlt[0].Ylt),i.vtt(t.eJ);const n=i.Tst();n.Ret(t.VH.tU()),n.Stt("default"),n.wtt(t.zlt[0].Ylt),n.Det(!0),n.Let(t.VH.Wj().tk());const r=t.VH.RH(),h=r.Bet()?r.Net():t.VH.cB().Vg(),o=r.Bet()?r.Wet():t.VH.cB().Zg();n.ket(h),n.$et(o);const a=n.rit();a.LJ(0),a.eq("noease"),a.Det(!0),a.Ctt("");const l=n.rit();l.LJ(t.time),l.eq("noease"),l.Det(!0),l.Ctt("");for(const s of t.zlt){const e=n.oit();e.jit(s.Xlt),e.Hit(s.Klt),e.Xit(s.Get),e.Qit(s.type),e.nnt(NaN),e.hnt(NaN),e.Stt("default"),e.wtt(s.Ylt),e.Det(!0);const i=e.xnt();i.tnt(s.valueType),i.LJ(0),i.eq(s.Zlt),i.Det(!0),i.Ant(s.Qlt),i.Int(s.Qlt);const r=e.xnt();r.tnt(s.valueType),r.LJ(t.time),r.eq(s.Zlt),r.Det(!0),r.Ant(s.tut),r.Int(s.tut),e.ctt()}return i}}static Ret(t,s){if(!isNaN(s))for(const e of t.n7())e.Ret(s)}static vlt(t,s){t.vlt(s)}sut(t,s){return this.mlt||(this.mlt=QS.zn(self.ZJ,this,t,s)),this.mlt}}}{const hw=self._s;hw.ylt=class extends hw.att{constructor(t,s){super(t,s),this.eut=null,this.iut=null}static RC(t,s){return hw.zn(hw.ylt,t,s)}nut(){1===this.eet.length?this.eut=this.eet[0]:(this.eut=this.eet[0],this.iut=this.eet[1])}iet(){for(const t of this.Vst.oet().het())this.eet.push(hw.rut.RC(this,t));this.nut()}oit(){const t=this.Vst.oet().ait(),s=hw.rut.RC(this,t);return this.eet.push(s),this.nut(),s}C8(){if(this.uet(),!this.cet()&&this.dtt())return;const t=this.let().Ttt()?0:this.Eet();for(const s of this.eet)s.C8(t),0===this.net&&1===s.Uet()&&(this.net=1),0===this.L6&&1===s.I8()&&(this.L6=1);this.ret=0,this.eet.some((t=>t.pst()))&&(this.ret=1),this.Zst=this.zet(t),this.Yst=!1,this.Xst=!1,this.wc(t)}yst(){}wc(t,s=!1,e=!1,i=!1,n=!1,r=!1,h=!1){if(this.Hst||this.iq(),this.Hst)return!this.Hst.Jq()&&(!r||!this.Wj().x0())&&(this.iut?(this.eut.wc(t,e,i,h),this.iut.wc(t,e,i,h)):this.eut.wc(t,e,i,h),void(0!==this.eut.Uet()&&(this.Jst||(this.Jst=this.Hst.cB()),this.Jst&&this.Jst.ZU())))}bst(){}b3(t){super.b3(t),this.nut()}}}{const ow=self._s;ow.rut=class extends ow.aet{constructor(t,s){super(t,s),this.hut=!1}static RC(t,s){return ow.zn(ow.rut,t,s)}wc(t,s=!1,e=!1,i=!1){let n,r;if(this.hut)n=this.Iit[0],r=this.Iit[1];else if(s)n=this.Tit.unt(t,this.xit),r=n.a7();else{if(this.Pit){const s=this.let(),e=this.Pit.a7(),i=this.Pit._F(),n=e?e._F():s.NJ();(t<=i||t>=n)&&(this.Pit=this.Tit.unt(t,this.xit))}else this.Pit=this.Tit.unt(t,this.xit);n=this.Pit,r=n.a7()}this.Cit.wc(t,n,r,s,e,i)}xnt(){const t=this.xit.Git().Tnt();return this.Pit=null,this.hut=this.ont().length<=2,t}cit(t){this.Pit=null,this.xit.Git().Cnt(t),this.hut=this.ont().length<=2}v3(){return{sourceAdapterJson:this.ctt().v3(),basic:this.hut}}b3(t){t&&(this.ctt().b3(t.sourceAdapterJson),this.hut=t.basic)}}}{const aw=self._s,lw=self.Vu,uw=0,cw=1,fw=2;aw.vc=class extends aw.jn{constructor(t,s=!0){super(),this.Yn=t[0],this.out=t[2],this.aut=[];for(const s of t[1]){const t=aw.lut.RC(this,s);this.aut.push(t)}for(let t=0;t<this.aut.length;t++){const s=this.aut[t],e=this.aut[t+1],i=this.aut[t-1];s.Gat(e),s.jat(i)}this.uut=new Map,this.cut=new Map,this.fut(),s&&lw.Mc(this.Yn,((t,s,e,i)=>this.wc(t,s,e,i)),null,{transition:this})}static RC(t){return aw.zn(aw.vc,t)}Hn(){for(const t of this.aut)t.Hn();aw.bh(this.aut),this.aut=null,this.uut.clear(),this.uut=null,this.cut.clear(),this.cut=null}bc(t){this.out=!!t}dut(t){const s=this.cut.get(t);if(s)return s;for(const s of this.aut)if(s.mut()===t)return this.cut.set(t,s),s}gut(t){for(let s=this.aut.length-1;s>=0;s--){const e=this.aut[s],i=e.mut();if(i<=t){let s=e;if(i<t)return s;if(i===t){for(;s;){const t=s.l7();if(!t)break;if(t.mut()!==s.mut())break;s=t}return s}}}}wc(t,s,e,i){let n=t/i;if(this.out){const n=this.dut(0),r=this.dut(1),h=s+(s+e)*n.yut(),o=(s+e)*r.yut()-h;return 0===i?h+o:lw.Tc(t,h,o,i)}0===i&&(n=1);let r=this.gut(n),h=r.a7();if(!h){const t=r.l7(),s=r;r=t,h=s}const o=h.mut()-r.mut(),a=aw.Xn(n,r.mut(),h.mut(),0,o);if(r.Sut()||0===o){const t=s+(s+e)*r.yut(),i=(s+e)*h.yut()-t;return 0===o?1===a?t+i:t:lw.Tc(a,t,i,o)}const l=r.mut(),u=r.yut(),c=r.mut()+r.wut(),f=r.yut()+r.vut(),d=h.mut()+h.but(),p=h.yut()+h.Mut(),m=h.mut(),g=h.yut();let y=lw.rc("spline")(a,l,u,c,f,d,p,m,g,this.uut.get(r));return y+=r.yut(),(1-y)*s+y*(s+e)}fut(){this.uut.clear();for(let t=0;t<this.aut.length-1;t++){const s=this.aut[t];if(!s.Dot())continue;const e=s,i=this.aut[t+1];if(!i.Lot())continue;const n=e.mut(),r=e.mut()+e.wut(),h=i.mut()+i.but(),o=i.mut();this.uut.set(e,lw.Cc(n,r,h,o))}}}}{const dw=self._s,pw=0,mw=1,gw=2,yw=3,Sw=4,ww=5,vw=6,bw=7,Mw=8;dw.lut=class extends dw.jn{constructor(t,s){super(),this.xut=t,this.Tut=s[0],this.Cut=s[1],this.Iut=s[2],this._ut=s[3],this.Gut=s[4],this.Put=s[5],this.tlt=s[6],this.elt=s[7],this.Aut=s[8],this.Iat=null,this.Wat=null}Hn(){this.xut=null}static RC(t,s){return dw.zn(dw.lut,t,s)}Gat(t){this.Iat=t}a7(){return this.Iat}jat(t){this.Wat=t}l7(){return this.Wat}mut(){return this.Tut}yut(){return this.Cut}wut(){return this.Iut}vut(){return this._ut}but(){return this.Gut}Mut(){return this.Put}Dot(){return this.tlt}Lot(){return this.elt}Sut(){return"linear"===this.Aut}Rut(){return"cubic"===this.Aut}}}{const xw=self._s;xw.Eut=class extends xw.jn{constructor(t){super(),this.Nc=t,this.Out=[]}Hn(){for(const t of this.Out)t.Hn();xw.bh(this.Out),this.Out=null}RC(t){this.Out.push(xw.vc.RC(t))}}}{const Tw=self._s;Tw.Fut=class extends Tw.jn{constructor(t){super(),this.Nc=t,this.Dut=null,this.Lut=null,this._6=t=>this.G6(t.VH)}Hn(){if(this.k6(),this.Dut){for(const t of this.Dut.values())t.clear();this.Dut.clear()}this.Dut=null,this.Nc=null}RC(t){if(this.Dut||(this.Dut=new Map),!t)return;const s=t[0][16][0],e=t[1];this.Dut.has(e)||this.Dut.set(e,new Map),this.Dut.get(e).set(s,t)}N6(){const t=this.Nc.Sf();t&&t.addEventListener("instancedestroy",this._6)}k6(){const t=this.Nc.Sf();t&&t.removeEventListener("instancedestroy",this._6)}kut(){return!!this.Dut&&0!==this.Dut.size}Nut(t,s){let e=0;if(e=t instanceof Tw.But?t.tk():t,!this.Dut.has(e))return;const i=this.Dut.get(e).get(s);return i?JSON.parse(JSON.stringify(i)):void 0}$ut(t,s){this.Lut||(this.Lut=new WeakMap),this.Lut.has(t)||this.Lut.set(t,s)}Wut(t){if(!this.Lut)return"";return this.Lut.get(t)||""}G6(t){this.Lut&&this.Lut.has(t)&&this.Lut.delete(t)}}}{const Cw=self._s;Cw.Vut=class{constructor(t){this.Nc=t,this.jut=new Cw.Uut}Hn(){this.jut.Hn(),this.jut=null,this.Nc=null}$B(){return this.Nc}RC(t){this.jut.Bu(t)}zut(t){return this.jut.Hs(t)}Hut(){return this.jut.Hut()}}}{const Iw=self._s;Iw.Jut=class{constructor(t,s,e,i,n,r,h){this.Nc=n.$B(),this.qut=n,this.Yut=t,this.Xut=e,this.Kut=i,this.PS=s,this.a6=r,this.Zut=h??r.iq().tU(),this.Qut(),this.tct=this.ect?.sct()??-1,this.ict=[],this.nct=null,this.rct=NaN,this.hct=null,this.oct=null,this.act=null,this.lct="",this.uct=null,this.cct="",this.fct="",this.dct=0,this.pct=!1,this.W9=!1}Hn(){this.W9||(Iw.bh(this.ict),this.ict=null,this.Nc=null,this.qut=null,this.Kut=null,this.a6=null,this.nct=null,this.rct=NaN,this.hct&&this.hct.clear(),this.hct=null,this.oct=null,this.act=null,this.lct="",this.uct=null,this.cct="",this.fct="",this.W9=!0)}Jn(){return this.W9}mct(){return this.qut}$B(){return this.Nc}Pc(){return this.Yut}gct(){return this.Kut}AJ(){return this.PS}Z6(){return this.a6||(this.a6=this.Nc.hB(this.Zut).RH()),this.a6}yct(){return this.Sct(this.tct)}wct(){const t=this.yct();return t?t.AJ():""}vct(){const t=this.yct();return t?t.zJ():[]}bct(t){const s=this.vct();if(!s)return!1;if(!s.length)return!1;const e=Iw.Jut.Itt(t);return!(!e||!e.length)&&e.every(Iw.Jut.Gtt,s)}Mct(t,s){const e=this.vct();if(!e)return!1;if(!e.length)return!1;const i=Iw.Jut.Itt(t);return!(!i||!i.length)&&i.every((t=>Iw.Jut.xct.call(e,t,s)))}static Gtt(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map((t=>t.trim().toLowerCase())).includes(t.trim().toLowerCase())}static Itt(t){return t.trim().split(" ")}static xct(t,s){const e=this;return""===t?1===e.length&&""===e[0]:e.some((e=>Iw.compare(e.trim(),s,t.trim())))}Tct(t){const s=this.yct();if(s){if(Iw.Ke(t)){const e=s.Cct(),i=e?e[t]:void 0;if(Iw.Ke(i))return this.Sct(i)}if("string"==typeof t)for(const e of s.Cct()){const s=this.Sct(e);if(s.DJ(t))return this.Sct(s.sct())}}}Ict(t){const s=this.Tct(t);return s?s.AJ():""}_ct(t){const s=this.Tct(t);return s?s.zJ():""}Gct(t){const s=this.yct();if(!s)return-1;const e=s.Cct();if(!e)return-1;const i=this.Tct(t);return i?e.indexOf(i.sct()):-1}Pct(){const t=this.yct();if(!t)return 0;const s=t.Cct();return s?s.length:0}Sct(t){return this.Kut.Sct(t)}Bf(){this.Rct().Act(!0)}Act(t){if(this.Ect()){for(const[t,s]of this.Ect().entries())s.Act(!1);this.Ect().clear()}if(this.hct=null,this.nct=null,this.Oct=null,this.oct=null,this.lct="",this.uct=null,this.cct="",this.fct="",this.ict=[],t){this.qut.Fct(this);const t=this.ect.sct();t!==this.tct&&this.Dct(t)}else this.tct=this.ect.sct()}Lct(){const t=this.Kut.Sct(this.tct);return t?t.Nct().kct():0}Bct(t){return!(t<0)&&t===this.$ct()}$ct(){const t=this.Kut.Sct(this.tct);if(!t)return-1;let s=t.Nct().Wct();return s?t.Nct().Vct().indexOf(s):-1}jct(t){const s=this.Uct(t);return s?s.Pc():""}zct(t){let s;return Iw.Ke(t)&&(s=this.Uct(t)),"string"==typeof t&&(s=this.Hct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.qit():""}Jct(t,s){if(t.Fet())return t.sct();{const e=t.Nct().Wct();if(!e)return s.sct();const i=e.qct();if(!Iw.Ke(i))return s.sct();const n=this.Sct(i);return n?this.Jct(n,s):s.sct()}}Yct(t,s){if(t.Fet()){if("reference"===t.FI()){const s=t.Xct(),e=t.Kct(),i=this.qut.zut(s);if(!i)return[-1,null];const n=i.Zct(e);return n?this.Yct(n,i):this.Yct(i.Qct(),i)}return[t.sct(),s]}{const e=t.Nct().Wct();if(!e)return[-1,null];const i=e.qct();if(!Iw.Ke(i))return[-1,null];const n=s.Sct(i);return n?this.Yct(n,s):[-1,null]}}tft(t,s){let e=this.Sct(t);if(e){if(!e.Fet()){const s=this.Sct(this.tct);t=this.Jct(e,s)}if(Iw.Ke(t)&&t!==this.tct)if(e=this.Sct(t),"reference"===e.FI()){const i=e.Xct(),n=e.Kct(),r=this.qut.zut(i);let h=r.Zct(n);if(h){const e=this.Yct(h,r);if(-1===e[0])return;s(this.tct,t,e[1],e[0])}else s(this.tct,t)}else s(this.tct,t)}}sft(t){let s;if(Iw.Ke(t)&&(s=this.Uct(t)),"string"==typeof t&&(s=this.Hct(t)),!s)return;let e=s.qct();Iw.Ke(e)&&this.tft(e,((t,s,e,i)=>{this.ict.push(t),this.Dct(s,e,i)}))}eft(){const t=this.ift();if(!t)return;const s=t.qct();Iw.Ke(s)&&this.tft(s,((t,s,e,i)=>{this.ict.push(t),this.Dct(s,e,i)}))}nft(t){const s=this.Kut.Zct(t);if(!s)return;const e=s.sct();Iw.Ke(e)&&this.tft(e,((t,s,e,i)=>{this.ict.push(t),this.Dct(s,e,i)}))}rft(){const t=this.ict.pop();Iw.Ke(t)?this.Dct(t):this.hft()&&(this.qut.Fct(this.hft(),!0,!1,!1),this.hft().Dct(this.oft()),this.Rct().aft(this.hft()))}lft(t){if(!this.yct())return;const s=this.Tct(t);if(s){if(!s.Fet())return;const t=s.sct();if(!Iw.Ke(t))return;this.ict.push(this.tct),this.Dct(s.sct())}}uft(t){if(Iw.Ke(t))return!!this.Kut.Sct(this.tct).Nct().Vct()[t];if("string"==typeof t){const s=this.Kut.Sct(this.tct).Nct().Vct();for(let e=0;e<s.length;e++)if(s[e].Pc()===t)return!0;return!1}return!1}cft(){this.pct=!0}fft(){return this.dct>0}dft(){this.dct++}pft(){this.dct--,0===this.dct&&this.pct&&this.qut.mft(this)}Dct(t,s,e){const i=this.tct,n=this.Z6().iq();this.dft(),this.qut.gft(this),this.Nc.xU(Iw.EB.Sft.AB.yft,n),this.Nc.xU(Iw.EB.Sft.AB.wft,n),this.Nc.xU(Iw.EB.Sft.AB.vft,n),this.Nc.xU(Iw.EB.Sft.AB.bft,n),this.tct=t;let r=this.Sct(this.tct);if("dictionary"===r.FI()&&(this.Nc.xU(Iw.EB.Sft.AB.Mft,n),this.Nc.xU(Iw.EB.Sft.AB.xft,n),this.Nc.xU(Iw.EB.Sft.AB.Tft,n),this.Nc.xU(Iw.EB.Sft.AB.Cft,n)),this.qut.Ift(),this.pft(),!this.Jn()&&(r=this.Sct(this.tct),"reference"===r.FI())){const t=s?s.Pc():r.Xct();if(this._ft(r)){this.ict.pop();const t=this.Gft(r);this.qut.Fct(t,!0,!0,!1),t.Pft(this,i),this.Rct().aft(t)}else{const s="number"==typeof e?e:r.Kct();if(t){this.ict.pop();let e=r.Aft();if(e){let t=this.qut.Rft(e);for(;t;)e=Iw.Im(e),t=this.qut.Rft(e)}else{e=`${t}-ref`;let s=this.qut.Rft(e);for(;s;)e=Iw.Im(e),s=this.qut.Rft(e)}const n=this.qut.Eft(t,s,e,this.a6,!0);n.Pft(this,i),this.Oft(r,n);const h=this.Rct();n.Fft(h),h.aft(n)}}}}ift(){const t=this.Kut.Sct(this.tct);return t?t.Nct().Wct():null}Uct(t){const s=this.Kut.Sct(this.tct);if(!s)return null;const e=s.Nct().Vct();if(!e)return null;return e[t]||null}Hct(t){const s=this.Kut.Sct(this.tct);if(!s)return null;return s.Nct().Dft(t)||null}Qut(t){if("number"==typeof t){let s=this.Sct(t);s||(s=this.Kut.Qct()),this.ect=s}else if("number"==typeof this.Xut){let t=this.Sct(this.Xut);t||(t=this.Kut.Qct()),this.ect=t}else{let t=this.Kut.Zct(this.Xut);t||(t=this.Kut.Qct()),this.ect=t}}v3(){return this.pct?null:{flowchartName:this.Yut,flowchartTag:this.PS,startNodeTag:this.Xut,currentNodeId:this.tct,previousNodeIds:this.ict,pluginUID:this.a6.iq().tU(),reference:{previousFlowchartTag:this.hft()?this.hft().AJ():"",previousStartNodeId:Iw.Ke(this.oft())?this.oft():NaN,referencesJson:this.Lft(),currentReferenceFlowchartTag:this.kft()?this.kft().AJ():"",rootFlowchartTag:this.Rct()?this.Rct().AJ():""}}}Lft(){if(!this.Nft())return null;const t=[];for(const[s,e]of this.Ect().entries())t.push({flowchartElementId:s.sct(),flowchartStateTag:e.AJ()});return t.length?t:null}b3(t){if(t){if(this.Yut=t.flowchartName,this.PS=t.flowchartTag,this.Xut=t.startNodeTag,this.tct=t.currentNodeId,this.ict=t.previousNodeIds,this.Zut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.lct=s.previousFlowchartTag,this.rct=s.previousStartNodeId,this.uct=s.referencesJson,this.cct=s.currentReferenceFlowchartTag,this.fct=s.rootFlowchartTag}this.Qut()}}hft(){return"string"==typeof this.lct&&this.lct&&(this.nct=this.qut.Rft(this.lct),this.lct=""),this.nct}oft(){return this.rct}Pft(t,s){this.nct=t,this.rct=s}kft(){return"string"==typeof this.cct&&this.cct&&(this.oct=this.qut.Rft(this.cct),this.cct=""),this.oct}aft(t){this.oct=t,this.oct===this&&(this.oct=null)}Rct(){return"string"==typeof this.fct&&this.fct&&(this.act=this.qut.Rft(this.fct),this.fct=""),this.act?this.act:this}Fft(t){this.act=t}Nft(){return this.Bft(),!!this.hct}_ft(t){return this.Bft(),this.hct&&this.hct.has(t)}Bft(){if(this.uct){this.hct&&this.hct.clear(),this.hct||(this.hct=new Map);for(const t of this.uct){const s=this.qut.Rft(t.flowchartStateTag),e=s.Sct(t.flowchartElementId);this.hct.set(e,s)}this.uct=null}}Ect(){return this.Bft(),this.hct}Gft(t){return this.Bft(),this.hct.get(t)}Oft(t,s){this.hct||(this.hct=new Map),this.hct.set(t,s)}}}{const _w=self._s;_w.$ft=class{constructor(t){this.Nc=t,this.Wft=new Map,this.Vft=null,this.jft=[],this.Uft=()=>this.E6(),this.zft=null}Hn(){_w.bh(this.jft),this.jft=null,this.Wft.clear(),this.Wft=null,this.Vft=null,this.Nc=null,this.zft=null}$B(){return this.Nc}zut(t){return this.Nc.mct().zut(t)}Eft(t,s,e,i,n,r){const h=this.Nc.mct().zut(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.Wft.has(e)){const t=this.Wft.get(e);t&&this.mft(t)}const o=new _w.Jut(t,e,s,h,this,i,r);return this.Wft.set(e,o),n&&this.Fct(o,!0),o}mft(t){if(t.cft(),t.fft())return;const s=t.AJ();this.Wft.delete(s),t.Hn(),this.Vft===t&&(this.Vft=null)}Hft(t){t.Bf()}Rft(t){return this.Wft.get(t)}gft(t){this.jft.push(t)}Ift(){this.jft.pop()}Fct(t,s=!1,e=!1,i=!0){if(i){const s=t.kft();t=s||t}t!==this.Vft&&(this.Jft(),this.qft(t,s,e))}Yft(t){return"string"==typeof t?this.Rft(t):this.jft.length?this.jft[this.jft.length-1]:this.Vft}Jft(){if(!this.Vft)return;if(this.Vft.Jn())return;const t=this.Vft.Z6().iq();this.Vft.dft(),this.gft(this.Vft),this.Nc.xU(_w.EB.Sft.AB.Xft,t),this.Ift(),this.Vft.pft()}qft(t,s=!1,e=!1){if(this.Vft=t,!this.Vft)return;if(this.Vft.Jn())return;const i=this.Vft.Z6().iq();this.Vft.dft(),this.gft(this.Vft),this.Nc.xU(_w.EB.Sft.AB.Kft,i),!0!==e&&"number"!=typeof e||this.Vft.Qut(e),s&&(this.Nc.xU(_w.EB.Sft.AB.Mft,i),this.Nc.xU(_w.EB.Sft.AB.xft,i),this.Nc.xU(_w.EB.Sft.AB.Tft,i),this.Nc.xU(_w.EB.Sft.AB.Cft,i)),this.Ift(),this.Vft.pft()}v3(){return{flowchartJsonObjects:[...this.Wft.values()].map((t=>t.v3())),currentFlowchartTag:this.Vft?this.Vft.AJ():null}}b3(t){if(!t)return;this.zft=t;const s=new Map;for(const t of this.zft.flowchartJsonObjects){const e=t.flowchartTag;if(this.Wft.has(e)){const i=this.Wft.get(e);i.b3(t),s.set(e,i)}else{const e=this.Eft(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);e.b3(t),s.set(t.flowchartTag,e)}}for(const[t,e]of this.Wft.entries())s.has(t)||e.Hn();this.Wft.clear(),this.Wft=s,this.Nc.e4()?this.Nc.Sf().addEventListener("afterload",this.Uft):this.E6()}E6(){this.Nc.Sf().removeEventListener("afterload",this.Uft);const t=this.Wft.get(this.zft.currentFlowchartTag);t&&this.Fct(t,!0),this.zft=null}}}{const Gw=self._s;Gw.Uut=class{constructor(){this.Zft=new Map}Hn(){for(const t of this.Zft.values())t.Hn();this.Zft.clear(),this.Zft=null}Bu(t){const s=new Gw.Qft(t),e=s.Pc();this.Zft.set(e,s)}Hs(t){return this.Zft.get(t)}Hut(){return!!this.Zft.size}static tdt(t,s,e,i){if(s)for(const n of s){const s=new e(n,i);t.push(s)}}}}{const Pw=self._s,Aw=0,Rw=1;Pw.Qft=class{constructor(t){this.Yn=t[0],this.sdt=new Pw.edt(t[1],this)}Hn(){this.sdt.Hn(),this.sdt=null}idt(){return this.sdt}Sct(t){return this.sdt.Sct(t)}Zct(t){return this.sdt.Zct(t)}Qct(){return this.sdt.Qct()}Pc(){return this.Yn}}}{const Ew=self._s,Ow=0,Fw=1,Dw=2,Lw=3,kw=4,Nw=5,Bw=6,$w=7,Ww=8,Vw=8,jw=9,Uw=10,zw=11;class Hw{constructor(t,s){this.sdt=s,this.Hc=t[7],this.ndt=t[0],this.PS=t[1],this.PS?this.Y9=this.PS.trim().split(" ").map((t=>t.trim())):this.Y9=[],this.rdt=t[2],this.hdt=null,this.odt=null,this.Tat=!1,"dictionary"===this.Hc&&(this.hdt=t[3],this.odt=t[4],this.Tat=t[8]),this.adt=t[6],this.ldt=null,this.udt=null,this.cdt=null,"reference"===this.Hc&&(this.ldt=t[8],this.udt=t[9],this.cdt=t[10],this.Tat=t[11]),this.fdt=new Ew.ddt(t[5],this)}Hn(){this.sdt=null}idt(){return this.sdt}Nct(){return this.fdt}sct(){return this.ndt}AJ(){return this.PS}zJ(){return this.Y9}DJ(t){if(!this.Y9)return!1;if(!this.Y9.length)return!1;const s=Ew.Jut.Itt(t);return!(!s||!s.length)&&s.every(Ew.Jut.Gtt,this.Y9)}pdt(){return this.adt}mdt(t){this.adt=!!t}gdt(){if("dictionary"===this.Hc)return!0;if("reference"===this.Hc)return!1;throw new Error(`unexpected flowchart node type: ${this.Hc}`)}Cct(){return this.rdt}ydt(){return this.hdt}Sdt(){return this.odt}FI(){return this.Hc}Fet(){return this.Tat}Xct(){return this.ldt}Kct(){return this.udt}Aft(){return this.cdt}}Ew.edt=class{constructor(t,s){this.Kut=s,this.wdt=[],this.vdt=new Map,this.bdt=new Map,this.Mdt=null,Ew.Uut.tdt(this.wdt,t,Hw,this);for(const t of this.wdt){const s=t.sct(),e=t.AJ(),i=t.zJ(),n=t.pdt();if(this.vdt.set(s,t),e)for(const s of i)this.bdt.has(s)||this.bdt.set(s,new Set),this.bdt.get(s).add(t);n&&(this.Mdt=t);const r=t.Nct();for(const t of r.xdt()){const s=t.sct();this.vdt.set(s,t)}}this.Mdt||this.Tdt()}Hn(){this.Kut=null;for(const t of this.wdt)t.Hn();Ew.bh(this.wdt),this.wdt=null}gct(){return this.Kut}Sct(t){return this.vdt.get(t)}Zct(t){if(!t||!t.length)return null;const s=[];for(const e of t.trim().split(" ")){let t=this.bdt.get(e.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce(((t,s)=>s.size<t.size?s:t))].filter((t=>s.every((s=>s.has(t)))))[0]}Qct(){return this.Mdt}*Cdt(){for(const t of this.wdt)yield t}Tdt(){let t=0;for(const s of this.Cdt())s.pdt()&&t++;if(0===t){for(const t of this.Cdt())if(t.gdt()&&!t.pdt())return void t.mdt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.Cdt())s.gdt()&&(s.pdt()&&t?t=!1:s.pdt()&&!t&&s.mdt(!1))}}for(const t of this.Cdt())if(t.gdt()&&t.pdt())return void(this.Mdt=t)}}}{const Jw=self._s,qw=0,Yw=1,Xw=2,Kw=3,Zw=4,Qw=5;class tv{constructor(t,s){this.fdt=s,this.ndt=t[0],this.Yn=t[1],this.Mrt=t[2],this.Idt=t[3],this.Tat=t[4],this._dt=t[5]}Hn(){this.fdt=null}Nct(){return this.fdt}sct(){return this.ndt}Pc(){return this.Yn}qit(){return this.Mrt}qct(){return this.Idt}Fet(){return this.Tat}Gdt(){return this._dt}}Jw.ddt=class{constructor(t,s){this.Pdt=s,this.Adt=[],this.Rdt=new Map,Jw.Uut.tdt(this.Adt,t,tv,this),this.Edt=this.Adt.filter((t=>t.Fet()));for(const t of this.Edt)this.Rdt.set(t.Pc(),t)}Hn(){this.Pdt=null;for(const t of this.Adt)t.Hn();Jw.bh(this.Adt),this.Adt=null,Jw.bh(this.Edt),this.Edt=null}Odt(){return this.Pdt}kct(){return this.Edt.length}Vct(){return this.Edt}Dft(t){return this.Rdt.get(t)}Wct(){for(const t of this.Edt)if(t.Gdt())return t}*xdt(){for(const t of this.Edt)yield t}}}{const sv=self._s;sv.Fdt=class extends sv.jn{constructor(t){super(),this.Ddt=t,this.Ldt=[],this.Ldt.push(sv.zn(sv.kdt,this)),this.GS=0,this.Ndt=this.Ldt[0]}Hn(){for(const t of this.Ldt)t.Hn();sv.bh(this.Ldt),this.Ndt=null,this.Ddt=null}Wj(){return this.Ddt}DW(){return this.Ndt}Bdt(){return this.Ldt[this.GS-1]}Pu(){this.DW().Pu()}$dt(){const t=this.Ldt,s=++this.GS;if(s===t.length){const s=sv.zn(sv.kdt,this);t.push(s),this.Ndt=s}else{const e=t[s];e.Bf(),this.Ndt=e}}Wdt(){const t=this.Ldt,s=++this.GS;s===t.length&&t.push(sv.zn(sv.kdt,this));const e=t[s];e.rd(t[s-1]),this.Ndt=e}WY(){this.Ndt=this.Ldt[--this.GS]}Vdt(t){const s=this.Ldt;for(let e=0,i=s.length;e<i;++e)s[e].Vdt(t)}}}{const ev=self._s;ev.kdt=class extends ev.jn{constructor(t){super(),this.Ldt=t,this.Ddt=this.Ldt.Wj(),this.jdt=this.Ddt.$B().Qk(),this.Udt=!0,this.FZ=[],this.zdt=[]}Hn(){this.Hdt(),this.Ldt=null,this.Ddt=null,this.jdt=null}Hdt(){ev.bh(this.FZ),ev.bh(this.zdt)}Wj(){return this.Ddt}Jdt(){return this.Udt}qdt(){return this.Udt?!!this.Ddt.NW():!!this.FZ.length}FW(){return this.Udt?this.Ddt.FW():this.FZ}Ydt(){return!!this.zdt.length}Xdt(){return this.zdt}Kdt(){const t=this.FW();return t.length?t:this.zdt}Bf(){this.Udt=!0,ev.bh(this.zdt)}Pu(){this.Udt=!0}rd(t){t.Jdt()?this.Bf():(this.Udt=!1,ev.Ch(this.FZ,t.FZ),ev.bh(this.zdt))}Zdt(t){this.FZ.push(t)}Qdt(t){this.zdt.push(t)}tpt(t){this.Udt=!!t}spt(){return this.FZ}ept(){return this.zdt}ipt(t){this.Udt=!1,ev.bh(this.FZ),this.FZ.push(t)}npt(t){this.Udt=!1,ev.Ch(this.FZ,t)}rpt(t){this.Udt=!1,ev.bh(this.FZ);for(const s of t)this.FZ.push(s)}hpt(t,s){for(const e of s)t.has(e)||this.zdt.push(e)}opt(t){for(const s of t)this.FZ.push(s);ev.Ah(this.zdt,t)}apt(){ev.bh(this.zdt)}lpt(t){if(t)if(this.jdt.PY().Hk().upt()){this.Jdt()&&(ev.bh(this.FZ),ev.Ch(this.zdt,t.Wj().FW()),this.Udt=!1);const s=this.zdt.indexOf(t);-1!==s&&(this.FZ.push(this.zdt[s]),this.zdt.splice(s,1))}else this.ipt(t)}Vdt(t){ev.Ah(this.FZ,t),ev.Ah(this.zdt,t)}}}{const iv=self._s;iv.cpt=class extends iv.jn{constructor(t){super(),this.fpt=t,this.Nc=this.fpt.$B(),this.Ldt=[],this.Ldt.push(iv.zn(iv.dpt,this,null)),this.GS=0,this.ppt=[]}Hn(){for(const t of this.Ldt)t.Hn();iv.bh(this.Ldt),iv.bh(this.ppt),this.fpt=null,this.Nc=null}$k(){return this.fpt}$B(){return this.Nc}PY(){return this.Ldt[this.GS]}mpt(){return this.Ldt}gpt(){return this.GS}AY(t){const s=this.Ldt,e=++this.GS;if(e===s.length){const e=iv.zn(iv.dpt,this,t);return s.push(e),e}{const i=s[e];return i.Bf(t),i}}WY(){--this.GS}ypt(t){this.ppt.push(t)}Spt(){this.ppt.pop()}Zk(){const t=this.ppt;return 0===t.length?null:t.at(-1)}}}{const nv=self._s;nv.dpt=class extends nv.jn{constructor(t,s){super(),this.Ldt=t,this.Nc=this.Ldt.$B(),this.wpt=s,this.vpt=0,this.bpt=0,this.Mpt=!1,this.xpt=!1,this.Tpt=null,this.Cpt=0,this.Ipt=0,this._pt=null}Hn(){this.Bf(null),this.Ldt=null,this.Nc=null}Bf(t){this.wpt=t,this.vpt=0,this.bpt=0,this.Mpt=!1,this.xpt=!1,this._pt=null}Gpt(t,s){this.wpt=t,this.vpt=0,this.bpt=s}Ppt(){this.vpt=0,this.bpt=0}Hk(){return this.wpt}Apt(t){this.wpt=t}Rpt(){return this.vpt}Ept(t){this.vpt=t}Opt(){return this.bpt}Fpt(t){this.bpt=t}Dpt(t){this.Mpt=!!t}Lpt(){return this.Mpt}kpt(t){this.xpt=!!t}Npt(){return this.xpt}Bpt(t){this.Tpt=t}$pt(){return this.Tpt}Wpt(t,s){this.Cpt=t,this.Ipt=s}tN(){return this.Cpt}sN(t){this.Ipt=t}Vpt(){return this.Ipt}jpt(){const t=this.wpt;return!!t.Upt()||this.vpt<t.zpt()-1&&!!t.GY().length}Hpt(t){this._pt=t}Jpt(){return this._pt}}}{const rv=self._s;rv.qpt=class extends rv.jn{constructor(t){super(),this.fpt=t,this.Nc=this.fpt.$B(),this.Ldt=[],this.GS=-1,this.Ndt=null,this.Ypt=[]}Hn(){rv.bh(this.Ldt),this.fpt=null,this.Nc=null}Xpt(t){this.Ypt=t;const s=this.Ypt.slice(0);this.Ldt.push(s),this.GS=0,this.Ndt=s}$k(){return this.fpt}$B(){return this.Nc}Kpt(){return this.Ndt}AY(){const t=++this.GS,s=this.Ldt;t===s.length?s.push(this.Ypt.slice(0)):rv.Ch(s[t],this.Ypt),this.Ndt=s[t]}WY(){this.Ndt=this.Ldt[--this.GS]}}}{const hv=self._s;hv.Zpt=class extends hv.jn{constructor(t){super(),this.fpt=t,this.Nc=this.fpt.$B(),this.Ldt=[],this.GS=-1}Hn(){hv.bh(this.Ldt),this.fpt=null,this.Nc=null}$k(){return this.fpt}$B(){return this.Nc}Qpt(){return this.GS>=0}Kpt(){return this.Ldt[this.GS]}AY(){if(++this.GS,this.GS===this.Ldt.length){const t=hv.zn(hv.tmt,this);return this.Ldt.push(t),t}{const t=this.Ldt[this.GS];return t.Bf(),t}}WY(){--this.GS}smt(t){const s=this.Ldt;for(let e=this.GS;e>=0;--e){const i=s[e];if(i.Pc()===t)return i}return null}emt(){return this.Ldt.slice(0,this.GS+1)}}}{const ov=self._s;ov.tmt=class extends ov.jn{constructor(t){super(),this.imt=t,this.Yn="",this.GS=0,this.nmt=!1,this.rmt=NaN}Bf(){this.Yn="",this.GS=0,this.nmt=!1,this.rmt=NaN}EY(t){this.Yn=t}Pc(){return this.Yn}NY(t){this.GS=t}tk(){return this.GS}OJ(){this.nmt=!0}$Y(){return this.nmt}hmt(t){this.rmt=t}omt(){return this.rmt}}}{const av=self._s;av.amt=class extends av.jn{constructor(){super(),this.Ldt=[],this.GS=-1}Hn(){av.bh(this.Ldt)}Kpt(){return this.Ldt[this.GS]}AY(){if(++this.GS,this.GS===this.Ldt.length){const t=[];return this.Ldt.push(t),t}return this.Ldt[this.GS]}WY(){--this.GS}}}{let lv=function(t,s){return t.tk()-s.tk()},uv=function(t,s){for(let e=0,i=t.length;e<i;++e)if(t[e]!==s[e])return!1;return!0};SortSolArray=lv,IsSolArrayIdentical=uv;const cv=self._s,fv=self.assert;cv.lmt=class extends cv.jn{constructor(t){super(),this.Nc=t,this.umt=[],this.cmt=new Map,this.fmt=[],this.dmt=new Map,this.pmt=new Map,this.mmt=new Map,this.gmt=new Map,this.ymt=new Map,this.Smt=new Map,this.wmt=0,this.vmt=[],this.bmt=[],this.Mmt=[],this.xmt=new Map,this.Tmt=new Map,this.jdt=cv.zn(cv.cpt,this),this.Cmt=cv.zn(cv.qpt,this),this.imt=cv.zn(cv.Zpt,this),this.Imt=[],this._mt=[],this.Gmt=[],this.Pmt=0,this.Amt=0,this.Rmt=0,this.Emt=[],this.Omt=[],this.Fmt=[],this.Dmt=new Map,this.Lmt=new Map,self.c3_callFunction=(t,s)=>this.kmt(t,s)}Hn(){this.b4(),this.jdt.Hn(),this.jdt=null,this.Cmt.Hn(),this.Cmt=null,cv.bh(this._mt),cv.bh(this.Gmt),this.Nc=null,cv.bh(this.umt),this.cmt.clear()}RC(t){const s=cv.zn(cv.Nmt,this,t);this.umt.push(s),this.cmt.set(s.Pc().toLowerCase(),s)}Bmt(t){this.Imt.push(t)}$mt(){for(const t of this.Tmt.values())t.Wmt();for(const t of this.xmt.values())t.$mt();for(const t of this.Tmt.values())t.$mt();for(const t of this.umt)t.$mt();for(const t of this.umt)t.z5();for(const t of this.Imt)t.$mt(!1);cv.bh(this.Imt),this.Cmt.Xpt(this.Mmt)}$B(){return this.Nc}U5(t){return this.cmt.get(t.toLowerCase())||null}Vmt(t){this.fmt.push(t),this.dmt.set(t.jmt(),t)}Umt(t){this.pmt.set(t.U0(),t)}zmt(t){this.mmt.set(t.U0(),t)}Hmt(t){this.gmt.set(t.U0(),t)}Jmt(t){switch(t.qmt()){case 0:this.xmt.set(t.Ymt().toLowerCase(),t);break;case 1:this.Tmt.set(t.Ymt().toLowerCase(),t)}}Xmt(t){this.Smt.set(t.U0(),t),t.x0()?this.vmt.push(t):this.bmt.push(t)}Kmt(t){t.length>=2&&t.sort(lv);let s=this.ymt.get(t.length);s||(s=[],this.ymt.set(t.length,s));for(let e=0,i=s.length;e<i;++e){const i=s[e];if(uv(t,i))return i}return s.push(t),t}Zmt(t){return this.Mmt.push(t.Qmt()),this.wmt++}Qk(){return this.jdt}tgt(){return this.Qk().PY()}Hk(){return this.tgt().Hk()}sgt(){const t=this.tgt();return t.Hk().egt(t.Rpt())}igt(){const t=this.tgt();return t.Hk().ngt(t.Opt())}rgt(){return this.Cmt}RY(){return this.imt}hgt(t){const s=[];for(t=t.ogt();t;)cv.On(s,t.agt()),t=t.ogt();return s}lgt(t){const s={};for(const e of this.hgt(t))s[e.ugt()]=e.cgt();return Object.create(Object.prototype,s)}fgt(t){return this.Smt.get(t)||null}dgt(t){return this.pmt.get(t)||null}pgt(t){return this.mmt.get(t)||null}mgt(t){return this.gmt.get(t)||null}Wk(t){return this.xmt.get(t.toLowerCase())||null}ggt(t,s){let e=this.Tmt.get((t.Pc()+"."+s).toLowerCase());if(e)return e;if(!t.k0())for(const i of t.qW())if(e=this.Tmt.get((i.Pc()+"."+s).toLowerCase()),e)return e;return null}ygt(){return this.vmt}Sgt(){return this.bmt}wgt(t){for(const t of this.vmt)t.vgt();if(t)for(const t of this.bmt)t.FT()&&t.vgt()}bgt(t){return this.dmt.get(t.toLowerCase())||null}Mgt(t){const s=this.pmt.get(t);return s&&s.xgt()?s:null}Tgt(){return this.fmt}Cgt(){for(const t of this.fmt)t.Igt()}_gt(){for(const t of this.umt)t.Ggt()}Pgt(t){this._gt(),this.Pmt++;for(const s of t.t6()){const t=s.y5();t&&(this.Nc.Agt(s),t.tP(),this.Nc.Rgt())}this.Pmt--}async Egt(t){this._gt(),this.Pmt++;for(const s of this.Ogt(t))await this.Nc.Fgt(s);this.Pmt--}*Ogt(t){for(const s of t.t6()){const t=s.y5();t&&(this.Nc.Agt(s),yield*t.Dgt(),this.Nc.Rgt())}}Lgt(t,s,e,i){let n=!1;if(!t.jN())return this.kgt(s,e,i);this.Amt++;for(const r of t.t6()){const t=r.y5();if(!t)continue;this.Nc.Agt(r);for(const r of t.Ngt()){const t=r.Lgt(s,e,i);n=n||t}const h=t.Lgt(s,e,i);n=n||h,this.Nc.Rgt()}return this.Amt--,n}*Bgt(t,s,e,i){let n=!1;if(!t.jN())return this.kgt(s,e,i);this.Amt++;for(const r of t.t6()){const t=r.y5();if(!t)continue;this.Nc.Agt(r);for(const r of t.Ngt()){const t=yield*r.Bgt(s,e,i);n=n||t}const h=yield*t.Bgt(s,e,i);n=n||h,this.Nc.Rgt()}return this.Amt--,n}kgt(t,s,e){return this._mt.push([t,s,e]),!1}$gt(t,s,e){let i=null;const n=new Promise((t=>i=t));return this.Gmt.push([t,s,e,i]),n}*Wgt(){if(this.Nc.Vgt())throw new Error("should not be in breakpoint");const t=this.Nc.HN();for(;this.Gmt.length;){const[s,e,i,n]=this.Gmt.shift();n(yield*this.Bgt(t,s,e,i))}}async jgt(){for(const t of this.Wgt())await this.Nc.Fgt(t)}Ugt(t,s,e,i){let n=!1;const r=t.jN(),h=r.y5();if(!h)return;this.Amt++,this.Nc.Agt(r);const o=h.Ngt();for(let t=0,r=o.length;t<r;++t){const r=o[t].Ugt(s,e,i);n=n||r}const a=h.Ugt(s,e,i);return n=n||a,this.Nc.Rgt(),this.Amt--,n}*zgt(t,s,e,i){let n=!1;const r=t.jN(),h=r.y5();if(!h)return;this.Amt++,this.Nc.Agt(r);const o=h.Ngt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].zgt(s,e,i);n=n||r}const a=yield*h.zgt(s,e,i);return n=n||a,this.Nc.Rgt(),this.Amt--,n}Hgt(){return this.Amt}Jgt(){return this.Hgt()>0}qgt(){return++this.Amt}Ygt(){--this.Amt}Xgt(){return this.Pmt>0}UW(){return this.Xgt()||this.Jgt()}c4(t){for(const[s,e,i]of this._mt)this.Lgt(t,s,e,i);cv.bh(this._mt)}VW(t){t?this.Rmt++:this.Rmt--}qj(){return this.Rmt>0}Kgt(t){for(let s=0,e=t.length;s<e;++s)t[s].Zgt().Pu()}Qgt(t){for(let s=0,e=t.length;s<e;++s)t[s].Zgt().$dt()}DY(t){for(let s=0,e=t.length;s<e;++s)t[s].Zgt().Wdt()}kY(t){for(let s=0,e=t.length;s<e;++s)t[s].Zgt().WY()}Jk(t){const s=new Set,e=this.jdt.mpt(),i=this.jdt.gpt();for(let n=0;n<=i;++n){const i=e[n].Jpt();if(i)for(const e of i)t&&t.has(e)||s.add(e)}return s}tyt(t){const s=new Set([...t]),e=this.Jk(s);if(e.size>0){for(const t of e)t.Zgt().$dt();return[...e]}return null}syt(){const t=cv.zn(cv.eyt,this);return this.Emt.push(t),t}iyt(){return this.Emt}nyt(){if(!this.Emt.length)return;const t=this.tgt();let s=!1;this.Pmt++;for(let e=0,i=this.Emt.length;e<i;++e){const i=this.Emt[e];i.ryt()&&i.hyt(t),i.oyt()&&(s=!0)}s&&(this.ayt(),t.Bf(null)),this.Pmt--}async lyt(){if(!this.Emt.length)return;const t=this.tgt();let s=!1;this.Pmt++;for(let e=0,i=this.Emt.length;e<i;++e){const i=this.Emt[e];i.ryt()&&await i.uyt(t),i.oyt()&&(s=!0)}s&&(this.ayt(),t.Bf(null)),this.Pmt--}ayt(){const t=cv.Ph(this.Emt,(t=>t.oyt()));for(const s of t)s.Hn()}b4(){for(const t of this.Emt)t.Hn();cv.bh(this.Emt)}cyt(t){for(const s of this.Emt)s.Vdt(t);for(const s of t){const t=this.Lmt.get(s);if(this.Lmt.delete(s),t)for(const{resolve:s}of t.fyt.values())s(!0)}}dyt(t){this.Omt.push({promise:t,pyt:this.Hgt()})}myt(){cv.bh(this.Omt)}gyt(){const t=this.Hgt(),s=Promise.all(this.Omt.filter((s=>s.pyt===t)).map((t=>t.promise)));return this.Omt=this.Omt.filter((s=>s.pyt<t)),s}eN(t){const s=t.toLowerCase();this.Fmt.push(s),this.Nc.xU(cv.EB.RB.AB.yyt,null),this.Fmt.pop();for(const t of this.Nc.$k().iyt())t.Syt()&&t.wyt()===s&&t.vyt();const e=this.Dmt.get(s);e&&(e.resolve(),this.Dmt.delete(s))}nN(t){const s=t.toLowerCase(),e=this.Dmt.get(s);if(e)return e.promise;{let t=null;const e=new Promise((s=>t=s));return this.Dmt.set(s,{promise:e,resolve:t}),e}}byt(){if(0===this.Fmt.length)throw new Error("not in a signal");return this.Fmt.at(-1)}Myt(t){let s=this.Lmt.get(t);return s||(s={xyt:[],fyt:new Map},this.Lmt.set(t,s)),s}dU(t,s){const e=this.Myt(t),i=s.toLowerCase();e.xyt.push(i),this.Nc.xU(t.MW().Cyt().AB.Tyt,t),e.xyt.pop();for(const s of this.Nc.$k().iyt())s.Iyt()&&s.wyt()===i&&s._yt(t);const n=e.fyt.get(i);n&&(n.resolve(!1),e.fyt.delete(i)),0===e.xyt.length&&0===e.fyt.size&&this.Lmt.delete(t)}pU(t,s){const e=this.Myt(t),i=s.toLowerCase(),n=e.fyt.get(i);if(n)return n.promise;{let t=null;const s=new Promise((s=>t=s));return e.fyt.set(i,{promise:s,resolve:t}),s}}Gyt(t){const s=this.Myt(t);if(!s||0===s.xyt.length)throw new Error("not in a signal");return s.xyt.at(-1)}v3(){return{groups:this.Pyt(),cnds:this.Ayt(),acts:this.Ryt(),vars:this.Eyt(),waits:this.Oyt()}}b3(t){this.Fyt(t.groups),this.Dyt(t.cnds),this.Lyt(t.acts),this.kyt(t.vars),this.Nyt(t.waits)}Pyt(){const t={};for(const s of this.Tgt())t[s.U0().toString()]=s.Byt();return t}Fyt(t){for(const[s,e]of Object.entries(t)){const t=parseInt(s,10),i=this.Mgt(t);i&&i.$yt(e)}}Ayt(){const t={};for(const[s,e]of this.mmt){const i=e.v3();i&&(t[s.toString()]=i)}return t}Dyt(t){const s=new Map;for(const[e,i]of Object.entries(t))s.set(parseInt(e,10),i);for(const[t,e]of this.mmt)e.b3(s.get(t)||null)}Ryt(){const t={};for(const[s,e]of this.gmt){const i=e.v3();i&&(t[s.toString()]=i)}return t}Lyt(t){const s=new Map;for(const[e,i]of Object.entries(t))s.set(parseInt(e,10),i);for(const[t,e]of this.gmt)e.b3(s.get(t)||null)}Eyt(){const t={};for(const[s,e]of this.Smt)e.Wyt()||!e.x0()&&!e.FT()||(t[s.toString()]=e.qit());return t}kyt(t){for(const[s,e]of Object.entries(t)){const t=parseInt(s,10),i=this.fgt(t);i&&i.Ant(e)}}Oyt(){return this.Emt.filter((t=>!t.Vyt())).map((t=>t.v3()))}Nyt(t){this.b4();for(const s of t){const t=cv.eyt.jyt(this,s);t&&this.Emt.push(t)}}Uyt(){return[...this.Nc.HN().t6()].map((t=>t.y5())).filter((t=>t)).map((t=>t.zyt()))}Hyt(t){for(;t;){const s=t.ogt();if(s instanceof cv.Jyt)return s;t=s}return null}kmt(t,s){Array.isArray(s)||(s=[]);const e=this.Wk(t.toLowerCase());if(!e)return null;if(!e.Iu())return e.Vk();const i=e.qyt();if(s.length<i.length){s=s.slice(0);do{s.push(i[s.length].Qmt())}while(s.length<i.length)}const n=e.Uk();return n.qk(n.zk(),!1,e.Xk(),e.Vk(),...s)}}}{const dv=self._s;dv.Nmt=class extends dv.jn{constructor(t,s){super(),this.fpt=t,this.Nc=t.$B(),this.Yn=s[0],this.Yyt=[],this.Xyt=new Map,this.Kyt=new Map,this.Zyt=new Map,this.Qyt=!1,this.tSt=[],this.sSt=[],this.eSt=new Set;for(const t of s[1])this.iSt(t,null,this.Yyt);this.nSt=this.Nc.RU()?{type:"sheet",name:this.Yn,rSt:0,children:[]}:null}Hn(){this.fpt=null,this.Nc=null}iSt(t,s,e){switch(t[0]){case 0:case 3:this.hSt(t,s,e);break;case 1:this.oSt(t,s,e);break;case 2:this.aSt(t,s,e);break;case 4:this.lSt(t,s);break;case 5:this.uSt(t,s,e);break;case 6:this.cSt(t,s);break;default:throw new Error("invalid event type")}}hSt(t,s,e){const i=dv.fSt.RC(this,s,t);if(i.upt()){e.push(i);const t=i.dSt();for(let s=0,e=t.length;s<e;++s)t[s].pSt()&&this.mSt(i,s)}else i.pSt()?this.mSt(i,0):e.push(i)}lSt(t,s){const e=dv.Jyt.gSt(this,s,t);this.fpt.Jmt(e)}cSt(t,s){const e=dv.Jyt.ySt(this,s,t);this.fpt.Jmt(e)}oSt(t,s,e){const i=dv.SSt.RC(this,s,t);e.push(i)}aSt(t,s,e){const i=dv.wSt.RC(this,s,t);e.push(i)}uSt(t,s,e){const i=dv.vSt.RC(this,s,t);e.push(i)}mSt(t,s){t.upt()||this.fpt.Bmt(t);const e=t.egt(s),i=e.bSt(),n=e.Wj();if(e.MSt()){let r=this.Kyt.get(n);r||(r=new Map,this.Kyt.set(n,r));const h=e.xSt().toLowerCase();let o=r.get(i);o||(o=new Map,r.set(i,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.Xyt.get(n);r||(r={TSt:new Map,CSt:new Map},this.Xyt.set(n,r));const h=e.WH();let o;h?(o=r.CSt.get(h),o||(o=new Map,r.CSt.set(h,o))):o=r.TSt;let a=o.get(i);a||(a=[],o.set(i,a)),a.push([t,s])}}$mt(){const t=this.Yyt;for(let s=0,e=t.length;s<e;++s){const i=s<e-1&&t[s+1]instanceof dv.fSt&&t[s+1].ISt();t[s].$mt(i)}}_St(t){this.tSt.push(t)}z5(){dv.bh(this.sSt),this.GSt(this),this.eSt.clear()}GSt(t){const s=t.sSt,e=t.eSt;for(const i of this.tSt){const n=i.PSt();i.ASt()&&t!==n&&!e.has(n)&&(e.add(n),n.GSt(t),s.push(n))}}Ngt(){return this.sSt}$k(){return this.fpt}$B(){return this.Nc}Pc(){return this.Yn}RSt(t,s){this.Zyt.set(s,t)}ESt(t){return this.Zyt.get(t)||null}Ggt(){this.Qyt=!1}tP(){if(this.Qyt)return;const t=this.Nc,s=t.OSt(),e=s?performance.now():0;this.Qyt=!0;const i=this.$k(),n=i.tgt();for(const s of this.Yyt)s.tP(n),i.Kgt(s.GY()),i.myt(),t.HW();n.Bf(null),s&&(this.nSt.rSt+=performance.now()-e)}*Dgt(){if(this.Qyt)return;this.Qyt=!0;const t=this.Nc,s=this.$k(),e=s.tgt();for(const i of this.Yyt)yield*i.Dgt(e),s.Kgt(i.GY()),s.myt(),t.HW();e.Bf(null)}Lgt(t,s,e){if(!s)return this.FSt(t,s,null,null);{const i=s.Wj();let n=!1,r=this.FSt(t,s,i,e);n=n||r;for(const h of i.qW())r=this.FSt(t,s,h,e),n=n||r}}FSt(t,s,e,i){const n=this.Xyt.get(e);if(!n)return!1;const r=i?n.CSt.get(i):n.TSt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,e]of h){const i=this.DSt(s,t,e);o=o||i}return o}*Bgt(t,s,e){if(!s)return yield*this.LSt(t,s,null,null);{const i=s.Wj();let n=!1,r=yield*this.LSt(t,s,i,e);n=n||r;for(const h of i.qW())r=yield*this.LSt(t,s,h,e),n=n||r}}*LSt(t,s,e,i){const n=this.Xyt.get(e);if(!n)return!1;const r=i?n.CSt.get(i):n.TSt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,e]of h){let i;i=t.kSt()?this.DSt(s,t,e):yield*this.NSt(s,t,e),o=o||i}return o}Ugt(t,s,e){const i=s.Wj(),n=this.Kyt.get(i);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(e);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],e=this.DSt(null,s[0],s[1]);o=o||e}return o}*zgt(t,s,e){const i=s.Wj(),n=this.Kyt.get(i);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(e);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],e=s[0],i=s[1];let n;n=e.kSt()?this.DSt(null,e,i):yield*this.NSt(null,e,i),o=o||n}return o}DSt(t,s,e){const i=this.Nc,n=this.fpt,r=n.Hk(),h=n.Qk(),o=n.Hgt();let a=!1;r&&n.Qgt(r.zk()),n.Qgt(s.zk());const l=o>1;l&&n.rgt().AY();const u=h.AY(s);t&&(s.dSt()[e].Wj().DW().ipt(t),t.Zj()&&t.BSt());let c=!0;if(s.Fz()){const t=s.$St();for(let s=0,e=t.length;s<e;++s)if(!t[s].WSt(u)){c=!1;break}}return c&&(s.upt()?s.VSt(u,e):s.tP(u),a=u.Lpt()),h.WY(),l&&n.rgt().WY(),n.kY(s.zk()),r&&n.kY(r.zk()),r||1!==o||(n.myt(),n.qj()||i.HW()),a}*NSt(t,s,e){const i=this.Nc,n=this.fpt,r=n.Hk(),h=n.Qk(),o=n.Hgt();let a=!1;r&&n.Qgt(r.zk()),n.Qgt(s.zk());const l=o>1;l&&n.rgt().AY();const u=h.AY(s);t&&(s.dSt()[e].Wj().DW().ipt(t),t.Zj()&&t.BSt());let c=!0;if(s.Fz()){const t=s.$St();for(let s=0,e=t.length;s<e;++s)if(!(yield*t[s].jSt(u))){c=!1;break}}return c&&(s.upt()?yield*s.USt(u,e):yield*s.Dgt(u),a=u.Lpt()),h.WY(),l&&n.rgt().WY(),n.kY(s.zk()),r&&n.kY(r.zk()),r||1!==o||(n.myt(),n.qj()||i.HW()),a}zyt(){return this.nSt}}}{let pv=function(t,s){return!0};NoActions=pv;const mv=self._s,gv=[];function*yv(t,s){return!0}mv.fSt=class extends mv.jn{constructor(t,s,e){super(),this.F3=t,this.Nc=t.$B(),this.zSt=s,this.HSt=null,this.jdt=this.Nc.$k().Qk(),this.JSt=[],this.qSt=[],this.YSt=!1,this.XSt=!1,this.KSt=!1,this.ZSt=!1,this.QSt=!!e[2],this.twt=!1,this.swt=null,this.ewt=[],this.Irt=[],this.iwt=[],this.nwt=pv,this.rwt=yv,this.hwt=!1,this.owt=!1,this.awt="",this.lwt=!1,this.uwt=null,this.nSt=null,this.dQ=e[4],this.cwt=e[5],this.F3.RSt(this,this.cwt),this.fwt=this.Nc.RU()?{dwt:e[3][0],pwt:e[3][1],mwt:!1,gwt:!1,ywt:!1,Swt:!1}:null,this.$k().Umt(this),3===e[0]&&this.wwt(e[1]);let i=0;for(const t of e[6]){const s=mv.vwt.RC(this,t,i++);this.ewt.push(s),this.bwt(s.Wj())}i=0;for(const t of e[7]){const s=mv.Mwt.RC(this,t,i++);this.Irt.push(s)}if(9===e.length){const t=e[8];for(const s of t)this.F3.iSt(s,this,this.iwt)}this.ewt.length&&(this.twt=null===this.ewt[0].Wj()&&this.ewt[0].bSt()===mv.EB.RB.AB.xwt),0===this.ewt.length&&(this.ewt=gv),0===this.Irt.length&&(this.Irt=gv),0===this.iwt.length&&(this.iwt=gv)}static RC(t,s,e){return mv.zn(mv.fSt,t,s,e)}wwt(t){this.hwt=!0,this.owt=!!t[0],this.lwt=this.owt,this.awt=t[1].toLowerCase(),this.uwt=[],this.$k().Vmt(this),this.Nc.RU()&&(this.nSt={type:"group",name:t[1],rSt:0,children:[]})}Twt(t){this.uwt.push(t)}Cwt(t,s){for(const e of t.A5().sV())s.includes(e)||s.push(e)}Iwt(t,s){if(t)if(s.includes(t)||s.push(t),t.k0())for(const e of t.tV())e.Zj()&&this.Cwt(e,s);else t.Zj()&&this.Cwt(t,s)}bwt(t){this.Iwt(t,this.JSt)}_wt(t){this.Iwt(t,this.qSt)}Gwt(){this.JSt=this.Nc.L0()}$mt(t){this.ZSt=!!t,this.Pwt(),this.Awt();for(const t of this.ewt)t.$mt();if(this.Irt.length>0){let t=!1;for(const s of this.Irt)s.$mt(),s.Rwt()&&(t=!0);t?(this.nwt=this.Ewt,this.rwt=this.Owt):(this.nwt=this.Fwt,this.rwt=this.Dwt)}const s=this.iwt;for(let t=0,e=s.length;t<e;++t){const i=t<e-1&&s[t+1]instanceof mv.fSt&&s[t+1].ISt();s[t].$mt(i)}this.fwt&&this.Lwt(),this.nSt&&this.kwt().zyt().children.push(this.nSt)}zyt(){return this.nSt}kwt(){let t=this.Fz();for(;t;){if(t.xgt())return t;t=t.Fz()}return this.F3}Lwt(){const t=this.fwt;t.mwt=this.ewt.every((t=>t.kSt())),t.gwt=this.Irt.every((t=>t.kSt())),t.ywt=this.iwt.every((t=>t.kSt())),t.Swt=t.mwt&&t.gwt&&t.ywt}Nwt(){let t=this;do{t.Lwt(),t=t.Fz()}while(t)}Pwt(){if(!this.xgt())return;let t=this.Fz();for(this.KSt=!0;t;){if(!t.xgt()){this.KSt=!1;break}t=t.Fz()}}Bwt(){const t=this.Nc.L0();if(this.JSt===t)this.qSt=t;else{this.qSt=mv.Oh(this.JSt);let t=this.Fz();for(;t;){for(const s of t.JSt)this._wt(s);t=t.Fz()}const s=this.$k();this.JSt=s.Kmt(this.JSt),this.qSt=s.Kmt(this.qSt)}}Awt(){if(!this.$wt())return;this.swt=[];let t=this.Fz();for(;t;)this.swt.push(t),t=t.Fz();this.swt.reverse()}Wwt(){this.XSt=!0,this.zSt&&this.zSt.Wwt()}Upt(){return this.XSt}GY(){return this.JSt}zk(){return this.YSt||(this.YSt=!0,this.Bwt()),this.qSt}Vwt(t){return this.JSt.includes(t)}$St(){return this.swt}y5(){return this.F3}$k(){return this.F3.$k()}$B(){return this.Nc}Fz(){return this.zSt}jwt(t){this.HSt=t}ogt(){return this.HSt||this.zSt}Uwt(){return this.cwt}zwt(){return this.fwt&&this.fwt.pwt}Hwt(){return this.zwt()&&this.fwt.dwt}Jwt(t){this.fwt.dwt=!!t,this.Nwt()}xgt(){return this.hwt}qwt(){return this.KSt}ISt(){return this.twt}Ywt(){return this.ZSt}jmt(){return this.awt}Byt(){return this.lwt}Igt(){this.$yt(this.owt)}$yt(t){if(t=!!t,!this.hwt)throw new Error("not a group");if(this.lwt!==t){this.lwt=t;for(const t of this.uwt)t.Xwt();if(this.uwt.length){const t=this.Nc.lB().y5();t&&t.z5()}}}U0(){return this.dQ}upt(){return this.QSt}pSt(){return this.ewt.length&&this.ewt[0].pSt()}Kwt(){return this.HSt&&this.HSt instanceof mv.Jyt}$wt(){return this.Kwt()||this.ewt.some((t=>t.pSt()))}dSt(){return this.ewt}zpt(){return this.ewt.length}egt(t){if((t=Math.floor(t))<0||t>=this.ewt.length)throw new RangeError("invalid condition index");return this.ewt[t]}Zwt(t){return this.egt(t)}Qwt(t){let s=t.tk();if(0===s)return!0;--s;const e=t.tvt()?t.svt():t.Wj();for(;s>=0;--s){const t=this.ewt[s];if(e===t.Wj()||t.tvt()&&t.svt()===e)return!1}return!0}evt(){return this.Irt}ivt(){return this.Irt.length}ngt(t){if((t=Math.floor(t))<0||t>=this.Irt.length)throw new RangeError("invalid action index");return this.Irt[t]}nvt(t){t=Math.floor(t);const s=this.Irt.find((s=>s.rvt()===t));if(!s)throw new RangeError("invalid action debug index");return s}hvt(t){return(t=Math.floor(t))>=0&&t<this.Irt.length}ovt(){return this.iwt}agt(){return this.iwt.filter((t=>t instanceof mv.SSt))}WSt(t){t.Apt(this);const s=this.ewt;let e=0===s.length;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(t.Ept(i),n.sJ())throw new Error("trigger cannot be used as sub-event to a loop");if(n.tP())e=!0;else if(!this.QSt)return!1}return!this.QSt||e}VSt(t,s){t.Apt(this),t.Ept(s),this.ewt[s].tP()&&(this.nwt(t,0)&&this.avt(t),t.Dpt(!0))}*jSt(t){t.Apt(this);const s=this.ewt;let e=0===s.length;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(t.Ept(i),n.sJ())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.kSt()?n.tP():yield*n.Dgt(),r)e=!0;else if(!this.QSt)return!1}return!this.QSt||e}*USt(t,s){t.Apt(this),t.Ept(s);const e=this.ewt[s];let i;if(i=e.kSt()?e.tP():yield*e.Dgt(),i){let s;s=this.lvt()?this.nwt(t,0):yield*this.rwt(t,0),s&&(this.uvt()?this.avt():yield*this.cvt()),t.Dpt(!0)}}tP(t){t.Apt(this),this.twt||t.kpt(!1),this.QSt?this.fvt(t):this.dvt(t)}*Dgt(t){(this.Hwt()||this.Nc.pvt())&&(yield this),t.Apt(this),this.twt||t.kpt(!1),this.QSt?yield*this.mvt(t):yield*this.gvt(t)}fvt(t){const s=this.ewt;let e=0===s.length;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(n.pSt())continue;t.Ept(i);const r=n.tP();e=e||r}t.Dpt(e),e&&(this.nwt(t,0)&&this.avt(t),this.ZSt&&t.kpt(!0))}*mvt(t){const s=this.ewt;let e=0===s.length;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(n.pSt())continue;let r;t.Ept(i),r=n.kSt()?n.tP():yield*n.Dgt(),e=e||r}if(t.Dpt(e),e){let s;s=this.lvt()?this.nwt(t,0):yield*this.rwt(t,0),s&&(this.uvt()?this.avt():yield*this.cvt()),this.ZSt&&t.kpt(!0)}}dvt(t){const s=this.ewt;for(let e=0,i=s.length;e<i;++e){const i=s[e];if(t.Ept(e),!i.tP())return void t.Dpt(!1)}t.Dpt(!0),this.nwt(t,0)&&this.avt(t),t.Lpt()&&this.ZSt&&t.kpt(!0)}*gvt(t){const s=this.ewt;for(let e=0,i=s.length;e<i;++e){const i=s[e];let n;if(t.Ept(e),n=i.kSt()?i.tP():yield*i.Dgt(),!n)return void t.Dpt(!1)}let e;t.Dpt(!0),e=this.lvt()?this.nwt(t,0):yield*this.rwt(t,0),e&&(this.uvt()?this.avt():yield*this.cvt()),t.Lpt()&&this.ZSt&&t.kpt(!0)}Fwt(t,s){const e=this.Irt;for(let i=s,n=e.length;i<n;++i){const s=e[i];t.Fpt(i),s.tP()}return!0}*Dwt(t,s){const e=this.Irt;for(let i=s,n=e.length;i<n;++i){const s=e[i];t.Fpt(i),s.kSt()?s.tP():yield*s.Dgt()}return!0}Ewt(t,s){const e=this.$k(),i=this.Irt;for(let n=s,r=i.length;n<r;++n){const s=i[n];t.Fpt(n);const r=s.tP();if(s.yvt()&&!0===r)return!1;s.Svt()&&r instanceof Promise&&e.dyt(r)}return!0}*Owt(t,s){const e=this.$k(),i=this.Irt;for(let n=s,r=i.length;n<r;++n){const s=i[n];let r;if(t.Fpt(n),r=s.kSt()?s.tP():yield*s.Dgt(),s.yvt()&&!0===r)return!1;s.Svt()&&r instanceof Promise&&e.dyt(r)}return!0}wvt(t){this.nwt(t,t.Opt())&&this.avt()}*vvt(t){(yield*this.rwt(t,t.Opt()))&&(yield*this.cvt())}avt(){if(!this.iwt.length)return;const t=this.xgt()&&this.Nc.OSt(),s=t?performance.now():0,e=this.jdt,i=e.AY(this);this.XSt?this.bvt(i):this.Mvt(i),e.WY(),t&&(this.nSt.rSt+=performance.now()-s)}bvt(t){const s=this.hwt,e=this.KSt,i=this.$k(),n=this.iwt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.GY(),l=!e||!s&&r<o;l&&i.DY(a),h.tP(t),l?i.kY(a):i.Kgt(a)}}Mvt(t){const s=this.iwt;for(let e=0,i=s.length;e<i;++e)s[e].tP(t)}*cvt(){if(!this.iwt.length)return;const t=this.jdt,s=t.AY(this);this.XSt?yield*this.xvt(s):yield*this.Tvt(s),t.WY()}*xvt(t){const s=this.hwt,e=this.KSt,i=this.$k(),n=this.iwt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.GY(),l=!e||!s&&r<o;l&&i.DY(a),yield*h.Dgt(t),l?i.kY(a):i.Kgt(a)}}*Tvt(t){const s=this.iwt;for(let e=0,i=s.length;e<i;++e)yield*s[e].Dgt(t)}LY(t,s){s.Ppt();const e=this.ewt;if(!this.upt())for(let i=t.Rpt()+1,n=e.length;i<n;++i){const t=e[i];if(s.Ept(i),!t.tP())return!1}return this.nwt(s,0)&&this.avt(s),!0}*Cvt(t,s){s.Ppt();const e=this.ewt;if(!this.upt())for(let i=t.Rpt()+1,n=e.length;i<n;++i){const t=e[i];let n;if(s.Ept(i),n=t.kSt()?t.tP():yield*t.Dgt(),!n)return!1}let i;return i=this.lvt()?this.nwt(s,0):yield*this.rwt(s,0),i&&(this.uvt()?this.avt():yield*this.cvt()),!0}kSt(){return!this.Hwt()&&!this.Nc.pvt()&&this.fwt.Swt}lvt(){return!this.Nc.pvt()&&this.fwt.gwt}uvt(){return!this.Nc.pvt()&&this.fwt.ywt}Ivt(t){if(this.Fz()){const s=this.$St();for(let e=0,i=s.length;e<i;++e)if(!s[e].WSt(t))return!1}return!0}*_vt(t){if(this.Fz()){const s=this.$St();for(let e=0,i=s.length;e<i;++e)if(!(yield*s[e].jSt(t)))return!1}return!0}Gvt(t,s,e){if(s.length>0)if(e){const e=s.map((t=>t.Hs(0)));t.rgt().AY(),this.HSt.Pvt(e)}else this.HSt.Avt(s);else e&&t.rgt().AY()}Rvt(t,s,e,i){let n,r;const h=t.length>0;let o=null;const a=this.Nc,l=this.jdt,u=a.$k(),c=this.HSt,f=c.Svt(),d=u.qgt()>1;if(this.Gvt(u,s,d),h&&(e?u.DY(t):u.Qgt(t)),null!==i){if(i.Evt){const t=e?i.Evt.DW():i.Evt.Zgt().Bdt(),s=i.Ovt.DW();s.npt(t.FW()),s.apt(),e||i.Ovt.Fvt()}else if(i.Dvt){const t=i.Dvt.DW();t.npt(i.Lvt),t.apt()}i.kvt&&(o=u.tyt(t))}const p=l.AY(this);return e&&p.Hpt(t),this.Ivt(p)&&(p.Apt(this),f&&([r,n]=c.Nvt()),this.dvt(p),f&&c.Bvt(r)),l.WY(),d&&u.rgt().WY(),null!==o&&u.kY(o),h&&u.kY(t),u.Ygt(),n}*$vt(t,s,e,i){let n,r;(this.Hwt()||this.Nc.pvt())&&(yield this);const h=t.length>0;let o=null;const a=this.Nc,l=this.jdt,u=a.$k(),c=this.HSt,f=c.Svt(),d=u.qgt()>1;if(this.Gvt(u,s,d),h&&(e?u.DY(t):u.Qgt(t)),null!==i){if(i.Evt){const t=e?i.Evt.DW():i.Evt.Zgt().Bdt(),s=i.Ovt.DW();s.npt(t.FW()),s.apt(),e||i.Ovt.Fvt()}else if(i.Dvt){const t=i.Dvt.DW();t.npt(i.Lvt),t.apt()}i.kvt&&(o=u.tyt(t))}const p=l.AY(this);return e&&p.Hpt(t),(yield*this._vt(p))&&(p.Apt(this),f&&([r,n]=c.Nvt()),yield*this.gvt(p),f&&c.Bvt(r)),l.WY(),d&&u.rgt().WY(),null!==o&&u.kY(o),h&&u.kY(t),u.Ygt(),n}Wvt(t,s){const e=this.zk(),i=e.length>0,n=this.Nc,r=this.jdt,h=n.$k(),o=h.qgt()>1;o&&h.rgt().AY(),this.HSt.Pvt(t),i&&(s?h.DY(e):h.Qgt(e));const a=r.AY(this);this.Ivt(a)&&(a.Apt(this),this.dvt(a)),r.WY(),o&&h.rgt().WY(),i&&h.kY(e),h.Ygt()}*Vvt(t,s){(this.Hwt()||this.Nc.pvt())&&(yield this);const e=this.zk(),i=e.length>0,n=this.Nc,r=this.jdt,h=n.$k(),o=h.qgt()>1;o&&h.rgt().AY(),this.HSt.Pvt(t),i&&(s?h.DY(e):h.Qgt(e));const a=r.AY(this);(yield*this._vt(a))&&(a.Apt(this),yield*this.gvt(a)),r.WY(),o&&h.rgt().WY(),i&&h.kY(e),h.Ygt()}qk(t,s,e,i,...n){let r,h;const o=t.length>0,a=this.Nc,l=this.jdt,u=a.$k(),c=this.HSt,f=c.Svt(),d=u.qgt()>1;d&&u.rgt().AY(),n.length>0&&this.HSt.Pvt(n),o&&(s?u.DY(t):u.Qgt(t));const p=l.AY(this);return p.Wpt(e,i),l.ypt(p),a.OY(!1),this.Ivt(p)&&(p.Apt(this),f&&([h,r]=c.Nvt()),this.dvt(p),f&&c.Bvt(h)),a.OY(!0),l.WY(),l.Spt(),d&&u.rgt().WY(),o&&u.kY(t),u.Ygt(),r||p.Vpt()}}}{const Sv=self._s,wv=[];let vv=!1;Sv.vSt=class extends Sv.jn{constructor(t,s,e){super();const i=t.$B(),n=t.$k();this.F3=t,this.fpt=n,this.Nc=t.$B(),this.zSt=s;const r=i.jvt(e[1]);this.Uvt=r,this.cwt=e[2],this.F3.RSt(this,this.cwt),this.fwt=i.RU()?{dwt:e[3][0],pwt:e[3][1]}:null}static RC(t,s,e){return Sv.zn(Sv.vSt,t,s,e)}$mt(){const t=this.Uvt,s=this.Nc.$k().lgt(this);this.Uvt=t.bind(null,this.Nc.J$(),s)}Fz(){return this.zSt}ogt(){return this.zSt}y5(){return this.F3}Uwt(){return this.cwt}zwt(){return this.fwt&&this.fwt.pwt}Hwt(){return this.zwt()&&this.fwt.dwt}Jwt(t){this.fwt.dwt=!!t}ISt(){return!1}GY(){return wv}zk(){return this.zSt?this.zSt.zk():wv}tP(t){t.Apt(this),this.fpt.dyt(this.zvt())}async zvt(){try{await this.Uvt()}catch(t){console.error(`Unhandled exception running script %c${this.y5().Pc()}, event ${this.Uwt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.EU&&self.EU.Hvt(this),vv||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),vv=!0)}}*Dgt(t){t.Apt(this),(this.Hwt()||this.Nc.pvt())&&(yield this),this.tP(t)}kSt(){return!this.Hwt()&&!this.Nc.pvt()}static Jvt(){return vv}static qvt(){vv=!0}}}{const bv=self._s,Mv=self.assert;bv.Jyt=class extends bv.jn{constructor(t,s,e){super(),this.F3=t,this.Nc=t.$B(),this.zSt=s,this.Yvt=0,this.Xvt="",this.Kvt=0,this.Zvt=[],this.Qvt=!0,this.tbt="",this.Ddt=null,this.sbt=!1,this.ebt=[],this.ibt=!1,this.nbt=!1,this.rbt=0,this.hbt=-1,this.obt=new Map,this.abt=bv.fSt.RC(t,s,e),this.abt.jwt(this)}lbt(t){this.Yvt=0,this.Xvt=t[0],this.Kvt=t[1],this.Zvt=t[2].map((t=>bv.SSt.RC(this.F3,this,t))),this.Qvt=t[3],this.nbt=t[4],this.ibt=t[5]}ubt(t){this.Yvt=1,this.tbt=t[1],this.Ddt=this.Nc.d0(t[2]),this.abt.bwt(this.Ddt),this.Xvt=this.Ddt.Pc()+"."+this.tbt,this.Kvt=t[3],this.Zvt=t[4].map((t=>bv.SSt.RC(this.F3,this,t))),this.Qvt=t[5],this.nbt=t[6],this.ibt=t[7],this.Ddt.cbt(this)}static gSt(t,s,e){const i=bv.zn(bv.Jyt,t,s,e),n=e[1];return i.lbt(n),i}static ySt(t,s,e){const i=bv.zn(bv.Jyt,t,s,e),n=e[1];return i.ubt(n),i}Wmt(){if(this.Ddt&&this.Ddt.k0())for(const t of this.Ddt.tV())if(t.fbt(this.tbt)){this.sbt=!0;break}}$mt(){for(const t of this.Zvt)t.$mt();this.abt.$mt(!1)}qmt(){return this.Yvt}agt(){return this.Zvt}qyt(){return this.Zvt}jk(){return this.Zvt.length}dbt(t){this.ebt.push(t)}pbt(){return this.ebt}Avt(t){const s=this.Zvt;for(let e=0,i=s.length;e<i;++e)s[e].Ant(t[e].Hs(0))}Pvt(t){const s=this.Zvt;for(let e=0,i=s.length;e<i;++e)s[e].Ant(t[e])}mbt(){return this.Zvt.map((t=>t.qit()))}Fz(){return this.zSt}ogt(){return this.zSt}Ymt(){return this.Xvt}gbt(){return this.tbt}ybt(){return this.sbt}Xk(){return this.Kvt}Wj(){return this.Ddt}Iu(){return this.Qvt}Vk(){switch(this.Kvt){case 0:return null;case 2:return"";default:return 0}}Uk(){return this.abt}Yk(){return this.ibt}Svt(){return this.nbt}Nvt(){const t=this.rbt++;let s;this.hbt=t;const e=new Promise((t=>s=t));return this.obt.set(t,{resolve:s,Sbt:0}),[t,e]}Bvt(t){const s=this.obt.get(t);0===s.Sbt&&(s.resolve(),this.obt.delete(t)),this.hbt=-1}wbt(){return this.obt.get(this.hbt).Sbt++,this.hbt}vbt(t){this.hbt=t,this.obt.get(t).Sbt--}bbt(t,s){const e=new Map,i=[];for(const t of this.Ddt.DW().FW()){const s=t.Wj();if(s.fbt(this.tbt)){const i=e.get(s);Array.isArray(i)?i.push(t):e.set(s,[t])}else i.push(t)}if(i.length>0&&this.abt.Rvt(t,s,this.ibt,{Dvt:this.Ddt,Lvt:i}),e.size>0)for(const[i,n]of e){const e=i.Mbt(this.tbt).Uk(),r=[...new Set([...t,...e.GY()])];e.Rvt(r,s,this.ibt,{Dvt:i,Lvt:n})}}*xbt(t,s){const e=new Map,i=[];for(const t of this.Ddt.DW().FW()){const s=t.Wj();if(s.fbt(this.tbt)){const i=e.get(s);Array.isArray(i)?i.push(t):e.set(s,[t])}else i.push(t)}if(i.length>0&&(yield*this.abt.$vt(t,s,this.ibt,{Dvt:this.Ddt,Lvt:i})),e.size>0)for(const[i,n]of e){const e=i.Mbt(this.tbt).Uk(),r=[...new Set([...t,...e.GY()])];yield*e.$vt(r,s,this.ibt,{Dvt:i,Lvt:n})}}}}{const xv=self._s,Tv=[];xv.SSt=class extends xv.jn{constructor(t,s,e){super();const i=t.$k();this.F3=t,this.fpt=i,this.Nc=t.$B(),this.zSt=s,this.Cmt=i.rgt(),this.Yn=e[1],this.Hc=e[2],this.Tbt=e[3],this.hT=!!e[4],this.Cbt=!!e[5],this.Ibt=s instanceof xv.Jyt,this.dQ=e[6],this._bt=this.Nc.ugt(e[8]),this.Gbt=t=>this.Ant(t),this.Pbt=()=>this.qit(),this.Abt=!this.zSt||this.hT||this.Cbt,this.Mrt=this.Tbt,this.Rbt=-1,this.Ebt()&&(this.Mrt=this.Mrt?1:0),!this.Obt()||this.FT()||this.Wyt()||(this.Rbt=i.Zmt(this)),i.Xmt(this)}static RC(t,s,e){return xv.zn(xv.SSt,t,s,e)}$mt(){if(this.Obt()&&!this.FT()&&!this.Wyt()&&!this.Fbt()){const t=this.fpt.Hyt(this);t&&t.dbt(this)}}Pc(){return this.Yn}ugt(){return this._bt}Fz(){return this.zSt}ogt(){return this.Fz()}x0(){return!this.Fz()}Obt(){return!this.x0()}Fbt(){return this.Ibt}FT(){return this.hT}Wyt(){return this.Cbt}Xe(){return 0===this.Hc}hi(){return 1===this.Hc}Ebt(){return 2===this.Hc}ISt(){return!1}U0(){return this.dQ}Qmt(){return this.Tbt}GY(){return Tv}tP(t){!this.Obt()||this.FT()||this.Wyt()||this.Ant(this.Qmt())}kSt(){return!0}*Dgt(t){this.tP(t)}Ant(t){this.Xe()?"number"!=typeof t&&(t=parseFloat(t)):this.hi()?"string"!=typeof t&&(t=t.toString()):this.Ebt()&&(t=t?1:0),this.Abt?this.Mrt=t:this.Cmt.Kpt()[this.Rbt]=t}qit(){return this.Abt?this.Mrt:this.Cmt.Kpt()[this.Rbt]}Dbt(){let t=this.qit();return this.Ebt()&&(t=!!t),t}vgt(){this.Mrt=this.Tbt}cgt(){return{configurable:!1,enumerable:!0,get:this.Pbt,set:this.Gbt}}}}{const Cv=self._s,Iv=self.assert,_v=[];Cv.wSt=class extends Cv.jn{constructor(t,s,e){super();const i=t.$k();this.F3=t,this.fpt=i,this.Nc=t.$B(),this.zSt=s,this.Lbt=null,this.kbt=e[1],this.Nf=!0}static RC(t,s,e){return Cv.zn(Cv.wSt,t,s,e)}$mt(){this.Lbt=this.fpt.U5(this.kbt),this.F3._St(this);let t=this.Fz();for(;t;)t instanceof Cv.fSt&&t.xgt()&&t.Twt(this),t=t.Fz();this.Xwt(),this.Nc.RU()&&this.F3.zyt().children.push(this.Lbt.zyt())}Fz(){return this.zSt}GY(){return _v}PSt(){return this.Lbt}tP(t){const s=!!this.Fz(),e=this.Nc.L0();s&&this.fpt.Qgt(e),this.Lbt.tP(),s&&this.fpt.kY(e)}*Dgt(t){const s=!!this.Fz(),e=this.Nc.L0();s&&this.fpt.Qgt(e),yield*this.Lbt.Dgt(),s&&this.fpt.kY(e)}kSt(){return!1}ASt(){return this.Nf}Xwt(){let t=this.Fz();for(;t;){if(t instanceof Cv.fSt&&t.xgt()&&!t.Byt())return void(this.Nf=!1);t=t.Fz()}this.Nf=!0}}}{let Gv=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};WrapIndex=Gv;const Pv=self._s,Av=self.assert;Pv.Nbt=class extends Pv.jn{constructor(t){super(),this.wx=t,this.Nc=t.$B()}$mt(){}static Bbt(t,s){const e=s[0],i=[Dv,Ov,Fv,Lv,Rv,Ev];return Pv.zn(i[e],t,s)}};class Rv extends Pv.Nbt{constructor(t,s){super(t),this.$bt=this.Nc.ZK(),this.Uvt=this.Nc.jvt(s[1]),this.Uvt!==Pv.EB.RB.Brt.random&&this.Uvt!==Pv.EB.RB.Brt.Wbt||this.wx.Vbt()}jbt(){return this.$bt.Ubt(this.Uvt,this.$bt)}}class Ev extends Pv.Nbt{constructor(t,s){super(t),this.zbt=null,this.Xvt=s[1],this.wx.Vbt()}$mt(){const t=this.Nc.$k();this.zbt=t.Wk(this.Xvt),this.Xvt=null;const s=this.wx.Uk(),e=this.zbt.Uk();this.Hbt=[...new Set([...s.zk(),...e.zk()])],this.Hbt=t.Kmt(this.Hbt)}jbt(){const t=this.zbt;if(t.Iu()){const s=t.Uk();return Pv.fSt.prototype.qk.bind(s,this.Hbt,t.Yk(),t.Xk(),t.Vk())}{const s=t.Vk();return()=>s}}}class Ov extends Pv.Nbt{constructor(t,s){super(t),this.Ddt=this.Nc.d0(s[1]),this.Uvt=this.Nc.jvt(s[2]),this.Jbt=!!s[3],this.jdt=this.Nc.$k().Qk(),this.wx.qbt(this.Ddt)}jbt(){return this.Ddt.MW().Ubt(this.Uvt,this.Ddt.wW().RH())}Ybt(...t){const s=this.Ddt,e=s.DW().Kdt(),i=e.length;if(0===i)return this.Jbt?"":0;const n=Gv(this.wx.Xbt(),i);return this.jdt.PY().Bpt(s),this.Uvt.apply(e[n].RH(),t)}Kbt(t,...s){const e=this.Ddt,i=e.FW(),n=i.length;if(0===n||"number"!=typeof t)return this.Jbt?"":0;const r=Gv(t,n);return this.jdt.PY().Bpt(e),this.Uvt.apply(i[r].RH(),s)}}class Fv extends Pv.Nbt{constructor(t,s){super(t),this.Ddt=this.Nc.d0(s[1]),this.Zbt=s[3],this.Jbt=!!s[2],this.wx.qbt(this.Ddt)}Qbt(){const t=this.Ddt.DW().Kdt(),s=t.length;return 0===s?this.Jbt?"":0:t[Gv(this.wx.Xbt(),s)].tMt(this.Zbt)}sMt(){const t=this.Ddt,s=t.DW().Kdt(),e=s.length;if(0===e)return this.Jbt?"":0;const i=s[Gv(this.wx.Xbt(),e)],n=i.Wj().eMt(t.iMt());return i.tMt(this.Zbt+n)}nMt(t){const s=this.Ddt,e=s.FW(),i=e.length;if(0===i||"number"!=typeof t)return this.Jbt?"":0;const n=e[Gv(t,i)];let r=0;return s.k0()&&(r=n.Wj().eMt(s.iMt())),n.tMt(this.Zbt+r)}}class Dv extends Pv.Nbt{constructor(t,s){super(t),this.Ddt=this.Nc.d0(s[1]),this.rMt=this.Ddt.trt(s[2]),this.hMt=this.Ddt.Iet(s[2]),this.Uvt=this.Nc.jvt(s[3]),this.Jbt=!!s[4],this.jdt=this.Nc.$k().Qk(),this.wx.qbt(this.Ddt)}oMt(...t){const s=this.Ddt,e=s.DW().Kdt(),i=e.length;if(0===i)return this.Jbt?"":0;const n=Gv(this.wx.Xbt(),i);this.jdt.PY().Bpt(s);const r=e[n];let h=0;return s.k0()&&(h=r.Wj().aMt(s.iMt())),this.Uvt.apply(r.Qnt()[this.hMt+h].RH(),t)}lMt(t,...s){const e=this.Ddt,i=e.FW(),n=i.length;if(0===n||"number"!=typeof t)return this.Jbt?"":0;const r=Gv(t,n);this.jdt.PY().Bpt(e);const h=i[r];let o=0;return e.k0()&&(o=h.Wj().aMt(e.iMt())),this.Uvt.apply(h.Qnt()[this.hMt+o].RH(),s)}}class Lv extends Pv.Nbt{constructor(t,s){super(t),this.uMt=null,this.cMt=s[1]}$mt(){this.uMt=this.Nc.$k().fgt(this.cMt)}fMt(){return this.uMt}}}{let kv=function(t){const s=self.dMt[t];if(!s)throw new Error("invalid expression number");return s};GetExpressionFunc=kv;const Nv=self._s,Bv=self.assert;Nv.pMt=class extends Nv.jn{constructor(t,s,e){super(),this.wx=t,this.GS=e,this.Hc=s,this.Hs=null,this.mMt=!1,this.Cbt=!1}static RC(t,s,e){const i=s[0],n=[$v,Wv,qv,jv,zv,Vv,Hv,$v,jv,jv,Yv,Xv,qv,Zv,Wv,Jv,Uv,Kv,Qv,tb,sb,eb];return Nv.zn(n[i],t,i,e,s)}$mt(){}Vbt(){this.mMt=!0}qbt(t){this.mMt||t&&(t.MW().X$()||(this.mMt=!0))}gMt(){return this.mMt}tk(){return this.GS}$B(){return this.wx.$B()}Uk(){return this.wx.Uk()}Wyt(){return this.Cbt}yMt(){return 4===this.Hc}};class $v extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.SMt=0;const n=i[1];this.wMt=n[0],this.vMt=[],this.bMt=null;for(let t=1,s=n.length;t<s;++t)this.vMt.push(Nv.Nbt.Bbt(this,n[t]));this.vMt.length?this.Hs=this.MMt:(this.Hs=kv(this.wMt),this.Cbt=!0)}xMt(t){if(t<0||t>=this.vMt.length)throw new RangeError("invalid numbered node");return this.vMt[t]}$mt(){for(const t of this.vMt)t.$mt();const t=kv(this.wMt);this.vMt.length?this.bMt=t(this):this.bMt=t}Xbt(){return this.SMt}MMt(t){return this.SMt=t,this.bMt()}}class Wv extends $v{constructor(t,s,e,i){super(t,s,e,i),this.Hs=this.TMt,14===s&&(this.Uk().Gwt(),this.wx instanceof Nv.Mwt&&this.Uk().Wwt())}TMt(t){this.SMt=t;const s=this.bMt();return"string"==typeof s?s:""}CMt(){return kv(this.wMt)()}}class Vv extends $v{constructor(t,s,e,i){super(t,s,e,i),t.IMt()>=2?this.Hs=this.SV:this.Hs=this.fB,this.Cbt=!1}fB(t){this.SMt=t;const s=this.bMt();return this.$B().lB().fB(s)}SV(t){const s=this.fB(t);return s?s.SV():null}}class jv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this._Mt=i[1],this.Hs=this.GMt,this.Cbt=!0}GMt(){return this._Mt}}class Uv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.PMt=i[1],this.Hs=this.AMt,this.Cbt=!0}AMt(){return this.PMt}}class zv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.Ddt=this.$B().d0(i[1]),t.IMt()>=2?this.Hs=this.gW:this.Hs=this.Wj;const n=this.Uk();n.bwt(this.Ddt),this.wx instanceof Nv.Mwt?n.Wwt():n.Fz()&&n.Fz().Wwt(),this.Cbt=!0}Wj(){return this.Ddt}gW(){return this.Ddt?this.Ddt.gW():null}}class Hv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.lQ=this.$B().HN().Y4(i[1]),t.IMt()>=2?this.Hs=this.UN:this.Hs=this.JN,this.Cbt=!0}JN(){return this.lQ}UN(){return this.lQ?this.lQ.UN():null}}class Jv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.s7=this.$B().ltt().h8(i[1]),t.IMt()>=2?this.Hs=this.Wst:this.Hs=this.let,this.Cbt=!0}let(){return this.s7}Wst(){return this.s7?this.s7.Wst():null}}class qv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.RMt=i[1],this.Hs=this.EMt,this.Cbt=!0}EMt(){return this.RMt}}class Yv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.OMt=i[1];const n=this.wx.Wj();this.wx instanceof Nv.vwt&&this.wx.FT()?(this.Hs=this.FMt,this.Cbt=!0):n&&n.k0()?(this.Hs=this.DMt,this.Vbt()):(this.Hs=this.FMt,this.Cbt=!0)}FMt(){return this.OMt}DMt(t){t=t||0;const s=this.wx.Wj(),e=s.DW(),i=e.FW();let n=null;if(i.length)n=i[t%i.length].Wj();else if(e.Ydt()){const s=e.Xdt();n=s[t%s.length].Wj()}else{if(!(s.NW()>0))return 0;{const e=s.FW();n=e[t%e.length].Wj()}}return this.OMt+n.eMt(s.iMt())}}class Xv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.cMt=i[1],this.uMt=null,t.IMt()>=2?this.Hs=this.LMt:this.Hs=this.kMt,this.Cbt=!0}$mt(){this.uMt=this.$B().$k().fgt(this.cMt)}kMt(){return this.uMt}LMt(){return null}}class Kv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.NMt=i[1],this.zbt=null,t.IMt()>=2?this.Hs=this.BMt:this.Hs=this.$Mt,this.Cbt=!0}$mt(){this.zbt=this.$B().$k().Wk(this.NMt),this.NMt=null}$Mt(){return this.zbt}BMt(){return null}}class Zv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.WMt=[],this.VMt=[],this.Cbt=!0;for(let t=1,s=i.length;t<s;++t){const s=Nv.pMt.RC(this.wx,i[t],0);this.WMt.push(s),this.VMt.push(0),s.Wyt()||(this.Cbt=!1)}this.Hs=this.jMt}$mt(){for(const t of this.WMt)t.$mt()}jMt(){const t=this.WMt,s=this.VMt;for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0);return s}}class Qv extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.UMt=i[1],this.Hs=this.Pnt,this.Cbt=!0}Pnt(){return this.UMt}}class tb extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.zMt=i[1],this.Hs=this.HMt,this.Cbt=!0}HMt(){return this.zMt}}class sb extends $v{constructor(t,s,e,i){super(t,s,e,i),this.Hs=this.nU,this.Cbt=!1}nU(){return this.bMt()}}class eb extends Nv.pMt{constructor(t,s,e,i){super(t,s,e),this.Kut=this.$B().mct().zut(i[1]),this.Hs=this.JMt,this.Cbt=!0}JMt(){return this.Kut.Pc()}}}{let ib=function(t,s){for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0)};EvalParams=ib;const nb=self._s,rb=self.assert,hb=[],ob=function(){};nb.vwt=class extends nb.jn{constructor(t,s,e){if(super(),this.abt=t,this.Nc=t.$B(),this.GS=e,this.Uvt=this.Nc.jvt(s[1]),this.qMt=s[3]>0,this.YMt=2===s[3],this.XMt=!!s[4],this.KMt=!!s[5],this.hT=!!s[6],this.dQ=s[7],this.ZMt=this.abt.upt(),this.Ddt=null,this.rMt=null,this.hMt=-1,this.$bt=null,this.tP=ob,this.Dgt=ob,this.Ws=[],this.QMt=[],this.txt=!1,this.sxt=null,this.ixt=null,this.fwt=this.Nc.RU()?{dwt:s[8][0],nxt:s[8][1]}:null,-1===s[0]?this.$bt=this.Nc.ZK():(this.Ddt=this.Nc.d0(s[0]),s[2]&&(this.rMt=this.Ddt.trt(s[2]),this.hMt=this.Ddt.Iet(s[2])),this.abt.Fz()&&this.abt.Fz().Wwt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(nb.pMt.RC(this,s,this.Ws.length)),this.QMt.push(0)}0===this.Ws.length&&(this.Ws=hb,this.QMt=hb),this.abt.$k().zmt(this)}static RC(t,s,e){return nb.zn(nb.vwt,t,s,e)}$mt(){for(const t of this.Ws)t.$mt(),t.gMt()&&(this.txt=!0);this.YMt?(this.tP=this.rxt,this.Dgt=this.hxt):this.$bt?(this.oxt(),this.Dgt=this.axt):this.Ddt.MW().X$()?(this.lxt(),this.Dgt=this.uxt):this.hT?(this.tP=this.cxt,this.Dgt=this.fxt):(this.tP=this.dxt,this.Dgt=this.pxt)}oxt(){const t=this.$bt,s=this.$bt;this.mxt(t,s,this.gxt)}lxt(){const t=this.Ddt.MW(),s=this.Ddt.wW().RH();this.mxt(t,s,this.yxt)}mxt(t,s,e){const i=this.Uvt,n=this.KMt,r=this.Ws;if(0===r.length){const e=t.Ubt(i,s);this.tP=n?function(){return nb.xor(e(),n)}:e}else if(1===r.length){const e=r[0];if(!n&&e.Wyt())this.tP=t.Sxt(i,s,e.Hs(0));else{const r=t.Ubt(i,s);this.tP=function(){return nb.xor(r(e.Hs(0)),n)}}}else if(2===r.length){const e=r[0],h=r[1];if(!n&&e.Wyt()&&h.Wyt())this.tP=t.wxt(i,s,e.Hs(0),h.Hs(0));else{const r=t.Ubt(i,s);this.tP=function(){return nb.xor(r(e.Hs(0),h.Hs(0)),n)}}}else if(3===r.length){const e=r[0],h=r[1],o=r[2];if(!n&&e.Wyt()&&h.Wyt()&&o.Wyt())this.tP=t.vxt(i,s,e.Hs(0),h.Hs(0),o.Hs(0));else{const r=t.Ubt(i,s);this.tP=function(){return nb.xor(r(e.Hs(0),h.Hs(0),o.Hs(0)),n)}}}else this.tP=e}U0(){return this.dQ}bSt(){return this.Uvt}Wj(){return this.Ddt}WH(){return this.rMt}bxt(){return this.rMt?this.rMt.NH():this.Ddt?this.Ddt.MW():null}IMt(){const t=this.bxt();return t?t.Mxt():1}Uk(){return this.abt}$B(){return this.Nc}tk(){return this.GS}rvt(){return this.tk()}pSt(){return this.qMt}MSt(){return this.YMt}xxt(){return this.KMt}sJ(){return this.XMt}FT(){return this.hT}Txt(){return this.fwt.dwt}Cxt(){return!!this.$bt}tvt(){return this.Cxt()||this.Ddt.MW().X$()}svt(){for(const t of this.Ws)if(t.yMt())return t.Wj();return null}Ixt(t){this.fwt.dwt=!!t,this.abt.Nwt()}_xt(){return this.fwt.nxt}kSt(){return!this.Txt()&&!this.Nc.pvt()&&!this._xt()}Gxt(){return this.sxt||(this.sxt=new Map),this.sxt}Pxt(){return this.ixt||(this.ixt=new Map),this.ixt}gxt(){const t=this.QMt;return ib(this.Ws,t),nb.xor(this.Uvt.apply(this.$bt,t),this.KMt)}*axt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.QMt;ib(this.Ws,t);let s=this.Uvt.apply(this.$bt,t);return nb.Mo(s)&&(s=yield*s),nb.xor(s,this.KMt)}return this.tP()}yxt(){const t=this.QMt;ib(this.Ws,t);const s=this.Ddt.wW().RH();return nb.xor(this.Uvt.apply(s,t),this.KMt)}*uxt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.QMt;ib(this.Ws,t);const s=this.Ddt.wW().RH();let e=this.Uvt.apply(s,t);return nb.Mo(e)&&(e=yield*e),nb.xor(e,this.KMt)}return this.tP()}rxt(){return!0}*hxt(){return(this.Txt()||this.Nc.pvt())&&(yield this),!0}Axt(){return this.rMt?this.rMt.NH().Mxt()>=2?this.rMt.$H():this.rMt:this.Ddt.MW().Mxt()>=2?this.Ddt.gW():this.Ddt}cxt(){const t=this.QMt;ib(this.Ws,t);const s=this.Uvt.apply(this.Axt(),t);return this.Ddt.Fvt(),s}*fxt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.QMt;ib(this.Ws,t);let s=this.Uvt.apply(this.Axt(),t);return nb.Mo(s)&&(s=yield*s),this.Ddt.Fvt(),s}return this.tP()}dxt(){const t=this.Ws,s=this.QMt,e=this.Ddt.DW();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.gMt()||(s[e]=i.Hs(0))}return e.Jdt()?this.Rxt(e):this.Ext(e)}*pxt(){return(this.Txt()||this.Nc.pvt())&&(yield this),this.dxt()}Oxt(t){const s=this.Ws,e=this.QMt;for(let i=0,n=s.length;i<n;++i){const n=s[i];n.gMt()&&(e[i]=n.Hs(t))}}Rxt(t){const s=this.Ddt,e=s.k0(),i=s.iMt(),n=this.hMt,r=n>=0,h=s.FW(),o=this.txt,a=this.QMt,l=this.Uvt,u=this.KMt,c=this.ZMt&&!this.qMt;t.Hdt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.Oxt(s),r){const t=e?f.Wj().aMt(i):0;d=l.apply(f.Qnt()[n+t].RH(),a)}else d=l.apply(f.RH(),a);nb.xor(d,u)?t.Zdt(f):c&&t.Qdt(f)}return s.Fxt(!0),t.tpt(!1),s.Fvt(),t.qdt()}Ext(t){const s=this.Ddt,e=s.k0(),i=s.iMt(),n=s.Zj(),r=this.hMt,h=r>=0,o=this.txt,a=this.QMt,l=this.Uvt,u=this.KMt,c=this.ZMt&&!this.qMt,f=t.spt(),d=t.ept(),p=c&&!this.abt.Qwt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let S;if(o&&this.Oxt(t),h){const t=e?s.Wj().aMt(i):0;S=l.apply(s.Qnt()[r+t].RH(),a)}else S=l.apply(s.RH(),a);nb.xor(S,u)?(y=!0,p?(f.push(s),n&&s.Dxt()):(m[g]=s,n&&s.Lxt(g),++g)):p?(m[g]=s,n&&s.kxt(g),++g):c&&(d.push(s),n&&s.Nxt())}nb.wh(m,g),n&&s.Bxt(p,g);const S=y;return p&&!y&&(y=this.$xt(f)),s.Fxt(S||c),c?y:t.qdt()}$xt(t){const s=this.Ddt,e=s.k0(),i=s.iMt(),n=this.txt,r=this.hMt,h=r>=0,o=this.QMt,a=this.Uvt,l=this.KMt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.Oxt(s),h){const t=e?u.Wj().aMt(i):0;c=a.apply(u.Qnt()[r+t].RH(),o)}else c=a.apply(u.RH(),o);if(nb.xor(c,l))return!0}return!1}Wxt(t,s){return this.Ws[t].Hs(s)}xSt(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].CMt()}v3(){if(!this.sxt||!this.sxt.size)return null;const t={};for(const[s,e]of this.sxt.entries()){let i=e;"collmemory"===s&&(i=[...e.entries()].map((t=>[t[0].tU(),t[1].tU(),t[2]]))),t[s]=i}return{ex:t}}b3(t){if(this.sxt&&(this.sxt.clear(),this.sxt=null),!t)return;const s=this.Nc,e=t.ex;if(e){const t=this.Gxt();t.clear();for(const[i,n]of Object.entries(e)){let e=n;"collmemory"===i&&(e=nb.zn(nb._u,n.map((t=>[s.hB(t[0]),s.hB(t[1]),t[2]])).filter((t=>t[0]&&t[1])))),t.set(i,e)}}}}}{let ab=function(t,s){for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0)};EvalParams=ab;const lb=self._s,ub=self.assert,cb=[],fb=function(){},db=function*(){},pb=1,mb=2,gb=4,yb=8,Sb=16;lb.Mwt=class extends lb.jn{constructor(t,s,e){super(),this.abt=t;const i=t.$B();this.Nc=i,this.GS=e,this.dQ=s.length>=4?s[3]:-1,this.Vxt=s.length>=5?255&s[4]:0,this.jxt=s.length>=5?s[4]>>8:0,this.Uvt=null,this.Ddt=null,this.rMt=null,this.hMt=-1,this.$bt=null,this.Uxt="",this.zxt=null,this.Hxt=null,this.tP=fb,this.Dgt=fb,this.Ws=[],this.QMt=[],this.txt=!1,this.sxt=null,this.ixt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.fwt=i.RU()||n?{dwt:r[0],nxt:r[1],index:r[2]}:null,-1===s[0])this.$bt=i.ZK(),this.Uvt=i.jvt(s[1]);else if(-2===s[0])this.Uxt=s[1];else if(n){const t=i.jvt(s[1]);this.Uvt=t,this.tP=this.Jxt,this.Dgt=this.qxt,this.jxt|=8}else this.Ddt=i.d0(s[0]),4&this.jxt?(this.Uxt=s[1],this.zxt=i.d0(s[2])):(s[2]&&(this.rMt=this.Ddt.trt(s[2]),this.hMt=this.Ddt.Iet(s[2])),this.Uvt=i.jvt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(lb.pMt.RC(this,s,this.Ws.length)),this.QMt.push(0)}0===this.Ws.length&&(this.Ws=cb,this.QMt=cb),this.Yxt()&&(this.abt.Gwt(),this.abt.Wwt()),this.abt.$k().Hmt(this)}static RC(t,s,e){return lb.zn(lb.Mwt,t,s,e)}$mt(){for(const t of this.Ws)t.$mt(),t.gMt()&&(this.txt=!0);if(this.$bt)this.oxt(),this.Dgt=this.axt;else if(this.Uxt)4&this.jxt?this.Xxt():this.Kxt(),this.Uxt="",this.zxt=null;else if(this.tP===this.Jxt){const t=this.Uvt,s=this.Nc.$k().lgt(this.abt);this.Uvt=t.bind(null,this.Nc.J$(),s)}else this.rMt?this.Svt()?(this.tP=this.Zxt,this.Dgt=this.Qxt):(this.tP=this.tTt,this.Dgt=this.sTt):this.Ddt.MW().X$()?(this.lxt(),this.Dgt=this.uxt):this.FT()?(this.tP=this.eTt,this.Dgt=this.iTt):this.Svt()?(this.tP=this.nTt,this.Dgt=this.rTt):this.hTt()?(this.tP=this.oTt,this.Dgt=this.aTt):this.Ws.length?this.Ws.every((t=>t.gMt()))?(this.tP=this.lTt,this.Dgt=this.uTt):this.txt?(this.tP=this.cTt,this.Dgt=this.fTt):this.Ws.every((t=>t.Wyt()))?(ab(this.Ws,this.QMt),this.tP=this.dTt,this.Dgt=this.pTt):(this.tP=this.mTt,this.Dgt=this.gTt):(this.tP=this.dTt,this.Dgt=this.pTt)}oxt(){const t=this.$bt,s=this.$bt;this.mxt(t,s,this.gxt)}lxt(){const t=this.Ddt.MW(),s=this.Ddt.wW().RH();this.mxt(t,s,this.yxt)}Kxt(){const t=this.abt.$k(),s=t.Wk(this.Uxt);if(s.Iu()){const e=!!(2&this.jxt);this.Hxt=s.Uk();let i=[...new Set([...this.abt.zk(),...this.Hxt.zk()])];i=t.Kmt(i);const n=!s.Yk()&&this.yTt()?{kvt:!0}:null;if(this.tP=lb.fSt.prototype.Rvt.bind(this.Hxt,i,this.Ws,e,n),this.Nc.RU()){const t=this;this.Dgt=function*(){return(t.Txt()||t.Nc.pvt())&&(yield t),yield*t.Hxt.$vt(i,t.Ws,e,n)}}else this.Dgt=db}else this.tP=fb,this.Dgt=db}Xxt(){const t=this.abt.$k(),s=t.ggt(this.zxt,this.Uxt);if(s.Iu()){const e=!!(2&this.jxt);this.Hxt=s.Uk();let i=[...new Set([...this.abt.zk(),...this.Hxt.zk(),this.Ddt,s.Wj()])];i=t.Kmt(i);const n=!this.Ddt.k0()&&!s.Wj().k0(),r=!this.Ddt.k0()&&s.Wj().k0(),h=this.Ddt.k0();let o=null;if(!s.Yk()&&this.yTt()&&(o=o||{},o.kvt=!0),!r&&e||(o=o||{},o.Evt=this.Ddt,o.Ovt=s.Wj()),n||r||h&&!s.ybt()?this.tP=lb.fSt.prototype.Rvt.bind(this.Hxt,i,this.Ws,e,o):h&&(this.tP=lb.Jyt.prototype.bbt.bind(s,i,this.Ws)),this.Nc.RU()){const t=this;n||r||h&&!s.ybt()?this.Dgt=function*(){return(t.Txt()||t.Nc.pvt())&&(yield t),yield*t.Hxt.$vt(i,t.Ws,e,o)}:h&&(this.Dgt=function*(){return(t.Txt()||t.Nc.pvt())&&(yield t),yield*s.xbt(i,t.Ws)})}else this.Dgt=db}else this.tP=fb,this.Dgt=db}mxt(t,s,e){const i=this.Uvt,n=this.Ws;if(0===n.length)this.tP=t.Ubt(i,s);else if(1===n.length){const e=n[0];if(e.Wyt())this.tP=t.Sxt(i,s,e.Hs(0));else{const n=t.Ubt(i,s);this.tP=function(){return n(e.Hs(0))}}}else if(2===n.length){const e=n[0],r=n[1];if(e.Wyt()&&r.Wyt())this.tP=t.wxt(i,s,e.Hs(0),r.Hs(0));else{const n=t.Ubt(i,s);this.tP=function(){return n(e.Hs(0),r.Hs(0))}}}else if(3===n.length){const e=n[0],r=n[1],h=n[2];if(e.Wyt()&&r.Wyt()&&h.Wyt())this.tP=t.vxt(i,s,e.Hs(0),r.Hs(0),h.Hs(0));else{const n=t.Ubt(i,s);this.tP=function(){return n(e.Hs(0),r.Hs(0),h.Hs(0))}}}else this.tP=e}U0(){return this.dQ}Svt(){return!!(8&this.jxt)}yvt(){return!!(16&this.jxt)}hTt(){return 1===this.Vxt}FT(){return 2===this.Vxt}Yxt(){return!!(1&this.jxt)}Rwt(){return this.Svt()||this.yvt()}Wj(){return this.Ddt}bxt(){return this.rMt?this.rMt.NH():this.Ddt?this.Ddt.MW():null}IMt(){const t=this.bxt();return t?t.Mxt():1}Uk(){return this.abt}yTt(){let t=this.abt;do{if(t instanceof lb.Jyt&&t.Yk())return!0;t=t.ogt()}while(t);return!1}$B(){return this.Nc}tk(){return this.GS}rvt(){return this.fwt.index}Txt(){return this.fwt.dwt}Ixt(t){this.fwt.dwt=!!t,this.abt.Nwt()}_xt(){return this.fwt.nxt}kSt(){return!this.Txt()&&!this.Nc.pvt()&&!this._xt()}Gxt(){return this.sxt||(this.sxt=new Map),this.sxt}Pxt(){return this.ixt||(this.ixt=new Map),this.ixt}gxt(){const t=this.QMt;return ab(this.Ws,t),this.Uvt.apply(this.$bt,t)}*axt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.QMt;return ab(this.Ws,t),yield*this.Uvt.apply(this.$bt,t)}return this.tP()}yxt(){const t=this.QMt;return ab(this.Ws,t),this.Uvt.apply(this.Ddt.wW().RH(),t)}*uxt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.QMt;return ab(this.Ws,t),yield*this.Uvt.apply(this.Ddt.wW().RH(),t)}return this.tP()}dTt(){const t=this.QMt,s=this.Ddt.DW().FW();for(let e=0,i=s.length;e<i;++e)this.Uvt.apply(s[e].RH(),t)}*pTt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.QMt,s=this.Ddt.DW().FW();for(let e=0,i=s.length;e<i;++e)yield*this.Uvt.apply(s[e].RH(),t)}else this.dTt()}mTt(){const t=this.QMt;ab(this.Ws,t);const s=this.Ddt.DW().FW();for(let e=0,i=s.length;e<i;++e)this.Uvt.apply(s[e].RH(),t)}*gTt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.QMt;ab(this.Ws,t);const s=this.Ddt.DW().FW();for(let e=0,i=s.length;e<i;++e)yield*this.Uvt.apply(s[e].RH(),t)}else this.mTt()}lTt(){const t=this.Ws,s=this.QMt,e=this.Uvt,i=this.Ddt.DW().FW();for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(n);e.apply(r.RH(),s)}}*uTt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.Ws,s=this.QMt,e=this.Uvt,i=this.Ddt.DW().FW();for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(n);yield*e.apply(r.RH(),s)}}else this.lTt()}cTt(){const t=this.Ws,s=this.QMt,e=this.Uvt,i=this.Ddt.DW().FW();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.gMt()||(s[e]=i.Hs(0))}for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let e=0,i=t.length;e<i;++e){const i=t[e];i.gMt()&&(s[e]=i.Hs(n))}e.apply(r.RH(),s)}}*fTt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.Ws,s=this.QMt,e=this.Uvt,i=this.Ddt.DW().FW();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.gMt()||(s[e]=i.Hs(0))}for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let e=0,i=t.length;e<i;++e){const i=t[e];i.gMt()&&(s[e]=i.Hs(n))}yield*e.apply(r.RH(),s)}}else this.cTt()}oTt(){const t=this.Ws,s=this.QMt,e=this.Uvt,i=this.Ddt,n=i.STt(),r=i.DW().FW();n.wTt(e);for(let i=0,n=r.length;i<n;++i){const n=r[i];for(let e=0,n=t.length;e<n;++e)s[e]=t[e].Hs(i);e.apply(n.RH(),s)}n.vTt(e)}*aTt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.Ws,s=this.QMt,e=this.Uvt,i=this.Ddt,n=i.STt(),r=i.DW().FW();n.wTt(e);for(let i=0,n=r.length;i<n;++i){const n=r[i];for(let e=0,n=t.length;e<n;++e)s[e]=t[e].Hs(i);yield*e.apply(n.RH(),s)}n.vTt(e)}else this.oTt()}bTt(){return this.rMt?this.rMt.NH().Mxt()>=2?this.rMt.$H():this.rMt:this.Ddt.MW().Mxt()>=2?this.Ddt.gW():this.Ddt}eTt(){const t=this.QMt;return ab(this.Ws,t),this.Uvt.apply(this.bTt(),t)}*iTt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.QMt;ab(this.Ws,t);let s=this.Uvt.apply(this.bTt(),t);return lb.Mo(s)&&(s=yield*s),s}return this.eTt()}tTt(){const t=this.Ddt,s=t.k0(),e=t.iMt(),i=this.Ws,n=this.txt,r=this.QMt,h=this.Uvt,o=this.hMt,a=t.DW().FW();for(let t=0,s=i.length;t<s;++t){const s=i[t];s.gMt()||(r[t]=s.Hs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,e=i.length;s<e;++s){const e=i[s];e.gMt()&&(r[s]=e.Hs(t))}const u=s?l.Wj().aMt(e):0;h.apply(l.Qnt()[o+u].RH(),r)}}*sTt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.Ddt,s=t.k0(),e=t.iMt(),i=this.Ws,n=this.txt,r=this.QMt,h=this.Uvt,o=this.hMt,a=t.DW().FW();for(let t=0,s=i.length;t<s;++t){const s=i[t];s.gMt()||(r[t]=s.Hs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,e=i.length;s<e;++s){const e=i[s];e.gMt()&&(r[s]=e.Hs(t))}const u=s?l.Wj().aMt(e):0;yield*h.apply(l.Qnt()[o+u].RH(),r)}}else this.tTt()}nTt(){const t=this.Ws,s=this.QMt,e=this.Uvt,i=this.Ddt.DW().FW(),n=[];for(let r=0,h=i.length;r<h;++r){const h=i[r];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(r);n.push(e.apply(h.RH(),s))}return Promise.all(n)}*rTt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.Ws,s=this.QMt,e=this.Uvt,i=this.Ddt.DW().FW(),n=[];for(let r=0,h=i.length;r<h;++r){const h=i[r];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(r);n.push(yield*e.apply(h.RH(),s))}return Promise.all(n)}return this.nTt()}Zxt(){const t=this.Ddt,s=t.k0(),e=t.iMt(),i=this.Ws,n=this.QMt,r=this.Uvt,h=this.hMt,o=t.DW().FW(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,e=i.length;s<e;++s)n[s]=i[s].Hs(t);const u=s?l.Wj().aMt(e):0;a.push(r.apply(l.Qnt()[h+u].RH(),n))}return Promise.all(a)}*Qxt(){if((this.Txt()||this.Nc.pvt())&&(yield this),this._xt()){const t=this.Ddt,s=t.k0(),e=t.iMt(),i=this.Ws,n=this.QMt,r=this.Uvt,h=this.hMt,o=t.DW().FW(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,e=i.length;s<e;++s)n[s]=i[s].Hs(t);const u=s?l.Wj().aMt(e):0;a.push(yield*r.apply(l.Qnt()[h+u].RH(),n))}return Promise.all(a)}return this.Zxt()}async Jxt(){try{await this.Uvt()}catch(t){console.error(`Unhandled exception running script %c${this.abt.y5().Pc()}, event ${this.abt.Uwt()}, action ${this.rvt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.EU&&self.EU.Hvt(this),lb.vSt.Jvt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),lb.vSt.qvt())}}*qxt(){return(this.Txt()||this.Nc.pvt())&&(yield this),this.Jxt()}v3(){return this.sxt&&this.sxt.size?{ex:lb.wo(this.sxt)}:null}b3(t){if(this.sxt&&(this.sxt.clear(),this.sxt=null),!t)return;const s=t.ex;s&&(this.sxt=lb.vo(s))}}}{let wb=function(t){return t instanceof $b?Bb.TV(t):t.iq()},vb=function(t){return wb(t).cB()},bb=function(t){return Bb.TV(t)},Mb=function(t){return bb(t).cB()},xb=function(t){return t instanceof Wb?Bb.TV(t):t},Tb=function(t){return t instanceof Vb?Bb.TV(t):t},Cb=function(t,s,e,i){s.tU()<e.tU()?t.Set(s,e,i):t.Set(e,s,i)},Ib=function(t,s,e){s.tU()<e.tU()?t.Ru(s,e):t.Ru(e,s)},_b=function(t,s){t.Eu(s)},Gb=function(t,s,e){return s.tU()<e.tU()?t.Hs(s,e):t.Hs(e,s)},Pb=function(t,s,e,i){if(!s)return!1;const n=0!==e||0!==i,r=t.cB(),h=Bb.lk(),o=Bb.sgt(),a=o.Uk().upt(),l=o.Wj(),u=o.xxt(),c=s.DW(),f=l!==s;let d;Jb=s,Hb=f&&!u,qb=!1;let p=0,m=0,g=!1;c.Jdt()?(jb.S(r.pz()),jb.offset(e,i),h.MTt(r.fB(),s,jb,zb),d=zb):a?Bb.xTt()&&!c.ept().length&&c.spt().length?d=c.spt():(d=c.ept(),qb=!0):d=c.spt(),n&&(p=r.zM(),m=r.qM(),r.sz(e,i),r.ZU());for(const s of d)if(h.o$(t,s)){if(g=!0,u)break;f&&Yb.add(s)}return n&&(r.QU(p,m),r.ZU()),Fb.bh(zb),g},Ab=function(t){const s=Bb.Hk().upt(),e=Jb.DW(),i=e.spt(),n=e.ept();e.Jdt()?(e.rpt(Yb),s&&(Fb.bh(n),e.hpt(Yb,Jb.FW()))):s?qb?e.opt(Yb):(e.hpt(Yb,i),e.rpt(Yb)):e.rpt(Yb),Jb.Fvt()},Rb=function(t,s){Hb&&(s&&Ab(t),Yb.clear(),Jb=null,Hb=!1)},Eb=function(t,s){const e=Bb.hB(s);if(!e)return!1;const i=t.DW();if(!i.Jdt()&&!i.spt().includes(e))return!1;if(t.k0()){if(e.Wj().TTt(t))return i.lpt(e),t.Fvt(),!0}else if(e.Wj()===t)return i.lpt(e),t.Fvt(),!0;return!1},Ob=function(t,s){const e=t.DW();if(e.Jdt()){e.tpt(!1),e.Hdt();const i=t.FW();for(let t=0,n=i.length;t<n;++t){const n=i[t];n.tU()===s?e.Qdt(n):e.Zdt(n)}return t.Fvt(),!!e.spt().length}{const i=e.spt();let n=0;for(let t=0,r=i.length;t<r;++t){const r=i[t];i[n]=r,r.tU()===s?e.Qdt(r):++n}return Fb.wh(i,n),t.Fvt(),!!i.length}};GetInst=wb,GetWorldInfo=vb,GetInst_SDKv2=bb,GetWorldInfo_SDKv2=Mb,GetObjectClass=xb,GetLayer=Tb,CollMemory_Add=Cb,CollMemory_Remove=Ib,CollMemory_RemoveInstance=_b,CollMemory_Get=Gb,DoOverlapCondition=Pb,FinishCollisionConditionPicking=Ab,FinishCollisionCondition=Rb,PickByUID_Normal=Eb,PickByUID_Inverted=Ob;const Fb=self._s,Db=new Fb.To,Lb={},kb={},Nb={};let Bb=null;Fb.CTt=function(t){Bb=t};const $b=self.$j,Wb=self.vW,Vb=self.xV;kb.ITt=function(t,s){return Fb.compare(this.cB().zM(),t,s)},Nb.ITt=function(t,s){return Fb.compare(this.x,t,s)},kb._Tt=function(t,s){return Fb.compare(this.cB().qM(),t,s)},Nb._Tt=function(t,s){return Fb.compare(this.y,t,s)},kb.GTt=function(){return this.cB().Sz()},Nb.GTt=function(){return this.yz()},Lb.PTt=function(){const t=vb(this),s=t.JN(),e=t.pz();return e.tl()<0||e.sl()<0||e.Za()>s.Vg()||e.Qa()>s.Zg()},Lb.ATt=function(t,s,e){const i=xb(this).DW(),n=i.FW();if(!n.length)return!1;let r=n[0],h=r.cB(),o=r,a=Fb.nr(h.zM(),h.qM(),s,e);for(let i=1,l=n.length;i<l;++i){r=n[i],h=r.cB();const l=Fb.nr(h.zM(),h.qM(),s,e);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return i.lpt(o),!0},kb.HM=function(t){const s=this.cB();s.zM()!==t&&(s.HM(t),s.ZU())},Nb.HM=function(t){this.x=+t},kb.YM=function(t){const s=this.cB();s.qM()!==t&&(s.YM(t),s.ZU())},Nb.YM=function(t){this.y=+t},kb.RTt=function(t,s){const e=this.cB();e.ETt(t,s)||(e.QU(t,s),e.ZU())},Nb.RTt=function(t,s){this.setPosition(t,s)},Lb.OTt=function(t,s){if(!(t=xb(t)))return;const e=wb(this),i=t.EW(e);if(!i)return;const[n,r]=i.FTt(s),h=e.cB();h.zM()===n&&h.qM()===r||(h.QU(n,r),h.ZU())},Lb.DTt=function(t){if(0===t)return;const s=vb(this);s.sz(s.LTt()*t,s.kTt()*t),s.ZU()},kb.NTt=function(t,s){if(0===s)return;const e=this.cB();t=Fb.Qn(t),e.sz(Math.cos(t)*s,Math.sin(t)*s),e.ZU()},Nb.NTt=function(t,s){0!==s&&(t=Fb.Qn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},kb.zM=function(){return this.cB().zM()},Nb.zM=function(){return this.x},kb.qM=function(){return this.cB().qM()},Nb.qM=function(){return this.y},Lb.lN=function(){return Bb.lN(wb(this))},kb.BTt=function(t,s){return Fb.compare(this.cB().Vg(),t,s)},Nb.BTt=function(t,s){return Fb.compare(this.width,t,s)},kb.$Tt=function(t,s){return Fb.compare(this.cB().Zg(),t,s)},Nb.$Tt=function(t,s){return Fb.compare(this.height,t,s)},kb.Yg=function(t){const s=this.cB();s.Vg()!==t&&(s.Yg(t),s.ZU())},Nb.Yg=function(t){this.width=t},kb.jg=function(t){const s=this.cB();s.Zg()!==t&&(s.jg(t),s.ZU())},Nb.jg=function(t){this.height=t},kb.TA=function(t,s){const e=vb(this);e.Vg()===t&&e.Zg()===s||(e.TA(t,s),e.ZU())},Nb.TA=function(t,s){this.oV(t,s)},kb.Vg=function(){return this.cB().Vg()},Nb.Vg=function(){return this.width},kb.Zg=function(){return this.cB().Zg()},Nb.Zg=function(){return this.height},Lb.WTt=function(){return vb(this).pz().Za()},Lb.VTt=function(){return vb(this).pz().Qa()},Lb.jTt=function(){return vb(this).pz().tl()},Lb.UTt=function(){return vb(this).pz().sl()},Lb.zTt=function(){const t=vb(this).pz();return(t.Za()+t.tl())/2},Lb.HTt=function(){const t=vb(this).pz();return(t.Qa()+t.sl())/2},Lb.JTt=function(t,s){return Fb.hr(vb(this).cV(),Fb.Qn(s))<=Fb.Qn(t)},Lb.qTt=function(t){return Fb.lr(vb(this).cV(),Fb.Qn(t))},Lb.YTt=function(t,s){const e=Fb.Qn(t),i=Fb.Qn(s),n=vb(this).cV();return Fb.lr(i,e)?Fb.lr(n,e)&&!Fb.lr(n,i):!(!Fb.lr(n,e)&&Fb.lr(n,i))},kb.uV=function(t){const s=this.cB(),e=Fb.Zn(Fb.Qn(t));isNaN(e)||s.cV()===e||(s.uV(e),s.ZU())},Nb.uV=function(t){this.fz=t},Lb.XTt=function(t){if(isNaN(t)||0===t)return;const s=vb(this);s.uV(s.cV()+Fb.Qn(t)),s.ZU()},Lb.KTt=function(t){if(isNaN(t)||0===t)return;const s=vb(this);s.uV(s.cV()-Fb.Qn(t)),s.ZU()},Lb.ZTt=function(t,s){const e=vb(this),i=e.cV(),n=Fb.ar(i,Fb.Qn(s),Fb.Qn(t));isNaN(n)||i===n||(e.uV(n),e.ZU())},Lb.QTt=function(t,s,e){const i=vb(this),n=i.cV(),r=s-i.zM(),h=e-i.qM(),o=Math.atan2(h,r),a=Fb.ar(n,o,Fb.Qn(t));isNaN(a)||n===a||(i.uV(a),i.ZU())},Lb.tCt=function(t,s){const e=vb(this),i=e.cV(),n=t-e.zM(),r=s-e.qM(),h=Math.atan2(r,n);isNaN(h)||i===h||(e.uV(h),e.ZU())},kb.cV=function(){return Fb.tr(this.cB().cV())},Nb.cV=function(){return this.fz},Lb.sCt=function(t,s){return Fb.compare(Fb.Cr(100*vb(this).tO(),6),t,s)},kb.YV=function(){return this.cB().YV()},Nb.YV=function(){return this.isVisible},Lb.JV=function(t){const s=vb(this);t=2===t?!s.YV():0!==t,s.YV()!==t&&(s.JV(t),Bb.SB())},Lb.eO=function(t){const s=Fb.Kn(t/100,0,1),e=vb(this);if(e.lH()){if(e.urt().eCt()===s)return}else if(e.tO()===s)return;e.eO(s),Bb.SB()},Lb.iCt=function(t){Db.Qo(t);const s=vb(this);s.vz().zo(Db)||(s.bz(Db),Bb.SB())},Lb.nO=function(){const t=vb(this).vz();return Fb.Gr(t.No(),t.Bo(),t.$o(),t.Wo())},Lb.tO=function(){return Fb.Cr(100*vb(this).tO(),6)},Lb.nCt=function(t){return!!(t=Tb(t))&&vb(this).fB()===t},Lb.rCt=function(t){const s=xb(this).DW(),e=s.FW();if(!e.length)return!1;let i=e[0];for(let s=1,n=e.length;s<n;++s){const n=e[s],r=n.cB(),h=i.cB(),o=r.fB().tk(),a=h.fB().tk();0===t?(o>a||o===a&&r.dB()>h.dB())&&(i=n):(o<a||o===a&&r.dB()<h.dB())&&(i=n)}return s.lpt(i),!0},kb.hCt=function(t,s,e){const i=this.cB(),n=0===t?i.XM():i.cz();return Fb.compare(n,s,e)},Nb.hCt=function(t,s,e){const i=0===t?this.gj:this.uz;return Fb.compare(i,s,e)},kb.oCt=function(){this.cB().xz()},Nb.oCt=function(){this.Mz()},kb.aCt=function(){this.cB().Cz()},Nb.aCt=function(){this.Tz()},Lb.lCt=function(t){(t=Tb(t))&&vb(this)._z(t)},Lb.uCt=function(t,s){const e=0===t;if(!(s=xb(s)))return;const i=wb(this),n=s.cCt(i);n&&i.cB().Pz(n,e)},kb.KM=function(t){const s=this.cB();s.XM()!==t&&(s.KM(t),Bb.SB())},Nb.KM=function(t){this.gj=t},Lb.fCt=function(){return vb(this).fB().tk()},Lb.dCt=function(){return vb(this).fB().Pc()},kb.pCt=function(){return this.cB().dB()},Nb.pCt=function(){return this.zIndex},kb.mCt=function(){return this.cB().XM()},Nb.mCt=function(){return this.gj},kb.gCt=function(){return this.cB().cz()},Nb.gCt=function(){return this.uz},Lb.yCt=function(t){const s=wb(this),e=s.Wj().nV().ert(t);if(!e)return;const i=e.tk();return s.cB().XU().JH(i)},Lb.SCt=function(t,s){const e=wb(this),i=e.Wj().nV().ert(s);if(!i)return;const n=i.tk(),r=1===t,h=e.cB().XU();h.JH(n)!==r&&(h.qH(n,r),h.YH(),Bb.SB())},Lb.wCt=function(t,s,e){const i=wb(this),n=i.Wj().nV().ert(t);if(!n)return;s=Math.floor(s);const r=n.RI().OI(s);if(!r)return;"color"===r?(Db.Qo(e),e=Db):"percent"===r&&(e/=100);const h=n.tk(),o=i.cB().XU();o.KH(h,s,e)&&o.JH(h)&&Bb.SB()};const jb=Fb.zn(Fb.Rect),Ub=[],zb=[];let Hb=!1,Jb=null,qb=!1;const Yb=new Set;function*Xb(t){if(!t)return!1;const s=this.$B(),e=s.lk(),i=s.$k(),n=i.Qk(),r=i.sgt(),h=r.Wj(),o=r.Gxt(),a=r.Pxt(),l=n.PY(),u=s.mN(),c=u-1,f=l.Hk(),d=n.AY(f);let p=o.get("collmemory");p||(p=Fb.zn(Fb._u),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.Sf().addEventListener("instancedestroy",(t=>_b(p,t.VH))));const m=h.DW(),g=t.DW(),y=m.FW();let S=null;for(let s=0;s<y.length;++s){const n=y[s];g.Jdt()?(e.MTt(n.cB().fB(),t,n.cB().pz(),Ub),S=Ub,e.vCt(n,t,S)):S=g.FW();for(let s=0;s<S.length;++s){const r=S[s];if(e.o$(n,r)||e.bCt(n,r)){const s=Gb(p,n,r);let e=!1,o=-2;"number"==typeof s&&(e=!0,o=s);const a=!e||o<c;if(Cb(p,n,r,u),a){const s=f.GY();i.DY(s);const e=h.DW(),o=t.DW();if(e.tpt(!1),o.tpt(!1),h===t){const t=e.spt();Fb.bh(t),t.push(n),t.push(r),h.Fvt()}else{const s=e.spt(),i=o.spt();Fb.bh(s),Fb.bh(i),s.push(n),i.push(r),h.Fvt(),t.Fvt()}yield*f.Cvt(l,d),i.kY(s)}}else Ib(p,n,r)}Fb.bh(Ub)}return n.WY(),!1}Lb.MCt=function(t){const s=xb(this);t=xb(t);const e=s.$B();if(e.xCt())return Xb.call(s,t);if(!t)return!1;const i=e.lk(),n=e.$k(),r=n.Qk(),h=n.sgt(),o=h.Wj(),a=h.Gxt(),l=h.Pxt(),u=r.PY(),c=e.mN(),f=c-1,d=u.Hk(),p=r.AY(d);let m=a.get("collmemory");m||(m=Fb.zn(Fb._u),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),e.Sf().addEventListener("instancedestroy",(t=>_b(m,t.VH))));const g=o.DW(),y=t.DW(),S=g.FW();let w=null;for(let s=0;s<S.length;++s){const e=S[s];y.Jdt()?(i.MTt(e.cB().fB(),t,e.cB().pz(),Ub),w=Ub,i.vCt(e,t,w)):w=y.FW();for(let s=0;s<w.length;++s){const r=w[s];if(i.o$(e,r)||i.bCt(e,r)){const s=Gb(m,e,r);let i=!1,h=-2;"number"==typeof s&&(i=!0,h=s);const a=!i||h<f;if(Cb(m,e,r,c),a){const s=d.GY();n.DY(s);const i=o.DW(),h=t.DW();if(i.tpt(!1),h.tpt(!1),o===t){const t=i.spt();Fb.bh(t),t.push(e),t.push(r),o.Fvt()}else{const s=i.spt(),n=h.spt();Fb.bh(s),Fb.bh(n),s.push(e),n.push(r),o.Fvt(),t.Fvt()}d.LY(u,p),n.kY(s)}}else Ib(m,e,r)}Fb.bh(Ub)}return r.WY(),!1},Lb.TCt=function(t){return t=xb(t),Pb(wb(this),t,0,0)},Lb.CCt=function(t,s,e){return t=xb(t),Pb(wb(this),t,s,e)},Lb.ICt=function(){return!0},Lb.qz=function(){return vb(this).qz()},Lb.T3=function(){return vb(this).T3()},Lb._Ct=function(t,s){const e=xb(this);t=xb(t);const i=e.$B(),n=this.DW().FW();if(0===n.length)return!1;const r=t.DW();let h=r.FW();if(r.Jdt()){const s=[...i.GCt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.Jdt()?null:new Set(h),a=new Set;for(let e=0,i=n.length;e<i;++e){const i=n[e];if(1===s)for(const s of i.kz())s.PCt(t)&&(null===o||o.has(s))&&a.add(s);else{let e;if(0===s){if(e=i.Fz(),null===e)continue}else e=i.Lz();e.PCt(t)&&(null===o||o.has(e))&&a.add(e)}}return 0!==a.size&&(r.rpt(a),t.Fvt(),!0)},Lb.ACt=function(t,s){const e=xb(this);t=xb(t);const i=e.$B(),n=e.DW().FW();if(0===n.length)return!1;const r=t.DW();let h=r.FW();if(r.Jdt()){const s=[...i.GCt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.Jdt()?null:new Set(h),a=new Set;for(let e=0,i=n.length;e<i;++e){const i=n[e];2!==s||i.T3()||!i.PCt(t)||null!==o&&!o.has(i)||a.add(i);for(const e of 0===s?i.children():i.Vz())2===s&&e.T3()||e.PCt(t)&&(null===o||o.has(e))&&a.add(e)}return 0!==a.size&&(r.rpt(a),t.Fvt(),!0)},Lb.RCt=function(t,s,e){const i=xb(this);t=xb(t);const n=i.$B(),r=i.DW().FW();if(0===r.length)return!1;const h=t.DW();let o=h.FW();if(h.Jdt()){const s=[...n.GCt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.Jdt()?null:new Set(o),l=[];for(let i=0,n=r.length;i<n;++i){const n=r[i];if(0===s){const s=n.Wz(e);null!==s&&s.PCt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.PCt(t)){if(0===e){(null===a||a.has(s))&&l.push(s);break}--e}}return 0!==l.length&&(h.npt(l),t.Fvt(),!0)},Lb.ECt=function(t,s,e){const i=wb(this);switch(t){case 0:default:return Fb.compare(i.Bz(),s,e);case 1:return Fb.compare(i.OCt(),s,e)}},Lb.Uz=function(t,s,e,i,n,r,h,o,a,l){t=xb(t);const u=wb(this),c=Bb.igt().Wj();for(const f of t.FCt(u,c)){if(!f.MW().aW())return;u.Uz(f,{Xz:s,Zz:e,tH:i,eH:n,nH:r,aH:h,hH:o,uH:a,fH:l})}},Lb.zz=function(t){t=xb(t);const s=wb(this),e=Bb.igt().Wj();for(const i of t.FCt(s,e))s.zz(i)},Lb.DCt=function(){const t=wb(this);t.qz()&&t.Fz().zz(t)},Lb.LCt=function(){const t=wb(this).Fz();return t?t.tU():-1},Lb.kCt=function(){return wb(this).Bz()},Lb.NCt=function(){return wb(this).OCt()},Lb.BCt=function(t,s){t=Math.floor(t),s=Math.floor(s);const e=vb(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(e.yH(),e.ZU()):e.mH(t,s)},Lb.wH=function(t,s,e,i,n,r,h,o){const a=vb(this);a.wH(t,s,{mode:0===e?"absolute":"relative",x:i,y:n,gj:r,xH:h,TH:o})&&a.ZU()},Lb.$Ct=function(){const t=vb(this);return t.bH()?t.MH()._x():0},Lb.WCt=function(){const t=vb(this);return t.bH()?t.MH().Gx():0},Lb.VCt=function(t){const s=vb(this);t=2===t?!s.YV():0!==t,s.YV()!==t&&s.JV(t)},Lb.DH=function(t,s){this instanceof self.$j?this.Zq(t,s):this.DH(t,s)},Lb.jCt=function(t,s){this instanceof self.$j?this.tY(t,""+s):this.jCt(t,""+s)},Lb.UCt=function(t){this instanceof self.$j?this.sY(t):this.UCt(t)},Lb.zCt=function(){this instanceof self.$j?this.Yq():this.EH()},Lb.HCt=function(){this instanceof self.$j?this.Xq():this.OH()},Lb.JCt=function(){return this instanceof self.$j?this.Kq():this.JCt()},Lb.qCt=function(t){this instanceof self.$j?this.YCt(0!==t):this.XCt(0!==t)},Lb.KCt=function(){return this instanceof self.$j?this.Qvt():this.ZCt()},kb.QCt=function(t,s,e){return Fb.compare(this.iq().Aht(t),s,e)},Nb.QCt=function(t,s,e){return Fb.compare(bb(this).Aht(t),s,e)},kb.tIt=function(t){return!!this.iq().Aht(t)},Nb.tIt=function(t){return!!bb(this).Aht(t)},Lb.sIt=function(t,s){const e=xb(this),i=e.DW(),n=i.FW();if(!n.length)return!1;const r=e.k0();let h=null,o=0;for(let i=0,a=n.length;i<a;++i){const a=n[i],l=r?a.Wj().eMt(e.iMt()):0,u=a.Aht(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return i.lpt(h),!0},Lb.eIt=function(t){const s=xb(this);return s.$B().sgt().xxt()?Ob(s,t):Eb(s,t)},Lb.DJ=function(t){const s=new Set(Fb.Lh(t)),e=wb(this).lU();return s.isSubsetOf(e)},Lb.iIt=function(){return wb(this).nIt()},Lb.rIt=function(){return wb(this).lU().size},Lb.hIt=function(t){return wb(this).oIt(t)},Lb.aIt=function(t,s){const e=Fb.Lh(s);if(0===e.length)return;const i=wb(this),n=new Set(i.lU());if(0===t)for(const t of e)n.add(t);else if(1===t)for(const t of e)n.delete(t);i.cU(n)},Lb.lIt=function(){Bb.Jj(wb(this))},Lb.uIt=function(){return!0},Lb.cIt=function(){return!0},kb.fIt=function(t,s){this.iq().Rht(t,s)},Nb.fIt=function(t,s){bb(this).Rht(t,s)},kb.dIt=function(t,s){const e=this.iq(),i=e.Aht(t);"number"==typeof i&&"number"!=typeof s?s=parseFloat(s):"string"==typeof i&&"string"!=typeof s&&(s=s.toString()),e.Rht(t,i+s)},Nb.dIt=function(t,s){const e=bb(this),i=e.Aht(t);"number"==typeof i&&"number"!=typeof s?s=parseFloat(s):"string"==typeof i&&"string"!=typeof s&&(s=s.toString()),e.Rht(t,i+s)},kb.pIt=function(t,s){const e=this.iq(),i=e.Aht(t);"number"==typeof i&&("number"!=typeof s&&(s=parseFloat(s)),e.Rht(t,i-s))},Nb.pIt=function(t,s){const e=bb(this),i=e.Aht(t);"number"==typeof i&&("number"!=typeof s&&(s=parseFloat(s)),e.Rht(t,i-s))},kb.mIt=function(t,s){this.iq().Rht(t,s?1:0)},Nb.mIt=function(t,s){bb(this).Rht(t,s?1:0)},kb.gIt=function(t){const s=this.iq();s.Rht(t,0===s.Aht(t)?1:0)},Nb.gIt=function(t){const s=bb(this);s.Rht(t,0===s.Aht(t)?1:0)},Lb.yIt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const e=wb(this),i="state";Bb.SIt(),e.A6(i),e.ox(s,i),Bb.wIt(i,{vIt:!0})},Lb.bIt=function(){return JSON.stringify(wb(this).hx("state"))},Lb.MIt=function(){return wb(this).Wj().Pc()},Lb.xIt=function(){const t=Bb.tgt().$pt();let s=t.NW();for(const e of Bb.GCt(t))++s;return s},Lb.TIt=function(){return Bb.tgt().$pt().DW().FW().length},kb.eU=function(){return this.iq().eU()},Nb.eU=function(){return bb(this).eU()},kb.tU=function(){return this.iq().tU()},Nb.tU=function(){return bb(this).tU()},Lb.Tyt=function(t){const s=wb(this);return t.toLowerCase()===Bb.$k().Gyt(s)},Lb.dU=function(t){const s=wb(this);Bb.$k().dU(s,t)},Lb.CIt=function(t){const s=xb(this);return Bb.$k().syt().IIt(s.DW().FW(),t),!0},Lb._It=function(){return wb(this).nU()},Fb.GIt=function(t,s,e){const i=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.AB,S=s.Nrt,w=s.Brt,v=Object.assign({},Lb,e>=2?Nb:kb);n&&(y.ITt=v.ITt,y._Tt=v._Tt,y.GTt=v.GTt,y.PTt=v.PTt,y.ATt=v.ATt,S.HM=v.HM,S.YM=v.YM,S.RTt=v.RTt,S.OTt=v.OTt,S.DTt=v.DTt,S.NTt=v.NTt,w.PIt=v.zM,w.AIt=v.qM,w.aN=v.lN),r&&(y.BTt=v.BTt,y.$Tt=v.$Tt,S.Yg=v.Yg,S.jg=v.jg,S.TA=v.TA,w.RIt=v.Vg,w.EIt=v.Zg,w.OIt=v.WTt,w.FIt=v.VTt,w.DIt=v.jTt,w.LIt=v.UTt,w.kIt=v.zTt,w.NIt=v.HTt),h&&(y.BIt=v.JTt,y.$It=v.qTt,y.YTt=v.YTt,S.uV=v.uV,S.XTt=v.XTt,S.KTt=v.KTt,S.ZTt=v.ZTt,S.QTt=v.QTt,S.tCt=v.tCt,w.WIt=v.cV),o&&(y.YV=v.YV,y.sCt=v.sCt,S.JV=v.JV,S.eO=v.eO,S.iCt=v.iCt,w.Opacity=v.tO,w.ColorValue=v.nO),a&&(y.nCt=v.nCt,y.rCt=v.rCt,y.hCt=v.hCt,S.oCt=v.oCt,S.aCt=v.aCt,S.lCt=v.lCt,S.uCt=v.uCt,S.KM=v.KM,w.fCt=v.fCt,w.dCt=v.dCt,w.pCt=v.pCt,w.mCt=v.mCt,w.gCt=v.gCt),l&&(y.yCt=v.yCt,S.SCt=v.SCt,S.wCt=v.wCt),d&&(y.ICt=v.ICt,y.qz=v.qz,y.T3=v.T3,y._Ct=v._Ct,y.ACt=v.ACt,y.RCt=v.RCt,y.ECt=v.ECt,S.Uz=v.Uz,S.zz=v.zz,S.DCt=v.DCt,w.LCt=v.LCt,w.kCt=v.kCt,w.NCt=v.NCt),p&&(S.BCt=v.BCt,S.wH=v.wH,w.$Ct=v.$Ct,w.WCt=v.WCt),u&&(y.YV=v.YV,S.JV=v.VCt,S.VIt=v.DH,S.jIt=v.jCt,S.UIt=v.UCt),c&&(y.zIt=v.JCt,S.HIt=v.zCt,S.JIt=v.HCt),f&&(y.Iu=v.KCt,S.qIt=v.qCt),m&&(y.MCt=v.MCt,y.TCt=v.TCt,y.CCt=v.CCt,s.YIt=Rb),i||(y.QCt=v.QCt,y.tIt=v.tIt,y.sIt=v.sIt,y.eIt=v.eIt,y.DJ=v.DJ,S.fIt=v.fIt,S.dIt=v.dIt,S.pIt=v.pIt,S.mIt=v.mIt,S.gIt=v.gIt,S.aIt=v.aIt,y.uIt=v.uIt,y.cIt=v.cIt,S.lIt=v.lIt,S.yIt||(S.yIt=v.yIt),w.bIt||(w.bIt=v.bIt),w.xIt=v.xIt,w.TIt=v.TIt,w.XIt=v.eU,w.KIt=v.tU,w.MIt=v.MIt,w.iIt=v.iIt,w.rIt=v.rIt,w.hIt=v.hIt,y.Tyt=v.Tyt,S.dU=v.dU,S.CIt=v.CIt),g&&(w._It=v._It)}}{const Kb=self._s;Kb.eyt=class extends Kb.jn{constructor(t){super(),this.fpt=t,this.Hc="",this.xD=-1,this.ZIt="",this.QIt=!1,this.t_t=null,this.bpt=0,this.JSt=[],this._pt=null,this.s_t=new Map,this.e_t=null,this.i_t=null,this.n_t=-1,this.Zvt=null,this.r_t=null,this.h_t=!1}Hn(){this.Hc="",this.xD=-1,this.ZIt="",this.t_t=null,this.i_t=null,this.Zvt=null,this.r_t=null,this.n_t=-1,Kb.bh(this.JSt),this._pt&&(this._pt.clear(),this._pt=null);for(const t of this.s_t.values())t.Hn();this.s_t.clear(),this.e_t=null}UM(){const t=this.fpt,s=t.$B().L0(),e=t.tgt();this.t_t=e.Hk(),this.bpt=e.Opt()+1;const i=t.Hyt(this.t_t);i&&(this.i_t=i,this.Zvt=i.mbt(),this.r_t=i.pbt().map((t=>t.qit())),i.Svt()&&(this.n_t=i.wbt()));for(const t of s){const s=t.DW();s.Jdt()&&!this.t_t.Vwt(t)||(this.JSt.push(t),this.s_t.set(t,Kb.zn(Kb.o_t,s)))}const n=t.Jk();this._pt=n.size>0?n:null}a_t(t){this.Hc="timer",this.UM(),this.xD=this.fpt.$B().dN()+t}l_t(t){this.Hc="walltimer",this.UM(),this.xD=this.fpt.$B().yN()+t}u_t(t){this.Hc="signal",this.UM(),this.ZIt=t.toLowerCase()}IIt(t,s){this.Hc="instance-signals",this.UM(),this.ZIt=s.toLowerCase(),this.e_t=new Set(t)}c_t(t){this.Hc="promise",this.UM(),t.then((()=>this.vyt())).catch((t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.vyt()}))}f_t(){return"timer"===this.Hc}d_t(){return"walltimer"===this.Hc}Syt(){return"signal"===this.Hc}Iyt(){return"instance-signals"===this.Hc}Vyt(){return"promise"===this.Hc}wyt(){return this.ZIt}p_t(){return this.QIt}vyt(){this.QIt=!0}_yt(t){this.e_t.delete(t),0===this.e_t.size&&this.vyt()}ryt(){return this.f_t()?this.xD<=this.fpt.$B().dN():this.d_t()?this.xD<=this.fpt.$B().yN():this.p_t()}m_t(t){t.Gpt(this.t_t,this.bpt);for(const[t,s]of this.s_t.entries()){const e=t.DW();s.Gpt(e)}this._pt&&t.Hpt([...this._pt]);const s=this.i_t;s&&(s.Pvt(this.Zvt),s.pbt().map(((t,s)=>t.Ant(this.r_t[s]))),s.Svt()&&s.vbt(this.n_t))}hyt(t){this.m_t(t),this.t_t.wvt(t),this.i_t&&this.i_t.Svt()&&this.i_t.Bvt(this.n_t),this.fpt.Kgt(this.JSt),this.h_t=!0}async uyt(t){this.m_t(t);for(const s of this.t_t.vvt(t))await this.fpt.$B().Fgt(s);this.i_t&&this.i_t.Svt()&&this.i_t.Bvt(this.n_t),this.fpt.Kgt(this.JSt),this.h_t=!0}oyt(){return this.h_t}Vdt(t){for(const s of this.s_t.values())s.Vdt(t);if("instance-signals"===this.Hc){for(const s of t)this.e_t.delete(s);0===this.e_t.size&&this.vyt()}}v3(){const t={},s={wt:this.Hc,t:this.xD,st:this.ZIt,s:this.QIt,ev:this.t_t.U0(),sm:this.JSt.map((t=>t.U0())),dsm:this._pt?[...this._pt].map((t=>t.U0())):null,sols:t};this.t_t.hvt(this.bpt)&&(s.act=this.t_t.ngt(this.bpt).U0());for(const[s,e]of this.s_t)t[s.U0().toString()]=e.v3();return"instance-signals"===this.Hc&&(s.pi=[...this.e_t].map((t=>t.tU()))),s}static jyt(t,s){const e=t.$B(),i=t.dgt(s.ev);if(!i)return null;let n=0;if(s.hasOwnProperty("act")){const e=t.mgt(s.act);if(!e)return null;n=e.tk()}const r=Kb.zn(Kb.eyt,t);r.xD=s.t,s.hasOwnProperty("wt")?r.Hc=s.wt:r.Hc=-1===r.xD?"signal":"timer",r.ZIt=s.st,r.QIt=s.s,r.t_t=i,r.bpt=n;for(const t of s.sm){const s=e._Y(t);s&&r.JSt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=e._Y(t);s&&(r._pt||(r._pt=new Set),r._pt.add(s))}for(const[i,n]of Object.entries(s.sols)){const s=parseInt(i,10),h=e._Y(s);if(!h)continue;const o=Kb.zn(Kb.o_t,null);o.b3(t,n),r.s_t.set(h,o)}if("instance-signals"===r.Hc){r.e_t=new Set;for(const t of s.pi){const s=e.hB(t);s&&r.e_t.add(s)}}return r}}}{const Zb=self._s;Zb.o_t=class extends Zb.jn{constructor(t){super(),this.Ddt=null,this.g_t=!0,this.FZ=[],t&&(this.Ddt=t.Wj(),this.g_t=t.Jdt(),Zb.Ch(this.FZ,t.spt()))}Hn(){this.Ddt=null,Zb.bh(this.FZ)}Gpt(t){t.tpt(this.g_t),Zb.Ch(t.spt(),this.FZ)}Vdt(t){Zb.Ah(this.FZ,t)}v3(){return{sa:this.g_t,insts:this.FZ.map((t=>t.tU()))}}b3(t,s){const e=t.$B();this.g_t=!!s.sa,Zb.bh(this.FZ);for(const t of s.insts){const s=e.hB(t);s&&this.FZ.push(s)}}}}{let Qb=function(t,s){let e=t.get(s);return e||(e=new Map,t.set(s,e)),e};GetNextParamMap=Qb;const tM=self._s;tM.y_t=class extends tM.jn{constructor(t){super(),this.Nc=t.runtime,this.$c=t.id,this.Yn=t.name??"",this.S_t=!!t.Y$,this.w_t=!!t.v_t,this.b_t=!!t.sW,this.M_t=!!t.x_t,this.T_t=!!t.iW,this.C_t=!!t.I_t,this.__t=!!t.lW,this.G_t=!!t.Q$,this.P_t=!!t.rW,this.A_t=t.R_t,this.E_t=null,this.O_t=new Map,this.F_t=new Map,this.D_t=new Map,this.L_t=new Map,this.k_t=t.N_t,this.B_t=null}Hn(){this.Nc=null}$B(){return this.Nc}q$(){return this.$c}Pc(){return this.Yn}$_t(){}Cyt(){return this.Mxt()>=2?this.B_t.constructor:this.constructor}Mxt(){return this.A_t}W_t(t=!1){let s=this.k_t;return t&&"function"!=typeof s&&this.Mxt()>=2&&(s=globalThis.uq),s}X$(){return this.S_t}Z$(){return this.w_t}tW(){return this.G_t}hW(){return this.P_t}eW(){return this.b_t}wM(){return this.M_t}nW(){return this.T_t}aW(){return this.C_t}uW(){return this.__t}Ubt(t,s){if(!s)throw new Error("missing 'this' binding");let e=this.O_t.get(t);return e||(e=t.bind(s),this.O_t.set(t,e),e)}Sxt(t,s,e){if(!s)throw new Error("missing 'this' binding");const i=Qb(this.F_t,t);let n=i.get(e);return n||(n=t.bind(s,e),i.set(e,n),n)}wxt(t,s,e,i){if(!s)throw new Error("missing 'this' binding");const n=Qb(this.D_t,t),r=Qb(n,e);let h=r.get(i);return h||(h=t.bind(s,e,i),r.set(i,h),h)}vxt(t,s,e,i,n){if(!s)throw new Error("missing 'this' binding");const r=Qb(this.L_t,t),h=Qb(r,e),o=Qb(h,i);let a=o.get(n);return a||(a=t.bind(s,e,i,n),o.set(n,a),a)}V_t(t){if(!this.X$())throw new Error("must be single-global plugin");this.E_t=t}yW(){if(!this.X$())throw new Error("must be single-global plugin");return this.E_t}wW(){if(!this.X$())throw new Error("must be single-global plugin");return this.E_t.wW()}j_t(){const t=this.Mxt();tM.H$.U_t(this,t);const s=this.W_t(!0);if(s){if(this.B_t=new s,!(this.B_t instanceof self.U$))throw new TypeError("plugin class must derive from IPlugin")}else this.B_t=new self.U$;tM.H$.z_t(t)}pW(){return this.B_t}}}{const sM=self._s;sM.H_t=class extends sM.y_t{constructor(t,s){super(t),this.J_t=s,this.q_t=0,this.Y_t=new Map,this.X_t("elem-focused",(t=>t.K_t())),this.X_t("elem-blurred",(t=>{t&&t.Z_t()}))}Hn(){super.Hn()}Q_t(t){const s=this.q_t++;return this.Y_t.set(s,t),s}tGt(t){this.Y_t.delete(t)}X_t(t,s){this.Nc.IU(this.J_t,t,(t=>{const e=this.Y_t.get(t.elementId);s(e,t)}))}}}{const eM=self._s;eM.sGt=class extends eM.jn{constructor(t){super(),this.Ddt=t,this.Nc=t.$B(),this.eGt=t.MW()}Hn(){this.Ddt=null,this.Nc=null,this.eGt=null}Wj(){return this.Ddt}$B(){return this.Nc}MW(){return this.eGt}gJ(){return this.Ddt.gJ()}$_t(){}Fxt(t){}wTt(t){}vTt(t){}O5(t){}B5(){}L5(){}o4(t){}iGt(){}W_t(){return null}nGt(t,s,e){const i=eM.zn(eM.Event,t,s);i.rGt=this,e&&Object.assign(i,e),this.Wj().XK(i)}}}{const iM=self._s;iM.hGt=class extends iM.jn{constructor(t,s){super(),this.fe=t,this.J_t=s,this.oGt=null,this.Nc=t.$B(),this.Ddt=this.fe.Wj(),this.aGt=this.Ddt.STt(),this.w6=null,this.b6=null,this.DU=!1,this.kU=!1,this.Xf=null,this.YP=!1}Hn(){this.YP=!0,this.lGt(),this.uGt(),this.w6=null,this.b6=null,this.Xf&&(this.Xf.Hn(),this.Xf=null),this.fe=null,this.Nc=null,this.Ddt=null,this.aGt=null}Jn(){return this.YP}iq(){return this.fe}$B(){return this.Nc}Wj(){return this.Ddt}MW(){return this.aGt.MW()}STt(){return this.aGt}cGt(){return this.fe.oB()}xU(t){return this.Nc.xU(t,this.fe,null)}fGt(t){return this.Nc.fGt(t,this.fe,null)}GB(t){return this.Nc.GB(t,this.fe,null)}dGt(t,s){return this.Nc.dGt(t,this.fe,s)}pGt(t,s){return this.Nc.pGt(t,this.fe,s)}mGt(t){return this.Nc.mGt(t)}gGt(t,s){this.Nc.IU(this.J_t,t,s)}yGt(t){for(const[s,e]of t)this.gGt(s,e)}SGt(t,s){this.Nc.Wc(this.J_t,t,s)}wGt(t,s){return this.Nc.vB(this.J_t,t,s)}vGt(t,s){if(!this.Nc.Tk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.J_t,handler:t,data:s,responseId:null});this.SGt(t,s)}bGt(t){if(!t)throw new Error("cannot set empty component id");this.oGt=t}MGt(){if(!this.oGt)throw new Error("wrapper extension component id not set");return this.Nc.VU(this.oGt)}UU(t,s){if(!this.oGt)throw new Error("wrapper extension component id not set");this.Nc.UU(this.oGt,t,s)}xGt(t){for(const[s,e]of t)this.UU(s,e)}yY(t,s){if(!this.oGt)throw new Error("wrapper extension component id not set");this.Nc.yY(this.oGt,t,s)}SY(t,s){if(!this.oGt)throw new Error("wrapper extension component id not set");return this.Nc.SY(this.oGt,t,s)}P8(){}TGt(){}CGt(){if(!this.DU){if(!this.w6)if(this.Nc.RU()){const t=globalThis.EU,s=this.MW();this.w6=()=>{const e=performance.now();this.P8(),t.FU(s,performance.now()-e)}}else this.w6=()=>this.P8();this.Nc.Sf().addEventListener("tick",this.w6),this.DU=!0}}lGt(){this.DU&&(this.Nc.Sf().removeEventListener("tick",this.w6),this.DU=!1)}IGt(){return this.DU}_Gt(){if(!this.kU){if(!this.b6)if(this.Nc.RU()){const t=globalThis.EU,s=this.MW();this.b6=()=>{const e=performance.now();this.TGt(),t.FU(s,performance.now()-e)}}else this.b6=()=>this.TGt();this.Nc.Sf().addEventListener("tick2",this.b6),this.kU=!0}}uGt(){this.kU&&(this.Nc.Sf().removeEventListener("tick2",this.b6),this.kU=!1)}GGt(){return this.kU}PGt(){return[]}hx(){return null}ox(t){}bht(t){}_ht(t,s){}vot(t,s,e){if(0===s)return;const i=this.bht(t);if("number"!=typeof i)throw new Error("expected number");this._ht(t,i+s,e)}AGt(t,s,e,i){}RGt(t,...s){t.call(this,...s)}EGt(t,...s){return t.call(this,...s)}W_t(){return null}nGt(t,s,e){if(!this.fe.OGt())return;const i=this.cGt(),n=iM.zn(iM.Event,t,s);n.VH=i,e&&Object.assign(n,e),i.dispatchEvent(n)}wM(){return!1}}}{const nM=self._s;nM.FGt=class extends nM.hGt{constructor(t,s){super(t,s),this.Jst=t.cB(),this.DGt=null,this.LGt=null}Hn(){if(this.DGt){const t=this.Nc.Sf();t.removeEventListener("renderercontextlost",this.DGt),t.removeEventListener("renderercontextrestored",this.LGt),this.DGt=null,this.LGt=null}this.Jst=null,super.Hn()}kGt(){this.NGt()}BGt(){}$Gt(){}NGt(){if(this.DGt)return;this.DGt=()=>this.IZ(),this.LGt=()=>this.WGt();const t=this.Nc.Sf();t.addEventListener("renderercontextlost",this.DGt),t.addEventListener("renderercontextrestored",this.LGt)}IZ(){this.BGt()}WGt(){this.$Gt()}cB(){return this.Jst}Bet(){return!1}Net(){if(!this.Bet())throw new Error("original size not known");const t=this.VGt();if(t)return t.Vg()}Wet(){if(!this.Bet())throw new Error("original size not known");const t=this.VGt();if(t)return t.Zg()}VGt(){return null}jGt(){const t=this.VGt();if(t){const s=t.cC();if(s)return[s.Vg(),s.Zg()]}return[100,100]}UGt(){const t=this.VGt();return t?t.sR():null}zGt(){const t=this.VGt();return t?t.HGt():null}JGt(){const t=this.VGt();return!!t&&t.qGt()}FTt(t){const s=this.fe.cB();return[s.zM(),s.qM(),s.cz()]}iGt(t,s,e){}YGt(t,s){}K2(){return!0}}}{const rM=self._s,hM=rM.zn(rM.Rect);rM.XGt=class extends rM.FGt{constructor(t,s){super(t,s),this.KGt=this.MW().Q_t(this),this.ZGt=!0,this.QGt=!1,this.tPt=!1,this.sPt=-.2,this.ePt=rM.zn(rM.Rect,0,0,-1,-1);const e=this.Nc.IB();this.iPt=e.Oq(),this.nPt=e.Fq(),this.rPt=-1,this.hPt=-1,this.oPt=!1,this.CGt()}Hn(){this.MW().tGt(this.KGt),this.aPt("destroy"),this.KGt=-1,super.Hn()}AH(){if(this.Nc.Tk())throw new Error("not valid in worker mode");return this.lPt("get-element")}aPt(t,s){s||(s={}),s.elementId=this.KGt,this.SGt(t,s)}lPt(t,s){return s||(s={}),s.elementId=this.KGt,this.vGt(t,s)}uPt(t,s){return s||(s={}),s.elementId=this.KGt,this.wGt(t,s)}cPt(t){t||(t={});const s=this.cB();t.elementId=this.KGt,t.isVisible=s.YV(),t.htmlIndex=s.fB().$q(),t.htmlZIndex=s.Wq(),Object.assign(t,this.fPt()),this.ZGt=!!t.isVisible,this.vGt("create",t),this.dPt(!0)}VCt(t){t=!!t,this.ZGt!==t&&(this.ZGt=t,this.aPt("set-visible",{isVisible:t}))}P8(){this.dPt(!1)}pPt(){const t=this.Nc.IB().Hq();return"Android"===rM.Zs.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}dPt(t){if(this.iq().Jq())return;const s=this.cB(),e=s.fB(),i=s.pz();let[n,r]=e.Oj(i.Za(),i.Qa()),[h,o]=e.Oj(i.tl(),i.sl());const a=this.Nc.IB(),l=a.F$(),u=a.L$();if(!s.YV()||!e.YV())return void this.VCt(!1);if(!this.pPt()&&(h<=0||o<=0||n>=l||r>=u))return void this.VCt(!1);hM.set(n,r,h,o);const c=a.Oq(),f=a.Fq(),d=e.$q(),p=s.Wq();if(!t&&hM.equals(this.ePt)&&this.iPt===c&&this.nPt===f&&this.rPt===d&&this.hPt===p)return void this.VCt(!0);this.ePt.S(hM),this.iPt=c,this.nPt=f,this.rPt=d,this.hPt=p,this.VCt(!0);let m=null;this.tPt&&(m=e.qq()+this.sPt),this.lPt("update-position",{left:Math.round(this.ePt.Za()),top:Math.round(this.ePt.Qa()),width:Math.round(this.ePt.width()),height:Math.round(this.ePt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}EH(){this.lPt("focus",{focus:!0})}OH(){this.lPt("focus",{focus:!1})}K_t(){this.QGt=!0}Z_t(){this.QGt=!1}JCt(){return this.QGt}DH(t,s){this.aPt("set-css-style",{prop:rM.bo(t),val:s})}jCt(t,s){this.aPt("set-attribute",{name:t,val:s})}UCt(t){this.aPt("remove-attribute",{name:t})}mPt(){this.oPt||(this.oPt=!0,Promise.resolve().then((()=>{this.oPt=!1,this.aPt("update-state",this.fPt())})))}fPt(){}gPt(){return this.KGt}}}{const oM=self._s,aM=self.zH;oM.yPt=class extends oM.jn{constructor(t){super(),this.Nc=t.runtime,this.$c=t.id,this.Yn=t.name??"",this.SPt=oM.zn(oM.Du),this.wPt=oM.zn(oM.Du),this.A_t=t.R_t,this.k_t=t.N_t,this.vPt=null}Hn(){this.wPt.Hn(),this.SPt.Hn(),this.Nc=null}$B(){return this.Nc}q$(){return this.$c}Pc(){return this.Yn}$_t(){}Mxt(){return this.A_t}W_t(t=!1){let s=this.k_t;return t&&"function"!=typeof s&&this.Mxt()>=2&&(s=globalThis.nY),s}bPt(t){this.SPt.Bu(t)}e8(){return this.SPt.$u()}T0(t){this.wPt.Bu(t)}_0(t){this.wPt.Ru(t)}FW(){return this.wPt.$u()}j_t(){const t=this.Mxt();oM.H$.U_t(this,t);const s=this.W_t(!0);if(s){if(this.vPt=new s,!(this.vPt instanceof aM))throw new TypeError("behavior class must derive from IBehavior")}else this.vPt=new aM;oM.H$.z_t(t)}kH(){return this.vPt}}}{const lM=self._s;lM.MPt=class extends lM.jn{constructor(t){super(),this.Nc=t.$B(),this.rMt=t,this.Ddt=t.Wj(),this.xPt=t.NH(),this.xPt.bPt(this.Ddt)}Hn(){this.Nc=null,this.rMt=null,this.Ddt=null,this.xPt=null}$_t(){}WH(){return this.rMt}Wj(){return this.Ddt}$B(){return this.Nc}NH(){return this.xPt}}}{const uM=self._s;uM.TPt=class extends uM.jn{constructor(t,s){super(),this.plt=t,this.J_t=s,this.fe=t.jH(),this.Nc=t.$B(),this.rMt=t.WH(),this.aGt=this.rMt.STt(),this.DU=!1,this.kU=!1,this.mY=!1,this.Xf=null}Hn(){this.lGt(),this.uGt(),this.CPt(),this.Xf&&(this.Xf.Hn(),this.Xf=null),this.plt=null,this.fe=null,this.Nc=null,this.rMt=null,this.aGt=null}NH(){return this.rMt.NH()}IPt(){return this.plt}jH(){return this.fe}Wj(){return this.fe.Wj()}cB(){return this.fe.cB()}$B(){return this.Nc}WH(){return this.rMt}STt(){return this.aGt}cGt(){return this.plt.cGt()}xU(t){return this.Nc.xU(t,this.fe,this.rMt)}fGt(t){return this.Nc.fGt(t,this.fe,this.rMt)}GB(t){return this.Nc.GB(t,this.fe,this.rMt)}_Pt(){}P8(){}TGt(){}GPt(){}CGt(){this.DU||(this.Nc.lY(this),this.DU=!0)}lGt(){this.DU&&(this.Nc.uY(this),this.DU=!1)}IGt(){return this.DU}_Gt(){this.kU||(this.Nc.cY(this),this.kU=!0)}uGt(){this.kU&&(this.Nc.fY(this),this.kU=!1)}GGt(){return this.kU}PPt(){this.mY||(this.Nc.dY(this),this.mY=!0)}CPt(){this.mY&&(this.Nc.pY(this),this.mY=!1)}APt(){return this.mY}PGt(){return[]}gGt(t,s){this.Nc.IU(this.J_t,t,s)}RPt(t,s){}hx(){return null}ox(t){}bht(t){}_ht(t,s){}vot(t,s){if(0===s)return;const e=this.bht(t);if("number"!=typeof e)throw new Error("expected number");this._ht(t,e+s)}AGt(t,s,e,i){}RGt(t,...s){t.call(this,...s)}EGt(t,...s){return t.call(this,...s)}W_t(){return null}nGt(t,s,e){if(!this.plt.OGt())return;const i=this.cGt(),n=uM.zn(uM.Event,t,s);n.EPt=i,n.VH=i.VH,e&&Object.assign(n,e),i.dispatchEvent(n)}}}{let cM=function(t){if(t!==dM)throw new Error("invalid internal API token")};ValidateInternalAPIToken=cM;const fM=self._s;fM.EB={},fM.Llt={};const dM=fM.Gs();let pM=[],mM=[],gM=[],yM=null,SM=null,wM=null,vM=null;const bM=new Map,MM=new Map;fM.H$=class extends fM.jn{constructor(t,s){super(),this.Nc=t,this.OPt=[],this.$bt=null,this.FPt=[],this.DPt=new Map,this.LPt=null,this.kPt=null,this.NPt=new Set(s)}BPt(t){const s=t[19],e=this.Nc.jvt(t[0]);if(!e)throw new Error("missing plugin");fM.GIt(t,e,s);const i=s>=2?fM.y_t:e,n=fM.zn(i,{runtime:this.Nc,Y$:t[1],v_t:t[2],sW:t[5],iW:t[8],x_t:t[9],I_t:t[13],lW:t[14],Q$:t[17],rW:t[18],R_t:s,id:t[20],name:t[21],N_t:s>=2?e:null});n.$_t(),this.OPt.push(n),bM.set(e,n)}$Pt(){this.$bt=fM.zn(fM.EB.RB,{runtime:this.Nc,Y$:!0}),this.$bt.$_t()}WPt(t){const s=t[1],e=t[2],i=t[3],n=this.Nc.jvt(t[0]);if(!n)throw new Error("missing behavior");this.DPt.set(n,(()=>{const t=s>=2?fM.yPt:n,r=fM.zn(t,{runtime:this.Nc,id:e,name:i,R_t:s,N_t:s>=2?n:null});r.$_t(),this.FPt.push(r),MM.set(n,r),!this.LPt&&fM.Llt.VPt&&r instanceof fM.Llt.VPt?this.LPt=r:!this.kPt&&fM.Llt.jPt&&r instanceof fM.Llt.jPt&&(this.kPt=r),r.j_t()}))}UPt(t){const s=this.DPt.get(t);s&&(s(),this.DPt.delete(t))}static U_t(t,s=1){if(fM.H$.U_t!==yM)throw new Error("invalid method");1===s&&pM.push(t),mM.push(t)}static z_t(t=1){if(fM.H$.z_t!==SM)throw new Error("invalid method");1===t&&pM.pop(),mM.pop()}static zj(){if(fM.H$.zj!==wM)throw new Error("invalid method");if(0===pM.length)throw new Error("no init object set");return pM.at(-1)}static z$(t){if(fM.H$.z$!==vM)throw new Error("invalid method");if(cM(t),0===mM.length)throw new Error("no init object set");return mM.at(-1)}static zPt(t){gM.push(t)}static HPt(){gM.pop()}static bU(){if(0===gM.length)throw new Error("no init properties set");return gM.at(-1)}JPt(){for(const t of this.OPt)t.j_t()}static dW(t){return bM.get(t)||null}static HH(t){return MM.get(t)||null}ZK(){return this.$bt}qPt(){return this.LPt}YPt(){return this.kPt}VU(t){return this.NPt.has(t)}},yM=fM.H$.U_t,SM=fM.H$.z_t,wM=fM.H$.zj,vM=fM.H$.z$}{const xM=self._s,TM=new Set;xM.XPt=class extends xM.jn{constructor(){super(),this.KPt=0,this.pZ="",this.mZ=0,this.ZPt=0,this.QPt=0,this.Py=0,this.Ay=0,this.tAt=!1,this.sAt=!1,this.eAt=null,this.iAt="",this.jP=xM.zn(xM.Rect),this.nAt=xM.zn(xM.Gl),this.rAt="",this.hAt=new self.NB(this),TM.add(this)}Hn(){this.HP(),this.eAt&&0===this.eAt.PZ()&&this.eAt.Hn(),this.eAt=null,TM.delete(this),this.oAt()}static IZ(){for(const t of TM)t.iAt="",t.jP.set(0,0,0,0),t.nAt.Yl(t.jP)}aAt(t){this.pZ=t[0],this.mZ=t[1],this.ZPt=t[2],this.QPt=t[3],this.Py=t[4],this.Ay=t[5],this.tAt=t[6],this.sAt=!0}lAt(t,s,e){if(e=!!e,this.eAt)throw new Error("already loaded asset");this.pZ=s;const i={BK:e};return xM.Kh(s)&&(i.$K="remote"),this.BB(t,i),this.eAt.VK()}uAt(t,s){if(this.eAt)throw new Error("already loaded asset");this.pZ="",this.mZ=s.size,this.eAt=xM.zn(xM.WK,t.rk(),{blob:s,size:this.mZ,$K:"local"})}cAt(t){if(t===this)throw new Error("cannot replace with self");this.KPt++,this.HP(),this.pZ=t.pZ,this.mZ=t.mZ,this.ZPt=t.ZPt,this.QPt=t.QPt,this.Py=t.Py,this.Ay=t.Ay,this.tAt=t.tAt,this.sAt=t.sAt,this.eAt=t.eAt,this.iAt=t.iAt,this.jP=t.jP,this.nAt=t.nAt,this.oAt()}zK(){return this.pZ}Ou(){return this.mZ}fAt(){return this.ZPt}dAt(){return this.QPt}qGt(){return this.tAt}Vg(){return this.Py}Zg(){return this.Ay}pAt(){return this.eAt.Vg()}mAt(){return this.eAt.Zg()}BB(t,s){if(this.eAt)throw new Error("already got asset");s=Object.assign({},s,{url:this.zK(),size:this.Ou()}),this.eAt=t.NK(s)}wZ(){return this.eAt&&this.eAt.wZ()}async wX(t,s){if(!this.eAt)throw new Error("no asset");if(this.iAt)throw new Error("already loaded texture");const e=this.KPt;this.iAt="loading";const i=await this.eAt.wX(t,s);if(this.KPt!==e)return null;if(!i)return this.iAt="",null;this.iAt="loaded",this.sAt||(this.Py=i.Vg(),this.Ay=i.Zg(),this.sAt=!0);const n=this.tAt?this.Ay:this.Py,r=this.tAt?this.Py:this.Ay;return this.jP.set(this.ZPt,this.QPt,this.ZPt+n,this.QPt+r),this.jP.wt(i.Vg(),i.Zg()),this.nAt.Yl(this.jP),this.tAt&&this.nAt.su(),i}HP(){this.iAt&&(this.eAt&&this.eAt.HP(),this.iAt="",this.jP.set(0,0,0,0),this.nAt.Yl(this.jP))}cC(){return this.eAt&&"loaded"===this.iAt?this.eAt.cC():null}sR(){return this.jP}HGt(){return this.nAt}Mq(){return this.hAt}gAt(){return this.eAt}async yAt(t){t||(t=await this.eAt.AZ());const s=xM.co(this.Py,this.Ay),e=s.getContext("2d");return this.tAt?(e.rotate(Math.PI/-2),e.translate(-this.Ay,0),e.drawImage(t,this.ZPt,this.QPt,this.Ay,this.Py,0,0,this.Ay,this.Py)):e.drawImage(t,this.ZPt,this.QPt,this.Py,this.Ay,0,0,this.Py,this.Ay),s}async SAt(t){if(this.rAt)return this.rAt;const s=await this.yAt(t),e=await xM.fo(s);return this.rAt=URL.createObjectURL(e),this.rAt}oAt(){this.rAt&&(URL.revokeObjectURL(this.rAt),this.rAt="")}}}{const CM=self._s;CM.wAt=class extends CM.jn{constructor(t){super(),this.Yn=t[0],this.vAt=t[1],this.XMt=!!t[2],this.Kot=t[3],this.bAt=t[4],this.MAt=!!t[5],this.dQ=t[6],this.xAt=t[7].map((t=>CM.zn(CM.TAt,t))),this.CAt=new self.ZH(this)}static IAt(t,s){const e=CM.zn(CM.wAt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return e.xAt.push(CM.TAt.IAt(t)),e}Hn(){for(const t of this.xAt)t.Hn();CM.bh(this.xAt)}_At(t){for(const s of this.xAt)s.gJ().BB(t)}GAt(t,s){return Promise.all(this.xAt.map((e=>e.gJ().wX(t,s))))}PAt(){for(const t of this.xAt)t.gJ().HP()}Pc(){return this.Yn}U0(){return this.dQ}aJ(){return this.xAt.length}uJ(){return this.xAt}AAt(t){if((t=Math.floor(t))<0||t>=this.xAt.length)throw new RangeError("invalid frame");return this.xAt[t]}RAt(t,s){(s=Math.floor(s))<0?this.xAt.unshift(t):s>=this.xAt.length?this.xAt.push(t):this.xAt.splice(s,0,t)}EAt(t){if((t=Math.floor(t))<0||t>=this.xAt.length)throw new RangeError("invalid frame");this.xAt[t].Hn(),this.xAt.splice(t,1)}OAt(t){for(let s=0,e=this.xAt.length;s<e;++s)if(CM.Zi(this.xAt[s].AJ(),t))return s;return-1}FAt(t){if("string"==typeof t){const s=this.OAt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}QH(){return this.vAt}sJ(){return this.XMt}iJ(){return this.Kot}rJ(){return this.bAt}oJ(){return this.MAt}DAt(){return this.CAt}}}{const IM=self._s,_M=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let e=0,i=t.length;e<i;++e)s[e]=t.charCodeAt(e);return new Blob([s],{type:"image/png"})})();IM.TAt=class extends IM.jn{constructor(t){super(),this.LAt=IM.zn(IM.XPt),this.LAt.aAt(t),this.kAt=t[7],this.NAt=IM.zn(IM.Ga,t[8],t[9]),this.BAt=t[10].map((t=>IM.zn(IM.$At,this,t))),this.WAt=new Map;for(const t of this.BAt)this.WAt.set(t.Pc().toLowerCase(),t);this.VAt=null;const s=t[11];s.length>=6&&(this.VAt=IM.zn(IM.au,s)),this.PS=t[12]?t[12]:"",this.jAt=new self.mJ(this)}static IAt(t){const s=IM.zn(IM.TAt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.LAt.uAt(t,_M),s}Hn(){this.VAt&&(this.VAt.Hn(),this.VAt=null),this.LAt.Hn(),this.LAt=null}gJ(){return this.LAt}yJ(){return this.kAt}iz(){return this.NAt.Oa()}hz(){return this.NAt.Da()}IJ(){return this.VAt}TJ(t){return this.WAt.get(t.toLowerCase())||null}xJ(t){return(t=Math.floor(t))<0||t>=this.BAt.length?null:this.BAt[t]}wJ(){return this.BAt.length}AJ(){return this.PS}cJ(){return this.jAt}}}{const GM=self._s;GM.$At=class extends GM.jn{constructor(t,s){super(),this.UAt=t,this.Yn=s[0],this.zAt=GM.zn(GM.Ga,s[1],s[2])}Hn(){}Pc(){return this.Yn}zM(){return this.zAt.Oa()}qM(){return this.zAt.Da()}HAt(){return this.zAt}}}{const PM=globalThis._s,AM=globalThis.EU,RM=globalThis.vW,EM=globalThis.LW,OM=globalThis.KW,FM=globalThis.assert;PM.But=class extends PM.jn{constructor(t,s,e){super();const i=t.jvt(e[1]);this.Nc=t,this.eGt=PM.H$.dW(i),this.aGt=null,this.JAt=i.Instance,this.GS=s,this.dQ=e[11],this.Yn=e[0],this._bt=this.Nc.ugt(e[14]),this.qAt=!!e[9],this.YAt=!!e[2],this.XAt=!!e[10],this.KAt=e[3].map((s=>({QZ:s[0],type:s[1],name:s[2],ZAt:t.ugt(s[3])}))),this.QAt=e[4],this.tRt=e[5],this.w_t=this.eGt.Z$(),this.sRt=PM.zn(PM.Event.Sf),this.qQ=null;const[n,r]=t.lk().p$();if(this.eRt=PM.zn(PM.iRt,n,r),this.nRt=!0,this.rRt=null,this.hRt=null,this.oRt=-1,this.aRt=null,this.lRt=null,this.uRt=null,this.cRt=null,this.fRt=null,this.dRt=!1,this.pRt=null,this.mRt=e[8].map((t=>PM.gRt.RC(this,t))),this.yRt=[],this.SRt=new Map,this.wRt=new Map,this.vRt=new Set,this.bRt=new Map,this.MRt=PM.zn(PM.Fdt,this),this.xRt=null,this.TRt=0,this.CRt=!1,this.pRt=null,this.LAt=null,this.IRt=null,this._Rt=null,this.GRt=null,this.PRt=0,this.sxt=new Map,this.ixt=new Map,this.FZ=[],this.ARt=new Map,this.RRt=!0,this.eGt.nW()&&(this.qQ=PM.zn(PM.YQ,this,e[12])),e[6]&&(this.LAt=PM.zn(PM.XPt),this.LAt.aAt(e[6])),e[7]){this.IRt=e[7].map((t=>PM.zn(PM.wAt,t))),this._Rt=new Map,this.GRt=new Map;for(const t of this.IRt)this._Rt.set(t.Pc().toLowerCase(),t),this.GRt.set(t.U0(),t)}this.YAt?(this.rRt=[],this.hRt=new Set,this.oRt=this.Nc.ERt()):(this.aRt=[],this.lRt=new Set,this.uRt=[],this.cRt=[],this.fRt=[]);const h=this.eGt.Mxt();if(h<2&&(this.aGt=PM.zn(i.ORt,this,e[15]),!(this.aGt instanceof PM.sGt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.FRt=null,this.DRt=null,this.r5=PM.zn(PM.Event.Sf),PM.H$.U_t(this,h),h>=2?(o=i.ORt,o||(o=globalThis.wq)):o=this.aGt.W_t(),o&&!this.YAt){if(this.FRt=new o(h<2?this:null),h<2&&!(this.FRt instanceof EM))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.FRt instanceof globalThis.wq))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.YAt?OM:EM;this.FRt=new t}if(PM.H$.z_t(h),e[13]){const t=e[13];if(t){const s=t[0],e=t[1],i=t[2];this.aGt.iGt(s,e,i)}}this.Nc.LRt()&&!this.YAt&&!this.XAt&&this.w_t||this.$_t(),this.eGt.X$()&&(this.eGt.V_t(this),this.kRt(e)),this.NRt=null}static RC(t,s,e){return PM.zn(PM.But,t,s,e)}Hn(){if(this.sRt.Hn(),this.sRt=null,this.LAt&&(this.LAt.Hn(),this.LAt=null),this.IRt){for(const t of this.IRt)t.Hn();PM.bh(this.IRt),this._Rt.clear(),this.GRt.clear()}this.NRt=null,this.MRt.Hn(),this.MRt=null,this.sxt.clear(),this.ixt.clear(),this.pRt=null,this.Nc=null}BRt(t){for(let s=1,e=t.length;s<e;++s){const e=this.Nc.d0(t[s]);this.rRt.push(e),this.hRt.add(e),e.aRt.push(this),e.lRt.add(this)}}$Rt(t){this.dRt=!0,this.pRt=t}Zj(){return this.dRt}A5(){return this.pRt}WRt(){let t=0;if(!this.YAt)for(const s of this.aRt)for(const e of s.VRt()){const s=e.Pc().toLowerCase();this.SRt.set(s,e),this.wRt.set(s,t),this.yRt.push(e),++t}for(const s of this.VRt()){const e=s.Pc().toLowerCase();this.SRt.set(e,s),this.wRt.set(e,t),this.yRt.push(s),++t}for(const t of this.yRt)this.vRt.add(t.NH().constructor);if(!this.YAt&&this.aRt.length){const t=this.Nc.jRt();PM.xh(this.uRt,t,0),PM.xh(this.cRt,t,0),PM.xh(this.fRt,t,0);const s=[];let e=0,i=0,n=0;for(const t of this.aRt){const r=t.iMt();this.uRt[r]=e,e+=t.URt(),this.cRt[r]=i,i+=t.zRt(),this.fRt[r]=n,n+=t.HRt();const h=t.nV();if(h&&this.qQ)for(const t of h.rV())s.push(t.JRt(this.qQ))}this.qQ&&this.qQ.qRt(s)}}kRt(t){const s=PM.Ke(t[17])?t[17]:this.Nc.YRt(),e=PM.zn(PM.Instance,{runtime:this.Nc,objectType:this,uid:s});e.XRt(t[16],[]),this.Nc.KRt(s,e),this.FZ.push(e)}STt(){return this.aGt}ZRt(){return this.XAt}Sf(){return this.sRt}$_t(){this.YAt||(this.aGt?this.aGt.$_t():this.FRt.vq())}QRt(){return this.PRt>0}async O5(t){this.YAt||(this.PRt++,1===this.PRt&&(this.aGt?await this.aGt.O5(t):await this.FRt.xq(this.Nc.IB().tEt())))}B5(){if(!this.YAt){if(this.PRt--,this.PRt<0)throw new Error("released textures too many times");0===this.PRt&&(this.aGt?this.aGt.B5():this.FRt.Tq(this.Nc.IB().tEt()))}}L5(){if(this.YAt)throw new Error("not applicable to family");this.aGt?this.aGt.L5():this.FRt.Cq()}async o4(t){this.YAt||(this.aGt?await this.aGt.o4(t):await this.FRt.Iq(this.Nc.IB().tEt()))}$B(){return this.Nc}MW(){return this.eGt}sEt(){return this.JAt}Pc(){return this.Yn}ugt(){return this._bt}tk(){return this.GS}U0(){return this.dQ}k0(){return this.YAt}x0(){return this.qAt}Z$(){return this.w_t}iMt(){return this.oRt}VRt(){return this.mRt}zRt(){return this.QAt}eEt(t){return t&&this.vRt.has(t)}URt(){return this.KAt.length}iEt(){return this.KAt.map((t=>t.QZ))}nEt(t){return this.KAt.findIndex((s=>s.QZ===t))}Met(t){return this.KAt.findIndex((s=>s.name===t))}rEt(){return this.KAt.map((t=>t.name))}hEt(){return this.KAt.map((t=>t.ZAt))}Tet(t){if((t=Math.floor(t))<0||t>=this.KAt.length)throw new RangeError("invalid instance variable index");return this.KAt[t].type}xet(t){if((t=Math.floor(t))<0||t>=this.KAt.length)throw new RangeError("invalid instance variable index");return this.KAt[t].name}HRt(){return this.tRt}oEt(){return this.yRt}trt(t){return this.SRt.get(t.toLowerCase())||null}Iet(t){const s=this.wRt.get(t.toLowerCase());return void 0===s?-1:s}nV(){return this.qQ}nW(){return this.eGt.nW()}aEt(){return this.qQ&&this.qQ.lEt()}Zgt(){return this.MRt}DW(){return this.MRt.DW()}gJ(){return this.LAt}g0(t){this.xRt=t}m0(){return this.xRt}y0(t){this.TRt=t}uEt(){return this.TRt}cEt(){return this.IRt}fEt(){return this.IRt.length}qW(){return this.aRt}TTt(t){return this.lRt.has(t)}tV(){return this.rRt}eV(t){return this.hRt.has(t)}aMt(t){return this.cRt[t]}eMt(t){return this.uRt[t]}cbt(t){this.bRt.set(t.gbt().toLowerCase(),t)}fbt(t){return!!this.Mbt(t)}Mbt(t){const s=this.bRt.get(t.toLowerCase());return s&&s.Iu()?s:null}dEt(){return this.IRt}pEt(t){if(!this.IRt)throw new Error("no animations");return this._Rt.get(t.toLowerCase())||null}mEt(t){if(!this.IRt)throw new Error("no animations");return this.GRt.get(t)||null}gEt(t){if(this.pEt(t))throw new Error(`animation name '${t}' already exists`);const s=PM.wAt.IAt(this.$B(),t);return this.IRt.push(s),this._Rt.set(s.Pc().toLowerCase(),s),this.GRt.set(s.U0(),s),s}yEt(t){const s=this.pEt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.IRt.length)throw new Error("cannot remove last animation");const e=this.IRt.indexOf(s);this.IRt.splice(e,1),this._Rt.delete(s.Pc().toLowerCase()),this.GRt.delete(s.U0()),s.Hn()}SEt(){if(!this.IRt)throw new Error("no animations");return this.IRt[0]}wEt(){return this.SEt().AAt(0)}vEt(){if(this.IRt){const t=this.wEt().gJ();return[t.Vg(),t.Zg()]}return this.LAt?[this.LAt.Vg(),this.LAt.Zg()]:[100,100]}wW(){if(!this.eGt.X$())throw new Error("not a single-global plugin");return this.FZ[0]}FW(){return this.FZ}*TW(){yield*this.FZ}*OW(){yield*this.FZ,yield*this.Nc.GCt(this)}NW(){return this.FZ.length}T0(t){this.FZ.push(t)}bEt(){this.RRt=!0}m4(){if(!this.RRt||this.YAt)return;const t=this.FZ;let s=0;for(let e=t.length;s<e;++s)t[s].MEt(s);const e=this.Nc.xEt();for(const t of e)t.Wj()===this&&t.MEt(s++);this.RRt=!1}TEt(t){const s=this.FZ;if(t<s.length)return s[t];t-=s.length;const e=this.Nc.xEt();for(const s of e)if(s.Wj()===this){if(0===t)return s;--t}return null}cCt(t){if(t&&t.Zj()&&t.Wj()!==this)for(const s of t.Qj())if(s.Wj()===this)return s;const s=this.DW().FW();return s.length?s[0]:null}EW(t){const s=this.DW().FW();return s.length>0?s[t.eU()%s.length]:null}*FCt(t,s){const e=this.DW().FW(),i=e.length,n=s.DW(),r=s.DW().FW(),h=r.length;let o=t.eU();!s.k0()&&n.Jdt()||(o=r.indexOf(t));const a=Math.ceil(i/h),l=i%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield e[t]}Fxt(t){this.aGt?.Fxt(t)}Fvt(){if(!this.dRt||this.YAt)return;this.m4();const t=this.DW(),s=t.spt(),e=t.Jdt(),i=this.Nc.tgt(),n=i&&i.Hk()&&i.Hk().upt();for(const i of this.pRt.sV()){if(i===this)continue;i.m4();const r=i.DW();if(r.tpt(e),!e){const e=r.spt();PM.bh(e);for(const t of s)e.push(i.TEt(t.eU()));if(n){const s=t.ept(),e=r.ept();PM.bh(e);for(const t of s)e.push(i.TEt(t.eU()))}}}}Bxt(t,s){for(const e of this.A5().sV()){const i=e.DW();t?PM.wh(i.ept(),s):PM.wh(i.spt(),s)}}CEt(){return this.eRt}IEt(t){this.nRt=!!t}_Et(){if(this.nRt&&this.w_t){for(const t of this.FZ)t.cB().GEt();for(const t of this.Nc.xEt())t.Wj()===this&&t.cB().GEt();this.nRt=!1}}PEt(t,s,e){if(s){const e=this.ARt.get(s);e&&(e.delete(t),0===e.size&&this.ARt.delete(s))}if(e){let s=this.ARt.get(e);s||(s=new Set,this.ARt.set(e,s)),s.add(t)}}*AEt(){if(this.k0()){const t=new Set;for(const s of this.rRt)for(const e of s.AEt())t.add(e);yield*t.values()}else for(const t of this.ARt.keys())t.Jn()||(yield t)}Gxt(){return this.sxt||(this.sxt=new Map),this.sxt}Pxt(){return this.ixt||(this.ixt=new Map),this.ixt}REt(){return this.eEt(PM.Llt.VPt)}EEt(){return this.eEt(PM.Llt.jPt)}OEt(){return this.eEt(PM.Llt.FEt)}b0(){return this.eEt(PM.Llt.DEt)}v3(){const t={instances:this.FZ.map((t=>t.hx()))};return this.sxt&&this.sxt.size&&(t.ex=PM.wo(this.sxt)),t}b3(t,s){this.sxt&&(this.sxt.clear(),this.sxt=null);const e=t.ex;e&&(this.sxt=PM.vo(e));const i=this.FZ,n=t.instances;for(let t=0,s=Math.min(i.length,n.length);t<s;++t)i[t].ox(n[t]);for(let t=n.length,s=i.length;t<s;++t)this.Nc.Jj(i[t]);for(let t=i.length,e=n.length;t<e;++t){const e=n[t];let i=null;if(this.Z$()&&(i=this.Nc.jN().v5(e.w.l),!i))continue;const r=this.Nc.M0(this.xRt||this,i,!1,0,0,!0);r.ox(e),s&&s.add(r)}this.NRt=n,this.bEt()}LEt(){return this.NRt}kEt(){this.NRt=null}NEt(){for(let t=0,s=this.FZ;t<s;++t)this.FZ[t].NEt()}gW(){return this.FRt}Lk(){return this.r5}BEt(){return this.DRt}BW(t){this.DRt=t}XK(t){const s=this.Nc,e=s.RU()&&!s.$k().UW();e&&AM.V4(),this.r5.dispatchEvent(t),e&&AM.j4()}}}{const DM=self._s;DM.$Et=class extends DM.jn{constructor(t,s){super(),this.Nc=t,this.WEt=s;for(const t of this.WEt)t.$Rt(this)}Hn(){this.Nc=null}$B(){return this.Nc}P5(){return this.WEt}sV(){return this.WEt}y4(){return this.WEt.some((t=>t.Z$()))}}}{const LM=self._s,kM=self.EU,NM=self.$j,BM=LM.H$,$M=[];let WM=0;const VM=new WeakMap,jM=new WeakMap,UM=1,zM=2,HM=4,JM=8,qM=16,YM=32,XM=64;LM.Instance=class extends LM.jn{constructor(t){if(LM.H$!==BM)throw new Error("invalid addon manager");super(),this.Nc=t.runtime,this.VEt=t.objectType,this.Jst=null,this.jEt=null,this.UEt=null,this.zEt=0,this.HEt=t.uid,this.JEt=WM++,this.jxt=0,this.qEt=null;const s=LM.Lh(t.tags);s.length>0&&(this.qEt=new Set(s)),this.YEt=$M,this.XEt=$M;const e=this.VEt.oEt();e.length>0&&(this.XEt=e.map(((t,s)=>LM.zn(LM.KEt,{runtime:this.Nc,BH:t,VH:this,index:s})))),this.ZEt=this.VEt.Zj()?[]:null,this.QEt=-1,this.sRt=null;const i=this.MW();if(i.wM()&&(this.jxt|=4),i.Z$())if(this.Jst=LM.zn(LM.tOt,this,t.KU),t.sOt)this.Jst.eOt(t.sOt);else{this.Jst.iOt();const[t,s]=this.VEt.vEt();this.Jst.TA(t,s),this.Wj().aEt()&&this.Jst.XU().nOt()}t.rOt?this.hOt(t.rOt):this.oOt()}Hn(){if(this.UEt&&(this.UEt.Hj(),this.UEt=null),this.XEt.length>0){for(const t of this.XEt)t.Hn();LM.bh(this.XEt)}this.jEt&&(this.jEt.Hn(),this.jEt=null);const t=VM.get(this);t&&(t.clear(),VM.delete(this));const s=jM.get(this);s&&(s.clear(),jM.delete(this)),this.ZEt&&LM.bh(this.ZEt),this.sRt&&(this.sRt.Hn(),this.sRt=null),this.qEt&&this.qEt.clear(),this.qEt=null,this.Nc=null,this.VEt=null,this.YEt.length>0&&LM.bh(this.YEt),this.Jst&&(this.Jst.Hn(),this.Jst=null)}hOt(t){t.length>0&&(this.YEt=[],LM.Ch(this.YEt,t))}oOt(){const t=this.VEt.URt();if(0===t)return;this.YEt=[];const s=[0,0,""];for(let e=0;e<t;++e)this.YEt.push(s[this.VEt.Tet(e)])}XRt(t,s){if(this.jEt)throw new Error("already got sdk instance");for(let t=0,e=this.XEt.length;t<e;++t)this.XEt[t].XRt(s?s[t]:null);if(this.MW().Mxt()<2){if(this.jEt=LM.zn(this.VEt.sEt(),this,t),!(this.jEt instanceof LM.hGt))throw new Error("sdk type must derive from SDKInstanceBase");!this.MW().Z$()&&this.VEt.BEt()&&this.oB()}else{const s=this.MW().W_t();this.aOt(s.Instance,t)}}RH(){return this.jEt??this.UEt}cB(){return this.Jst}$B(){return this.Nc}wN(){return this.QEt}rU(){const t=this.QEt;return-1===t?this.$B().wN():t}vN(t){((t=+t)<0||!isFinite(t))&&(t=0),this.QEt=t,this.Wj().aEt()&&this.Nc.lOt(this,!0)}oU(){this.QEt=-1,this.Wj().aEt()&&this.Nc.lOt(this,!1)}a3(){return this.Nc.uOt(this)}Sf(){return this.sRt||(this.sRt=LM.zn(LM.Event.Sf)),this.sRt}$x(t){this.jEt?this.jEt.$x(t):this.UEt.Rq(this.Nc.IB().tEt())}$_t(t){this.jEt.$_t(t)}cOt(){this.jxt|=2}fOt(){return!!(2&this.jxt)}dOt(){this.jxt|=1}Jq(){return!!(1&this.jxt)}wM(){return!!(4&this.jxt)||this.jEt.wM()}pOt(){this.jxt|=32}Q2(){return!!(32&this.jxt)}mOt(){return!!(8&this.jxt)}gOt(t){t?this.jxt|=8:this.jxt&=-9}yOt(){return!!(16&this.jxt)}SOt(t){t?this.jxt|=16:this.jxt&=-17}wOt(){return!!(64&this.jxt)}vOt(t){t?this.jxt|=64:this.jxt&=-65}bOt(t,s){t<<=16,s?this.jxt|=t:this.jxt&=~t}MOt(t){return!!(this.jxt&t<<16)}VGt(){return this.jEt.VGt()}jGt(){return this.jEt.jGt()}UGt(){return this.jEt.UGt()}zGt(){return this.jEt.zGt()}JGt(){return this.jEt.JGt()}FTt(t){return this.jEt.FTt(t)}Wj(){return this.VEt}K2(){return this.jEt.K2()}PCt(t){return t.k0()?t.eV(this.Wj()):this.Wj()===t}xOt(t,s,e){const i=(s,e)=>{const i=e||s.Wj(),n=t.get(i);n?n.add(s):t.set(i,new Set([s]))};if(i(this,s),this.Zj())for(const t of this.Qj())i(t);if(e)for(const t of this.Vz())i(t)}TOt(){if(!this.MW().aW())throw new Error("object does not support scene graph")}qz(){return null!==this.Fz()}Fz(){const t=this.cB();if(!t)return null;const s=t.Fz();return s?s.iq():null}Lz(){const t=this.cB();if(!t)return null;const s=t.Lz();return s?s.iq():null}*kz(){const t=this.cB();if(t)for(const s of t.kz())yield s.iq()}COt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}T3(){const t=this.cB();return!!t&&t.T3()}IOt(t){const s=this.cB();if(!s)return[];const e=t.Pc();return s.C4().map((t=>t.iq())).filter((t=>t.Wj().Pc()===e))}C4(){const t=this.cB();return t?t.C4().map((t=>t.iq())):[]}*children(){const t=this.cB();if(t)for(const s of t.children())yield s.iq()}*Vz(){const t=this.cB();if(t)for(const s of t.Vz())yield s.iq()}Bz(){const t=this.cB();return t?t.Bz():0}_Ot(){return[...this.kz()].length}OCt(){const t=this.cB();return t?t.OCt():0}Wz(t){const s=this.cB();if(!s)return null;const e=s.Wz(t);return e?e.iq():null}GOt(){const t=this.cB();if(!t)return NaN;const s=t.Fz();return s?s.POt(t):NaN}AOt(t){for(const s of this.cB().C4())if(s.iq().tU()===t)return!0;return!1}Uz(t,s){this.TOt(),t.TOt(),this.cB().Uz(t.cB(),s||{})}zz(t){const s=this.cB();s&&s.zz(t.cB())}dH(){const t=this.cB();return!!t&&t.dH()}i4(){const t=this.cB();if(!t)return;const s=t.ROt();if(s)for(const t of s){const s=this.Nc.hB(t[2]);if(s){const e=t[3];this.Uz(s,{Xz:!!(1&e),Zz:!!(e>>1&1),tH:!!(e>>2&1),eH:!!(e>>3&1),nH:!!(e>>4&1),fH:!!(e>>5&1),hH:!!(e>>6&1),aH:!!(e>>7&1),uH:!!(e>>8&1)})}}}n4(t,s){const e=t.get(this);if(e)for(const t of e.sceneGraphJson.children){const e=s.get(t.index);if(!e)continue;const i=t.flags;this.Uz(e,{Xz:!!(1&i),Zz:!!(i>>1&1),tH:!!(i>>2&1),eH:!!(i>>3&1),nH:!!(i>>4&1),fH:!!(i>>5&1),hH:!!(i>>6&1),aH:!!(i>>7&1),uH:!!(i>>8&1)})}}nU(){const t=this.Nc.EOt();return t?t.Wut(this):""}Zj(){return null!==this.ZEt}OOt(){LM.bh(this.ZEt)}d4(t){this.ZEt.push(t)}Xj(){return this.ZEt}FOt(t){return!!this.DOt(t)}DOt(t){const s=this.Qj();if(null===s||0===s.length)return!1;for(const e of s)if(e.Wj()===t)return e;return null}Qj(){return this.ZEt}BSt(){for(const t of this.Qj())t.Wj().DW().ipt(t)}Dxt(){for(const t of this.Qj())t.Wj().DW().Zdt(t)}Lxt(t){for(const s of this.Qj())s.Wj().DW().spt()[t]=s}Nxt(){for(const t of this.Qj())t.Wj().DW().Qdt(t)}kxt(t){for(const s of this.Qj())s.Wj().DW().ept()[t]=s}MW(){return this.VEt.MW()}MEt(t){this.zEt=t}eU(){return this.VEt.m4(),this.zEt}tU(){return this.HEt}LOt(t){this.HEt=t}kOt(){return this.JEt}NOt(t){t?this.cU(new Set(t)):this.qEt=null}cU(t){if(0===t.size)this.qEt=null;else{this.qEt?this.qEt.clear():this.qEt=new Set;for(const s of t)this.qEt.add(s)}}lU(){return this.qEt??new Set}nIt(){return Array.from(this.lU()).join(" ")}oIt(t){t=Math.floor(t);for(const s of this.lU()){if(0===t)return s;--t}return""}Qnt(){return this.XEt}BOt(t){if(!t)return null;for(const s of this.XEt)if(s.NH()instanceof t)return s;return null}$Ot(t){if(!t)return null;const s=this.BOt(t);return s?s.RH():null}Znt(t){const s=this.XEt;for(let e=0,i=s.length;e<i;++e)if(s[e].WH().U0()===t)return e;return-1}WOt(){return this.YEt}rEt(){return this.VEt.rEt()}VOt(){return this.YEt.length}Aht(t){t|=0;const s=this.YEt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}tMt(t){return this.YEt[t]}jOt(t){const s=this.YEt[t];return 0===this.VEt.Tet(t)?!!s:s}Rht(t,s){t|=0;const e=this.YEt;if(t<0||t>=e.length)throw new RangeError("invalid instance variable");switch(this.VEt.Tet(t)){case 0:e[t]=s?1:0;break;case 1:e[t]="number"==typeof s?s:parseFloat(s);break;case 2:e[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}bot(t,s){if(0===s)return;t|=0;const e=this.YEt;if(t<0||t>=e.length)throw new RangeError("invalid instance variable");const i=e[t];if("number"!=typeof i)throw"boolean"==typeof i?new Error("can not set offset of boolean variable"):"string"==typeof i?new Error("can not set offset of string variable"):new Error("unknown instance variable type");e[t]+="number"==typeof s?s:parseFloat(s)}Gxt(){let t=VM.get(this);return t||(t=new Map,VM.set(this,t),t)}Pxt(){let t=jM.get(this);return t||(t=new Map,jM.set(this,t),t)}UOt(t){const s=this.Wj();if(s.Lk().xf(t))return!0;for(const e of s.qW())if(e.Lk().xf(t))return!0;return!!this.Nc.Lk().xf(t)}jW(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const e=this.cB();if(e&&e.T3())for(const t of this.Vz())if(s.add(t),t.Zj())for(const e of t.Qj())s.add(e);if(this.Zj())for(const t of this.Qj())t.jW(s);if(!t){for(const t of s.values())t.r4();this.h4()}}zOt(){this.VEt.BEt()&&this.oB();for(const t of this.XEt)t._Pt()}HOt(){this.zOt()}r4(){if(this.zOt(),this.UOt("instancecreate")){const t=this.Wj(),s=new LM.Event("instancecreate");s.VH=this.oB(),t.XK(s);for(const e of t.qW())e.XK(s);this.Nc.XK(s)}this.Nc.xU(this.MW().Cyt().AB.uIt,this,null)}h4(){if(this.MW().aW()){if(this.XK(new LM.Event("hierarchyready")),this.UOt("hierarchyready")){const t=this.Wj(),s=new LM.Event("hierarchyready");s.VH=this.oB(),t.XK(s);for(const e of t.qW())e.XK(s);this.Nc.XK(s)}this.Nc.xU(this.MW().Cyt().AB.ICt,this,null)}}JOt(){this.Nc.xU(this.MW().Cyt().AB.cIt,this,null)}qOt(t){if(this.UEt){const s=new LM.Event("destroy");s.YOt=t,this.XK(s)}if(!this.UOt("instancedestroy"))return;const s=this.Wj(),e=new LM.Event("instancedestroy");e.VH=this.oB(),e.YOt=t,s.XK(e);for(const t of s.qW())t.XK(e);this.Nc.XK(e)}XOt(){return this.jEt?this.jEt.PGt():this.UEt.NU()}hx(t="full",s=null){const e={};"full"===t?e.uid=this.tU():e.c3=!0;const i=this.lU();if(i.size>0&&(e.tags=Array.from(i)),"visual-state"!==t){const s=VM.get(this);if(s&&s.size&&(e.ex=LM.wo(s)),-1!==this.wN()&&(e.mts=this.wN()),this.VEt.URt()>0){const t={},s=this.VEt.iEt();for(let e=0,i=this.YEt.length;e<i;++e)t[s[e].toString()]=this.YEt[e];e.ivs=t}if(this.XEt.length){const s={};for(const e of this.XEt){const i=e.hx(t);i&&(s[e.WH().U0().toString()]=i)}e.behs=s}}this.Jst&&(e.w=this.Jst.v3(t,s));const n=this.jEt?this.jEt.hx():this.UEt.BU();return n&&(e.data=n),e}A6(t="full",s=null){this.Jst&&this.Jst.A6(t)}E6(t,s="full",e=null){this.Jst&&this.Jst.E6(t,s,e)}KOt(t,s="full",e=null){this.Jst&&this.Jst.KOt(t,s,e)}NEt(){this.MW().Z$()&&this.Jst.NEt()}ox(t,s="full",e=null){if("full"===s)this.HEt=t.uid;else if(!t.c3)return;if(this.NOt(t.tags),"visual-state"!==s){let s=VM.get(this);s&&(s.clear(),VM.delete(this));const e=t.ex;e&&(s=LM.vo(e),VM.set(this,s)),this.QEt=t.hasOwnProperty("mts")?t.mts:-1;const i=t.ivs;if(i)for(const[t,s]of Object.entries(i)){const e=parseInt(t,10),i=this.VEt.nEt(e);if(i<0||i>=this.YEt.length)continue;let n=s;null===n&&(n=NaN),this.YEt[i]=n}}if(this.MW().Z$()){const i=t.w;if(i){const t=i.l;if(this.Jst.fB().U0()!==t){const e=this.Jst.fB(),i=e.JN().v5(t);i?(this.Jst.gB(i),e._0(this,!0),i.T0(this,!0),i.yB(this),this.Jst.ZU()):"full"===s&&this.Nc.Jj(this)}this.Jst.b3(i,s,e)}}if("visual-state"!==s){const e=t.behs;if(e)for(const[t,i]of Object.entries(e)){const e=parseInt(t,10),n=this.Znt(e);n<0||n>=this.XEt.length||this.XEt[n].ox(i,s)}}const i=t.data;i&&(this.jEt?this.jEt.ox(i,s):this.UEt.$U(i))}ZOt(t){if(this.Jst.fB().U0()===t)return;const s=this.Jst.fB(),e=s.JN().v5(t);e&&(this.Jst.gB(e),s._0(this,!0),e.T0(this,!0),e.yB(this),this.Jst.ZU())}oB(){return this.UEt||this.aOt()}OGt(){return!!this.UEt}aOt(t,s){const e=this.Jst?t?self._q:self.IH:t?self.mU:self.$j,i=t||this.jEt.W_t(),n=this.VEt.BEt(),r=n||i||e,h=this.MW().Mxt();if(LM.H$.U_t(this,h),LM.H$.zPt(s),this.UEt=new r,LM.H$.HPt(),LM.H$.z_t(h),i&&!(this.UEt instanceof e))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${e.name}'`);if(n){const t=i||e;if(!(this.UEt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.UEt}Vj(t){if(0===this.YEt.length)return;const s={},e=this.VEt.hEt();for(let t=0,i=e.length;t<i;++t)s[e[t]]={configurable:!1,enumerable:!0,get:LM.Instance.prototype.jOt.bind(this,t),set:LM.Instance.prototype.Rht.bind(this,t)};const i=Object.create(Object.prototype,s);t.QOt={value:i,writable:!1}}jj(t){const s=this.XEt;if(0===s.length)return;const e={};for(const t of s)e[t.WH().ugt()]={value:t.cGt(),writable:!1};const i=Object.create(Object.prototype,e);t.CSt={value:i,writable:!1}}XK(t){if(!this.OGt())return;const s=this.oB();t.VH=s;const e=this.Nc,i=e.RU()&&!e.$k().UW();i&&kM.V4(),s.dispatchEvent(t),i&&kM.j4()}}}{const KM=self._s,ZM=new Map;KM._4=class extends KM.jn{constructor(t){super(),this.wx=t,this.zSt=null,this.tFt=[],this.sFt=t.Vg(),this.eFt=t.Zg(),this.iFt=1,this.nFt=1,this.rFt=0,this.hFt=1,this.oFt=t.tO(),this.aFt=null,this.lFt=null,this.uFt=NaN,this.cFt=!1,this._3=NaN,this.G3=NaN,this.fFt=s=>{if(s.VH!==this.zSt.iq())return;t.$B().Sf().removeEventListener("instancecreate",this.fFt);const e=this.zSt.iq().RH();this.cFt=!!e.Bet(),this._3=this.cFt?e.Net():NaN,this.G3=this.cFt?e.Wet():NaN}}Hn(){this.zSt=null,this.aFt=null,this.lFt=null,this.uFt=NaN,this.cFt=!1,this._3=NaN,this.G3=NaN,KM.bh(this.tFt)}dFt(t){if(this.hFt=this.wx.tO(),this.oFt=this.hFt,this.zSt=t,this.rFt=t?t.cV():0,this.zSt){const t=this.wx.$B();if(this.zSt.iq().MW().Mxt()<2){const s=this.zSt.iq().RH();s?(this.cFt=!!s.Bet(),this._3=this.cFt?s.Net():NaN,this.G3=this.cFt?s.Wet():NaN):this.zSt.iq().Jq()||t.Sf().addEventListener("instancecreate",this.fFt)}else this.cFt=!1,this._3=NaN,this.G3=NaN}else this.cFt=!1,this._3=NaN,this.G3=NaN}Fz(){return this.zSt}T3(){return this.tFt.length>0}C4(){return this.tFt}pFt(){this.T3()&&1!==this.tFt.length&&(this.lFt?this.tFt.sort(((t,s)=>{const e=this.lFt.get(t.iq()),i=this.lFt.get(s.iq());return KM.Ke(e)&&KM.Ke(i)?e-i:0})):this.tFt.sort(((t,s)=>{const e=t.urt().mFt(),i=s.urt().mFt();return KM.Ke(e)&&KM.Ke(i)?e-i:0})))}mFt(){return this.uFt}gFt(){return this.iFt}yFt(t){this.iFt=t}SFt(){return this.nFt}wFt(t){this.nFt=t}Xht(){return this.oFt}eCt(){return this.hFt}vFt(t){this.hFt=t}lrt(){return 0===this.sFt?Number.EPSILON:this.sFt}prt(){return 0===this.eFt?Number.EPSILON:this.eFt}bFt(){if(this.wx.sH()){const t=this.zSt;let s=t.Vg(),e=t.urt().lrt();return 0===s&&(s=Number.EPSILON),e===Number.EPSILON&&s===Number.EPSILON?1:e===Number.EPSILON&&s!==Number.EPSILON&&this.cFt?1+s/this._3:s/e}return 1}MFt(){if(this.wx.iH()){const t=this.zSt;let s=t.Zg(),e=t.urt().prt();return 0===s&&(s=Number.EPSILON),e===Number.EPSILON&&s===Number.EPSILON?1:e===Number.EPSILON&&s!==Number.EPSILON&&this.cFt?1+s/this.G3:s/e}return 1}xFt(){return 0}TFt(){return{sw:this.sFt,sh:this.eFt,sx:this.iFt,sy:this.nFt,psa:this.rFt,oo:this.hFt,so:this.oFt,pi:this.wx.iq().GOt()}}v3(t,s=null){const e=this.TFt();return s&&s.selfOnly?Object.assign(e,{p:null,c:[]}):Object.assign(e,{p:this.CFt(t),c:this.IFt(t)})}_Ft(t){let s="";return t.Kz()&&(s+="x"),t.Qz()&&(s+="y"),t.sH()&&(s+="w"),t.iH()&&(s+="h"),t.rH()&&(s+="a"),t.oH()&&(s+="z"),t.dH()&&(s+="d"),t.lH()&&(s+="o"),t.cH()&&(s+="v"),s}CFt(t){return this.zSt?!this.zSt.iq()||this.zSt.iq().Jq()?null:this.GFt(this.zSt,this.wx,t):null}IFt(t){return this.tFt.map((s=>this.GFt(s,s,t))).filter((t=>t))}GFt(t,s,e){const i=t.iq();if(i&&i.Jq())return null;const n={};return n.uid=i.tU(),n.f=this._Ft(s),n.offsets=s.PFt(),n.data=KM._4.AFt(i),n.oci=i.Wj().tk(),"state"===e?(n.inst=i.hx("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=i.Wj().FW().indexOf(i),n.inst=null),n}b3(t){this.sFt=t.sw,this.eFt=t.sh,this.iFt=t.sx,this.nFt=t.sy,this.rFt=t.psa,this.hFt=t.oo,this.oFt=t.so,this.uFt=KM.Ke(t.pi)?t.pi:NaN}RFt(t,s,e,i){if(!t&&!s)if(i?.vIt){if(this.aFt)for(const t of this.aFt)t.Jq()||t.qz()||t.$B().Jj(t)}else if(this.aFt)for(const t of this.aFt)if(e.c&&e.c.length){if(!e.c.some((s=>s.uid===t.tU())))continue;t.Jq()||t.qz()||t.$B().Jj(t)}this.aFt=t,this.lFt=s}EFt(t){const s=this.wx.$B();return ZM.has(t)?ZM.get(t):s.hB(t)}E6(t,s){const e=this.wx,i=e.$B(),n=s?.OFt??new Set;if(t.p&&!this.zSt){const r=t.p.uid,h=this.EFt(r);if(h){const r=h.cB();h.COt(e.iq())?this.zSt=r:(h.AOt(e.iq().tU())?(i.Jj(e.iq()),i.FFt(e.iq().tU()),ZM.delete(e.iq().tU())):h.Uz(e.iq(),this.DFt(t.p.f)),n.has(e)||(e.LFt(t.p.offsets),this.kFt(h,t.p,s),this.NFt(h,h.tU(),e.$B(),s)),n.add(e),h.cB().urt().pFt())}else if(KM.Ke(t.p.oci)){const n=i.$W(i.d0(t.p.oci),e.fB(),0,0,!0);if(n){const r=this.BFt(t.p,i);r&&n.ox(r);const h=n.cB(),o=!!s?.vIt;h.fB().WW(n,!1,o),n.Uz(e.iq(),this.DFt(t.p.f)),ZM.set(n.tU(),n),this.NFt(n,n.tU(),i,s),n.cB().urt().pFt()}}}const r=[];for(const s of t.c){const t=s.uid,e=this.EFt(t);e&&r.push(e)}let h=0;for(const o of t.c){const a=o.uid,l=this.EFt(a);if(l){if(this.aFt){if(this.aFt.includes(l)){const i=l;if(i.Wj()!==l.Wj()){h++;continue}if(i.Jq()){h++;continue}const o=t.c[h];if(!s?.vIt&&this.$Ft(i,r,e)){if(e.iq().Wz(h)){const r=i.Wj().tk(),a=o.oci,l=e.iq().Wz(h).Wj().tk();if(r!==a||a!==l){this.WFt(t.c,e,n,s);break}this.VFt(h,o,e,n,s)}else this.VFt(h,o,e,n,s);h++;continue}if(i.qz()&&i.Fz()!==e.iq()){const t=this.jFt(o,s);this.UFt(t,o,n,s),h++;continue}this.UFt(i.cB(),o,n,s,!0),h++;continue}if(this.aFt[h]){const i=this.aFt[h];if(i.Wj()!==l.Wj()){h++;continue}if(i.Jq()){h++;continue}const o=t.c[h];if(!s?.vIt&&this.$Ft(i,r,e)){if(e.iq().Wz(h)){const r=i.Wj().tk(),a=o.oci,l=e.iq().Wz(h).Wj().tk();if(r!==a||a!==l){this.WFt(t.c,e,n,s);break}this.VFt(h,o,e,n,s)}else this.VFt(h,o,e,n,s);h++;continue}if(i.qz()&&i.Fz()!==e.iq()){const t=this.jFt(o,s);this.UFt(t,o,n,s),h++;continue}this.UFt(i.cB(),o,n,s,!0),h++;continue}}const i=l.Wj();if(this.zFt(r,i)===e.iq().IOt(i).length){for(const t of e.iq().C4()){if(t.Wj()!==i)continue;const e=t.cB();if(e&&!n.has(e)){n.add(e),e.LFt(o.offsets),this.kFt(t,o,s);break}}h++;continue}if(l.qz()&&l.Fz()!==e.iq()){const t=this.jFt(o,s);this.UFt(t,o,n,s),h++;continue}this.UFt(l.cB(),o,n,s)}else if(this.aFt&&this.aFt[h]){const a=this.aFt[h],l=i.d0(this.HFt(o));if(a.Wj()!==l){h++;continue}if(a.Jq()){h++;continue}const u=t.c[h];if(!s?.vIt&&this.$Ft(a,r,e)){if(e.iq().Wz(h)){const i=a.Wj().tk(),r=u.oci,o=e.iq().Wz(h).Wj().tk();if(i!==r||r!==o){this.WFt(t.c,e,n,s);break}this.VFt(h,u,e,n,s)}else this.VFt(h,u,e,n,s);h++;continue}if(a.qz()&&a.Fz()!==e.iq()){const t=this.jFt(u,s);this.UFt(t,u,n,s),h++;continue}this.UFt(a.cB(),u,n,s)}else{const t=this.jFt(o,s);this.UFt(t,o,n,s)}h++}}WFt(t,s,e,i){const n=s.$B();for(const t of s.iq().children())t&&!t.Jq()&&(n.Jj(t),n.FFt(t.tU()),ZM.delete(t.tU()));this.aFt&&(this.aFt=[]),this.lFt&&(this.lFt=new WeakMap),Object.assign({},i,{assignZIndex:!1});for(const s of t){const t=this.jFt(s,i);this.UFt(t,s,e,i),this.aFt.push(t.iq()),this.lFt.set(t.iq(),this.aFt.length-1)}s.urt().pFt()}$Ft(t,s,e){const i=t.Wj();return this.zFt(s,i)===e.iq().IOt(i).length}VFt(t,s,e,i,n){const r=e.iq().Wz(t);if(!r)return;const h=r.cB();h&&(i.has(h)||(h.LFt(s.offsets),this.kFt(r,s,n)),i.add(h))}DFt(t){const s={};return s.Xz=t.includes("x"),s.Zz=t.includes("y"),s.tH=t.includes("w"),s.eH=t.includes("h"),s.nH=t.includes("a"),s.hH=t.includes("z"),s.fH=t.includes("d"),s.aH=t.includes("o"),s.uH=t.includes("v"),s}HFt(t){return KM.Ke(t.oci)?t.oci:t[1]}jFt(t,s){if(!KM.Ke(t.oci))return;const e=this.wx,i=e.$B();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?i.M0(t.data,e.fB(),!1,0,0,!1,r):i.$W(i.d0(t.oci),e.fB(),0,0,r),!n)return;const h=this.BFt(t,i);h&&n.ox(h);const o=n.cB(),a=!!s?.vIt;return o.fB().WW(n,!0,a),o}NFt(t,s,e,i){if(this.EFt(s)&&!i?.vIt){const i=this.EFt(s);i!==t&&e.Jj(i)}e.FFt(s),e.KRt(s,t)}UFt(t,s,e,i,n=!0){const r=this.wx,h=r.Uz(t,this.DFt(s.f));h&&n?(e.has(t)||(t.LFt(s.offsets),this.kFt(t.iq(),s,i)),e.add(t)):h&&(ZM.set(t.iq().tU(),t.iq()),this.NFt(t.iq(),s.uid,r.$B(),i)),this.pFt()}kFt(t,s,e){let i=this.BFt(s,this.wx.$B());if(!i)return;const n=!e.hasOwnProperty("clearChildren")||e.clearChildren,r=!e.hasOwnProperty("assignZIndex")||e.assignZIndex,h=t.$B();if(ZM.set(t.tU(),t),i=JSON.parse(JSON.stringify(i)),n&&t.tU()!==i.uid){for(const s of t.children())s&&!s.Jq()&&(h.Jj(s),h.FFt(s.tU()),ZM.delete(s.tU()));if(i.w?.sgi&&i.w.sgi.c?.length)for(const s of i.w.sgi.c){const i=Object.assign({},e,{clearChildren:!1,createHierarchy:!1}),n=this.jFt(s,i);ZM.set(n.iq().tU(),n.iq()),t.Uz(n.iq(),this.DFt(s.f)),n.LFt(s.offsets),this.kFt(n.iq(),s,i)}}const o=i.w?.zi,a=i.w?.l;i.w=null,t.ox(i),e?.vIt||(KM.Ke(o)&&r&&t.cB().E0(o),KM.Ke(a)&&t.ZOt(a)),this.NFt(t,i.uid,h,e)}zFt(t,s){return t.filter((t=>t.Wj().Pc()===s.Pc())).length}BFt(t,s){if(KM.Ke(t.instIndex)){const e=s.d0(t.oci).LEt();return e?e[t.instIndex]:null}return KM.hi(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static AFt(t){let s=t.cB().fB().S0(t.tU());if(!s)return null;s=JSON.parse(JSON.stringify(s));const e=[];for(const s of[...t.C4()]){const t=s.cB();e.push([t.JN().U0(),t.fB().tk(),s.tU(),KM._4.I4(t),s.Wj().Zj()?1:0,t.dB(),KM._4.AFt(s)])}return KM.xi(s[0][14])?s[0][14][1]=e:(s[0][14]=[],s[0][14][0]=KM._4.JFt(),s[0][14][1]=e,s[0][14][2]=t.cB().dB()),s}static I4(t){let s=0;return s|=Number(t.cH())<<8,s|=Number(t.lH())<<7,s|=Number(t.oH())<<6,s|=Number(t.dH())<<5,s|=Number(t.rH())<<4,s|=Number(t.iH())<<3,s|=Number(t.sH())<<2,s|=Number(t.Qz())<<1,s|=0|Number(t.Kz()),s}static JFt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static qFt(){ZM.clear()}}}{const QM=self._s,tx=self.ls,sx=tx.Ss,ex=tx.ws,ix=QM.zn(QM.Rect),nx=QM.zn(QM.Gl),rx=QM.zn(QM.Event,"bboxchange",!1),hx=QM.zn(QM.To,0,0,0,0),ox=QM.zn(QM.au),ax=QM.zn(QM.To,1,1,1,1),lx=QM.zn(QM.Rect,0,0,-1,-1),ux=QM.zn(QM.Rect,0,0,-1,-1),cx=new Set(["absolute","relative"]),fx=[];let dx=!0;const px=1,mx=2,gx=4,yx=8,Sx=16,wx=32,vx=64,bx=128,Mx=256,xx=512,Tx=1024,Cx=2048,Ix=4096,_x=8192,Gx=16384,Px=32768,Ax=1<<22,Rx=1<<23,Ex=12647936,Ox=65536,Fx=1<<17,Dx=1<<18,Lx=1<<19,kx=1<<20,Nx=1<<21,Bx=26,$x=31<<26,Wx=new WeakMap,Vx=new WeakMap;QM.tOt=class extends QM.jn{constructor(t,s){super(),this.fe=t,this.Ddt=t.Wj(),this.Nc=t.$B(),this.YFt=s,this.Ddt.PEt(this,null,s),this.XFt=-1,this.KFt=-1,this.jxt=196635,this.Ddt.MW().eW()&&(this.jxt|=128),this.Pa=NaN,this.Aa=NaN,this.EM=NaN,this.ZFt=NaN,this.QFt=NaN,this.HT=NaN,this.Go=NaN,this.tDt=NaN,this.sDt=NaN,this.eDt=NaN,this.iDt=NaN,this.nDt=QM.zn(QM.Rect),this.rDt=QM.zn(QM.Gl),this.hDt=ux,this.oDt=lx,this.aDt=null,this.lDt=null,this.uDt=null,this.RM=ax,this.cDt=ax,this.fDt=null,this.dDt=null,this.fe.Wj().aEt()&&(this.dDt=QM.zn(QM.pDt,this.fe,this)),this.mDt=null,this.aFt=null,this.lFt=null,this.gDt=-1,this.yDt=null}dOt(){this.jxt|=256}Hn(){if(this.Ddt.PEt(this,this.YFt,null),this.fDt&&(this.Nc.pM().Av(this.fDt),this.fDt=null),this.aDt=null,this.lDt&&(this.lDt.SDt.Hn(),this.lDt=null),this.uDt&&(this.uDt.clear(),this.uDt=null),this.yH(),this.dDt&&this.dDt.Hn(),this.qz()&&this.Fz().zz(this),this.T3()){const t=[...this.C4()];for(const s of t)this.zz(s)}this.wDt(),this.vDt(),Wx.delete(this),Vx.delete(this),this.fe=null,this.Ddt=null,this.Nc=null,this.YFt=null}eOt(t){if(dx=!1,this.QU(t[0],t[1]),this.KM(t[2]),this.TA(t[3],t[4]),this.HT=0,this.eW()?this.uV(t[6]):this.Go=0,hx.Sa(t[7]),this.bDt(hx),this.nz(t[8]),this.oz(t[9]),this.FM(t[10]),this.dDt&&this.dDt.MDt(t[12]),t[14]&&Wx.set(this,{xDt:t[14][1],TDt:t[14][2]}),t[15]){const s=t[15];this.mH(s[0],s[1]);const e=this.MH(),i=s[2];for(let t=0,s=i.length;t<s;++t){const s=i[t];for(let i=0,n=s.length;i<n;++i){const n=s[i],r=e.Nx(i,t);r.HM(n[0]),r.YM(n[1]),r.KM(n[2]),r.QM(n[3]),r.sx(n[4])}}}if(t[16]){const s=t[16][0],e=t[16][1],i=!!e,n=!i,r=this.Nc.EOt();i&&r&&r.$ut(this.iq(),e),n&&r&&r.$ut(this.iq(),s)}dx=!0,this.CDt()}iOt(){this.Pa=0,this.Aa=0,this.EM=0,this.ZFt=0,this.QFt=0,this.HT=0,this.Go=0,this.tDt=0,this.sDt=1,this.eDt=0,this.iDt=0,this.CDt()}$B(){return this.Nc}Wj(){return this.Ddt}iq(){return this.fe}IDt(){return this.rH()?this._Dt(this.Fz().GDt()-this.mDt.xFt()):0}HM(t){if(t=+t,this.Kz()){const s=this.mDt,e=t-this.zM(),i=-this.IDt();0===i?this.Pa+=e/s.bFt():(this.Pa+=Math.cos(i)*e/s.bFt(),this.Qz()&&(this.Aa+=Math.sin(i)*e/s.MFt()))}else this.Pa=t}Lht(t,s=!1){t=+t,s?this.Pa+=t:this.Kz()?this.HM(this.zM()+t):this.Pa+=t}zM(){if(this.Kz()){let t=this.Pa;const s=this.mDt,e=this.Fz(),i=this.IDt();return 0===i?t*=s.bFt():(t=t*s.bFt()*Math.cos(i),this.Qz()&&(t-=this.Aa*s.MFt()*Math.sin(i))),e.zM()+t}return this.Pa}YM(t){if(t=+t,this.Qz()){const s=this.mDt,e=t-this.qM(),i=-this.IDt();0===i?this.Aa+=e/s.MFt():(this.Kz()&&(this.Pa-=Math.sin(i)*e/s.bFt()),this.Aa+=Math.cos(i)*e/s.MFt())}else this.Aa=t}kht(t,s=!1){t=+t,s?this.Aa+=t:this.Qz()?this.YM(this.qM()+t):this.Aa+=t}qM(){if(this.Qz()){let t=this.Aa;const s=this.mDt,e=this.Fz(),i=this.IDt();return 0===i?t*=s.MFt():(t=t*s.MFt()*Math.cos(i),this.Kz()&&(t+=this.Pa*s.bFt()*Math.sin(i))),e.qM()+t}return this.Aa}QU(t,s){if(t=+t,s=+s,this.PDt()){const e=this.Kz(),i=this.Qz(),n=this.mDt,r=t-this.zM(),h=s-this.qM(),o=-this.IDt();if(0===o)e?this.Pa+=r/n.bFt():this.Pa=t,i?this.Aa+=h/n.MFt():this.Aa=s;else{const a=Math.sin(o),l=Math.cos(o);e?this.Pa+=i?(l*r-a*h)/n.bFt():l*r/n.bFt():this.Pa=t,i?this.Aa+=e?(a*r+l*h)/n.MFt():l*h/n.MFt():this.Aa=s}}else this.Pa=t,this.Aa=s}ADt(){return[this.zM(),this.qM()]}sz(t,s){t=+t,s=+s,this.PDt()?this.QU(this.zM()+t,this.qM()+s):(this.Pa+=t,this.Aa+=s)}ETt(t,s){return this.zM()===t&&this.qM()===s}KM(t){if(t=+t,this.oH()&&(t-=this.Fz().XM()),this.EM===t)return;this.EM=t,this.RDt();const s=this.fB();0!==this.EM&&s.A0(),s.yB(this)}RDt(){if(this.CDt(),this.T3()){const t=this.C4();for(let s=0,e=t.length;s<e;s++){const e=t[s];e.oH()&&e.RDt()}}}Qht(t){this.KM(this.XM()+t)}XM(){return this.oH()?this.Fz().XM()+this.EM:this.EM}cz(){return this.fB().XM()+this.XM()}Bet(){return this.iq().MW().Mxt()<2&&this.iq().RH().Bet()}Yg(t){if(t=+t,this.sH()){const s=this.Vg();0===s?this.ZFt=Number.EPSILON:this.ZFt*=t/s}else this.ZFt=t;this.EDt()}Cy(t,s){t=+t,s?this.ZFt+=t:this.sH()?this.Yg(this.Vg()+t):this.ZFt+=t,this.EDt()}Vg(){if(this.sH()){const t=this.Fz(),s=t.Vg();return t.urt().lrt()===Number.EPSILON?(this.urt().lrt()+s)*this.ZFt:s*this.ZFt}return this.ZFt}jg(t){if(t=+t,this.iH()){const s=this.Zg();0===s?this.QFt=Number.EPSILON:this.QFt*=t/s}else this.QFt=t;this.EDt()}jht(t,s){t=+t,s?this.QFt+=t:this.iH()?this.jg(this.Zg()+t):this.QFt+=t,this.EDt()}Zg(){if(this.iH()){const t=this.Fz(),s=t.Zg();return t.urt().prt()===Number.EPSILON?(this.urt().prt()+s)*this.QFt:s*this.QFt}return this.QFt}TA(t,s){if(t=+t,s=+s,this.sH()){const s=this.Vg();0===s?this.ZFt=Number.EPSILON:this.ZFt*=t/s}else this.ZFt=t;if(this.iH()){const t=this.Zg();0===t?this.QFt=Number.EPSILON:this.QFt*=s/t}else this.QFt=s;this.EDt()}Ou(){return[this.Vg(),this.Zg()]}Z2(){return this.HT}ODt(t){if(t<0)throw new RangeError("invalid depth");this.HT=t}FDt(){if(this.qz()){const t=this.mDt;return Math.min(t.bFt(),t.MFt())}return 1}eW(){return!!(128&this.jxt)}uV(t){t=+t,this.eW()&&(this.rH()&&(t-=this.Fz().cV()),t=QM.Zn(t),this.Go!==t&&(this.Go=t,this.EDt()))}Uht(t){0!==(t=+t)&&this.eW()&&(this.Go=QM.Zn(this.Go+t),this.EDt())}EDt(){if(this.jxt|=262144,this.T3()){const t=this.C4();for(let s=0,e=t.length;s<e;s++)t[s].EDt()}}cV(){return this.rH()&&this.eW()?this._Dt(QM.Zn(this.Fz().GDt()+this.Go)):this.Go}GDt(){return this.rH()&&this.eW()?QM.Zn(this.Fz().GDt()+this.Go):this.Go}_Dt(t){return this.sH()&&this.Lz().Vg()<0&&(t=QM.Zn(QM.pr(t,this.Lz().cV()+Math.PI))),this.iH()&&this.Lz().Zg()<0&&(t=QM.pr(t,this.Lz().cV())),t}DDt(){const t=this.Fz();return!!(this.sH()&&t.Vg()<0)||!!(this.iH()&&t.Zg()<0)}LDt(){const t=this.Fz();return!!(this.sH()&&t.Vg()<0&&this.iH()&&t.Zg()<0)}kDt(){const t=this.jxt;if(!(262144&t))return;const s=this.cV();this.tDt=Math.sin(s),this.sDt=Math.cos(s),this.jxt=-262145&t}kTt(){return this.kDt(),this.tDt}LTt(){return this.kDt(),this.sDt}nz(t){this.eDt=+t}Kht(t){this.eDt+=+t}iz(){return this.eDt}oz(t){this.iDt=+t}Zht(t){this.iDt+=+t}hz(){return this.iDt}bDt(t){this.RM.equals(t)||(this.RM===ax?(this.RM=QM.zn(QM.To,t),this.cDt=QM.zn(QM.To,t),this.cDt.Ko()):t.Jo(1,1,1,1)?(this.RM=ax,this.cDt=ax):(this.RM.set(t),this.cDt.set(t),this.cDt.Ko()),this.CDt())}eO(t){if(t=QM.Kn(+t,0,1),this.lH()){if(this.urt().eCt()===t)return;this.urt().vFt(t),t=this.tO()}else if(this.RM.a===t)return;this.NDt(t)}BDt(){if(!this.T3())return;const t=this.C4();for(let s=0,e=t.length;s<e;s++){const e=t[s];e.NDt(e.tO())}}NDt(t){hx.ko(this.RM),hx.a=t,this.bDt(hx),this.BDt()}Jht(t){this.lH()?this.eO(this.urt().eCt()+t):this.eO(this.tO()+t)}tO(){return this.lH()?this.Fz().tO()*this.urt().eCt():this.RM.a}bz(t){this.RM.zo(t)||(hx.ko(t),hx.a=this.tO(),this.bDt(hx))}Ght(t,s,e){hx.Ao(t,s,e),this.bz(hx)}$Dt(t,s,e){0===t&&0===s&&0===e||(hx.ko(this.RM),hx.r+=t,hx.g+=s,hx.b+=e,this.bz(hx))}vz(){return this.RM}KQ(){return this.cDt}dH(){return!!(512&this.jxt)}WDt(t){this.VDt(512,t)}Kz(){return!!(1024&this.jxt)}jDt(t){this.VDt(1024,t)}Qz(){return!!(2048&this.jxt)}PDt(){return!!(3072&this.jxt)}UDt(t){this.VDt(2048,t)}sH(){return!!(4096&this.jxt)}zDt(t){this.VDt(4096,t)}iH(){return!!(8192&this.jxt)}HDt(t){this.VDt(8192,t)}rH(){return!!(16384&this.jxt)}JDt(t){this.VDt(16384,t)}oH(){return!!(32768&this.jxt)}qDt(t){this.VDt(32768,t)}lH(){return!!(4194304&this.jxt)}YDt(t){this.VDt(4194304,t)}cH(){return!!(8388608&this.jxt)}XDt(t){this.VDt(8388608,t)}KDt(){this.jxt&=-12647937}Uz(t,s){if(t===this)return!1;if(t.qz())return!1;if(this.ZDt(t))return!1;if(this.QDt(t))return!1;const e=t.zM(),i=t.qM(),n=t.Vg(),r=t.Zg(),h=t.cV(),o=t.XM(),a=t.tO();t.tLt(this),t.jDt(s.Xz),t.UDt(s.Zz),t.zDt(s.tH),t.HDt(s.eH),t.JDt(s.nH),t.qDt(s.hH),t.YDt(s.aH),t.XDt(s.uH),t.WDt(s.fH);const l=e-this.zM(),u=i-this.qM(),c=-this.cV(),f=Math.cos(c),d=Math.sin(c);if(s.Xz&&(s.nH?t.Pa=l*f-u*d:t.Pa=l,s.tH)){const s=this.Vg()/this.mDt.lrt();0!==s&&(t.Pa/=s)}if(s.Zz&&(s.nH?t.Aa=l*d+u*f:t.Aa=u,s.eH)){const s=this.Zg()/this.mDt.prt();0!==s&&(t.Aa/=s)}if(s.tH){const s=this.Vg();0===s||s===Number.EPSILON?(t.ZFt=1,t.mDt.yFt(1)):(t.ZFt=n/this.Vg(),t.mDt.yFt(t.ZFt))}if(s.eH){const s=this.Zg();0===s||s===Number.EPSILON?(t.QFt=1,t.mDt.wFt(1)):(t.QFt=r/this.Zg(),t.mDt.wFt(t.QFt))}return s.nH&&(t.Go=h-this.cV()),s.hH&&(t.EM=o-this.XM()),s.aH&&t.mDt.vFt(a),s.uH&&t.JV(this.YV()),this.sLt(t),this.ZU(),this.BDt(),!0}zz(t){if(t.Fz()!==this)return;const s=t.zM(),e=t.qM(),i=t.Vg(),n=t.Zg(),r=t.cV(),h=t.XM(),o=t.tO();t.tLt(null),t.KDt(),t.QU(s,e),t.TA(i,n),t.uV(r),t.KM(h),t.eO(o),this.eLt(t),this.ZU()}iLt(){return this.gDt}nLt(){this.rLt();const t=[...this.children()];for(const s of t)this.zz(s);const s=this.Fz();s&&s.zz(this),this.KDt()}rLt(){if(this.hLt(),!this.aFt){const t=[...this.children()];t.length&&(this.aFt=[],this.lFt=new WeakMap);let s=0;for(const e of t){const t=e.iq();this.aFt.push(t),this.lFt.set(t,s),s++}}const t=this.Fz();t&&t.rLt()}hLt(){if(-1!==this.gDt)return;const t=[...this.kz()];this.gDt=t.length;for(const s of t)s.hLt();const s=[...this.children()];for(const t of s)t.hLt()}vDt(){this.aFt&&(this.aFt.length=0),this.aFt=null,this.lFt=null;const t=this.Fz();t&&t.vDt(),this.gDt=-1}qz(){return null!==this.Fz()}Fz(){const t=this.mDt;return null!==t?t.Fz():null}Lz(){let t=this;for(;t.qz();)t=t.Fz();return t}*kz(){let t=this.Fz();for(;t;)yield t,t=t.Fz()}COt(t){return this.C4().includes(t)}T3(){const t=this.mDt;return null!==t&&t.T3()}C4(){const t=this.mDt;return null!==t?t.C4():fx}children(){return this.C4()}*Vz(){for(const t of this.children())yield t,yield*t.Vz()}Bz(){return this.C4().length}OCt(){return[...this.Vz()].length}Wz(t){const s=this.C4();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}POt(t){if(!t)return NaN;const s=this.C4();if(!s)return NaN;for(let e=0;e<s.length;e++)if(t===s[e])return e;return NaN}oLt(t){this.mDt||(this.mDt=QM.zn(QM._4,this)),t&&this.mDt.dFt(t)}urt(){return this.mDt}wDt(){this.mDt&&(this.mDt.Hn(),this.mDt=null)}tLt(t){t?(t.oLt(null),this.oLt(t)):(this.mDt&&this.mDt.dFt(null),this.T3()||this.wDt())}QDt(t){if(!this.qz())return!1;const s=this.Fz();return s===t||s.QDt(t)}ZDt(t){if(this.COt(t))return!0;for(const s of this.C4())if(s.ZDt(t))return!0;return!1}sLt(t){this.mDt.C4().push(t)}eLt(t){const s=this.mDt.C4(),e=s.indexOf(t);-1!==e&&s.splice(e,1),0!==s.length||this.qz()||this.wDt(),t.T3()||t.wDt()}ROt(){const t=Wx.get(this);return t?t.xDt:null}aLt(){const t=Wx.get(this);return t?t.TDt:NaN}x3(){const t=Vx.get(this);return QM.Ke(t)?t:NaN}lLt(t){Vx.set(this,t)}uLt(){this.VDt(524288,!0),this.CDt()}CDt(){if(!dx)return;const t=this.Nc.pM();let s;this.fDt&&t.Av(this.fDt),s=524288&this.jxt?t.fv()||"<point>":t.lv()||"<default>",this.fDt=t.Iv(s,this.Cj(),this.cDt,this.XM())}r3(){return this.fDt}q0(){return this.RM===ax}FM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.Cj()!==t&&(this.jxt=-2080374785&this.jxt|t<<26,this.CDt())}Cj(){return(2080374784&this.jxt)>>26}gB(t,s){const e=s&&this.YFt!==t;e&&this.G0(),this.Ddt.PEt(this,this.YFt,t),this.YFt=t,e&&this.cLt(),0!==this.XM()&&this.YFt.A0()}fB(){return this.YFt}JN(){return this.fB().JN()}E0(t){this.XFt=0|t}dB(){return this.YFt.H1(),this.XFt}X1(t){this.KFt=0|t}Wq(){return this.YFt.q1(),this.KFt}RZ(){return this.XFt}VDt(t,s){s?this.jxt|=t:this.jxt&=~t}YV(){return!!(1&this.jxt)}JV(t){if(this.VDt(1,t),this.T3())for(const s of this.C4())s.cH()&&s.JV(t)}Rz(){return!!(8&this.jxt)}Ez(t){t=!!t,this.Rz()!==t&&(this.VDt(8,t),t?this.ZU():this.fLt())}dLt(t,s){if(this.VDt(32,t),this.uDt&&this.uDt.clear(),s.trim()){this.uDt||(this.uDt=new Set);for(const t of s.split(" "))t&&this.uDt.add(t.toLowerCase())}else this.uDt=null}pLt(t){const s=!!(32&this.jxt),e=this.uDt;if(!t||!e)return!s;for(const i of e)if(t.has(i))return s;return!s}ZU(){if(this.jxt|=65554,this.Ddt.IEt(!0),this.Nc.SB(),this.YFt.l0()&&(this.dz(this.nDt,this.rDt,!0),this.jxt&=-3,this.cLt()),4&this.jxt&&this.fe.Sf().dispatchEvent(rx),null!==this.mDt){const t=this.mDt.C4();for(let s=0,e=t.length;s<e;++s)t[s].ZU()}}dz(t,s,e){const i=this.zM(),n=this.qM(),r=this.Vg(),h=this.Zg(),o=this.cV();t.Ua(i-this.eDt*r,n-this.iDt*h,r,h),e&&this.bH()&&this.mLt(t),0===o?s.Yl(t):(t.offset(-i,-n),s.Kl(t,this.kTt(),this.LTt()),s.offset(i,n),s.Zl(t)),t.normalize()}gLt(){const t=this.jxt;2&t&&(this.dz(this.nDt,this.rDt,!0),this.jxt=-3&t)}pz(){return this.gLt(),this.nDt}gz(){return this.gLt(),this.rDt}yLt(t){const s=this.zM(),e=this.qM(),i=Math.round(s)-s,n=Math.round(e)-e;return 0===i&&0===n?t:(nx.S(t),nx.offset(i,n),nx)}SLt(t){this.nDt.S(t),this.rDt.Yl(this.nDt),this.jxt&=-3,this.GEt(),this.cLt()}wLt(t){this.VDt(4,t)}vLt(){return!!(4&this.jxt)}J2(t,s,e){return s&&0!==this.Z2()?this.X2(this.fB().Y2()):0===this.XM()||e?t.Ml(this.pz()):this.bLt()}bLt(){const t=this.fB(),s=this.cz();return!(s>=t.d1())&&(t.c1(s,ix),ix.Ml(this.pz()))}X2(t){const s=this.pz(),e=s.Za(),i=s.tl(),n=s.Qa(),r=s.sl(),h=this.cz(),o=h+this.Z2();return t.JS(e,n,h,i,r,o)}Sz(){const t=this.fB();if(t.G1())return this.X2(t.Y2());{const s=t.JN();return this.J2(t.Pj(),s.H2(),s.NV())}}e3(t){this.VDt(1048576,t)}s3(t){this.VDt(2097152,t)}MLt(){return!!(1048576&this.jxt)}xLt(){return!!(2097152&this.jxt)}TLt(t){this.aDt=t,this.CLt(),this.bH()&&(this.yDt.ILt=null)}_Lt(){return this.aDt}GLt(){return null!==this.aDt||this.bH()}PLt(){return this.ALt(this.Vg(),this.Zg(),this.cV(),this.kTt(),this.LTt())}RLt(t,s,e){let i=0,n=1;return 0!==e&&(i=Math.sin(e),n=Math.cos(e)),this.ALt(t,s,e,i,n)}ALt(t,s,e,i,n){let r=this.lDt;null===r&&(r={SDt:QM.zn(QM.au),width:NaN,height:NaN,angle:NaN},this.lDt=r);const h=r.SDt;if(r.width===t&&r.height===s&&r.angle===e)return h;const o=this.aDt;if(this.bH()){const e=this.iz(),r=this.hz(),a=this.MH();let l=this.yDt.ILt;l||(o?(ox.S(o),ox.offset(e,r)):ox.gu(),l=a.Vx(ox),this.yDt.ILt=l),a.jx(l,h),h.offset(-e,-r),h.vu(t,s,i,n)}else o?(h.S(o),h.vu(t,s,i,n)):h.wu(this.gz(),-this.zM(),-this.qM());return r.width=t,r.height=s,r.angle=e,h}CLt(){this.ELt(!0);const t=this.lDt;null!==t&&(t.width=NaN)}mH(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.iq().MW().uW())throw new Error("object does not support mesh");this.yH(),this.yDt={OLt:QM.zn(QM.DS.gx,t,s),FLt:QM.zn(QM.DS.gx,t,s),ILt:null}}bH(){return null!==this.yDt}MH(){if(!this.bH())throw new Error("no mesh");return this.yDt.OLt}DLt(){if(!this.bH())throw new Error("no mesh");return this.yDt.FLt}LLt(t){this.VDt(65536,t)}kLt(){return!!(65536&this.jxt)}ELt(t){this.VDt(131072,t)}NLt(){return!!(131072&this.jxt)}mLt(t){const s=this.yDt.OLt,e=Math.min(s.Ex(),0),i=Math.min(s.Ox(),0),n=Math.max(s.Fx(),1),r=Math.max(s.Dx(),1),h=t.width(),o=t.height();t.offsetLeft(e*h),t.offsetTop(i*o),t.al((n-1)*h),t.ll((r-1)*o),this.HT=s.Lx()}yH(){this.yDt&&(this.yDt.OLt.Hn(),this.yDt.FLt.Hn(),this.yDt=null,this.CLt())}wH(t,s,e){t=Math.floor(t),s=Math.floor(s);const i=e.mode||"absolute";if(!cx.has(i))throw new Error("invalid mode");const n="relative"===i;let r=e.x,h=e.y;const o=e.gj;let a="number"==typeof e.xH?e.xH:n?0:-1,l="number"==typeof e.TH?e.TH:n?0:-1;if(!this.bH())return!1;const u=this.MH(),c=u.Nx(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.XM()!==o&&(c.KM(o),f=!0),n&&(r+=t/(u._x()-1),h+=s/(u.Gx()-1)),-1!==a||n?(n&&(a+=t/(u._x()-1)),a=QM.Kn(a,0,1)):a=c.ZM(),-1!==l||n?(n&&(l+=s/(u.Gx()-1)),l=QM.Kn(l,0,1)):l=c.tx(),c.zM()===r&&c.qM()===h&&c.ZM()===a&&c.tx()===l?f:(c.HM(r),c.YM(h),c.QM(a),c.sx(l),this.CLt(),!0)}fOt(){return this.fe.fOt()}Oz(t,s){return!!this.pz().Tl(t,s)&&!!this.gz().Tl(t,s)&&(this.fOt()?this.fe.RH().YGt(t,s):!this.GLt()||this.PLt().Tl(t-this.zM(),s-this.qM()))}BLt(){return!!(16&this.jxt)}GEt(){if(!this.BLt()||!this.Rz()||256&this.jxt)return;const t=this.pz(),s=this.Ddt.CEt(),e=this.hDt;if(ix.set(s.qZ(t.Za()),s.YZ(t.Qa()),s.qZ(t.tl()),s.YZ(t.sl())),e.equals(ix))return;const i=this.fe;e===ux?(s.XZ(i,null,ix),this.hDt=QM.zn(QM.Rect,ix)):(s.XZ(i,e,ix),e.S(ix)),this.jxt&=-17}$Lt(){this.jxt|=16}fLt(){const t=this.hDt;t!==ux&&(this.Ddt.CEt().XZ(this.fe,t,null),this.hDt=ux)}cLt(){const t=this.fB();if(!t.l0()||256&this.jxt)return;const s=t.X0(),e=this.pz(),i=this.oDt;if(ix.set(s.qZ(e.Za()),s.YZ(e.Qa()),s.qZ(e.tl()),s.YZ(e.sl())),i.equals(ix))return;const n=this.fe;i===lx?(s.XZ(n,null,ix),this.oDt=QM.zn(QM.Rect,ix)):(s.XZ(n,i,ix),i.S(ix)),t.K0()}G0(){const t=this.oDt;t!==lx&&(this.fB().X0().XZ(this.fe,t,null),this.oDt=lx)}J1(){return this.oDt}xz(){const t=this.fe,s=this.YFt,e=s.mB();e.length&&e.at(-1)===t||(s._0(t,!1),s.T0(t,!1),this.Nc.SB())}Cz(){const t=this.fe,s=this.YFt,e=s.mB();e.length&&e[0]===t||(s._0(t,!1),s.I0(t,!1),this.Nc.SB())}_z(t){const s=this.fe,e=this.YFt;if(e.JN()!==t.JN())throw new Error("layer from different layout");t!==e&&(e._0(s,!0),this.gB(t),t.T0(s,!0),this.Nc.SB())}Pz(t,s){const e=this.fe;let i=!1;const n=this.YFt;if(t.tU()===e.tU())return;const r=t.cB();if(!r)throw new Error("expected world instance");const h=r.fB();n.tk()!==h.tk()&&(n._0(e,!0),this.gB(h),h.T0(e,!0),i=!0);const o=h.Q1(e,t,!!s);(i||o)&&this.Nc.SB()}XU(){return this.dDt}WLt(t){this.VDt(64,t)}o2(){return!!(64&this.jxt)}v3(t,s=null){const e={x:this.zM(),y:this.qM(),w:this.Vg(),h:this.Zg(),l:this.fB().U0(),zi:this.dB()};0!==this.XM()&&(e.ze=this.XM()),0!==this.cV()&&(e.a=this.GDt()),this.q0()||(e.c=this.RM.toJSON()),.5!==this.iz()&&(e.oX=this.iz()),.5!==this.hz()&&(e.oY=this.hz()),0!==this.Cj()&&(e.bm=this.Cj()),this.YV()||(e.v=this.YV()),this.Rz()||(e.ce=this.Rz()),this.vLt()&&(e.be=this.vLt()),this.dDt&&(e.fx=this.dDt.v3());const i=!!(32&this.jxt);return i&&(e.sfi=i),this.uDt&&(e.sft=[...this.uDt].join(" ")),this.mDt&&"visual-state"!==t&&(e.sgi=this.mDt.v3(t,s),Wx.has(this)&&(e.sgcd=Wx.get(this).xDt,e.sgzid=Wx.get(this).TDt)),this.bH()&&(e.mesh=this.MH().hx()),e}PFt(){return{x:this.Pa,y:this.Aa,z:this.EM,w:this.ZFt,h:this.QFt,a:this.Go,sgi:this.urt()?this.urt().TFt():null}}LFt(t){t&&(this.Pa=t.x,this.Aa=t.y,this.EM=t.z,this.ZFt=t.w,this.QFt=t.h,this.Go=t.a,t.sgi&&this.urt()&&this.urt().b3(t.sgi),this.EDt(),this.ZU())}NEt(){this.vDt(),this.nLt(),this.oLt(null),this.mDt&&this.mDt.RFt(this.aFt,this.lFt)}A6(t){"visual-state"!==t&&this.nLt()}E6(t,s="full",e=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.jxt)return;this.mDt.E6(t.sgi,e)}}KOt(t,s="full",e=null){if("visual-state"!==s)if(256&this.jxt)this.vDt();else{if(t.hasOwnProperty("sgi"))this.mDt.RFt(null,null,t.sgi,e);else if(e?.vIt&&this.aFt)for(const t of this.aFt)t.Jq()||this.Nc.Jj(t);this.vDt(),this.ZU()}}b3(t,s,e=null){if(dx=!1,this.HM(t.x),this.YM(t.y),this.Yg(t.w),this.jg(t.h),this.E0(t.zi),this.KM(t.hasOwnProperty("ze")?t.ze:0),this.uV(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?hx.Sa(t.c):t.hasOwnProperty("o")?(hx.ko(this.RM),hx.a=t.o):hx.Po(1,1,1,1),this.bDt(hx),this.nz(t.hasOwnProperty("oX")?t.oX:.5),this.oz(t.hasOwnProperty("oY")?t.oY:.5),this.FM(t.hasOwnProperty("bm")?t.bm:0),this.JV(!t.hasOwnProperty("v")||t.v),this.Ez(!t.hasOwnProperty("ce")||t.ce),this.wLt(!!t.hasOwnProperty("be")&&t.be),this.dLt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.dDt&&t.hasOwnProperty("fx")&&this.dDt.b3(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.oLt(null);const s=this.mDt,e=t.sgi;s.b3(e),s.RFt(this.aFt,this.lFt),this.VLt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.mH(s.cols,s.rows),this.MH().ox(s)}else this.yH();this.ZU(),dx=!0,this.CDt(),"visual-state"!==s&&this.Nc.jLt(this.iq(),t)}VLt(t,s){t&&QM.Ke(s)&&Wx.set(this,{xDt:t,TDt:s})}}}{const jx=self._s;jx.gRt=class extends jx.jn{constructor(t,s){super();const e=t.$B(),i=e.jvt(s[1]);e.ULt().UPt(i),this.Nc=e,this.Ddt=t,this.xPt=jx.H$.HH(i),this.aGt=null,this.zLt=null,this.JAt=i.Instance,this.dQ=s[2],this.Yn=s[0],this._bt=this.Nc.ugt(s[3]);const n=this.xPt.Mxt();if(n<2&&(this.aGt=jx.zn(i.ORt,this),!(this.aGt instanceof jx.MPt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(jx.H$.U_t(this,n),n>=2){const t=i.ORt??globalThis.rY;if(this.zLt=new t,!(this.zLt instanceof globalThis.rY))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.zLt=new globalThis.UH;jx.H$.z_t(n),this.$_t()}static RC(t,s){return jx.zn(jx.gRt,t,s)}Hn(){this.Nc=null,this.xPt=null,this.aGt&&(this.aGt.Hn(),this.aGt=null),this.JAt=null}STt(){return this.aGt}$_t(){this.aGt?this.aGt.$_t():this.zLt&&this.zLt.vq()}$B(){return this.Nc}Wj(){return this.Ddt}NH(){return this.xPt}sEt(){return this.JAt}Pc(){return this.Yn}U0(){return this.dQ}$H(){return this.zLt}ugt(){return this._bt}}}{const Ux=self._s,zx=self.LH;Ux.KEt=class extends Ux.jn{constructor(t){super(),this.Nc=t.runtime,this.rMt=t.BH,this.xPt=this.rMt.NH(),this.fe=t.VH,this.GS=t.index,this.jEt=null,this.UEt=null,this.xPt.T0(this.fe)}Hn(){this.UEt&&(this.UEt.Hj(),this.UEt=null),this.xPt._0(this.fe),this.jEt&&(this.jEt.Hn(),this.jEt=null),this.Nc=null,this.rMt=null,this.xPt=null,this.fe=null}XRt(t){if(this.jEt)throw new Error("already got sdk instance");if(this.NH().Mxt()<2){if(this.jEt=Ux.zn(this.rMt.sEt(),this,t),!(this.jEt instanceof Ux.TPt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.NH().W_t();this.j_t(s.Instance,t)}}RH(){return this.jEt??this.UEt}jH(){return this.fe}$B(){return this.Nc}WH(){return this.rMt}NH(){return this.xPt}pht(){return this.GS}_Pt(){this.jEt?this.jEt._Pt():this.UEt.aY()}RPt(t,s){this.jEt&&this.jEt.RPt(t,s)}XOt(){return this.jEt?this.jEt.PGt():this.UEt.NU()}hx(t="full"){return this.jEt?this.jEt.hx(t):this.UEt.BU(t)}ox(t,s="full"){if(this.jEt)return this.jEt.ox(t,s);this.UEt.$U(t,s)}static HLt(t,s,e){const i=globalThis.hY;let n,r;n=s instanceof i?t.TV(s):s.IPt(),r=e instanceof i?t.TV(e):e.IPt();const h=n.jH(),o=r.jH(),a=h.Wj().tk(),l=o.Wj().tk();if(a!==l)return a-l;const u=h.kOt(),c=o.kOt();return u!==c?u-c:n.pht()-r.pht()}j_t(t,s){const e=zx,i=t??this.jEt.W_t(),n=i||e,r=this.NH().Mxt();if(Ux.H$.U_t(this,r),Ux.H$.zPt(s),this.UEt=new n,Ux.H$.HPt(),Ux.H$.z_t(r),i&&!(this.UEt instanceof e))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${e.name}'`);return this.UEt}cGt(){return this.UEt||this.j_t()}OGt(){return!!this.UEt}}}{const Hx=self._s;Hx.YQ=class extends Hx.jn{constructor(t,s){super(),this.wx=t,this.JLt=[],this.qLt=[],this.YLt=new Map,this.XLt=[],this.KLt=[],this.ZLt=new Set,this.iM=!0;for(const t of s){const s=Hx.zn(Hx.QLt,this,t,this.JLt.length);this.JLt.push(s),this.YLt.set(s.Pc().toLowerCase(),s),t.length>=3&&this.XLt.push(this.tkt(s,t[2]))}this.$B().skt(this)}Hn(){this.$B().ekt(this);for(const t of this.KLt)t.Hn();Hx.bh(this.KLt),Hx.bh(this.JLt),Hx.bh(this.qLt),this.YLt.clear(),Hx.bh(this.XLt),this.wx=null}ikt(t){this.ZLt.add(t)}nkt(t){this.ZLt.delete(t)}rkt(t){t.sv()&&(this.KLt=this.JLt.map((t=>{const s=t.RI();return s.hkt()>0?Hx.zn(Hx.DS.okt,s):null})),this.akt());for(const s of this.ZLt)s.rkt(t)}qRt(t){if(t.length){this.JLt=t.concat(this.JLt);for(const s of t)this.YLt.set(s.Pc().toLowerCase(),s);for(let t=0,s=this.JLt.length;t<s;++t)this.JLt[t].B0(t)}}tkt(t,s){t.lkt(s[0]);const e=s.slice(1);for(let t=0,s=e.length;t<s;++t){const s=e[t];if(Array.isArray(s)){const i=Hx.zn(Hx.To);i.Sa(s),e[t]=i}}return e}Px(){return this.wx}$B(){return this.wx.$B()}YH(){Hx.bh(this.qLt);let t=!0;for(const s of this.JLt)s.ASt()&&(this.qLt.push(s),s.RI().vM()||(t=!1));this.iM=t}rV(){return this.JLt}lEt(){return this.JLt.length>0}ert(t){return this.YLt.get(t.toLowerCase())||null}ukt(t){if((t=Math.floor(+t))<0||t>=this.JLt.length)throw new RangeError("invalid effect type index");return this.JLt[t]}JH(t){return this.ukt(t).ASt()}qH(t,s){this.ukt(t).lkt(s)}Y0(){return this.qLt}o2(){return this.qLt.length>0}vM(){return this.iM}srt(t){return this.XLt[t]}QQ(t){return t<this.KLt.length?this.KLt[t]:this.XLt[t]}XH(t,s){if(t<0||t>=this.XLt.length)return null;const e=this.XLt[t];return s<0||s>=e.length?null:e[s]}KH(t,s,e){if(t<0||t>=this.XLt.length)return!1;const i=this.XLt[t];if(s<0||s>=i.length)return!1;const n=i[s];if(n instanceof Hx.To){if(n.zo(e))return!1;n.ko(e)}else{if(n===e)return!1;i[s]=e}return t<this.KLt.length&&this.KLt[t].ckt(s,e),!0}akt(){const t=this.XLt,s=this.KLt;for(let e=0,i=Math.min(t.length,s.length);e<i;++e){const i=s[e],n=t[e];for(let t=0,s=n.length;t<s;++t)i.ckt(t,n[t])}}static fkt(t){return t&&t instanceof Hx.To?{t:"color",v:t.toJSON()}:t}static dkt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=Hx.zn(Hx.To);return s.Sa(t.v),s}throw new Error("invalid effect parameter type")}return t}static pkt(t){return t.map(Hx.YQ.fkt)}static mkt(t){return t.map(Hx.YQ.dkt)}hx(){return this.JLt.map((t=>({name:t.Pc(),active:t.ASt(),params:Hx.YQ.pkt(this.XLt[t.tk()])})))}ox(t){for(const s of t){const t=this.ert(s.name);t&&(t.lkt(s.active),this.XLt[t.tk()]=Hx.YQ.mkt(s.params))}this.YH(),this.akt()}}}{const Jx=self._s;Jx.QLt=class extends Jx.jn{constructor(t,s,e){super(),this.qQ=t,this.$c=s[0],this.Yn=s[1],this.GS=e,this.GM=null,this.Nf=!0}Hn(){this.qQ=null,this.GM=null}JRt(t){const s=Jx.zn(Jx.QLt,t,[this.$c,this.Yn],-1);return s.GM=this.GM,s.Nf=this.Nf,s}rkt(t){const s=t.av(this.$c);if(!s)throw new Error("failed to find shader program '"+this.$c+"'");this.GM=s}nV(){return this.qQ}Pc(){return this.Yn}B0(t){this.GS=t}tk(){return this.GS}Px(){return this.qQ.Px()}$B(){return this.qQ.$B()}lkt(t){this.Nf=!!t}ASt(){return this.Nf}RI(){return this.GM}gkt(){const t=[];for(let s=0,e=this.GM.EI();s<e;++s){const e=this.GM.OI(s);if("float"===e||"percent"===e)t.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");t.push(Jx.zn(Jx.To,1,1,1,1))}}return t}}}{const qx=self._s;qx.pDt=class extends qx.jn{constructor(t,s){super(),this.fe=t,this.ykt=s,this.qQ=t.Wj().nV(),this.Skt=!0,this.s0=!0,this.wkt=!1,this.vkt=!1,this.bkt=!1,this.Mkt=!1,this.XL=qx.zn(qx.DS.$F,t.$B().IB().XQ(),{PF:(t,s)=>{const e=s.VL(),i=e.cB();t.DM(i.KQ()),t.Uv(i.cz()),e.$x(t),t.Uv(0)},AF:t=>{const s=t.UGt(),[e,i]=t.jGt();return{FL:s,DL:e,LL:i}},RF:t=>this.QQ(t)}),this.xkt=[],this.qLt=[],this.iM=!0,this.XLt=[],this.KLt=[],this.rkt(t.$B().pM());for(let t=0,s=this.qQ.rV().length;t<s;++t)this.xkt.push(!0);this.YH(),this.qQ.ikt(this)}Hn(){this.qQ.nkt(this);for(const t of this.KLt)t&&t.Hn();qx.bh(this.KLt),this.XL.Hn(),this.XL=null,qx.bh(this.xkt),qx.bh(this.qLt),qx.bh(this.XLt),this.fe=null,this.qQ=null}rkt(t){t.sv()&&(this.KLt=this.qQ.rV().map((t=>{const s=t.RI();return s.hkt()>0?qx.zn(qx.DS.okt,s):null})))}MDt(t){let s=0;for(const e of t)this.XLt.push(this.tkt(s,e)),++s;this.akt(),this.YH()}tkt(t,s){this.xkt[t]=s[0];const e=s.slice(1);for(let t=0,s=e.length;t<s;++t){const s=e[t];if(Array.isArray(s)){const i=qx.zn(qx.To);i.Sa(s),e[t]=i}}return e}nOt(){for(const t of this.qQ.rV())this.XLt.push(t.gkt());this.akt()}Px(){return this.wx}nV(){return this.qQ}QL(){return this.J0(),this.XL}$B(){return this.fe.$B()}YH(){qx.bh(this.qLt);const t=this.ykt,s=this.qQ.rV(),e=this.qLt,i=this.xkt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(i[t]){const i=s[t];e.push(i),i.RI().vM()||(n=!1)}this.iM=n,t.WLt(!!e.length),this.Skt=!0}J0(){const t=this.fe,s=this.ykt,e=s.q0(),i=t.MW().hW(),n=0!==s.cV()||0!==s.fB().cV()||s.Vg()<0||s.Zg()<0,r=t.JGt(),h=t.wM();(this.Skt||e!==this.s0||i!==this.wkt||n!==this.vkt||r!==this.bkt||h!==this.Mkt||this.XL.ED())&&(this.XL.OD(this.qLt.map((t=>t.RI())),{OF:this.qLt.map((t=>t.tk())),FF:!e||h,LF:i,kF:r,NF:n}),this.Skt=!1,this.s0=e,this.wkt=i,this.vkt=n,this.bkt=r,this.Mkt=h)}Y0(){return this.qLt}srt(t){return this.XLt[t]}QQ(t){return t<this.KLt.length?this.KLt[t]:this.XLt[t]}XH(t,s){if(t<0||t>=this.XLt.length)return null;const e=this.XLt[t];return s<0||s>=e.length?null:e[s]}KH(t,s,e){if(t<0||t>=this.XLt.length)return!1;const i=this.XLt[t];if(s<0||s>=i.length)return!1;const n=i[s];if(n instanceof qx.To){if(n.zo(e))return!1;n.ko(e)}else{if(n===e)return!1;i[s]=e}return t<this.KLt.length&&this.KLt[t].ckt(s,e),!0}akt(){const t=this.XLt,s=this.KLt;for(let e=0,i=s.length;e<i;++e){const i=s[e],n=t[e];for(let t=0,s=n.length;t<s;++t)i.ckt(t,n[t])}}vM(){return this.iM}Tkt(){return this.qLt.some((t=>t.RI().xM()))}JH(t){return this.xkt[t]}qH(t,s){this.xkt[t]=!!s}rV(){return this.qQ.rV()}v3(){return this.qQ.rV().map((t=>({name:t.Pc(),active:this.xkt[t.tk()],params:qx.YQ.pkt(this.XLt[t.tk()])})))}b3(t){for(const s of t){const t=this.qQ.ert(s.name);t&&(this.xkt[t.tk()]=s.active,this.XLt[t.tk()]=qx.YQ.mkt(s.params))}this.YH(),this.akt()}}}{const Yx=self._s,Xx=[],Kx=[],Zx=[],Qx=Yx.zn(Yx.au),tT=Yx.zn(Yx.au),sT=Yx.zn(Yx.Gl),eT=Yx.zn(Yx.Rect),iT=Yx.zn(Yx.Rect);let nT=null,rT=null,hT=null;Yx.Ckt=class extends Yx.jn{constructor(t){super(),this.Nc=t,this.Ikt=0,this._kt=0,this.Gkt=[],this.Pkt=0,this.Akt=0,this.Rkt=0,this.Ekt=0,this.Okt=new self.r$(this)}Hn(){this.Nc=null}$B(){return this.Nc}ak(){return this.Okt}Fkt(){this.Akt=this.Pkt,this.Pkt=0,this.Ekt=this.Rkt,this.Rkt=0}Dkt(){return this.Akt}Lkt(){return this.Ekt}kkt(t,s){const e=t.cB(),i=s.cB();e&&i&&e.Rz()&&i.Rz()&&this.Gkt.push([t,s])}vCt(t,s,e){for(const[i,n]of this.Gkt){let r=null;if(t===i)r=n;else{if(t!==n)continue;r=i}r.PCt(s)&&(e.includes(r)||e.push(r))}}bCt(t,s){if(!this.Gkt.length)return!1;for(const[e,i]of this.Gkt)if(t===e&&s===i||t===i&&s===e)return!0;return!1}Nkt(){Yx.bh(this.Gkt)}o$(t,s){if(!t||!s||t===s)return!1;const e=t.cB(),i=s.cB();if(!e.Rz()||!i.Rz())return!1;this.Pkt++;const n=e.fB(),r=i.fB();return n.V1(r)?this.Bkt(e,i):this.$kt(e,i)}Bkt(t,s){if(!t.pz().Ml(s.pz()))return!1;if(this.Rkt++,!t.gz().tu(s.gz()))return!1;if(t.fOt()&&s.fOt())return!1;if(t.fOt())return this.Wkt(t,s);if(s.fOt())return this.Wkt(s,t);if(!t.GLt()&&!s.GLt())return!0;const e=t.PLt(),i=s.PLt();return e.bu(i,s.zM()-t.zM(),s.qM()-t.qM())}$kt(t,s){const e=t.fOt(),i=s.fOt();if(e&&!i)return this.Vkt(t,s);if(i&&!e)return this.Vkt(s,t);if(i||e)return!1;{const e=t.fB(),i=s.fB();Qx.S(t.PLt()),tT.S(s.PLt());const n=Qx.du();for(let s=0,i=n.length;s<i;s+=2){const i=s+1,r=n[s],h=n[i],[o,a]=e.Oj(r+t.zM(),h+t.qM());n[s]=o,n[i]=a}const r=tT.du();for(let t=0,e=r.length;t<e;t+=2){const e=t+1,n=r[t],h=r[e],[o,a]=i.Oj(n+s.zM(),h+s.qM());r[t]=o,r[e]=a}return Qx.yu(),tT.yu(),this.Rkt++,Qx.bu(tT,0,0)}}Vkt(t,s){const e=t.fB(),i=s.fB();nT||(nT=Yx.zn(Yx.au)),rT||(rT=Yx.zn(Yx.Rect)),hT||(hT=Yx.zn(Yx.Gl));const n=s.zM(),r=s.qM(),[h,o]=i.Oj(n,r),[a,l]=e.Rj(h,o),u=a-n,c=l-r;if(rT.S(s.pz()),rT.offset(u,c),!t.pz().Ml(rT))return!1;if(hT.S(s.gz()),hT.offset(u,c),this.Rkt++,!t.gz().tu(hT))return!1;nT.S(s.PLt());const f=nT.du();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return nT.yu(),this.Wkt(t,s,a,l,nT,rT,hT)}Wkt(t,s,e,i,n,r,h){const o=void 0!==r?r:s.pz(),a=t.zM(),l=t.qM(),u=t.iq().RH(),c=void 0!==e?e:s.zM(),f=void 0!==i?i:s.qM(),d=s.GLt(),p=void 0!==h?h:s.gz(),m=Kx;u.jkt(o,m);for(let t=0,e=m.length;t<e;++t){const e=m[t],i=e.Ukt();if(this.Pkt++,o.xl(i,a,l)&&(sT.Yl(i),sT.offset(a,l),sT.tu(p)))if(d){const t=void 0!==n?n:s.PLt();let r=c,h=f;void 0!==n&&(r=s.zM(),h=s.qM());const o=e.zkt();if(o){if(this.Rkt++,o.bu(t,r-(a+i.Za()),h-(l+i.Qa())))return Yx.bh(m),!0}else if(Qx.wu(sT,0,0),Qx.bu(t,r,h))return Yx.bh(m),!0}else{const t=e.zkt();if(!t)return Yx.bh(m),!0;if(Qx.wu(p,0,0),t.bu(Qx,-(a+i.Za()),-(l+i.Qa())))return Yx.bh(m),!0}}return Yx.bh(m),!1}Hkt(t,s,e){const i=t.DW(),n=this.Nc.Hk();if(!n)throw new Error("cannot call outside event");const r=n.upt(),h=new Yx.Jkt;if(i.Jdt()){e||(i.tpt(!1),Yx.bh(i.spt())),r&&Yx.bh(i.ept());for(const n of t.FW()){const t=n.cB(),o=t.fB();let a=!1;if(h.KV(o)&&t.Sz()&&(a=s.some((([s,e])=>{const[i,n]=h.Rj(o,s,e,t.cz());return t.Oz(i,n)}))),a){if(e)return!1;i.Zdt(n)}else r&&i.Qdt(n)}}else{let t,o=!1;r&&!n.Qwt(this.Nc.sgt())?this.Nc.xTt()&&!i.ept().length&&i.spt().length?t=i.spt():(t=i.ept(),o=!0):t=i.spt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.cB(),c=u.fB();let f=!1;if(h.KV(c)&&u.Sz()&&(f=s.some((([t,s])=>{const[e,i]=h.Rj(c,t,s,u.cz());return u.Oz(e,i)}))),f){if(e)return!1;o?i.Zdt(l):t[a++]=l}else o?t[a++]=l:r&&i.Qdt(l)}e||(t.length=a)}return t.Fvt(),h.Hn(),!!e||i.qdt()}qkt(t,s){if(!t)return!0;for(const e of s.AEt())if(!t.V1(e))return!1;return!0}MTt(t,s,e,i){if(s.k0())for(const n of s.tV())this.qkt(t,n)?(n._Et(),n.CEt().KZ(e,i)):Yx.On(i,n.FW());else this.qkt(t,s)?(s._Et(),s.CEt().KZ(e,i)):Yx.On(i,s.FW())}y$(t,s,e,i){for(const n of s)this.MTt(t,n,e,i)}Ykt(t,s,e){const i=this.Nc.qPt();i&&this.y$(t,i.e8(),s,e)}Xkt(t,s,e){const i=this.Nc.YPt();i&&this.y$(t,i.e8(),s,e)}pLt(t,s){return t.mOt()&&(!s||s.cB().pLt(t.Gxt().get("solidTags")))}u$(t){const s=t.cB();this.Ykt(s.fB(),s.pz(),Xx);for(const s of Xx)if(this.pLt(s,t)&&this.o$(t,s))return Yx.bh(Xx),s;return Yx.bh(Xx),null}Kkt(t,s){this.Ykt(null,t,Xx);for(const e of Xx)if(this.pLt(e,s)&&this.Zkt(t,e))return Yx.bh(Xx),e;return Yx.bh(Xx),null}Qkt(t,s){let e=null;s&&(e=Zx,Yx.bh(e));const i=t.cB();this.Xkt(i.fB(),i.pz(),Xx);for(const i of Xx)if(i.yOt()&&this.o$(t,i)){if(!s)return Yx.bh(Xx),i;e.push(i)}return Yx.bh(Xx),e}tNt(t,s,e,i,n){i=i||50;const r=t.cB(),h=r.zM(),o=r.qM();for(let a=0;a<i;++a)if(r.QU(h+s*a,o+e*a),r.ZU(),!this.o$(t,n))return!0;return r.QU(h,o),r.ZU(),!1}sNt(t,s,e,i,n,r){i=i||50;const h=t.cB(),o=h.zM(),a=h.qM();let l=null,u=null;for(let c=0;c<i;++c)if(h.QU(o+s*c,a+e*c),h.ZU(),!this.o$(t,l))if(l=this.u$(t),l)u=l;else if(n&&(l=r?this.o$(t,r)?r:null:this.Qkt(t),l&&(u=l)),!l)return u&&this.eNt(t,s,e,u,16,!0),!0;return h.QU(o,a),h.ZU(),!1}iNt(t,s,e,i){i=i||50;const n=t.cB(),r=n.zM(),h=n.qM();let o=null,a=null;for(let l=0;l<i;++l)for(let i=0;i<2;++i){const u=2*i-1;if(n.QU(r+s*l*u,h+e*l*u),n.ZU(),!this.o$(t,o)){if(o=this.u$(t),!o)return a&&this.eNt(t,s*u,e*u,a,16,!0),!0;a=o}}return n.QU(r,h),n.ZU(),!1}eNt(t,s,e,i,n,r){let h=2,o=!1,a=!1;const l=t.cB();let u=l.zM(),c=l.qM();for(;h<=n;){const n=1/h;h*=2,l.sz(s*n*(o?1:-1),e*n*(o?1:-1)),l.ZU(),this.o$(t,i)||r&&this.u$(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.zM(),c=l.qM())}a&&(l.QU(u,c),l.ZU())}nNt(t,s=100){let e=0;const i=t.cB(),n=i.zM(),r=i.qM();let h=0,o=this.u$(t);if(!o)return!0;for(;e<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,e++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,i.QU(Math.floor(n+s*e),Math.floor(r+a*e)),i.ZU(),!this.o$(t,o)&&(o=this.u$(t),!o))return!0}return i.QU(n,r),i.ZU(),!1}rNt(t,s,e,i){const n=t.cB(),r=n.zM(),h=n.qM(),o=Math.max(10,Yx.ir(s,e,r,h)),a=Yx.rr(s,e,r,h),l=i||this.u$(t);if(!l)return Yx.Zn(a+Math.PI);let u=l,c=0,f=0;const d=Yx.Qn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.QU(s+Math.cos(r)*o,e+Math.sin(r)*o),n.ZU(),!this.o$(t,u)&&(u=i?null:this.u$(t),!u)){c=r;break}}for(36===p&&(c=Yx.Zn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.QU(s+Math.cos(r)*o,e+Math.sin(r)*o),n.ZU(),!this.o$(t,u)&&(u=i?null:this.u$(t),!u)){f=r;break}}if(36===p&&(f=Yx.Zn(a+Math.PI)),n.QU(r,h),n.ZU(),f===c)return f;const m=Yx.hr(f,c)/2;let g;g=Yx.lr(f,c)?Yx.Zn(c+m+Math.PI):Yx.Zn(f+m);const y=Math.cos(a),S=Math.sin(a),w=Math.cos(g),v=Math.sin(g),b=y*w+S*v,M=y-2*b*w,x=S-2*b*v;return Yx.rr(0,0,M,x)}hNt(t,s,e,i,n){if(!n)return!1;const r=n.cB();return!!r.Rz()&&(this.Pkt++,eT.set(Math.min(t,e),Math.min(s,i),Math.max(t,e),Math.max(s,i)),!!r.pz().Ml(eT)&&(n.fOt()?this.oNt(t,s,e,i,n,r):(this.Rkt++,!!r.gz().Ql(t,s,e,i)&&(!r.GLt()||r.PLt().Ql(r.zM(),r.qM(),t,s,e,i)))))}oNt(t,s,e,i,n,r){const h=r.zM(),o=r.qM(),a=n.RH(),l=Kx;iT.set(t,s,e,i),iT.normalize(),a.jkt(iT,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.Ukt();if(this.Pkt++,eT.xl(a,h,o)&&(sT.Yl(a),sT.offset(h,o),sT.Ql(t,s,e,i))){const n=r.zkt();if(!n)return Yx.bh(l),!0;if(this.Rkt++,n.Ql(h+a.Za(),o+a.Qa(),t,s,e,i))return Yx.bh(l),!0}}return Yx.bh(l),!1}Zkt(t,s){if(!s)return!1;const e=s.cB();if(!e.Rz())return!1;if(this.Pkt++,!e.pz().Ml(t))return!1;if(s.fOt())return this.aNt(t,s,e);if(this.Rkt++,sT.Yl(t),!e.gz().tu(sT))return!1;if(!e.GLt())return!0;const i=Qx;i.Yl(t,e.zM(),e.qM());const n=e.PLt();return i.bu(n,0,0)}aNt(t,s,e){const i=e.zM(),n=e.qM(),r=s.RH(),h=Kx;r.jkt(t,h);for(let s=0,e=h.length;s<e;++s){const e=h[s],r=e.Ukt();if(this.Pkt++,t.xl(r,i,n)){const s=e.zkt();if(!s)return Yx.bh(h),!0;if(this.Rkt++,Qx.Yl(t,0,0),s.bu(Qx,-(i+r.Za()),-(n+r.Qa())))return Yx.bh(h),!0}}return Yx.bh(h),!1}lNt(t,s){if(!t)return;const e=t.cB();e.Rz()&&(this.Pkt++,e.pz().Ml(s.rect)&&(t.fOt()?this.uNt(t,e,s):(this.Rkt++,e.GLt()?s.cNt(t,e.zM(),e.qM(),e.PLt()):s.fNt(t,e.gz()))))}uNt(t,s,e){const i=s.zM(),n=s.qM(),r=Kx;t.RH().jkt(e.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.Ukt();if(this.Pkt++,e.rect.xl(a,i,n)){const r=o.zkt();this.Rkt++,r?e.cNt(t,i+a.Za(),n+a.Qa(),r):e.dNt(t,s.zM(),s.qM(),a)}}Yx.bh(r)}f$(t,s){if(t===this.Ikt&&s===this._kt)return;this.Ikt=t,this._kt=s;const e=this.Nc.L0();for(const i of e)if(i.Z$()){for(const t of i.OW())t.cB().fLt();i.CEt().pNt(t,s),i.IEt();for(const t of i.OW()){const s=t.cB();s.$Lt(),s.GEt()}}}p$(){return[this.Ikt,this._kt]}mNt(t,s){this.Ikt=t,this._kt=s}}}{const oT=self._s;oT.iRt=class extends oT.jn{constructor(t,s){super(),this.UZ=t,this.zZ=s,this.HZ=oT.zn(oT._u)}Hn(){this.HZ.Hn(),this.HZ=null}pNt(t,s){if(!this.HZ.Au())throw new Error("grid not empty");this.UZ=t,this.zZ=s}JZ(t,s,e){let i=this.HZ.Hs(t,s);return i||(e?(i=oT.zn(oT.gNt,this,t,s),this.HZ.Set(t,s,i),i):null)}qZ(t){const s=Math.floor(t/this.UZ);return isFinite(s)?s:0}YZ(t){const s=Math.floor(t/this.zZ);return isFinite(s)?s:0}XZ(t,s,e){if(s)for(let i=s.Za(),n=s.tl();i<=n;++i)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(e&&e.Tl(i,n))continue;const s=this.JZ(i,n,!1);s&&(s.Kf(t),s.Au()&&this.HZ.Ru(i,n))}if(e)for(let i=e.Za(),n=e.tl();i<=n;++i)for(let n=e.Qa(),r=e.sl();n<=r;++n)s&&s.Tl(i,n)||this.JZ(i,n,!0).$Z(t)}KZ(t,s){let e=this.qZ(t.Za());const i=this.YZ(t.Qa()),n=this.qZ(t.tl()),r=this.YZ(t.sl());if(isFinite(n)&&isFinite(r))for(;e<=n;++e)for(let t=i;t<=r;++t){const i=this.JZ(e,t,!1);i&&i.VZ(s)}}}}{const aT=self._s;aT.gNt=class extends aT.jn{constructor(t,s,e){super(),this.OZ=t,this.Pa=s,this.Aa=e,this.FZ=aT.zn(aT.Du)}Hn(){this.FZ.Hn(),this.FZ=null,this.OZ=null}Au(){return this.FZ.Au()}$Z(t){this.FZ.Bu(t)}Kf(t){this.FZ.Ru(t)}VZ(t){aT.On(t,this.FZ.$u())}}}{const lT=self._s,uT=1e-6,cT=2;lT.yNt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new lT.Rect,this.SNt=2,this.wNt=null,this.vNt=0,this.bNt=0,this.MNt=0,this.xNt=0,this.TNt=0,this.bt=0,this.CNt=1,this.INt=0,this._Nt=1,this.GNt=0}PNt(){return this.SNt<1.000001}Bf(){this.SNt=2}Set(t,s,e,i){return this.x1=t,this.y1=s,this.x2=e,this.y2=i,this.dx=e-t,this.dy=i-s,this.rect.set(t,s,e,i),this.rect.normalize(),this.SNt=2,this.wNt=null,this.vNt=0,this.bNt=0,this.MNt=0,this.xNt=0,this.TNt=0,this.bt=0,this.CNt=1,this.INt=0,this._Nt=1,this.GNt=0,this}ANt(){if(!1===this.PNt())return;const t=this.dx*this.SNt,s=this.dy*this.SNt,e=lT.sr(t,s),i=t/e,n=s/e;this.bt=e-uT,this.xNt=this.x1+i*this.bt,this.TNt=this.y1+n*this.bt,this.vNt=Math.atan2(this.MNt,this.bNt)+Math.PI/2,this.CNt=Math.cos(this.vNt),this.INt=Math.sin(this.vNt);const r=i*this.CNt+n*this.INt;if(this._Nt=i-2*this.CNt*r,this.GNt=n-2*this.INt*r,r>0){const t=Math.PI;this.vNt=lT.Zn(this.vNt+t),this.CNt=-this.CNt,this.INt=-this.INt}}RNt(t,s,e,i,n){const r=lT.qr(this.x1,this.y1,this.x2,this.y2,s,e,i,n);r>=0&&r<this.SNt&&(this.SNt=r,this.wNt=t.tU(),this.bNt=s-i,this.MNt=e-n)}dNt(t,s,e,i){const n=s+i.Za(),r=s+i.tl(),h=e+i.Qa(),o=e+i.sl();this.RNt(t,n,h,r,h),this.RNt(t,r,h,r,o),this.RNt(t,r,o,n,o),this.RNt(t,n,o,n,h)}fNt(t,s){const e=s.Br(),i=s.$r(),n=s.Wr(),r=s.Vr(),h=s.jr(),o=s.Ur(),a=s.zr(),l=s.Hr();this.RNt(t,e,i,n,r),this.RNt(t,n,r,h,o),this.RNt(t,h,o,a,l),this.RNt(t,a,l,e,i)}cNt(t,s,e,i){const n=i.du();for(let i=0,r=n.length;i<r;i+=2){const h=(i+2)%r,o=n[i]+s,a=n[i+1]+e,l=n[h]+s,u=n[h+1]+e;this.RNt(t,o,a,l,u)}}}}{const fT=self._s;fT.Jkt=class{constructor(){this.ENt=new Map}Hn(){for(const t of this.ENt.values())t.ONt.Pu();this.ENt.clear()}FNt(t){let s=this.ENt.get(t);return void 0===s&&(s={XV:null,ONt:new fT._u},this.ENt.set(t,s)),s}KV(t){const s=this.FNt(t);return null===s.XV&&(s.XV=t.ij()),s.XV}Rj(t,s,e,i){if(0!==i)return t.Rj(s,e,i);const n=this.FNt(t);let r=n.ONt.Hs(s,e);return void 0===r&&(r=t.Rj(s,e,i),n.ONt.Set(s,e,r)),r}}}{const dT=self._s,pT=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),mT=new Set(["high","low"]),gT=self.ls,yT=gT.ds,ST=gT.Ss,wT=yT.create(),vT=300,bT=200,MT=120,xT=8,TT=dT.zn(dT.Gl),CT=dT.zn(dT.Rect),IT=3e3,_T=200,GT=300;dT.DNt=class extends dT.jn{constructor(t){super(),this.Nc=t,this.LNt=[],this.kNt=!1,this.NNt=null,this.BNt=null,this.$Nt=null,this.WNt="high-performance",this.VNt=!1,this.jNt="auto",this.UNt=0,this.zNt=0,this.HNt="",this.JNt=0,this.qNt=0,this.YNt=0,this.XNt=0,this.KNt=0,this.ZNt=0,this.ew="normalized",this.QNt=0,this.tBt=1,this.sBt=1e4,this.Fw=!0,this.eBt=0,this.cD=0,this.fD=0,this.iBt="letterbox-scale",this.nBt="letterbox-scale",this.rBt=0,this.hBt=0,this.oBt=yT.create(),this.aBt="high",this.lBt=this.aBt,this.uBt=!1,this.cBt=[],this.fBt=new Set,this.dBt=self.C3_Shaders,this.pBt=dT.zn(dT.DS.mF,{cF:()=>[this.I2(),this._2()],fF:()=>this.mBt(),dF:t=>this.gBt(t),getTime:()=>this.$B().dN(),pF:()=>this.$B().SB()}),this.yBt=0,this.SBt=0,this.wBt=NaN,this.vBt=null,this.bBt=new Map,this.MBt=NaN,this.xBt=new Map,this.TBt="",this.CBt=1,this.IBt=dT.zn(dT.Rect),this._Bt="",this.GBt=null,this.PBt=null,this.ABt=0,this.RBt=0,this.EBt=-1,this.OBt=0,this.FBt=t=>this.OBt=t.progress,this.DBt=null,this.LBt={kBt:null,NBt:null,BBt:null},this.$Bt=0,this.WBt=0,this.VBt=0,this.jBt="fade-in",this.UBt=null,this.zBt=new Promise((t=>this.UBt=t))}HBt(t){this.WNt=t}JBt(t){this.kNt=!!t}qBt(t){this.ew=t}YBt(){return this.ew}XBt(t){this.QNt=t}KBt(t,s){this.tBt=t,this.sBt=s}ZBt(t){this.VNt=!!t}QBt(t){this.jNt=t}async co(t){let s=t.canvas;this.LNt.push({canvas:s,t$t:null}),this.Nc.IU("runtime","window-resize",(t=>this.s$t(t))),this.Nc.IU("runtime","fullscreenchange",(t=>this.e$t(t))),this.Nc.IU("runtime","fullscreenerror",(t=>this.i$t(t))),s.addEventListener("webglcontextlost",(t=>this.n$t(t))),s.addEventListener("webglcontextrestored",(t=>this.r$t(t))),this.uBt=!!t.isFullscreen,this.HNt=t.cssDisplayMode;const e=navigator.gpu&&this.kNt;let i=!1;if(e)try{await this.h$t(!0)}catch(t){this.o$t("WebGPU",t),this.BNt=null}if(!this.pM())try{await this.a$t(!0)}catch(t){this.o$t("WebGL",t),this.NNt=null}if(this.pM()||(i=!0),!this.pM()&&e)try{await this.h$t(!1)}catch(t){this.o$t("WebGPU",t),this.BNt=null}if(!this.pM())try{await this.a$t(!1)}catch(t){this.o$t("WebGL",t),this.NNt=null}const n=this.pM();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.Nb(i),this.BNt&&(this.BNt.l$t=()=>this.u$t(),this.BNt.c$t=()=>this.f$t()),"normalized"===this.ew?n.Kw():(n.Zw(),n.Yw(this.QNt)),this.TA(t.windowInnerWidth,t.windowInnerHeight,!0),await this.rkt()}o$t(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async h$t(t){const s={YS:this.tBt,XS:this.sBt};let e=!0;"no"===this.jNt?e=!1:"auto"===this.jNt&&(e=dT.Zs.he);const i={powerPreference:this.WNt,depth:this.Nc._1(),failIfMajorPerformanceCaveat:t,d$t:this.Nc.L2(),p$t:this.Nc.m$t(),OR:this.Nc.g$t(),y$t:e};this.BNt=dT.zn(dT.DS.S$t,s),await this.BNt.RC(this.LNt[0].canvas,i)}async a$t(t){const s={alpha:!0,powerPreference:this.WNt,ER:"xbox-uwp-webview2"!==this.Nc.x$(),depth:this.Nc._1(),OR:this.Nc.g$t(),failIfMajorPerformanceCaveat:t,YS:this.tBt,XS:this.sBt};this.VNt&&(s.FR=1),this.NNt=dT.zn(dT.DS.kR,this.LNt[0].canvas,s),await this.NNt.Bw()}async w$t(){if(this.dBt){const t=[];for(const[s,e]of Object.entries(this.dBt)){e.src=e.v$t;const i=dT.DS.b$t.ZI(this.BNt.M$t());t.push(this.BNt.$E(Object.assign({GC:i,name:s},e)))}await Promise.all(t)}}async x$t(){if(this.dBt){const t=[];for(const[s,e]of Object.entries(this.dBt)){let i;if(e.T$t&&this.NNt.yT()>=2)e.src=e.T$t,i=dT.DS.IC.QI();else{if(!e.C$t)throw new Error(`shader '${s}' does not support WebGL 1`);e.src=e.C$t,i=dT.DS.IC.ZI()}t.push(this.NNt.$E(Object.assign({GC:i,name:s},e)))}await Promise.all(t),this.NNt.WE(),this.NNt.uv()}this.NNt.tF()&&(this.vBt=dT.zn(dT.DS.MR,this.NNt))}async rkt(){this.BNt?await this.w$t():this.NNt&&await this.x$t();const t=this.pM();t.Lb(this.Fw),t.tF()&&(this.wBt=0);for(const s of this.Nc.I$t()){for(const e of s.rV())e.rkt(t);s.rkt(t),s.YH()}this.$Nt=new self.VY(this.Nc,t)}Hn(){this.Nc=null,this.NNt=null,this.LNt.length=0}Tk(){return this.Nc.Tk()}s$t(t){const s=this.Nc;if(s._$t())return;const e=t.devicePixelRatio;this.Tk()&&(self.devicePixelRatio=e),s.G$t(e),this.uBt=!!t.isFullscreen,this.HNt=t.cssDisplayMode,this.TA(t.innerWidth,t.innerHeight),s.SB();const i=new dT.Event("window-resize");i.data=t,s.Sf().Gf(i);const n=new dT.Event("resize");n.P$t=this.F$(),n.A$t=this.L$(),n.R$t=this.N$(),n.E$t=this.$$(),s.XK(n),this.Nc.lB()?.c3(),s.RU()&&(s.Vgt()||self.EU.O$t())&&s.jD()}e$t(t){this.uBt=!!t.isFullscreen,this.TA(t.innerWidth,t.innerHeight,!0),this.Nc.SB()}i$t(t){this.uBt=!!t.isFullscreen,this.TA(t.innerWidth,t.innerHeight,!0),this.Nc.SB()}TA(t,s,e=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.UNt===t&&this.zNt===s&&!e)return;this.UNt=t,this.zNt=s;const i=this.F$t();"letterbox-scale"===i?this.D$t(t,s):"letterbox-integer-scale"===i?this.L$t(t,s):"off"===i?this.k$t(t,s):this.N$t(t,s),this.B$t(i);for(const{canvas:t}of this.LNt)t.width=this.YNt,t.height=this.XNt;this.Nc.Wc("canvas","update-size",{marginLeft:this.KNt,marginTop:this.ZNt,styleWidth:this.JNt,styleHeight:this.qNt,displayScale:this.qq()});const n=this.pM();n.TA(this.YNt,this.XNt,!0);for(const t of this.cBt)n.qO(t);dT.bh(this.cBt),this.$$t();const r=this.Nc.HN();r.i6(),r.n6()}$$t(){this.pM().tv(this.oBt,this.I2()/this._2())}G2(){return this.oBt}D$t(t,s){const e=this.Nc.W$(),i=this.Nc.Ik(),n=this.Nc.Gk(),r=i/n;if(t/s>r){const e=s*r;this.JNt=Math.round(e),this.qNt=s,this.KNt=Math.floor((t-this.JNt)/2),this.ZNt=0}else{const e=t/r;this.JNt=t,this.qNt=Math.round(e),this.KNt=0,this.ZNt=Math.floor((s-this.qNt)/2)}this.YNt=Math.round(this.JNt*e),this.XNt=Math.round(this.qNt*e),this.Nc.W$t(i,n)}L$t(t,s){const e=this.Nc.W$();1!==e&&(t+=1,s+=1);const i=this.Nc.Ik(),n=this.Nc.Gk(),r=i/n;let h;h=t/s>r?s*r*e/i:t/r*e/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.YNt=Math.round(i*h),this.XNt=Math.round(n*h),this.JNt=this.YNt/e,this.qNt=this.XNt/e,this.KNt=Math.max(Math.floor((t-this.JNt)/2),0),this.ZNt=Math.max(Math.floor((s-this.qNt)/2),0),this.Nc.W$t(i,n)}N$t(t,s){const e=this.Nc.W$();this.JNt=t,this.qNt=s,this.YNt=Math.round(this.JNt*e),this.XNt=Math.round(this.qNt*e),this.KNt=0,this.ZNt=0;const i=this.qq();this.Nc.W$t(this.JNt/i,this.qNt/i)}k$t(t,s){const e=this.Nc.W$();this.JNt=this.Nc.m1(),this.qNt=this.Nc.g1(),this.YNt=Math.round(this.JNt*e),this.XNt=Math.round(this.qNt*e),this.V$t()?(this.KNt=Math.floor((t-this.JNt)/2),this.ZNt=Math.floor((s-this.qNt)/2)):(this.KNt=0,this.ZNt=0),this.Nc.W$t(this.Nc.m1(),this.Nc.g1())}B$t(t){if("high"===this.aBt)this.cD=this.YNt,this.fD=this.XNt,this.lBt="high";else{let s,e;if("off"===this.F$t()?(s=this.Nc.m1(),e=this.Nc.g1()):(s=this.Nc.Ik(),e=this.Nc.Gk()),this.YNt<s||this.XNt<e)this.cD=this.YNt,this.fD=this.XNt,this.lBt="high";else if(this.cD=s,this.fD=e,this.lBt="low","scale-inner"===t){const t=s/e,i=this.UNt/this.zNt;i<t?this.cD=this.fD*i:i>t&&(this.fD=this.cD/i)}else if("scale-outer"===t){const t=s/e,i=this.UNt/this.zNt;i>t?this.cD=this.fD*i:i<t&&(this.fD=this.cD/i)}}}$B(){return this.Nc}j$t(){return this.LNt[0].canvas}XQ(){return this.pBt}V$t(){return this.uBt}U$t(){return this.HNt}z$t(t){if(!pT.has(t))throw new Error("invalid fullscreen mode");this.iBt=t;const s=this.Nc.HN();s.i6(),s.n6()}Hq(){return this.iBt}H$t(t){if(!pT.has(t))throw new Error("invalid fullscreen mode");this.nBt=t;const s=this.Nc.HN();s.i6(),s.n6()}J$t(){return this.nBt}F$t(){return this.V$t()?this.J$t():this.Hq()}q$t(t){if(!mT.has(t))throw new Error("invalid fullscreen scaling quality");this.aBt=t,this.Nc.HN().i6()}Y$t(){return this.aBt}N2(){return this.lBt}static X$t(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}Oq(){return this.UNt}Fq(){return this.zNt}I2(){return this.cD}_2(){return this.fD}Lb(t){this.Fw=!!t}K$t(t){this.eBt=t}_Z(){return this.eBt}Z$t(){return this.pM().QA()}n$t(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.cBt=[],this.fBt.clear(),this.pBt.LM(),this.NNt.LM(),this.Nc.V5()}u$t(){console.log("[Construct] WebGPU device lost"),this.cBt=[],this.fBt.clear(),this.pBt.LM(),this.Nc.V5()}async r$t(t){await this.NNt.kM(),await this.rkt(),await this.Nc.Q$t(),console.log("[Construct] WebGL context restored")}async f$t(){await this.rkt(),await this.Nc.Q$t(),console.log("[Construct] WebGPU device restored")}tWt(){return this.NNt}sWt(){return this.BNt}pM(){return this.BNt||this.NNt}tEt(){return this.$Nt}I$(){let t="";return t=this.Nc.sWt()?"webgpu":"webgl"+this.Nc.tWt().yT(),this.Nc.pM().Bb()&&(t+="-software"),t}G$(){return this.Nc.sWt()?this.Nc.sWt().eWt():this.Nc.tWt().oF()}Bj(){return"low"===this.lBt?1/this.Nc.W$():this.qq()}qq(){const t=this.F$t();if("off"===t||"crop"===t)return 1;const s=this.Nc.Ik(),e=this.Nc.Gk(),i=s/e,n=this.YNt/this.XNt;return"scale-inner"!==t&&n>i||"scale-inner"===t&&n<i?this.qNt/e:this.JNt/s}l3(){return"low"===this.N2()?1:this.qq()}o3(){return"low"===this.N2()?1:this.Nc.W$()}iWt(t,s){this.rBt=t,this.hBt=s}_X(t,s,e,i=!0){s=s||this.cD,e=e||this.fD;const n=s/2+this.rBt,r=e/2+this.hBt;if(i){let i=this.G2();s===this.cD&&e===this.fD||(t.tv(wT,s/e),i=wT),t.jE(i)}const h=t.rv(n,r,t.Ww(e),n,r,0,e);t.YE(h)}nWt(t,s=!0){const e=this.F$(),i=this.L$(),n=e/2,r=i/2;s&&t.jE(this.G2());const h=t.rv(n,r,t.Ww(i),n,r,0,i);t.YE(h)}N$(){return this.YNt}$$(){return this.XNt}F$(){return this.JNt}L$(){return this.qNt}A$(){return this.KNt}E$(){return this.ZNt}T5(){return this.LNt.length}rWt(){return"undefined"!=typeof OffscreenCanvas&&this.j$t()instanceof OffscreenCanvas&&("Chromium"!==dT.Zs.ne||dT.Zs.ie>=124)}async J5(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.LNt.length===t)return;const e={count:t,layersDomState:this.Nc.HN().jN().j0().filter((t=>t.tj())).map((t=>t.Z1())),immediate:s,marginLeft:this.KNt,marginTop:this.ZNt,styleWidth:this.JNt,styleHeight:this.qNt};let i;if(i=this.Tk()?await this.Nc.vB("canvas","set-html-layer-count",e):self.c3_runtimeInterface._OnSetHTMLLayerCount(e),t<this.LNt.length)this.LNt.length=t;else for(const t of i.addedCanvases){t.width=this.YNt,t.height=this.XNt;const s=this.rWt()?"bitmaprenderer":"2d",e=t.getContext(s);if(!e)throw new Error(`failed to acquire '${s}' canvas context`);this.LNt.push({canvas:t,t$t:e})}this.Nc.SB()}L4(t){if(t>=this.LNt.length)return;const s=this.j$t(),e=this.LNt[t].t$t;this.rWt()?e.transferFromImageBitmap(s.transferToImageBitmap()):(e.globalCompositeOperation="copy",e.drawImage(s,0,0))}B2(t){t.depth=this.Nc._1();const s=this.cBt,e=s.findIndex((s=>s.vC(t)));let i;return-1!==e?(i=s[e],s.splice(e,1)):i=this.pM().jO(t),this.fBt.add(i),i}ZQ(t){if(!this.fBt.has(t))throw new Error("render target not in use");this.fBt.delete(t),this.cBt.push(t)}mBt(){const t={Kx:this.Nc.Pk()};return"low"===this.N2()&&(t.width=this.I2(),t.height=this._2()),this.B2(t)}gBt(t){this.ZQ(t)}*hWt(){for(const t of this.Nc.HN().t6())for(const s of t.vV()){const t=this.bBt.get(s);t&&(yield t)}}E2(t){if(!this.pM().tF())return null;let s=this.bBt.get(t);return s||(s={KU:t,name:t.Pc(),oWt:dT.zn(dT.DS.MR,this.NNt),aWt:0,lWt:0,uWt:0},this.bBt.set(t,s)),s.oWt}cWt(){const t=this.pM();if(t.tF()&&0===this.SBt){this.SBt=t.Fb(),this.MBt=NaN;for(const t of this.hWt())t.aWt=NaN}}fWt(){this.NNt&&this.NNt.tF()&&this.dWt(),this.BNt&&this.BNt.tF()&&this.pWt()}dWt(){if(isNaN(this.MBt)&&(this.MBt=this.vBt.PR(this.yBt,this.SBt),!isNaN(this.MBt))){if(this.Nc.RU())for(const t of this.hWt())if(t.aWt=t.oWt.PR(this.yBt,this.SBt),isNaN(t.aWt))return;if(this.vBt.AR(this.SBt),this.wBt=Math.min(this.MBt,1),this.Nc.RU()){const t=new Map;for(const s of this.hWt())s.oWt.AR(this.SBt),s.lWt=Math.min(s.aWt,1),t.set(s.KU,s.lWt);for(const s of this.hWt()){const e=s.KU,i=(t.get(e)||0)-e.jV().reduce(((s,e)=>s+(t.get(e)||0)),0);s.uWt=dT.Kn(i,0,1)}const s=this.Nc.jN(),e=this.wBt-s.j0().reduce(((s,e)=>s+(t.get(e)||0)),0);self.EU.mWt(dT.Kn(e,0,1),this.wBt,[...this.hWt()])}this.yBt=this.SBt,this.SBt=0}}gWt(){return this.vBt}pWt(){if(0===this.SBt)return;for(let t=this.yBt;t<this.SBt;++t){const s=this.xBt.get(t);if(s&&!s.cR())return}const t=this.Nc.jN(),s=dT.xo(t.S5()+1,0);let e=0;for(let t=this.yBt;t<this.SBt;++t){const i=this.xBt.get(t);if(!i)continue;const n=i.fR();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,e=Math.min(s.length,n.length/2);t<e;++t){const e=n[2*t],i=n[2*t+1];e!==o&&(r===o||e<r)&&(r=e),i>h&&(h=i);const a=Number(i-e)/1e9;s[t]+=a}e+=Number(h-r)/1e9}if(this.wBt=dT.Kn(e,0,1),this.Nc.RU()){const e=t.vV(),i=new Map;for(let t=0,n=Math.min(e.length,s.length-1);t<n;++t){const n=s[t+1];i.set(e[t],n)}const n=[],r=new Map;for(const[t,s]of i){const e=[...t.zV()].reduce(((t,s)=>t+(i.get(s)||0)),0);r.set(t,e),n.push({name:t.Pc(),uWt:dT.Kn(s,0,1),lWt:dT.Kn(e,0,1)})}const h=this.wBt-t.j0().reduce(((t,s)=>t+(r.get(s)||0)),0);self.EU.mWt(dT.Kn(h,0,1),this.wBt,n)}for(let t=this.yBt;t<this.SBt;++t)this.xBt.delete(t);this.yBt=this.SBt,this.SBt=0}yWt(t){this.xBt.set(this.BNt.Fb(),t)}GN(){return this.wBt}_B(t,s,e,i,n,r){return this.TBt=t,this.CBt=s,this.IBt.Ua(e,i,n,r),this.GBt||(this.GBt=new Promise((t=>{this.PBt=t}))),this.GBt}SWt(){if(!this.TBt)return;let t=this.j$t();const s=this.IBt,e=dT.Kn(Math.floor(s.Za()),0,t.width),i=dT.Kn(Math.floor(s.Qa()),0,t.height);let n=s.width();n=0===n?t.width-e:dT.Kn(Math.floor(n),0,t.width-e);let r=s.height();if(r=0===r?t.height-i:dT.Kn(Math.floor(r),0,t.height-i),(0!==e||0!==i||n!==t.width||r!==t.height)&&n>0&&r>0){const s=dT.co(n,r);s.getContext("2d").drawImage(t,e,i,n,r,0,0,n,r),t=s}dT.fo(t,this.TBt,this.CBt).then((t=>{this._Bt&&URL.revokeObjectURL(this._Bt),this._Bt=URL.createObjectURL(t),this.GBt=null,this.PBt(t)})),this.TBt="",this.CBt=1}wWt(){return this._Bt}vWt(t){t?this.ABt++:this.ABt--}bWt(){return this.ABt>0}MWt(t){const s=this.pM();if(2===t)this.DBt=dT.zn(dT.DS.Hb,this.pM()),this.DBt.tA("Arial"),this.DBt.sA(16),this.DBt.mA("center"),this.DBt.yA("center"),this.DBt.TA(300,200);else if(0===t){const t=this.Nc.xWt();t&&t.wX(s).catch((t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t)))}else 4===t&&(this.TWt("splash-images/splash-logo.svg").then((t=>{"done"===this.jBt?s.rC(t):this.LBt.kBt=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.CWt("splash-images/splash-poweredby-512.png").then((t=>{"done"===this.jBt?s.rC(t):this.LBt.NBt=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.CWt("splash-images/splash-website-512.png").then((t=>{"done"===this.jBt?s.rC(t):this.LBt.BBt=t})).catch((t=>console.warn("Failed to load splash image: ",t))))}async TWt(t){t=new URL(t,this.Nc.IWt()).toString();const s=await dT.no(t),e=await this.Nc._Wt(s,2048,2048);return await this.pM().VO(e,{sT:"high"})}async CWt(t){t=new URL(t,this.Nc.IWt()).toString();const s=await dT.no(t);return await this.pM().VO(s,{sT:"high"})}GWt(){this.Nc.Wc("runtime","hide-cordova-splash")}PWt(){this.RBt=Date.now(),this.Nc.Sf().addEventListener("loadingprogress",this.FBt),this.EBt=requestAnimationFrame((()=>this.AWt())),3!==this.Nc.RWt()&&this.GWt()}async EWt(){const t=this.pM();this.OBt=1;const s=this.Nc.RWt();4===s&&await this.zBt,this.UBt=null,this.zBt=null,-1!==this.EBt&&(cancelAnimationFrame(this.EBt),this.EBt=-1),this.Nc.Sf().removeEventListener("loadingprogress",this.FBt),this.FBt=null,this.DBt&&(this.DBt.Hn(),this.DBt=null),this.Nc.OWt(),t.EO(),this.LBt.kBt&&(t.rC(this.LBt.kBt),this.LBt.kBt=null),this.LBt.NBt&&(t.rC(this.LBt.NBt),this.LBt.NBt=null),this.LBt.BBt&&(t.rC(this.LBt.BBt),this.LBt.BBt=null),t.RO(0,0,0,0),t.Eb(),this.jBt="done",this.yBt=t.Fb(),3===s&&this.GWt()}AWt(){if(-1===this.EBt)return;const t=this.pM();t.EO(),this.EBt=-1;const s=this.Nc.rk().YK(),e=this.Nc.RWt();if(3!==e&&(this.nWt(t),t.RO(0,0,0,0),t.iO(),t.uv(),t.rO(null)),0===e)this.FWt(s);else if(1===e)this.DWt(s,120,0);else if(2===e)this.LWt(s);else if(3===e)dT.gh();else{if(4!==e)throw new Error("invalid loader style");this.kWt(s)}t.Eb(),this.EBt=requestAnimationFrame((()=>this.AWt()))}LWt(t){t?this.DBt.pA(1,0,0):this.DBt.pA(.6,.6,.6),this.DBt.Vc(Math.round(100*this.OBt)+"%");const s=this.JNt/2,e=this.qNt/2;TT.kl(s-150,e-100,s+150,e+100);const i=this.pM();i.rO(this.DBt.cC()),i.sb(TT,this.DBt.sR())}DWt(t,s,e){const i=this.pM();i.gv(),t?i.sO(1,0,0,1):i.sO(.118,.565,1,1);const n=this.JNt/2,r=this.qNt/2,h=s/2;CT.Ua(n-h,r-4+e,Math.floor(s*this.OBt),8),i.Rect(CT),CT.Ua(n-h,r-4+e,s,8),CT.offset(-.5,-.5),CT.cl(.5,.5),i.sO(0,0,0,1),i.hb(CT),CT.cl(1,1),i.sO(1,1,1,1),i.hb(CT)}FWt(t){const s=this.pM(),e=this.Nc.xWt();if(!e)return void this.DWt(t,120,0);const i=e.cC();if(!i)return void this.DWt(t,120,0);const n=i.Vg(),r=i.Zg(),h=this.JNt/2,o=this.qNt/2,a=n/2,l=r/2;TT.kl(h-a,o-l,h+a,o+l),s.rO(i),s.Gl(TT),this.DWt(t,n,l+16)}kWt(t){const s=this.pM(),e=this.LBt.kBt,i=this.LBt.NBt,n=this.LBt.BBt,r=Date.now();0===this.$Bt&&(this.RBt=r);const h=this.Nc.NWt()||this.Nc.BWt()&&!this.Nc.$Wt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.jBt?l=Math.min((r-this.RBt)/300,1):"fade-out"===this.jBt&&(l=Math.max(1-(r-this.VBt)/300,0)),s.gv(),s.sO(.231*l,.251*l,.271*l,l),CT.set(0,0,this.JNt,this.qNt),s.Rect(CT);const u=Math.ceil(this.JNt),c=Math.ceil(this.qNt);let f,d;this.qNt>256?(s.sO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),CT.Ua(0,.8*c-d/2,f,d),s.Rect(CT),t?s.sO(l,0,0,l):s.sO(.161*l,.953*l,.816*l,l),f=u*this.OBt,CT.Ua(.5*u-f/2,.8*c-d/2,f,d),s.Rect(CT),s.sO(l,l,l,l),s.uv(),i&&(f=1.5*dT.Kn(.22*c,105,.6*u),d=f/8,CT.Ua(.5*u-f/2,.2*c-d/2,f,d),s.rO(i),s.Rect(CT)),e&&(f=Math.min(.395*c,.95*u),d=f,CT.Ua(.5*u-f/2,.485*c-d/2,f,d),s.rO(e),s.Rect(CT)),n&&(f=1.5*dT.Kn(.22*c,105,.6*u),d=f/8,CT.Ua(.5*u-f/2,.868*c-d/2,f,d),s.rO(n),s.Rect(CT))):(s.sO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),CT.Ua(0,.85*c-d/2,f,d),s.Rect(CT),t?s.sO(l,0,0,l):s.sO(.161*l,.953*l,.816*l,l),f=u*this.OBt,CT.Ua(.5*u-f/2,.85*c-d/2,f,d),s.Rect(CT),s.sO(l,l,l,l),s.uv(),e&&(f=.55*c,d=f,CT.Ua(.5*u-f/2,.45*c-d/2,f,d),s.rO(e),s.Rect(CT))),this.$Bt++,"fade-in"===this.jBt&&r-this.RBt>=300&&this.$Bt>=2&&(this.jBt="wait",this.WBt=r),"wait"===this.jBt&&r-this.WBt>=a&&this.OBt>=1&&(this.jBt="fade-out",this.VBt=r),("fade-out"===this.jBt&&r-this.VBt>=300+o||h&&this.OBt>=1&&r-this.RBt<500)&&this.UBt()}}}{const PT=self._s,AT=self.EU,RT=self.assert,ET=self.hY,OT={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let FT=!0;PT.WWt=class extends PT.jn{constructor(t){t=Object.assign({},OT,t),super(),this.VWt=t.messagePort,this.jWt=t.runtimeBaseUrl,this.UWt=t.previewUrl,this.zWt=!!t.headless,this.HWt=!!t.hasDom,this.JWt=!!t.isInWorker,FT=t.ife,this.qWt=!!t.useAudio,this.YWt=t.exportType,this.XWt=t.isNWjs,this.qX=!!t.isiOSCordova,this.KWt=!!t.isiOSWebView,this.ZWt=!!t.isWindowsWebView2,this.QWt=!!t.isAnyWebView2Wrapper,this.tVt=!!t.isFBInstantAvailable,this.sVt=!("preview"!==this.YWt||!t.isDebug),this.eVt=this.sVt,this.iVt=this.sVt,this.nVt=0,this.rVt=[],this.hVt=[],this.oVt=!1,this.aVt="",this.lVt="",this.uVt="",this.cVt="",this.fVt=0,this.dVt=0,this.pVt=0,this.vD=self.devicePixelRatio,this.mVt=0,this.gVt=0,this.yVt=0,this.SVt=0,this.wVt=0,this.vVt=!1,this.yS=!0,this.bVt=!1,this.MVt=!1,this.xVt=!1,this.TVt=null,this.dZ=PT.zn(PT.UX,this,t),this.I3=PT.zn(PT.H4,this),this.fpt=PT.zn(PT.lmt,this),this.CVt=PT.zn(PT.H$,this,t.wrapperComponentIds),this.IVt=PT.zn(PT.Ckt,this),this.b9=PT.zn(PT.r6,this),this._Vt=PT.zn(PT.Eut,this),this.GVt=PT.zn(PT.Fut,this),this.qut=PT.zn(PT.Vut,this),this.fS=PT.zn(PT.tS,{iS:t=>this.PVt(t),rS:t=>this.AVt(t)}),this.RVt=new Map,this.EVt=[],this.OVt=new Map,this.FVt=new Map,this.DVt=0,this.LVt=[],this.kVt=new Set,this.NVt=[],this.BVt=[],this.$Vt=new Map,this.WVt=!1,this.VVt=!1,this.jVt=0,this.UVt=0,this.zVt=new Map,this.HVt=new Set,this.JVt=new Set,this.qVt=[],this.YVt=[],this.XVt=null,this.KVt=!1,this.ZVt="vsync",this.lT="trilinear",this.QVt=!1,this.tjt=!0,this.sjt=!1,this.ejt=!1,this.ijt=null,this.njt={rjt:t=>{this.EBt=-1,this.hjt=-1,this.P8(t)},ojt:t=>{this.hjt=-1,this.P8(t,!1,"skip-render")},ajt:()=>{this.EBt=-1,this.jD()}},this.EBt=-1,this.hjt=-1,this.ljt=0,this.ujt=0,this.cjt=!1,this.fjt=!1,this.djt=!1,this.pjt=!0,this.mjt=!0,this.gjt=!1,this.yjt=0,this.Sjt=new PT.Ud(1),this.wjt=()=>Math.random(),this.vjt=0,this.bjt=0,this.Mjt=0,this.xjt=0,this.Tjt=0,this.QEt=1,this.Cjt=1/30,this.Ijt=0,this._jt=PT.zn(PT.Qf),this.Gjt=PT.zn(PT.Qf),this.Pjt=PT.zn(PT.Qf),this.Ajt=new Map,this.Rjt=-1,this.Ejt=0,this.Ojt=0,this.Fjt=-1,this.Djt=0,this.Ljt=0,this.kjt=0,this.Njt=!1,this.Bjt="",this.$jt=!1,this.Wjt="",this.$U=null,this.Vjt="",this.jjt=null,this.Ujt=null,this.sRt=PT.zn(PT.Event.Sf),this.zjt=new Map,this.Hjt=new Map,this.Jjt=0,this.qjt=!1,this.Yjt=!1,this.Xjt=!1,this.Kjt=[],this.Zjt={pretick:PT.zn(PT.Event,"pretick",!1),tick:PT.zn(PT.Event,"tick",!1),tick2:PT.zn(PT.Event,"tick2",!1),instancecreate:PT.zn(PT.Event,"instancecreate",!1),instancedestroy:PT.zn(PT.Event,"instancedestroy",!1),beforelayoutchange:PT.zn(PT.Event,"beforelayoutchange",!1),layoutchange:PT.zn(PT.Event,"layoutchange",!1)},this.Zjt.instancecreate.VH=null,this.Zjt.instancedestroy.VH=null,this.r5=PT.zn(PT.Event.Sf),this.Qjt=null;const s=(t,s)=>PT.KEt.HLt(this,t,s);this.tUt=PT.zn(PT.ld,s),this.sUt=PT.zn(PT.ld,s),this.eUt=PT.zn(PT.ld,s),this.iUt=PT.zn(PT.nUt,this,t.jobScheduler),t.canvas&&(this.XVt=PT.zn(PT.DNt,this)),this.VWt.onmessage=t=>this._OnMessageFromDOM(t.data),this.IU("runtime","visibilitychange",(t=>this.rUt(t))),this.IU("runtime","wrapper-extension-message",(t=>this.hUt(t))),this.IU("runtime","get-remote-preview-status-info",(()=>this.oUt())),this.IU("runtime","js-invoke-function",(t=>this.kmt(t))),this.IU("runtime","go-to-last-error-script",self.goToLastErrorScript),this.IU("runtime","offline-audio-render-completed",(t=>this.aUt(t))),this.sRt.addEventListener("window-blur",(t=>this.lUt(t))),this.sRt.addEventListener("window-focus",(()=>this.uUt())),this.b9.N6(),this.GVt.N6(),this.cUt=null,this.fUt=new WeakMap,this.dUt={keyboard:null,tB:null,sB:null,eB:null},this.pUt=new WeakMap,this.mUt=[]}static RC(t){return PT.zn(PT.WWt,t)}Hn(){PT.bh(this.EVt),this.OVt.clear(),this.FVt.clear(),this.I3.Hn(),this.I3=null,this.fpt.Hn(),this.fpt=null,this.CVt.Hn(),this.CVt=null,this.dZ.Hn(),this.dZ=null,this.IVt.Hn(),this.IVt=null,this.b9.Hn(),this.b9=null,this._Vt.Hn(),this._Vt=null,this.GVt.Hn(),this.GVt=null,this.qut.Hn(),this.qut=null,this.fS.Hn(),this.fS=null,this.XVt&&(this.XVt.Hn(),this.XVt=null),this.sRt.Hn(),this.sRt=null,this.gUt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.yUt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.SUt(t)}}yUt(t){if(!this.Xjt)return void this.Kjt.push(t);const s=t.component,e=t.handler,i=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new PT.Event(e);t.data=i,this.sRt.Gf(t)}if(h){const t=new PT.Event(e,!0);for(const[s,e]of Object.entries(i))t[s]=e;this.XK(t)}}const a=this.zjt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(e);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${e}' for component '${s}'`));let u=null;try{u=l(i)}catch(t){return console.error(`Exception in '${s}' handler '${e}':`,t),void(null!==o&&this.wUt(o,!1,""+t))}null!==o&&(u&&u.then?u.then((t=>this.wUt(o,!0,t))).catch((t=>{console.error(`Rejection from '${s}' handler '${e}':`,t),this.wUt(o,!1,""+t)})):this.wUt(o,!0,u))}wUt(t,s,e){this.VWt.postMessage({type:"result",responseId:t,isOk:s,result:e})}SUt(t){const s=t.responseId,e=t.isOk,i=t.result,n=this.Hjt.get(s);e?n.resolve(i):n.reject(i),this.Hjt.delete(s)}IU(t,s,e){let i=this.zjt.get(t);if(i||(i=new Map,this.zjt.set(t,i)),i.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);i.set(s,e)}Wc(t,s,e,i){this.VWt.postMessage({type:"event",component:t,handler:s,data:e,responseId:null},i)}vB(t,s,e,i){const n=this.Jjt++,r=new Promise(((t,s)=>{this.Hjt.set(n,{resolve:t,reject:s})}));return this.VWt.postMessage({type:"event",component:t,handler:s,data:e,responseId:n},i),r}yY(t,s,e,i=-1){this.Wc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:e,asyncId:i})}SY(t,s,e){const i=this.Jjt++,n=new Promise(((t,s)=>{this.Hjt.set(i,{resolve:t,reject:s})}));return this.yY(t,s,e,i),n}hUt(t){if(-1!==t.asyncId){const s=t.asyncId;this.Hjt.get(s).resolve(t.params),this.Hjt.delete(s)}else this.yUt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}UU(t,s,e){this.IU("wrapper-extension:"+t,s,e)}VU(t){return this.CVt.VU(t)}vUt(t){if(!this.RU())throw new Error("not in debug mode");this.Wc("runtime","post-to-debugger",t)}async eOt(t){PT.CTt(this),this.RU()?await AT.eOt(this):self.EU&&self.EU.bUt(this);const s=await this.dZ.io("data.json");if(await this.MUt(s),await this.xUt(t),this.NWt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.tWt()){const t=this.tWt();console.info(`[C3 runtime] Hosted in ${this.Tk()?"worker":"DOM"}, rendering with WebGL ${t.yT()} [${t.oF()}]`)}else this.sWt()&&console.info(`[C3 runtime] Hosted in ${this.Tk()?"worker":"DOM"}, rendering with WebGPU [${this.sWt().eWt()}]`);this.pM().Bb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.Xjt=!0;for(const t of this.Kjt)this.yUt(t);PT.bh(this.Kjt),this.XVt&&this.XVt.PWt();for(const s of t.runOnStartupFunctions)this.rVt.push(this.TUt(s));if(await Promise.all([this.dZ.JK(),...this.rVt]),PT.bh(this.rVt),!this.dZ.YK())return this.XVt&&await this.XVt.EWt(),await this.sRt.If(new PT.Event("beforeruntimestart")),await this.EO(),this.VWt.postMessage({type:"runtime-ready"}),this;this.XVt&&this.XVt.GWt()}async TUt(t){try{await t(this.cUt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async MUt(t){const s=t.project;this.aVt=s[0],this.lVt=s[16],this.uVt=s[31],this.cVt=s[38],this.fVt=s[36];const e=s[39]||"loading-logo.png";this.QVt=!!s[9],this.dVt=this.yVt=s[10],this.pVt=this.SVt=s[11],this.IVt.mNt(this.dVt,this.pVt),this.mVt=this.dVt/2,this.gVt=this.pVt/2,this.ZVt=s[37],this.KVt=!!s[40],this.lT=s[14],this.bVt=s[15],this.MVt=s[42],this.xVt=s[17],this.vVt=!!s[18],this.wVt=s[19],this.UVt=s[21],this.sjt=s[22];const i=this.dZ;if(i.vK(s[45]),i.iZ(s[7],s[25]),i.MK(s[8]),i.xK(s[32]),i.CK(s[28]),i.QK(s[29]),0===this.wVt){let t="";t="flat"===i.qB()?i.IK()+e:e,t&&(this.TVt=i.NK({url:t}))}this.XVt&&(this.XVt.z$t(PT.DNt.X$t(s[12])),this.XVt.q$t(s[23]?"high":"low"),this.XVt.Lb(0!==s[24]),this.XVt.HBt(s[34]),this.XVt.K$t(s[41]),this.XVt.JBt(s[13]),this.XVt.qBt(s[30]),this.XVt.KBt(s[46],s[47]),this.XVt.XBt(s[26]),this.XVt.ZBt(s[48]),this.XVt.QBt(s[50]));const n=s[43];n&&await this.CUt(n),this.IUt(),this.CVt.$Pt(),this.qVt=self._Ut();const r=s[2];for(const t of r[1])this.CVt.WPt(t);for(const t of r[0])this.CVt.BPt(t);this.qVt=self._Ut(),this.GUt(),this.CVt.JPt();for(const t of s[3]){const s=PT.But.RC(this,this.EVt.length,t);this.EVt.push(s),this.OVt.set(s.Pc().toLowerCase(),s),this.FVt.set(s.U0(),s)}for(const t of s[4])this.EVt[t[0]].BRt(t);for(const t of s[27]){const s=t.map((t=>this.EVt[t]));this.LVt.push(PT.zn(PT.$Et,this,s))}this.PUt();for(const t of this.EVt)t.WRt();for(const t of s[5])this.I3.RC(t);const h=s[1];if(h){const t=this.I3.Y4(h);t&&this.I3.J4(t)}for(const t of s[35])this._Vt.RC(t);for(const t of s[33])this.b9.RC(t);for(const t of s[44])this.GVt.RC(t);this.GVt.kut()||(this.GVt.Hn(),this.GVt=null);for(const t of s[49])this.qut.RC(t);this.qut.Hut()||(this.qut.Hn(),this.qut=null);for(const t of s[6])this.fpt.RC(t);this.fpt.$mt(),this.AUt(),PT.bh(this.qVt),this.HW();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Wc("runtime","set-target-orientation",{targetOrientation:o})}async CUt(t){const s=t.format;"image-sequence"===s?this.ijt=new self.RUt(this,t):"image-sequence-gif"===s?this.ijt=new self.EUt(this,t):"webm"===s?this.ijt=new self.OUt(this,t):"mp4"===s&&(this.ijt=new self.FUt(this,t)),this.ZVt="unlimited-frame",this.XVt.z$t("off"),this.vD=1,self.devicePixelRatio=1,await this.vB("runtime","set-exporting-to-video",{message:this.ijt.DUt(0),duration:this.ijt.yJ()})}RWt(){return this.wVt}_$t(){return null!==this.ijt}LUt(){return this.ijt.yJ()}kUt(){return this.ijt.NUt()}BUt(){return this.ijt.eOt({width:this.XVt.N$(),height:this.XVt.$$()})}$Ut(){const t=this.ljt/this.kUt();return this.ijt.WUt(this.XVt.j$t(),t)}VUt(){this.ijt&&this.ijt.rit()}aUt(t){this.ijt.jUt(t)}UUt(){return this.ijt.Eb()}BWt(){return this.tVt}MS(){return this.yS}TB(t){this.rVt.push(t)}Y5(t){this.oVt=!!t}zUt(t){this.oVt&&this.hVt.push(t)}s4(){return this.hVt}ERt(){return this.DVt++}jRt(){return this.DVt}skt(t){this.kVt.add(t)}ekt(t){this.kVt.delete(t)}I$t(){return this.kVt}async xUt(t){this.XVt&&(await this.XVt.co(t),this.XVt.MWt(this.wVt))}async EO(){this.cjt=!0,this.vjt=Date.now();let t=null;const s=new Promise((s=>t=s));if(this.vVt){for(const t of this.EVt)t.k0()||t.ZRt()||!t.Z$()||t.$_t();(async()=>{await this.dZ.JK(),await s,this.yS=!1,this.HUt()})()}else this.yS=!1;this.dZ.qK(),this.RU()&&AT.JUt(FT);for(const t of this.I3.YN())t.g4();this._$t()&&await this.BUt();const e=this.I3.q4();await e.E5(null,this.pM()),await e.j5(!0),this.Ejt=performance.now(),t(),this.vVt||this.HUt(),(await this.vB("runtime","before-start-ticking")).isSuspended&&!this._$t()?(this.yjt++,this.gjt=!0):this.P8()}HUt(){this.xU(PT.EB.RB.AB.qUt,null,null),this.Wc("runtime","register-sw")}jvt(t){t=Math.floor(t);const s=this.qVt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}GUt(){for(const t of self.YUt){const s=PT.$h(Object.keys(t));this.YVt.push(s)}}ugt(t){t=Math.floor(t);const s=this.YVt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}XUt(){return this.HWt}KUt(){return this.zWt}Tk(){return this.JWt}IWt(){return this.jWt}ZUt(){return this.UWt}$k(){return this.fpt}Qk(){return this.fpt.Qk()}tgt(){return this.fpt.tgt()}Hk(){return this.fpt.Hk()}sgt(){return this.fpt.sgt()}xTt(){return 0===this.tgt().Rpt()}igt(){return this.fpt.igt()}ULt(){return this.CVt}ZK(){return this.CVt.ZK()}d0(t){if((t=Math.floor(t))<0||t>=this.EVt.length)throw new RangeError("invalid index");return this.EVt[t]}QUt(t){return this.OVt.get(t.toLowerCase())||null}_Y(t){return this.FVt.get(t)||null}krt(t){const s=PT.H$.dW(t);return s?s.yW():null}L0(){return this.EVt}*tzt(){for(const t of this.EVt)t.k0()||(yield*t.TW())}Sf(){return this.sRt}Lk(){return this.r5}XK(t){t.runtime=this.J$();const s=this.RU()&&!this.fpt.UW();s&&AT.V4(),this.r5.dispatchEvent(t),s&&AT.j4()}a4(t){return t.runtime=this.J$(),this.r5.If(t)}Ik(){return this.dVt}Gk(){return this.pVt}szt(t,s){if(this.dVt===t&&this.pVt===s)return;this.dVt=t,this.pVt=s;const e=this.HN();e.i6(),e.n6()}m1(){return this.yVt}g1(){return this.SVt}W$t(t,s){if(this.yVt===t&&this.SVt===s)return;this.yVt=t,this.SVt=s;const e=this.HN();e.i6(),e.n6()}G$t(t){this._$t()||(this.vD=t)}W$(){return this.vD}S2(){return this.mVt}w2(){return this.gVt}IB(){return this.XVt}I2(){return this.XVt?this.XVt.I2():this.yVt}_2(){return this.XVt?this.XVt._2():this.SVt}Bj(){return this.XVt?this.XVt.Bj():1}qq(){return this.XVt?this.XVt.qq():1}l3(){return this.XVt?this.XVt.l3():1}o3(){return this.XVt?this.XVt.o3():1}A$(){return this.XVt?this.XVt.A$():0}E$(){return this.XVt?this.XVt.E$():0}ezt(){return this.XVt?this.XVt.F$():0}izt(){return this.XVt?this.XVt.L$():0}Hq(){return this.XVt?this.XVt.Hq():"off"}B2(t){return this.XVt?this.XVt.B2(t):null}ZQ(t){this.XVt&&this.XVt.ZQ(t)}L2(){return this.bVt}m$t(){return this.MVt}g$t(){return this.xVt}GN(){return this.XVt?this.XVt.GN():NaN}dC(){return"nearest"!==this.Pk()}AN(){return this.ZVt}RN(t){this.ZVt!==t&&(this.ZVt=t,-1===this.EBt&&-1===this.hjt||(this.nzt(),this.rzt()))}Pk(){return this.lT}LRt(){return this.vVt}xWt(){return this.TVt}OWt(){this.TVt&&(this.TVt.HP(),this.TVt.Hn(),this.TVt=null)}HN(){return this.I3}jN(){return this.I3.jN()}ltt(){return this.b9}hzt(){return this._Vt}EOt(){return this.GVt}mct(){return this.qut}rk(){return this.dZ}NK(t){return this.dZ.NK(t)}$W(t,s,e,i,n,r){if(r&&this.GVt){if(t instanceof PT.But&&t.k0()){const h=t.tV(),o=Math.floor(this.VN()*h.length);return this.$W(h[o],s,e,i,n,r)}const h=this.GVt.Nut(t,r);if(h){const t=this.M0(h,s,!1,e,i,!1,n,void 0,n);return this.GVt.$ut(t,r),t}}return this.M0(t,s,!1,e,i,!1,n,void 0,n)}M0(t,s,e,i,n,r,h,o,a){let l=null,u=null;if(t instanceof PT.But){if(u=t,u.k0()){const t=u.tV();u=t[Math.floor(this.VN()*t.length)]}l=u.m0()}else l=t,u=this.d0(l[1]);const c=u.MW().Z$();if(this.yS&&c&&!u.ZRt())return null;const f=s;let d;c||(s=null),d=e&&!r&&l&&!this.zVt.has(l[2])?l[2]:this.UVt++;const p=l?l[0]:null,m=PT.zn(PT.Instance,{runtime:this,objectType:u,KU:s,sOt:p,rOt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.zVt.set(d,m);let g=null;if(c&&(g=m.cB(),void 0!==i&&void 0!==n&&(g.HM(i),g.YM(n)),u.IEt(!0)),s&&(a||s.T0(m,!0),s.JN().F5(u)),this.jVt++,u.Zj()&&!e&&!r){const t=new Set;for(const s of u.A5().sV()){if(s===u)continue;const e=this.ozt(s,g,t);if(e){const t=this.M0(e,f,!1,g?g.zM():i,g?g.qM():n,!0,!1,void 0,a);m.d4(t)}else{const t=this.M0(s,f,!1,g?g.zM():i,g?g.qM():n,!0,!1,void 0,a);m.d4(t)}}for(const t of m.Qj()){t.d4(m);for(const s of m.Qj())t!==s&&t.d4(s)}}if(c&&!e&&h&&this.azt(m,p,g,s,i,n,a),u.Zj()&&!e&&!r&&h)for(const t of m.Qj()){const e=t.cB();if(!e)continue;const i=t.MW(),n=t.Wj().m0()[0];i.Z$()?this.azt(t,n,e,s,e.zM(),e.qM(),a):this.azt(t,n,e,s,void 0,void 0,a)}if(!r&&h){void 0===i&&(i=p[0]),void 0===n&&(n=p[1]);const t=g.Lz(),s=i-g.zM()+t.zM(),e=n-g.qM()+t.qM();t.QU(s,e)}u.bEt();const y=l?PT.Oh(l[5]):null,S=l?l[4].map((t=>PT.Oh(t))):null,w=c&&p&&p[13];if(w&&m.cOt(),m.XRt(y,S),w){const t=p[13];m.RH().iGt(t[2],t[0],t[1])}this.BVt.push(m),this.WVt=!0,this.RU()&&AT.lzt(m);const v=this.Zjt.instancecreate;return v.VH=m,this.sRt.dispatchEvent(v),m}BFt(t){const s=t[0],e=t[1],i=t[2],n=t[6];return n||this.I3.X4(s).fB(e).S0(i)}ozt(t,s,e){const i=s?.ROt()??[];for(const s of i){const i=this.BFt(s),n=!!s[4],r=this.d0(i[1]);if(!e.has(i)&&t===r&&n)return e.add(i),i}}azt(t,s,e,i,n,r,h){const o=e.aLt(),a=e.ROt();if(t.cB().lLt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const e=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.I3.X4(e).fB(o).S0(a);const y=this.d0(g[1]),S=t.FOt(y),w=l.has(y);if(S&&!w&&d){const s=t.DOt(y);s.cB().eOt(g[0]);const e=n+g[0][0]-u,i=r+g[0][1]-c;s.cB().QU(e,i),s.cB().lLt(p),t.Uz(s,{Xz:!!(1&f),Zz:!!(f>>1&1),tH:!!(f>>2&1),eH:!!(f>>3&1),nH:!!(f>>4&1),fH:!!(f>>5&1),hH:!!(f>>6&1),aH:!!(f>>7&1),uH:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,e=r+g[0][1]-c,o=this.M0(g,i,!1,s,e,!1,!0,t,h);o.cB().lLt(p),t.Uz(o,{Xz:!!(1&f),Zz:!!(f>>1&1),tH:!!(f>>2&1),eH:!!(f>>3&1),nH:!!(f>>4&1),fH:!!(f>>5&1),hH:!!(f>>6&1),aH:!!(f>>7&1),uH:!!(f>>8&1)})}}}Jj(t){if(this.HVt.has(t))return;const s=t.Wj();let e=this.$Vt.get(s);if(e){if(e.has(t))return;e.add(t)}else e=new Set,e.add(t),this.$Vt.set(s,e);if(this.RU()&&AT.uzt(t),t.dOt(),this.WVt=!0,t.Zj())for(const s of t.Qj())this.Jj(s);for(const s of t.children())s.dH()&&this.Jj(s);if(!this.I3.zW()&&!this.Njt){const s=this.$k();s.VW(!0),t.JOt(),s.VW(!1)}t.qOt(this.I3.zW())}HW(){this.WVt&&(this.VVt=!0,this.czt(),this.fzt(),this.VVt=!1,this.WVt=!1,this.SB())}czt(){for(const t of this.BVt){const s=t.Wj();s.T0(t);for(const e of s.qW())e.T0(t),e.bEt()}PT.bh(this.BVt)}fzt(){this.sRt.cf(!0);for(const[t,s]of this.$Vt.entries())this.dzt(t,s),s.clear();this.$Vt.clear(),this.sRt.cf(!1)}dzt(t,s){for(const t of s){const s=this.Zjt.instancedestroy;s.VH=t,this.sRt.dispatchEvent(s),this.zVt.delete(t.tU()),this.Ajt.delete(t);const e=t.cB();e&&(e.fLt(),e.G0(),e.dOt()),this.HVt.add(t),this.jVt--}PT.Ah(t.FW(),s),t.bEt(),this.JVt.add(t);for(const e of t.qW())PT.Ah(e.FW(),s),e.bEt(),this.JVt.add(e);if(t.MW().Z$()){const t=new Set([...s].map((t=>t.cB().fB())));for(const e of t)e.z1(s)}}xEt(){return this.BVt}*GCt(t){for(const s of this.xEt())t.k0()?s.Wj().TTt(t)&&(yield s):s.Wj()===t&&(yield s)}YRt(){return this.UVt++}KRt(t,s){this.zVt.set(t,s)}MY(t){t=!!t,this.mjt!==t&&(this.mjt=!!t,this.mjt&&this.gjt&&(this.CY(!1),this.gjt=!1))}xY(){return this.mjt}V5(){this.sRt.dispatchEvent(PT.zn(PT.Event,"renderercontextlost")),this.CY(!0);for(const t of this.EVt)!t.k0()&&t.QRt()&&t.B5();const t=this.jN();t&&t.V5(),PT.XPt.IZ(),PT.WK.IZ()}async Q$t(){await this.jN().E5(null,this.pM()),this.sRt.dispatchEvent(PT.zn(PT.Event,"renderercontextrestored")),this.CY(!1),this.SB()}rUt(t){if(!this.mjt)return;const s=t.hidden;this.CY(s),this.gjt=s,s||this.SB()}lUt(t){this.NWt()&&this.sjt&&!PT.Zs.oe&&(t.data.parentHasFocus||(this.CY(!0),this.ejt=!0))}uUt(){this.ejt&&(this.CY(!1),this.ejt=!1)}rzt(){const t=this.njt;"vsync"===this.ZVt?-1===this.EBt&&(this.EBt=self.requestAnimationFrame(t.rjt)):"unlimited-tick"===this.ZVt?(-1===this.hjt&&(this.hjt=PT.zh(t.ojt)),-1===this.EBt&&(this.EBt=self.requestAnimationFrame(t.ajt))):-1===this.hjt&&(this.hjt=PT.zh(t.rjt))}nzt(){-1!==this.EBt&&(self.cancelAnimationFrame(this.EBt),this.EBt=-1),-1!==this.hjt&&(PT.Hh(this.hjt),this.hjt=-1)}oN(){return this.yjt>0}CY(t){if(this._$t())return;const s=this.oN();this.yjt+=t?1:-1,this.yjt<0&&(this.yjt=0);const e=this.oN();if(!s&&e)console.log("[Construct] Suspending"),this.nzt(),this.sRt.dispatchEvent(PT.zn(PT.Event,"suspend")),this.XK(PT.zn(PT.Event,"suspend")),this.xU(PT.EB.RB.AB.pzt,null,null);else if(s&&!e){console.log("[Construct] Resuming");const t=performance.now();this.bjt=t,this.Ejt=t,this.Rjt=0,this.Ojt=0,this.Fjt=0,this.Djt=0,this.kjt=0,this.Ljt=0,this.sRt.dispatchEvent(PT.zn(PT.Event,"resume")),this.XK(PT.zn(PT.Event,"resume")),this.xU(PT.EB.RB.AB.mzt,null,null),this.Vgt()||this.P8(t)}}lY(t){this.tUt.Bu(t)}dY(t){this.sUt.Bu(t)}cY(t){this.eUt.Bu(t)}uY(t){this.tUt.Kf(t)}pY(t){this.sUt.Kf(t)}fY(t){this.eUt.Kf(t)}gzt(t,s){const e=s?performance.now():0;let i;return t instanceof ET?(i=t.OU(),s&&AT.yzt(t.behavior,performance.now()-e)):(i=t.P8(),s&&AT.yzt(t.NH(),performance.now()-e)),i}Szt(){const t=this.RU();this.tUt.Vd(!0);for(const s of this.tUt)this.gzt(s,t);this.tUt.Vd(!1)}wzt(t,s){const e=s?performance.now():0;let i;return t instanceof ET?(i=t.gY(),s&&AT.yzt(t.behavior,performance.now()-e)):(i=t.GPt(),s&&AT.yzt(t.NH(),performance.now()-e)),i}vzt(){const t=this.RU();this.sUt.Vd(!0);for(const s of this.sUt)this.wzt(s,t);this.sUt.Vd(!1)}bzt(t,s){const e=s?performance.now():0;let i;return t instanceof ET?(i=t.LU(),s&&AT.yzt(t.behavior,performance.now()-e)):(i=t.TGt(),s&&AT.yzt(t.NH(),performance.now()-e)),i}Mzt(){const t=this.RU();this.eUt.Vd(!0);for(const s of this.eUt)this.bzt(s,t);this.eUt.Vd(!1)}*xzt(){const t=this.RU();this.tUt.Vd(!0);for(const s of this.tUt){const e=this.gzt(s,t);PT.Mo(e)&&(yield*e)}this.tUt.Vd(!1)}*Tzt(){const t=this.RU();this.sUt.Vd(!0);for(const s of this.sUt){const e=this.wzt(s,t);PT.Mo(e)&&(yield*e)}this.sUt.Vd(!1)}*Czt(){const t=this.RU();this.eUt.Vd(!0);for(const s of this.eUt){const e=this.bzt(s,t);PT.Mo(e)&&(yield*e)}this.eUt.Vd(!1)}async P8(t,s,e){this.djt=!0;const i="background-wake"===e,n="background-wake"!==e&&"skip-render"!==e,r=this.HN(),h=this.IB();if(!this.cjt||this.oN()&&!s&&!i)return;const o=performance.now();this.fjt=!0,this.Izt(t||0),this.Fjt++,this._zt();const a=this.Gzt();this.xCt()&&await a;const l=this.sRt._f(this.Zjt.pretick);l instanceof Promise&&await l,this.XK(this.Qjt.pretick);const u=this.Pzt();this.xCt()&&await u,this.Azt()&&await this.Rzt(),r.KN()&&await this.Ezt();const c=this.Ozt();this.xCt()&&await c;const f=r.jN(),d=f.C5();let p=!1;if(-1!==d&&(f.I5(),h.T5()!==d)){const t=this.IB().J5(d);this.Tk()&&(p=!0,await t)}this.Wc("canvas","update-html-layer-dom-state",{layersDomState:f.j0().filter((t=>t.tj())).map((t=>t.Z1()))}),n&&this.jD(),p&&this.Wc("canvas","cleanup-html-layers"),this._$t()&&(await this.$Ut(),this.dN()>=this.LUt())?this.UUt():(this.oN()||i||this.rzt(),this.ljt++,this.ujt++,this.fjt=!1,this.Ljt+=performance.now()-o)}async Gzt(){const t=this.fpt,s=this.RU();this.HW(),t.VW(!0),this.Agt(this.jN()),s&&AT.Fzt(),this.xCt()?await t.lyt():t.nyt(),s&&AT.Dzt(),this.Rgt(),t.VW(!1),this.HW(),t.VW(!0)}async Pzt(){const t=this.fpt,s=this.RU(),e=this.xCt(),i=this.sRt,n=this.Zjt,r=this.Qjt;s&&AT.Fzt(),e?await this.Lzt(this.xzt()):this.Szt(),e?await this.Lzt(this.Tzt()):this.vzt(),s&&AT.kzt(),s&&AT.Fzt(),e?await this.Nzt(n.tick):i.dispatchEvent(n.tick),s&&AT.Bzt(),t.VW(!1),this.XK(r.tick)}async Ozt(){const t=this.fpt,s=this.sRt,e=this.Zjt,i=this.Qjt,n=this.RU(),r=this.xCt();n&&AT.Fzt(),r?await t.Egt(this.I3):t.Pgt(this.I3),n&&AT.Dzt(),this.IVt.Nkt(),this._zt(),this.pjt=!1,t.VW(!0),n&&AT.Fzt(),r?await this.Lzt(this.Czt()):this.Mzt(),n&&AT.kzt(),n&&AT.Fzt(),r?await this.Nzt(e.tick2):s.dispatchEvent(e.tick2),n&&AT.Bzt(),t.VW(!1),this.XK(i.tick2),r&&await t.jgt(),this.HW(),this._zt()}_zt(){if(0===this.HVt.size)return;const t=this.sRt;t.cf(!0);for(const t of this.JVt)t.Zgt().Vdt(this.HVt);this.JVt.clear(),this.fpt.cyt(this.HVt);for(const t of this.HVt)t.Hn();this.HVt.clear(),t.cf(!1)}async Ezt(){const t=this.HN();let s=0;for(;t.KN()&&s++<10;)await this.$zt(t.e6())}Izt(t){let s=0;this._$t()?(s=1/this.kUt(),this.Mjt=s,this.xjt=s):0!==this.bjt&&(s=Math.max(t-this.bjt,0)/1e3,s>.5&&(s=0),this.Mjt=s,this.xjt=PT.Kn(s,this.Ijt,this.Cjt)),this.bjt=t,this.Tjt=this.xjt*this.QEt,this._jt.Bu(this.Tjt),this.Gjt.Bu(s*this.QEt),this.Pjt.Bu(this.xjt);for(const[t,s]of this.Ajt)s.Bu(this.xjt*t.wN());this.XVt&&this.XVt.fWt(),t-this.Ejt>=1e3&&(this.Ejt+=1e3,t-this.Ejt>=1e3&&(this.Ejt=t),this.Ojt=this.Rjt,this.Rjt=0,this.Djt=this.Fjt,this.Fjt=0,this.kjt=Math.min(this.Ljt/1e3,1),this.Ljt=0,this.XVt&&this.XVt.cWt(),this.IVt.Fkt(),this.RU()&&AT.Wzt())}lOt(t,s){if(s){if(!this.Ajt.has(t)){const s=PT.zn(PT.Qf);s.rd(this._jt),this.Ajt.set(t,s)}}else this.Ajt.delete(t)}uOt(t){const s=this.Ajt.get(t);return s?s.Hs():this.dN()}async $zt(t){const s=this.sRt,e=this.HN().jN();await e.S4(),e.W5(t,this.pM()),e===t&&this.fpt.b4(),this.IVt.Nkt(),this._zt(),s.dispatchEvent(this.Zjt.beforelayoutchange),PT.df.Af(!0),await t.E5(e,this.pM()),PT.df.Af(!1),await t.j5(!1),s.dispatchEvent(this.Zjt.layoutchange),this.SB(),this.pjt=!0,this.HW(),this.VUt()}SB(){this.tjt=!0}tWt(){return this.XVt?this.XVt.tWt():null}sWt(){return this.XVt?this.XVt.sWt():null}pM(){return this.XVt?this.XVt.pM():null}jD(){const t=this.XVt;if(!t||t.Z$t())return;const s=this.pM(),e=s.tF(),i=e&&s.$b(),n=e&&s.sv();if(i&&s.$O(),!this.tjt&&!this._$t())return void s.Db();const r=this.I3.jN();this.Rjt++,s.EO();const h=this.RU();h&&AT.Fzt(),this.tjt=!1;let o=null;i&&(o=t.gWt()._R(),s.QO(o));let a=null;n&&(a=s.Vzt(2*(1+r.S5())),s.F2(0,1)),this._1()&&"low"===t.N2()?s.zE(t.I2(),t._2()):s.HE(),this.jzt(this.pM(),r),o&&s.sF(o),n&&(s.Uzt(),this.XVt.yWt(a)),s.Eb(),h&&(AT.zzt(),AT.Hzt()),t&&t.SWt()}R4(t){return"low"===this.IB().N2()||t.$b()&&(this.L2()||this._1())}jzt(t,s){t.uv(),t.lO(),t.sO(1,1,1,1),t.UO(null),t.rO(null),t.FO(this._1()),this.R4(t)&&s.P4(t);const e=s.T5();for(let i=1;i<e;++i)s.D4(t,i),t.sv()&&t.Jzt();this.R4(t)||s.P4(t),s.F4(t)}xU(t,s,e){if(!this.cjt)return!1;const i=!this.fjt&&!this.fpt.Jgt();let n=0;i&&(n=performance.now());const r=this.RU();r&&this.OY(!1);const h=this.fpt.Lgt(this.I3,t,s,e);if(i){const t=performance.now()-n;this.Ljt+=t,r&&AT.qzt(t)}return r&&this.OY(!0),h}fGt(t,s,e){if(!this.xCt())return this.xU(t,s,e);if(this.Vgt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.fjt&&!this.fpt.Jgt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.fpt.Bgt(this.I3,t,s,e)}async GB(t,s,e){if(!this.xCt())return this.xU(t,s,e);if(!this.cjt)return!1;if(this.Vgt())return this.fpt.$gt(t,s,e);if(!this.jN())return this.fpt.kgt(t,s,e);const i=performance.now(),n=this.fpt.Bgt(this.I3,t,s,e);let r=n.next();for(;!r.done;)await this.Fgt(r.value),r=n.next();return this.oN()||this.fpt.Jgt()||(await this.fpt.jgt(),this.djt&&!this.fjt&&this.rzt()),this.Ljt+=performance.now()-i,r.value}dGt(t,s,e){const i=this.RU();i&&this.OY(!1);const n=this.fpt.Ugt(this.I3,t,s,e);return i&&this.OY(!0),n}pGt(t,s,e){return this.fpt.zgt(this.I3,t,s,e)}mGt(t){return this.Sjt.Bu(t)}Agt(t){this.NVt.push(t)}Rgt(){if(!this.NVt.length)throw new Error("layout stack empty");this.NVt.pop()}lB(){return this.NVt.length?this.NVt.at(-1):this.jN()}lN(t){return t&&-1!==t.wN()?this.xjt*t.wN():this.Tjt}_8(){return this.Tjt}G8(){return this.xjt}cN(){return this.Mjt}wN(){return this.QEt}vN(t){(isNaN(t)||t<0)&&(t=0),this.QEt=t}FN(t){this.Ijt=Math.max(t,0)}ON(){return this.Ijt}kN(t){this.Cjt=Math.max(t,0)}LN(){return this.Cjt}MN(){return this.Ojt}TN(){return this.Djt}IN(){return this.kjt}Yzt(){return this.vjt}dN(){return this._jt.Hs()}Xzt(){return this.Gjt.Hs()}yN(){return this.Pjt.Hs()}mN(){return this.ljt}Kzt(){return this.ujt}Zzt(){return this.jVt}dk(){return this.aVt}mk(){return this.lVt}wk(){return this.uVt}yk(){return this.cVt}bk(){return this.fVt}hB(t){if(this.Njt)throw new Error("cannot call while loading state - wait until afterload event");return this.zVt.get(t)||null}FFt(t){if(this.Njt)throw new Error("cannot call while loading state - wait until afterload event");this.zVt.delete(t)}f4(){this.zVt.clear();for(const t of this.EVt)if(!t.k0())for(const s of t.FW())this.zVt.set(s.tU(),s)}NWt(){return"preview"===this.YWt}RU(){return this.sVt}x$(){return this.YWt}T$(){return"nwjs"===this.x$()||this.XWt}$Wt(){return"cordova"===this.YWt}Qzt(){return"Android"===PT.Zs.Qs&&("cordova"===this.YWt||"playable-ad-single-file"===this.YWt||"playable-ad-zip"===this.YWt||"instant-games"===this.YWt)}tHt(){return this.qX}sHt(){return this.KWt}C$(){return this.ZWt}eHt(){return this.QWt}lk(){return this.IVt}qPt(){return this.CVt.qPt()}YPt(){return this.CVt.YPt()}_1(){return this.KVt}iHt(){return this.pM().Uw(this.g1())}Ww(t){return this.pM().Ww(t||this.g1())}nHt(){return this.pjt}rHt(t){t=!!t,this.QVt!==t&&(this.QVt=t,this.HN().n6(),this.SB())}Rk(){return this.QVt}hHt(t){if(!this.RVt.has(t)){const s=()=>this.oHt(t);this.RVt.set(t,s),t.Sf().addEventListener("animationframeimagechange",s)}const s=this.fS.hS(t);return s.bS()||s.xS().then((()=>this.SB())),s}oHt(t){this.fS.uS(t)}PVt(t){const s=[];for(const e of t.cEt())for(const t of e.uJ()){const e=t.gJ();s.push({source:t,width:e.Vg(),height:e.Zg(),tag:t.AJ()})}return{wS:s}}async AVt(t){const s=PT.zn(PT.Ud),e=[],i=new Map;for(const n of t.cEt())for(const t of n.uJ()){const n=t.gJ().gAt();i.has(n)||(i.set(n,null),e.push(s.Bu((async()=>{const t=await n.AZ();i.set(n,t)}))))}await Promise.all(e);const n=[];for(const e of t.cEt())for(const t of e.uJ())n.push(s.Bu((async()=>{const s=t.gJ(),e=i.get(s.gAt()),n=await s.yAt(e);return{CS:await createImageBitmap(n)}})));const r=await Promise.all(n);for(const t of i.values())t instanceof ImageBitmap&&t.close&&t.close();return{wS:r}}aHt(t){this.Bjt=t,this.$jt=!1}lHt(){this.Bjt="",this.$jt=!0}uHt(t){this.Wjt=t}yIt(t){this.$U=t}cHt(){return this.Vjt}Azt(){return!!(this.Bjt||this.$jt||this.Wjt||null!==this.$U)}async Rzt(){if(this.Bjt&&(this.HW(),await this.fHt(this.Bjt),this.dHt()),this.Wjt&&(await this.pHt(this.Wjt),this.dHt(),this.RU()&&AT.mHt()),this.$jt){const t=await this.gHt();this.Vjt=t,await this.GB(PT.EB.RB.AB.yHt,null),this.Vjt="",this.dHt()}if(null!==this.$U){this.HW();try{await this.SHt(this.$U),this.Vjt=this.$U,await this.GB(PT.EB.RB.AB.wHt,null),this.Vjt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.GB(PT.EB.RB.AB.vHt,null)}this.dHt()}}dHt(){this.Bjt="",this.$jt=!1,this.Wjt="",this.$U=null}j$(){return this.jjt||(this.jjt=localforage.Te({name:"c3-localstorage-"+this.wk(),description:this.dk()})),this.jjt}bHt(){return this.Ujt||(this.Ujt=localforage.Te({name:"c3-savegames-"+this.wk(),description:this.dk()})),this.Ujt}async fHt(t){const s=await this.gHt();try{await this.bHt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.Vjt=s,await this.GB(PT.EB.RB.AB.yHt,null),this.Vjt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.GB(PT.EB.RB.AB.MHt,null)}}async pHt(t){try{const s=await this.bHt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.SHt(s),this.Vjt=s,await this.GB(PT.EB.RB.AB.wHt,null),this.Vjt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.GB(PT.EB.RB.AB.vHt,null)}}async gHt(){const t={c3save:!0,version:1,rt:{time:this.dN(),timeRaw:this.Xzt(),walltime:this.yN(),timescale:this.wN(),tickcount:this.mN(),next_uid:this.UVt,running_layout:this.jN().U0(),start_time_offset:Date.now()-this.vjt},types:{},layouts:{},events:this.fpt.v3(),timelines:this.b9.v3(),user_script_data:null};for(const s of this.EVt)s.k0()||s.OEt()||(t.types[s.U0().toString()]=s.v3());for(const s of this.I3.YN())t.layouts[s.U0().toString()]=s.v3();const s=this.xHt("save");return s.saveData=null,await this.a4(s),t.user_script_data=s.saveData,JSON.stringify(t)}e4(){return this.Njt}async SHt(t){const s=this.HN(),e=JSON.parse(t);if(e.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!e.c3save)throw new Error("not valid C3 save data");if(e.version>1)throw new Error("C3 save data from future version");this.SIt(),this.sRt.dispatchEvent(PT.zn(PT.Event,"beforeload"));for(const t of this.tzt())t.Wj().OEt()||t.A6();const i=e.rt;this._jt.Set(i.time),i.hasOwnProperty("timeRaw")&&this.Gjt.Set(i.timeRaw),this.Pjt.Set(i.walltime),this.QEt=i.timescale,this.ljt=i.tickcount,this.vjt=Date.now()-i.start_time_offset;const n=i.running_layout;this.Njt=!0;let r=!1;if(n!==this.jN().U0()){const t=s.X4(n);if(!t)return;await this.$zt(t),r=!0}for(const[t,i]of Object.entries(e.layouts)){const e=parseInt(t,10),n=s.X4(e);n&&n.b3(i)}const h=new Set;for(const[t,s]of Object.entries(e.types)){const e=parseInt(t,10),i=this._Y(e);!i||i.k0()||i.OEt()||i.b3(s,h)}for(const t of this.I3.YN())for(const s of t.bV())s.M3();if(this.HW(),this.f4(),this.Njt=!1,r){for(const t of this.tzt())t.i4();for(const[t,s]of Object.entries(e.types)){const e=parseInt(t,10),i=this._Y(e);!i||i.k0()||i.OEt()||i.NEt(s)}}this.UVt=i.next_uid,this.fpt.b3(e.events);for(const t of this.EVt)if(!t.k0()&&t.Zj())for(const s of t.FW()){const e=s.eU();s.OOt();for(const i of t.A5().sV()){if(i===t)continue;const n=i.FW();if(e<0||e>=n.length)throw new Error("missing sibling instance");s.d4(n[e])}}this.b9.b3(e.timelines),s.i6(),s.n6();for(const t of h)t.HOt();this.wIt(),this.sRt.dispatchEvent(PT.zn(PT.Event,"afterload")),this.XK(this.xHt("afterload"));for(const[t,s]of Object.entries(e.types)){const s=parseInt(t,10),e=this._Y(s);e&&e.kEt()}const o=this.xHt("load");o.saveData=e.user_script_data,await this.a4(o),this.SB()}THt(t,s){return s.cB().iLt()-t.cB().iLt()}jLt(t,s){t.cB()&&(this.pUt.has(t)||(this.pUt.set(t,s),this.mUt.push(t)))}SIt(){this.pUt=new WeakMap,PT.bh(this.mUt),PT._4.qFt()}wIt(t="full",s=null){this.mUt.sort(this.THt),s||(s={}),s.OFt=new Set;const e=this.mUt.length;for(const e of this.mUt)e.E6(this.pUt.get(e),t,s);for(const e of this.mUt)e.KOt(this.pUt.get(e),t,s);if(this.SIt(),e){this.HW(),this.f4();for(const t of this.I3.YN())for(const s of t.bV())s.R0(),s.yB()}}async CHt(t){const s=await Promise.all(t.map((async t=>{if(this.$Wt()&&this.dZ._K()||"playable-ad-single-file"===this.x$()){const s=await this.dZ.no(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()})));this.iUt.IHt(s)}_Ht(t,s){this.iUt.GHt(t,s)}PHt(t,s){this.iUt.AHt(t,s)}RHt(t,s,e,i){return this.iUt.RHt(t,s,e,null,null,i)}EHt(t,s,e,i){return this.iUt.EHt(t,s,e,i)}OHt(){return this.iUt.FHt()}nB(t,s){this.Wc("runtime","invoke-download",{url:t,filename:s})}async _Wt(t,s,e,i,n,r){if(i=i||s,n=n||e,this.Tk())return(await this.vB("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:e,surfaceWidth:i,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,e,i,n);return r?await self.createImageBitmap(h,r):h}}async DHt(t){return this.Tk()?await this.vB("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}LHt(){this.qjt||(this.qjt=!0,this.Wc("runtime","enable-device-orientation"))}kHt(){this.Yjt||(this.Yjt=!0,this.Wc("runtime","enable-device-motion"))}VN(){return this.wjt()}NHt(t){this.wjt=t}oUt(){const t=this.pM();return{fps:this.MN(),tps:this.TN(),cpu:this.IN(),gpu:this.GN(),layout:this.jN()?this.jN().Pc():"",renderer:t.$b()?t.oF():t.eWt()}}Vgt(){return!!this.RU()&&AT.Vgt()}Fgt(t){return this.xCt()?AT.Fgt(t):Promise.resolve()}pvt(){return!!this.xCt()&&AT.BHt()}$Ht(t){this.eVt=!!t,this.WHt()}VHt(){return this.eVt}xCt(){return this.iVt}OY(t){t?this.nVt--:this.nVt++,this.WHt()}WHt(){this.iVt=this.RU()&&this.eVt&&0===this.nVt}OSt(){return this.RU()&&AT.OSt()}R2(){return this.RU()&&this.pM().tF()&&AT.R2()}async Lzt(t){if(t)for(const s of t)await this.Fgt(s)}Nzt(t){return this.Lzt(this.sRt.Pf(t))}kmt(t){return this.fpt.kmt(t.name,t.params)}MB(t){if(this.Tk())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}J$(){return this.cUt}xHt(t){const s=PT.zn(PT.Event,t,!1);return s.runtime=this.cUt,s}IUt(){this.cUt=new self.ek(this),this.Qjt={pretick:this.xHt("pretick"),tick:this.xHt("tick"),tick2:this.xHt("tick2")}}PUt(){const t={};for(const s of this.EVt)t[s.ugt()]={value:s.gW(),enumerable:!0,writable:!1};this.cUt.kk(t)}AUt(){const t={};for(const s of this.$k().ygt())t[s.ugt()]=s.cgt();this.cUt.Nk(t)}QN(){return this.dUt}cW(t,s){this.fUt.set(t,s)}TV(t){return this.fUt.get(t)}g$(t){if(!(t instanceof self.vW))throw new TypeError("expected IObjectClass");const s=this.TV(t);if(!(s&&s instanceof PT.But))throw new Error("invalid IObjectClass");return s}RW(t){if(!(t instanceof self.$j))throw new TypeError("expected IInstance");const s=this.TV(t);if(!(s&&s instanceof PT.Instance))throw new Error("invalid IInstance");return s}uB(t){if(!(t instanceof self.IH))throw new TypeError("expected IWorldInstance");const s=this.TV(t);if(!(s&&s instanceof PT.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=PT.WWt.RC,self.C3_InitRuntime=(t,s)=>t.eOt(s)}{const DT=self._s;DT.nUt=class extends DT.jn{constructor(t,s){super(),this.Nc=t,this.jHt=new Map,this.UHt=0,this.zHt=s.inputPort,s.outputPort.onmessage=t=>this.HHt(t),this.JHt=s.maxNumWorkers,this.qHt=1,this.YHt=!1,this.XHt=!1}FHt(){return this.JHt}IHt(t){this.zHt.postMessage({type:"_import_scripts",scripts:t})}GHt(t,s){this.zHt.postMessage({type:"_send_blob",blob:t,id:s})}AHt(t,s){this.zHt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}RHt(t,s,e,i,n,r){if(e||(e=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.UHt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:e},a=new Promise(((t,s)=>{this.jHt.set(h,{resolve:t,progress:i,reject:s,KHt:!1,ZHt:r})}));return n&&n.Yf((()=>this.QHt(h))),this.zHt.postMessage(o,e),this.tJt(),a}EHt(t,s,e,i){if(e||(e=[]),"number"==typeof i&&(i=Math.floor(i))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:i,jobId:this.UHt++,params:s,transferables:e};this.zHt.postMessage(n,e)}QHt(t){const s=this.jHt.get(t);s&&(s.KHt=!0,s.resolve=null,s.progress=null,s.reject=null,this.zHt.postMessage({type:"_cancel",jobId:t}))}HHt(t){const s=t.data,e=s.type,i=s.jobId;switch(e){case"result":this.sJt(i,s.result);break;case"progress":this.eJt(i,s.progress);break;case"error":this.iJt(i,s.error);break;case"ready":this.nJt();break;default:throw new Error(`unknown message from worker '${e}'`)}}sJt(t,s){const e=this.jHt.get(t);if(!e)throw new Error("invalid job ID");e.KHt||e.resolve(s),this.jHt.delete(t)}eJt(t,s){const e=this.jHt.get(t);if(!e)throw new Error("invalid job ID");!e.KHt&&e.progress&&e.progress(s)}iJt(t,s){const e=this.jHt.get(t);if(!e)throw new Error("invalid job ID");e.KHt||e.reject(s),this.jHt.delete(t)}nJt(){this.YHt&&(this.YHt=!1,this.qHt++,this.qHt<this.JHt?this.tJt():this.zHt.postMessage({type:"_no_more_workers"}))}rJt(){let t=0;const s=[...this.jHt.values()].sort(((t,s)=>(t.ZHt||1/0)-(s.ZHt||1/0)));for(const e of s)t<(e.ZHt||1/0)&&t++;return t}async tJt(){if(!(this.qHt>=this.JHt||this.YHt||this.XHt||this.rJt()<=this.qHt))try{this.YHt=!0,(await this.Nc.vB("runtime","create-job-worker")).outputPort.onmessage=t=>this.HHt(t)}catch(t){this.XHt=!0,this.YHt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.qHt} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.skymen_BetterOutline={C$t:"uniform lowp vec3 outlinecolor;\nuniform lowp float width;\nuniform lowp float precisionStep;\nuniform lowp float samples;\nuniform lowp float outlineOpacity;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform mediump float seconds;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\n#define PI 3.14159265359\n#define SAMPLES 96\n#define PASSES 64\nvoid main(void)\n{\nif (width <= 0.0 || outlineOpacity <= 0.0) {\ngl_FragColor = texture2D( samplerFront, vTex );\nreturn;\n}\nmediump float outlineAlpha = 0.0;\nmediump vec2 actualWidth;\nmediump float widthCopy = width;\nmediump vec4 color = vec4(outlinecolor.x, outlinecolor.y, outlinecolor.z, 1.0);\nmediump float angle;\nmediump vec2 layoutSize = abs(vec2(layoutEnd.x-layoutStart.x,(layoutEnd.y-layoutStart.y)));\nmediump vec2 texelSize = abs(srcOriginEnd-srcOriginStart)/layoutSize;\nmediump vec4 fragColor;\nmediump vec2 testPoint;\nmediump float sampledAlpha;\nint passes = int(clamp(width / precisionStep, 1.0, float(PASSES)));\nfor (int j=0; j<PASSES; j++) {\nif (j >= passes ) break;\nwidthCopy = mix(0.0, width, float(j)/float(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor( int i=0; i<SAMPLES; i++ ){\nif (i >= int(samples)) break;\nangle += 1.0/(clamp(samples, 0.0, float(SAMPLES))/2.0) * PI;\ntestPoint = vTex + actualWidth * vec2(cos(angle), sin(angle));\nsampledAlpha = texture2D( samplerFront,  testPoint ).a;\noutlineAlpha = max( outlineAlpha, sampledAlpha );\n}\n}\nfragColor = color * outlineAlpha * outlineOpacity;\nmediump vec4 tex0 = texture2D( samplerFront, vTex );\ngl_FragColor = fragColor * (1. - tex0.a) + tex0;\n}",T$t:"#version 300 es\nin mediump vec2 vTex;\nout lowp vec4 outColor;\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision lowp float;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform lowp sampler2D samplerDepth;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform highmedp float seconds;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\nuniform mediump float devicePixelRatio;\nuniform mediump float zNear;\nuniform mediump float zFar;\nuniform lowp vec3 outlinecolor;\nuniform lowp float width;\nuniform lowp float precisionStep;\nuniform lowp float samples;\nuniform lowp float outlineOpacity;\n#define PI 3.14159265359\n#define SAMPLES 96\n#define PASSES 64\nvoid main(void)\n{\nif (width <= 0.0 || outlineOpacity <= 0.0) {\noutColor = texture( samplerFront, vTex );\nreturn;\n}\nmediump float outlineAlpha = 0.0;\nmediump vec2 actualWidth;\nmediump float widthCopy = width;\nmediump vec4 color = vec4(outlinecolor.x, outlinecolor.y, outlinecolor.z, 1.0);\nmediump float angle;\nmediump vec2 layoutSize = abs(vec2(layoutEnd.x-layoutStart.x,(layoutEnd.y-layoutStart.y)));\nmediump vec2 texelSize = abs(srcOriginEnd-srcOriginStart)/layoutSize;\nmediump vec4 fragColor;\nmediump vec2 testPoint;\nmediump float sampledAlpha;\nint passes = int(clamp(width / precisionStep, 1.0, float(PASSES)));\nint sampleCount = int(clamp(samples, 0.0, float(SAMPLES)));\nfor (int j = 0; j <= passes; j++) {\nwidthCopy = mix(0.0, width, float(j)/float(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor( int i = 0; i < sampleCount; i++ ) {\nangle += 1.0/(float(sampleCount)/2.0) * PI;\ntestPoint = vTex + actualWidth * vec2(cos(angle), sin(angle));\nsampledAlpha = texture( samplerFront,  testPoint ).a;\noutlineAlpha = max( outlineAlpha, sampledAlpha );\n}\n}\nfragColor = color * outlineAlpha * outlineOpacity;\nmediump vec4 tex0 = texture( samplerFront, vTex );\noutColor = fragColor * (1. - tex0.a) + tex0;\n}",v$t:"%%FRAGMENTINPUT_STRUCT%%\n/* input struct contains the following fields:\nfragUV : vec2<f32>\nfragPos : vec4<f32>\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n*/\n%%FRAGMENTOUTPUT_STRUCT%%\n%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\noutlinecolor : vec3<f32>,\nwidth : f32,\nprecisionStep : f32,\nsamples : f32,\noutlineOpacity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n/* c3Params struct contains the following fields:\nsrcStart : vec2<f32>,\nsrcEnd : vec2<f32>,\nsrcOriginStart : vec2<f32>,\nsrcOriginEnd : vec2<f32>,\nlayoutStart : vec2<f32>,\nlayoutEnd : vec2<f32>,\ndestStart : vec2<f32>,\ndestEnd : vec2<f32>,\ndevicePixelRatio : f32,\nlayerScale : f32,\nlayerAngle : f32,\nseconds : f32,\nzNear : f32,\nzFar : f32,\nisSrcTexRotated : u32\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\nfn c3_linearizeDepth(depthSample : f32) -> f32\n*/\n/*\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\nfn c3_grayscale(rgb : vec3<f32>) -> f32\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n*/\nconst PI:f32 = 3.14159265359;\nconst SAMPLES:i32 = 96;\nconst PASSES:i32 = 64;\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar output : FragmentOutput;\nif (shaderParams.width <= 0.0 || shaderParams.outlineOpacity <= 0.0) {\noutput.color = textureSample(textureFront, samplerFront, input.fragUV );\nreturn output;\n}\nvar outlineAlpha: f32 = 0.0;\nvar actualWidth: vec2<f32>;\nvar widthCopy: f32 = shaderParams.width;\nvar color: vec4<f32> = vec4<f32>(shaderParams.outlinecolor.x, shaderParams.outlinecolor.y, shaderParams.outlinecolor.z, 1.0);\nvar angle: f32;\nlet layoutSize: vec2<f32> = abs(vec2<f32>(c3Params.layoutEnd.x - c3Params.layoutStart.x, c3Params.layoutEnd.y - c3Params.layoutStart.y));\nlet texelSize: vec2<f32> = abs(c3Params.srcOriginEnd - c3Params.srcOriginStart) / layoutSize;\nvar fragColor: vec4<f32>;\nvar testPoint: vec2<f32>;\nvar sampledAlpha: f32;\nlet passes: u32 = u32(clamp(shaderParams.width / shaderParams.precisionStep, 1.0, f32(SAMPLES)));\nlet sampleCount: u32 = u32(clamp(shaderParams.samples, 0.0, f32(SAMPLES)));\nfor (var j: u32 = 0u; j <= passes; j = j + 1u) {\nwidthCopy = mix(0.0, shaderParams.width, f32(j) / f32(passes));\nactualWidth = widthCopy * texelSize;\nangle = 0.0;\nfor (var i: u32 = 0u; i < sampleCount; i = i + 1u) {\nangle = angle + 1.0 / (f32(sampleCount) / 2.0) * PI;\ntestPoint = input.fragUV + actualWidth * vec2<f32>(cos(angle), sin(angle));\nsampledAlpha = textureSample(textureFront, samplerFront, testPoint).a; // Assuming 'samplerFrontSampler' is the sampler associated with 'samplerFront'\noutlineAlpha = max(outlineAlpha, sampledAlpha);\n}\n}\nfragColor = color * outlineAlpha * shaderParams.outlineOpacity;\nvar tex0 : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV );\noutput.color = fragColor * (1. - tex0.a) + tex0;\nreturn output;\n}",lM:!1,cM:!1,Xb:50,Zb:50,tM:!0,eM:!0,nM:!1,hM:!1,animated:!1,parameters:[["outlinecolor",0,"color"],["width",0,"float"],["precisionStep",0,"float"],["samples",0,"float"],["outlineOpacity",0,"percent"]]},self.C3_Shaders.skymen_DropShadow={C$t:"uniform lowp vec3 shadowcolor;\nuniform lowp float shadowopacity;\nuniform lowp float shadowdistance;\nuniform lowp float shadowangle;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform mediump float seconds;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\n#define PI 3.14159265359\n#define  clampX(x,a,b)  min(max(x,min(a,b)),max(a,b))\nvoid main(void)\n{\nmediump float angle = (180.0 - shadowangle)/180.0 * PI;\nmediump vec2 layoutSize = abs(vec2(layoutEnd.x-layoutStart.x,(layoutEnd.y-layoutStart.y)));\nmediump vec2 texelSize = abs(srcOriginEnd-srcOriginStart)/layoutSize;\nmediump vec2 actualWidth = shadowdistance * texelSize;\nmediump vec2 testPoint = vTex + actualWidth * vec2(cos(angle), sin(angle));\ntestPoint = clampX( testPoint, srcOriginStart, srcOriginEnd );\nmediump vec4 testPointTex = texture2D(samplerFront, testPoint);\nlowp float a = testPointTex.a;\nmediump vec4 tex0 = texture2D( samplerFront, vTex );\nmediump vec4 color = vec4(shadowcolor, shadowopacity);\ngl_FragColor = mix(mix(tex0, mix(tex0, color, color.a), testPointTex.a), tex0, tex0.a);\n}",T$t:"",v$t:"%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nshadowcolor : vec3<f32>,\nshadowopacity : f32,\nshadowdistance : f32,\nshadowangle: f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%C3_UTILITY_FUNCTIONS%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nlet front: vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nlet layoutSize : vec2<f32> = abs(vec2(c3Params.layoutEnd.x - c3Params.layoutStart.x, (c3Params.layoutEnd.y - c3Params.layoutStart.y)));\nlet texelSize : vec2<f32> = abs(c3Params.srcOriginEnd - c3Params.srcOriginStart) / layoutSize;\nlet angle: f32 = (180. - shaderParams.shadowangle) / 180. * 3.1415927;\nlet actualWidth: vec2<f32> = shaderParams.shadowdistance * vec2<f32>(texelSize.x, -texelSize.y);\nvar testPoint: vec2<f32> = input.fragUV + actualWidth * vec2<f32>(cos(angle), sin(angle));\ntestPoint = c3_clampToSrc(testPoint);\nlet testPointTex: vec4<f32> = textureSample(textureFront, samplerFront, testPoint);\nlet color: vec4<f32> = vec4<f32>(shaderParams.shadowcolor, shaderParams.shadowopacity);\nvar output : FragmentOutput;\noutput.color = mix(mix(front, mix(front, color, color.a), testPointTex.a), front, front.a);\nreturn output;\n}",lM:!0,cM:!1,Xb:0,Zb:0,tM:!1,eM:!1,nM:!1,hM:!1,animated:!1,parameters:[["shadowcolor",0,"color"],["shadowopacity",0,"percent"],["shadowdistance",0,"float"],["shadowangle",0,"float"]]},self.C3_Shaders.separatechannel_3={C$t:"precision mediump float;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\nuniform vec2 srcOriginStart;\nuniform vec2 srcOriginEnd;\nuniform float redx;\nuniform float redy;\nuniform float bluex;\nuniform float bluey;\nuniform float greenx;\nuniform float greeny;\nuniform float alphax;\nuniform float alphay;\nuniform float intensity;\nuniform float innerDecrease;\nvoid main(void)\n{\nvec2 srcOriginSize = srcOriginEnd - srcOriginStart;\nvec2 n = ((vTex - srcOriginStart) / srcOriginSize);\nfloat edgeFactor = innerDecrease == 0. ? 1. : distance(vec2(0.5), n) * innerDecrease * 2.;\nvec4 front = texture2D(samplerFront, vTex);\nvec4 color = front;\ncolor.r = texture2D(samplerFront, vTex - vec2(redx, redy) * pixelSize * edgeFactor).r;\ncolor.g = texture2D(samplerFront, vTex - vec2(greenx, greeny) * pixelSize * edgeFactor).g;\ncolor.b = texture2D(samplerFront, vTex - vec2(bluex, bluey) * pixelSize * edgeFactor).b;\ncolor.a = texture2D(samplerFront, vTex - vec2(alphax, alphay) * pixelSize * edgeFactor).a;\ngl_FragColor = mix(front, color, intensity);\n}",T$t:"#version 300 es\nprecision mediump float;\nin vec2 vTex;\nout vec4 fragColor;\nuniform sampler2D samplerFront;\nuniform vec2 pixelSize;\nuniform vec2 srcOriginStart;\nuniform vec2 srcOriginEnd;\nuniform float redx;\nuniform float redy;\nuniform float bluex;\nuniform float bluey;\nuniform float greenx;\nuniform float greeny;\nuniform float alphax;\nuniform float alphay;\nuniform float intensity;\nuniform float innerDecrease;\nvoid main(void)\n{\nvec2 srcOriginSize = srcOriginEnd - srcOriginStart;\nvec2 n = ((vTex - srcOriginStart) / srcOriginSize);\nfloat edgeFactor = innerDecrease == 0. ? 1. : distance(vec2(0.5), n) * innerDecrease * 2.;\nvec4 front = texture(samplerFront, vTex);\nvec4 color = front;\ncolor.r = texture(samplerFront, vTex - vec2(redx, redy) * pixelSize * edgeFactor).r;\ncolor.g = texture(samplerFront, vTex - vec2(greenx, greeny) * pixelSize * edgeFactor).g;\ncolor.b = texture(samplerFront, vTex - vec2(bluex, bluey) * pixelSize * edgeFactor).b;\ncolor.a = texture(samplerFront, vTex - vec2(alphax, alphay) * pixelSize * edgeFactor).a;\nfragColor = mix(front, color, intensity);\n}",v$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nredx : f32,\ngreenx : f32,\nbluex : f32,\nalphax : f32,\nredy : f32,\ngreeny : f32,\nbluey : f32,\nalphay : f32,\nintensity : f32,\ninnerDecrease : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n%%C3PARAMS_STRUCT%%\n%%C3_UTILITY_FUNCTIONS%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar color : vec4<f32> = front;\nvar pixelSize : vec2<f32> = c3_getPixelSize(textureFront);\nvar edgeFactor : f32 = select(distance(vec2(0.5), c3_srcOriginToNorm(input.fragUV)) * shaderParams.innerDecrease * 2., 1., shaderParams.innerDecrease == 0.);\ncolor.r = textureSample(textureFront,samplerFront, input.fragUV - vec2<f32>(shaderParams.redx, shaderParams.redy) * pixelSize * edgeFactor).r;\ncolor.g = textureSample(textureFront,samplerFront, input.fragUV - vec2<f32>(shaderParams.greenx, shaderParams.greeny) * pixelSize * edgeFactor).g;\ncolor.b = textureSample(textureFront,samplerFront, input.fragUV - vec2<f32>(shaderParams.bluex, shaderParams.bluey) * pixelSize * edgeFactor).b;\ncolor.a = textureSample(textureFront,samplerFront, input.fragUV - vec2<f32>(shaderParams.alphax, shaderParams.alphay) * pixelSize * edgeFactor).a;\nvar output : FragmentOutput;\noutput.color = mix(front, color, shaderParams.intensity);\nreturn output;\n}",lM:!1,cM:!1,Xb:0,Zb:0,tM:!1,eM:!1,nM:!0,hM:!1,animated:!1,parameters:[["redx",0,"float"],["greenx",0,"float"],["bluex",0,"float"],["alphax",0,"float"],["redy",0,"float"],["greeny",0,"float"],["bluey",0,"float"],["alphay",0,"float"],["intensity",0,"percent"],["innerDecrease",0,"percent"]]};{let LT=function(t,s){const e=t[1],i=s[1];if("number"==typeof e&&"number"==typeof i)return e-i;{const t=""+e,s=""+i;return t<s?-1:t>s?1:0}};ForEachOrdered_SortInstances=LT;const kT=self._s;let NT=null,BT="",$T="",WT=[],VT="",jT="",UT="";const zT=kT.zn(kT.amt);kT.EB.RB=class extends kT.y_t{constructor(t){super(t),this.imt=this.Nc.$k().RY(),this.jdt=this.Nc.$k().Qk(),this.hJt=0,this.oJt=0,this.aJt=new Map}Hn(){super.Hn()}SB(){this.Nc.SB()}xU(t){this.Nc.xU(t,null,null)}lJt(t,s){return NT&&t===BT&&s===$T||(NT=new RegExp(t,s),BT=t,$T=s),NT.lastIndex=0,NT}uJt(t,s,e){if(t===VT&&s===jT&&e===UT)return WT;const i=this.lJt(s,e);return WT=t.match(i),VT=t,jT=s,UT=e,WT}async cJt(t,s){if(!s.length)return;this.hJt+=s.length;const e=[];for(const i of s)e.push(t.F5(i));await kT.Vh(e,(()=>{this.oJt++})),this.oJt++,this.oJt===this.hJt&&(this.oJt=0,this.hJt=0,this.Nc.xU(kT.EB.RB.AB.fJt,null,null))}KK(){return 0===this.hJt?1:this.oJt/this.hJt}dJt(t,s){for(const e of s)0===e.NW()&&t.N5(e)}pJt(){return zT}mJt(t){const s=this.Nc.$k(),e=s.Qk(),i=e.PY(),n=i.Hk(),r=n.GY(),h=i.jpt(),o=e.AY(n),a=s.RY(),l=a.AY();if(l.hmt(t),h)for(let e=0;e<t&&!l.$Y();++e)s.DY(r),l.NY(e),n.LY(i,o),s.kY(r);else for(let s=0;s<t&&!l.$Y();++s)l.NY(s),n.LY(i,o);return e.WY(),a.WY(),!1}*gJt(t){const s=this.Nc.$k(),e=s.Qk(),i=e.PY(),n=i.Hk(),r=n.GY(),h=i.jpt(),o=e.AY(n),a=s.RY(),l=a.AY();if(l.hmt(t),h)for(let e=0;e<t&&!l.$Y();++e)s.DY(r),l.NY(e),yield*n.Cvt(i,o),s.kY(r);else for(let s=0;s<t&&!l.$Y();++s)l.NY(s),yield*n.Cvt(i,o);return e.WY(),a.WY(),!1}yJt(){const t=this.Nc.$k(),s=t.Qk(),e=s.PY(),i=e.Hk(),n=i.GY(),r=e.jpt(),h=s.AY(i),o=t.RY(),a=o.AY();if(r)for(let s=0;!a.$Y();++s)t.DY(n),a.NY(s),i.LY(e,h)||a.OJ(),t.kY(n);else for(let t=0;!a.$Y();++t)a.NY(t),i.LY(e,h)||a.OJ();return s.WY(),o.WY(),!1}*SJt(){const t=this.Nc.$k(),s=t.Qk(),e=s.PY(),i=e.Hk(),n=i.GY(),r=e.jpt(),h=s.AY(i),o=t.RY(),a=o.AY();if(r)for(let s=0;!a.$Y();++s)t.DY(n),a.NY(s),(yield*i.Cvt(e,h))||a.OJ(),t.kY(n);else for(let t=0;!a.$Y();++t)a.NY(t),(yield*i.Cvt(e,h))||a.OJ();return s.WY(),o.WY(),!1}wJt(t,s,e){const i=this.Nc.$k(),n=i.Qk(),r=n.PY(),h=r.Hk(),o=h.GY(),a=r.jpt(),l=n.AY(h),u=i.RY(),c=u.AY();if(c.EY(t),c.hmt(e),e<s)if(a)for(let t=s;t>=e&&!c.$Y();--t)i.DY(o),c.NY(t),h.LY(r,l),i.kY(o);else for(let t=s;t>=e&&!c.$Y();--t)c.NY(t),h.LY(r,l);else if(a)for(let t=s;t<=e&&!c.$Y();++t)i.DY(o),c.NY(t),h.LY(r,l),i.kY(o);else for(let t=s;t<=e&&!c.$Y();++t)c.NY(t),h.LY(r,l);return n.WY(),u.WY(),!1}*vJt(t,s,e){const i=this.Nc.$k(),n=i.Qk(),r=n.PY(),h=r.Hk(),o=h.GY(),a=r.jpt(),l=n.AY(h),u=i.RY(),c=u.AY();if(c.EY(t),c.hmt(e),e<s)if(a)for(let t=s;t>=e&&!c.$Y();--t)i.DY(o),c.NY(t),yield*h.Cvt(r,l),i.kY(o);else for(let t=s;t>=e&&!c.$Y();--t)c.NY(t),yield*h.Cvt(r,l);else if(a)for(let t=s;t<=e&&!c.$Y();++t)i.DY(o),c.NY(t),yield*h.Cvt(r,l),i.kY(o);else for(let t=s;t<=e&&!c.$Y();++t)c.NY(t),yield*h.Cvt(r,l);return n.WY(),u.WY(),!1}bJt(t){const s=t.DW(),e=s.FW();if(0===e.length)return!1;const i=this.Nc.$k(),n=i.Qk(),r=n.PY(),h=r.Hk(),o=h.GY(),a=r.jpt(),l=n.AY(h),u=i.RY(),c=u.AY(),f=t.Zj(),d=zT.AY();if(kT.Ch(d,e),c.hmt(d.length),a)for(let s=0,e=d.length;s<e&&!c.$Y();++s){i.DY(o);const e=d[s];t.DW().ipt(e),f&&e.BSt(),c.NY(s),h.LY(r,l),i.kY(o)}else{s.tpt(!1);const t=s.spt();kT.bh(t),t.push(null);for(let s=0,e=d.length;s<e&&!c.$Y();++s){const e=d[s];t[0]=e,f&&e.BSt(),c.NY(s),h.LY(r,l)}}return n.WY(),u.WY(),kT.bh(d),zT.WY(),!1}*MJt(t){const s=t.DW(),e=s.FW();if(0===e.length)return!1;const i=this.Nc.$k(),n=i.Qk(),r=n.PY(),h=r.Hk(),o=h.GY(),a=r.jpt(),l=n.AY(h),u=i.RY(),c=u.AY(),f=t.Zj(),d=zT.AY();if(kT.Ch(d,e),c.hmt(d.length),a)for(let s=0,e=d.length;s<e&&!c.$Y();++s){i.DY(o);const e=d[s];t.DW().ipt(e),f&&e.BSt(),c.NY(s),yield*h.Cvt(r,l),i.kY(o)}else{s.tpt(!1);const t=s.spt();kT.bh(t),t.push(null);for(let s=0,e=d.length;s<e&&!c.$Y();++s){const e=d[s];t[0]=e,f&&e.BSt(),c.NY(s),yield*h.Cvt(r,l)}}return n.WY(),u.WY(),kT.bh(d),zT.WY(),!1}xJt(t,s){const e=t.DW(),i=e.FW();if(0===i.length)return!1;const n=this.Nc.$k(),r=n.Qk(),h=n.sgt(),o=r.PY(),a=o.Hk(),l=a.GY(),u=o.jpt(),c=r.AY(a),f=n.RY(),d=f.AY(),p=t.Zj(),m=zT.AY();kT.bh(m),d.hmt(i.length);for(let t=0,s=i.length;t<s;++t)m.push([i[t],h.Wxt(1,t)]);if(m.sort(LT),1===s&&m.reverse(),u)for(let s=0,e=m.length;s<e&&!d.$Y();++s){n.DY(l);const e=m[s][0];t.DW().ipt(e),p&&e.BSt(),d.NY(s),a.LY(o,c),n.kY(l)}else{e.tpt(!1);const t=e.spt();kT.bh(t),t.push(null);for(let s=0,e=m.length;s<e&&!d.$Y();++s){const e=m[s][0];t[0]=e,p&&e.BSt(),d.NY(s),a.LY(o,c)}}return r.WY(),f.WY(),kT.bh(m),zT.WY(),!1}*TJt(t,s){const e=t.DW(),i=e.FW();if(0===i.length)return!1;const n=this.Nc.$k(),r=n.Qk(),h=n.sgt(),o=r.PY(),a=o.Hk(),l=a.GY(),u=o.jpt(),c=r.AY(a),f=n.RY(),d=f.AY(),p=t.Zj(),m=zT.AY();kT.bh(m),d.hmt(i.length);for(let t=0,s=i.length;t<s;++t)m.push([i[t],h.Wxt(1,t)]);if(m.sort(LT),1===s&&m.reverse(),u)for(let s=0,e=m.length;s<e&&!d.$Y();++s){n.DY(l);const e=m[s][0];t.DW().ipt(e),p&&e.BSt(),d.NY(s),yield*a.Cvt(o,c),n.kY(l)}else{e.tpt(!1);const t=e.spt();kT.bh(t),t.push(null);for(let s=0,e=m.length;s<e&&!d.$Y();++s){const e=m[s][0];t[0]=e,p&&e.BSt(),d.NY(s),yield*a.Cvt(o,c)}}return r.WY(),f.WY(),kT.bh(m),zT.WY(),!1}CJt(t,s){let e=this.aJt.get(t);return e||(s?(e={IJt:null,_Jt:new Map},this.aJt.set(t,e),e):null)}GJt(t,s,e,i,n){s.Uk().Wvt(e,s.Yk()),i&&t.kY(n)}*PJt(t,s,e,i,n){yield*s.Uk().Vvt(e,s.Yk()),i&&t.kY(n)}}}{const HT=self._s;HT.EB.RB.ORt=class extends HT.jn{constructor(t){super(),this.Ddt=t,this.Nc=t.$B(),this.eGt=t.MW()}$_t(){}Hn(){this.Ddt=null,this.Nc=null,this.eGt=null}}}{const JT=self._s;JT.EB.RB.Instance=class extends JT.jn{constructor(t,s){super(),this.fe=t,this.Ddt=this.fe.Wj(),this.aGt=this.Ddt.STt(),this.Nc=this.fe.$B()}Hn(){this.fe=null,this.Ddt=null,this.aGt=null,this.Nc=null}}}{const qT=self._s,YT=[];qT.EB.RB.AB={AJt:()=>!0,u4:()=>!0,w4:()=>!0,pzt:()=>!0,mzt:()=>!0,oN(){return this.Nc.oN()},xwt(){const t=this.Nc.tgt();return!t.Npt()&&!t.Lpt()},RJt(){const t=this.Nc.sgt().Gxt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const e=this.Nc.mN();return t.set("TriggerOnce_lastTick",e),this.Nc.nHt()||s!==e-1},EJt(t){const s=this.Nc.sgt().Gxt(),e=s.get("Every_lastTime")||0,i=this.Nc.dN();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return i>=e+n?(s.set("Every_lastTime",e+n),i>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",i),s.set("Every_seconds",t),!0):(i<e-.1&&s.set("Every_lastTime",i),!1)},Byt(t){const s=this.Nc.$k().bgt(t);return s&&s.Byt()},NWt(){return this.Nc.NWt()},oe:()=>qT.Zs.oe,qUt:()=>!0,PB:()=>!0,OJt:()=>!0,yHt:()=>!0,MHt:()=>!0,wHt:()=>!0,vHt:()=>!0,FJt(t){return!!this.Nc.hB(t)},DJt(t){switch(t){case 0:return"browser"===qT.Zs.re;case 1:return"iOS"===qT.Zs.Qs;case 2:return"Android"===qT.Zs.Qs;case 8:return"cordova"===qT.Zs.re;case 9:return"scirra-arcade"===this.Nc.x$();case 10:return"nwjs"===qT.Zs.re;case 13:return"windows-uwp"===this.Nc.x$();default:return!1}},LJt(t,s,e){return this.lJt(s,e).test(t)},kJt:(t,s,e)=>qT.compare(t,s,e),NJt:(t,s,e)=>t>=s&&t<=e,BJt:(t,s,e)=>qT.compare(t.qit(),s,e),$Jt:t=>!!t.qit(),WJt(t,s){const e=this.Nc.dN();if(0===t){const t=this.Nc.sgt().Gxt();return!t.get("CompareTime_executed")&&e>=s&&(t.set("CompareTime_executed",!0),!0)}return qT.compare(e,t,s)},VJt:t=>isNaN(t),BIt:(t,s,e)=>qT.hr(qT.Qn(t),qT.Qn(e))<=qT.Qn(s),$It:(t,s)=>qT.lr(qT.Qn(t),qT.Qn(s)),YTt(t,s,e){let i=qT.Qn(t),n=qT.Qn(s),r=qT.Qn(e);return qT.lr(r,n)?qT.lr(i,n)&&!qT.lr(i,r):!(!qT.lr(i,n)&&qT.lr(i,r))},jJt:(t,s)=>"number"==typeof t?0===s:1===s,UJt:t=>!!t,yyt(t){return t.toLowerCase()===this.Nc.$k().byt()},zJt(t,s,e,i){if(!t)return!1;const n=this.pJt(),r=n.AY(),h=t.DW();qT.Ch(r,h.FW()),h.Jdt()&&qT.bh(h.ept());const o=this.Nc.sgt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.Wxt(1,t),i=o.Wxt(3,t),qT.compare(s,e,i)?++a:h.Qdt(n)}qT.wh(r,a),h.npt(r);const l=!!r.length;return qT.bh(r),n.WY(),t.Fvt(),l},HJt(t,s){if(!t)return!1;const e=this.pJt(),i=e.AY(),n=t.DW();qT.Ch(i,n.FW()),n.Jdt()&&qT.bh(n.ept());const r=this.Nc.sgt();let h=0;for(let t=0,s=i.length;t<s;++t){const s=i[t];i[h]=s,r.Wxt(1,t)?++h:n.Qdt(s)}qT.wh(i,h),n.npt(i);const o=!!i.length;return qT.bh(i),e.WY(),t.Fvt(),o},JJt(t,s,e){if(!t)return!1;const i=t.DW(),n=i.FW();if(0===n.length)return!1;const r=this.Nc.sgt();let h=null,o=0;for(let t=0,i=n.length;t<i;++t){const i=n[t];e=r.Wxt(2,t),(null===h||0===s&&e<o||1===s&&e>o)&&(o=e,h=i)}return i.lpt(h),t.Fvt(),!0},qJt(t,s){if(!t)return!1;const e=t.DW(),i=e.FW();if((s=Math.floor(s))>=i.length)return!1;const n=i[s];return e.lpt(n),t.Fvt(),!0},YJt(t){if(!t)return!1;const s=t.DW(),e=s.FW(),i=Math.floor(this.Nc.VN()*e.length);if(i>=e.length)return!1;const n=e[i];return s.lpt(n),t.Fvt(),!0},XJt:t=>!!t&&(!!t.NW()&&(t.DW().tpt(!0),t.Fvt(),!0)),KJt(t,s,e){if(!t)return!1;const i=t.DW(),n=i.FW(),r=this.Nc.Hk().upt(),h=this.Nc.sgt().xxt();i.Jdt()?(qT.Ch(YT,n),i.Hdt(),i.tpt(!1)):r?(qT.Ch(YT,i.ept()),qT.bh(i.ept())):(qT.Ch(YT,i.spt()),qT.bh(i.spt()));for(let t=0,n=YT.length;t<n;++t){const n=YT[t];qT.xor(n.cB().Oz(s,e),h)?i.Zdt(n):i.Qdt(n)}return t.Fvt(),qT.xor(!!i.spt().length,h)},ZJt(t){if(!t)return!1;const s=t.k0();let e=null;const i=this.Nc.xEt();for(let n=i.length-1;n>=0;--n){const r=i[n];if(s){if(r.Wj().TTt(t)){e=r;break}}else if(r.Wj()===t){e=r;break}}if(!e){const s=t.FW();s.length&&(e=s.at(-1))}return!!e&&(t.DW().lpt(e),t.Fvt(),!0)},QJt(t){return this.Nc.xCt()?this.gJt(t):this.mJt(t)},tqt(){return this.Nc.xCt()?this.SJt():this.yJt()},sqt(t,s,e){return this.Nc.xCt()?this.vJt(t,s,e):this.wJt(t,s,e)},jd(t){return this.Nc.xCt()?this.MJt(t):this.bJt(t)},eqt(t,s,e){return this.Nc.xCt()?this.TJt(t,e):this.xJt(t,e)},iqt:t=>!!t&&t.YV(),nqt:t=>!!t&&t.ij(),rqt:t=>!!t&&t.tj(),hqt:t=>!!t&&!t.NW(),oqt:(t,s,e)=>!!t&&qT.compare(100*t.tO(),s,e),aqt(t){const s=this.Nc.jN();return!!s&&s.w5(t)},fJt:()=>!0,lqt(){return this.hJt>0},uqt(t,s){const e=this.Nc.EOt();return!!e&&!!s&&!!e.Nut(t,s)}}}{let XT=function(t,s){const e=t[0]-s[0];return 0!==e?e:t[1]-s[1]},KT=function(t,s){return t[1]-s[1]};SortZOrderList=XT,SortInstancesByValue=KT;const ZT=self._s,QT=[],tC=[],sC=ZT.zn(ZT.Rect),eC=ZT.zn(ZT.To),iC=[];ZT.EB.RB.Nrt={cqt(t,s){t.Ant(s)},fqt(t,s){t.Xe()&&"number"!=typeof s&&(s=parseFloat(s)),t.Ant(t.qit()+s)},dqt(t,s){t.Xe()&&t.Ant(t.qit()-s)},pqt(t,s){t.Ant(!!s)},mqt(t){t.Ant(!t.qit())},gqt(t){t.Ant(t.Qmt())},yqt(t){this.Nc.$k().wgt(t)},Sqt(t,s,e,i,n,r){if(!t||!s)return;const h=this.Nc.$W(t,s,e,i,n,r);if(!h)return;n&&s.WW(h);const o=this.Nc.$k();o.VW(!0),h.jW(),o.VW(!1);const a=new Map;h.xOt(a,t,n);for(const[t,s]of a)t.DW().rpt(s)},wqt(t,s,e,i,n,r){if(!t||!s)return;const h=this.Nc.QUt(t);h&&ZT.EB.RB.Nrt.Sqt.call(this,h,s,e,i,n,r)},D0(t,s,e,i,n,r,h,o,a,l,u){if(!t)return;const c=this.Nc.lB();let f=c;if(r){const t=this.Nc.HN().Y4(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.fB(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.fB(o),!p))return;sC.set(s,e,i,n);const m=f.D0(t,sC,d,p,a,l,u);t.DW().npt(m),t.Fvt()},vqt(){const t=this.imt;t.Qpt()&&t.Kpt().OJ()},$yt(t,s){const e=this.Nc.$k().bgt(t);e&&(0===s?e.$yt(!1):1===s?e.$yt(!0):e.$yt(!e.Byt()))},bqt(t){this.Nc.vN(t)},Mqt(t,s){if(s<0&&(s=0),!t)return;const e=t.DW().FW();for(const t of e)t.vN(s)},xqt(t){if(!t)return;const s=t.DW().FW();for(const t of s)t.oU()},ph(t,s){if(t<0)return;const e=this.Nc.$k().syt();return s?e.a_t(t):e.l_t(t),!0},nN(t){return this.Nc.$k().syt().u_t(t),!0},Tqt(){const t=this.Nc.$k();return t.syt().c_t(t.gyt()),!0},eN(t){this.Nc.$k().eN(t)},async _B(t,s,e,i,n,r){const h=this.Nc.IB();h&&(this.SB(),await h._B(0===t?"image/png":"image/jpeg",s/100,e,i,n,r),await this.Nc.GB(ZT.EB.RB.AB.PB,null))},Cqt(t,s){if(t<=0||s<=0)return;this.Nc.W$t(t,s),this.Nc.lB().c3();const e=this.Nc.IB();e&&("off"===e.F$t()||this.Nc.szt(t,s),e.TA(e.Oq(),e.Fq(),!0),this.Nc.SB())},Iqt(t){const s=this.Nc.IB();s&&"off"!==s.F$t()&&(s.q$t(0!==t?"high":"low"),s.TA(s.Oq(),s.Fq(),!0))},fit(t){this.Nc.aHt(t)},_qt(){this.Nc.lHt()},Gqt(t){this.Nc.uHt(t)},Pqt(t){this.Nc.yIt(t)},Aqt(t){},Rqt(){for(const t of this.Nc.HN().YN())t.G4()},Eqt(t){this.Nc.rHt(0!==t)},Oqt(t,s){this.Nc.kN(1/t),this.Nc.FN(1/s)},Fqt(t,s){this.Nc.FN(t),this.Nc.kN(s)},Dqt(t){this.Nc.RN(["vsync","unlimited-tick","unlimited-frame"][t])},Lqt(t,s){if(!t)return;const e=t.DW().FW(),i=QT,n=tC,r=this.Nc.lB(),h=t.k0(),o=t.iMt();for(let t=0,r=e.length;t<r;++t){const r=e[t],a=r.cB();if(!a)continue;let l;l=h?r.Aht(s+r.Wj().eMt(o)):r.Aht(s),i.push([a.fB().tk(),a.dB()]),n.push([r,l])}if(!i.length)return;i.sort(XT),n.sort(KT);let a=!1;for(let t=0,s=i.length;t<s;++t){const s=n[t][0],e=r.pB(i[t][0]),h=i[t][1],o=e.mB();o[h]!==s&&(o[h]=s,s.cB().gB(e,!0),e.yB(s),a=!0)}a&&this.Nc.SB(),ZT.bh(QT),ZT.bh(tC)},f$(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Nc.lk().f$(t,s)},kqt(t){if(this.Nc.MS())return;const s=this.Nc.HN();s.KN()||s.ZN(t)},Nqt(t){if(this.Nc.MS())return;const s=this.Nc.HN();if(s.KN())return;const e=s.Y4(t);e&&s.ZN(e)},Bqt(t){if(this.Nc.MS())return;const s=this.Nc.HN();if(s.KN())return;const e=s.YN(),i=e.indexOf(s.jN());if(t&&0===i)return;if(!t&&i===e.length-1)return;const n=e[i+(t?-1:1)];s.ZN(n)},$qt(){if(this.Nc.MS())return;const t=this.Nc.HN();t.KN()||(t.ZN(t.jN()),this.Nc.$k().Cgt())},Wqt(t,s){t&&t.JV(s)},Vqt(t,s){t&&t.ZV(s)},jqt(t,s){t&&t.sj(s)},Uqt(t,s){t&&t.eO(s/100)},zqt(t,s){t&&t.nj(s)},Hqt(t,s){t&&t.oj(s)},Jqt(t,s){t&&t.uV(ZT.Qn(+s))},qqt(t,s,e){t&&(t._j(!0),t.fV(s),t.pV(e))},Yqt(t){t&&t._j(!1)},Xqt(t,s,e){t&&t.S1(s/100,e/100)},Kqt(t,s){t&&t.KM(+s)},Zqt(t,s){t&&t.yj(1===s)},Qqt(t,s){if(!t)return;eC.Qo(s),eC.Kn();const e=t.Ij();e.zo(eC)||(e.ko(eC),this.SB())},tYt(t,s){t&&t.vj(s)},sYt(t,s){t&&t.FM(s)},eYt(t,s,e){if(!t)return;const i=t.nV().ert(e);if(!i)return;const n=1===s;i.ASt()!==n&&(i.lkt(n),t.YH(),this.Nc.SB())},iYt(t,s,e,i){if(!t)return;const n=t.nV(),r=n.ert(s);if(!r)return;e=Math.floor(e);const h=r.RI().OI(e);h&&("color"===h?(eC.Qo(i),i=eC):"percent"===h&&(i/=100),n.KH(r.tk(),e,i)&&r.ASt()&&this.Nc.SB())},nYt(t,s){t&&t.xj(s)},rYt(t){this.Nc.lB().aV(+t)},hYt(t){this.Nc.lB().uV(ZT.Qn(+t))},oYt(t,s){const e=this.Nc.lB(),i=e.nV().ert(s);if(!i)return;const n=1===t;i.ASt()!==n&&(i.lkt(n),e.YH(),this.Nc.SB())},aYt(t,s,e){const i=this.Nc.lB().nV(),n=i.ert(t);if(!n)return;s=Math.floor(s);const r=n.RI().OI(s);r&&("color"===r?(eC.Qo(e),e=eC):"percent"===r&&(e/=100),i.KH(n.tk(),s,e)&&n.ASt()&&this.Nc.SB())},lYt(t,s){this.Nc.lB().OV(t/100,s/100)},uYt(t){const s=this.Nc.lB();0===t?s.LV():s.kV()},cYt(t){this.Nc.lB().fV(t)},fYt(t){this.Nc.lB().pV(t)},dYt(t,s){const e=this.Nc.lB();e.fV(t),e.pV(s)},pYt(t){if(!t)return;const s=t.cCt();if(!s)return;const e=s.cB();if(!e)return;const i=this.Nc.lB();i.fV(e.zM()),i.pV(e.qM())},CV(t,s,e){const i=this.Nc.lB();try{i.CV(t,s,e)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},_V(t,s,e){if(!t)return;const i=this.Nc.lB();try{i._V(t,s,e)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},PV(t){t&&this.Nc.lB().PV(t)},RV(){this.Nc.lB().RV()},async mYt(t){const s=this.Nc.jN();if(!s||!t||this.Nc.MS())return;const e=t.k0()?t.tV():[t];await this.cJt(s,e)},async gYt(t){await ZT.EB.RB.Nrt.mYt.call(this,this.Nc.QUt(t))},yYt(t){const s=this.Nc.jN();if(!s||!t)return;const e=t.k0()?t.tV():[t];this.dJt(s,e)},SYt(t){ZT.EB.RB.Nrt.yYt.call(this,this.Nc.QUt(t))},wYt(){const t=this.Nc.jN();if(!t)return;const s=t.R5();this.dJt(t,s)},async vYt(t){const s=this.Nc.jN();t&&s&&!this.Nc.MS()&&await this.cJt(s,t.G5())},async bYt(t){const s=this.Nc.jN(),e=this.Nc.HN().Y4(t);e&&s&&!this.Nc.MS()&&await this.cJt(s,e.G5())},sN(t){const s=this.jdt.Zk();if(s)switch(s.tN()){case 1:"number"==typeof t&&s.sN(t);break;case 2:"string"==typeof t&&s.sN(t);break;case 3:s.sN(t)}},MYt(t,s,e){const i=this.CJt(t.toLowerCase(),!0),n=i._Jt,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=ZT.$h(n.values())||i.IJt;h&&0!==h.Xk()!=(0!==e.Xk())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,e)},xYt(t,s){const e=this.CJt(t.toLowerCase(),!0);e.IJt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const i=ZT.$h(e._Jt.values())||e.IJt;i&&0!==i.Xk()!=(0!==s.Xk())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):e.IJt=s},TYt(t,s,e){const i=this.Nc,n=i.xCt()?iC:null;e=Math.floor(e);const r=this.CJt(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r._Jt.get(s.toLowerCase());if(!h){if(!r.IJt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.IJt,e=0}if(!h.Iu())return n;if(0!==h.Xk())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=i.$k(),a=o.Hk(),l=a.zk(),u=l.length>0;u&&(h.Yk()?o.DY(l):o.Qgt(l));const c=[],f=o.Hyt(a);if(f){const t=f.qyt();for(let s=e,i=t.length;s<i;++s)c.push(t[s].qit())}const d=h.qyt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Qmt());return i.xCt()?this.PJt(o,h,c,u,l):this.GJt(o,h,c,u,l)}}}{const nC=self._s;nC.EB.RB.Brt={CYt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},P:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Nc.VN()*t:this.Nc.VN()*(s-t)+t},Wbt(...t){return t[Math.floor(this.Nc.VN()*t.length)]},IYt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=nC.Kn(Math.floor(t),0,s.length-1)]),_Yt:()=>Math.PI,GYt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),PYt(t,s){s=Math.max(Math.floor(s),0);const e=Math.pow(10,s);return Math.round((t+Number.EPSILON)*e)/e},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(nC.Qn(t)),cos:t=>Math.cos(nC.Qn(t)),tan:t=>Math.tan(nC.Qn(t)),asin:t=>nC.tr(Math.asin(t)),acos:t=>nC.tr(Math.acos(t)),atan:t=>nC.tr(Math.atan(t)),exp:t=>Math.exp(t),jt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let e=1,i=t.length;e<i;++e){let i=t[e];"number"==typeof i&&s<i&&(s=i)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let e=1,i=t.length;e<i;++e){let i=t[e];"number"==typeof i&&s>i&&(s=i)}return s},Kn:(t,s,e)=>nC.Kn(t,s,e),bt:(t,s,e,i)=>nC.ir(t,s,e,i),angle:(t,s,e,i)=>nC.tr(nC.rr(t,s,e,i)),_t:(t,s,e)=>nC._t(t,s,e),mr:(t,s,e)=>nC.mr(t,s,e),yr:(t,s,e,i)=>nC.yr(t,s,e,i),Sr:(t,s,e,i,n)=>nC.Sr(t,s,e,i,n),wr:(t,s,e)=>nC.wr(t,s,e),AYt:(t,s)=>nC.tr(nC.hr(nC.Qn(t),nC.Qn(s))),RYt:(t,s,e)=>nC.tr(nC.ur(nC.Qn(t),nC.Qn(s),e)),EYt:(t,s,e)=>nC.tr(nC.ar(nC.Qn(t),nC.Qn(s),nC.Qn(e))),OYt:(t,s,e)=>(t|=0)&~(1<<(s|=0))|(e=0!==e?1:0)<<s,FYt:(t,s)=>(t|=0)^1<<s,DYt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,LYt:()=>"\n",kYt:t=>"string"==typeof t?t.toUpperCase():"",NYt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,e)=>"string"!=typeof t?"":e<0?t.substr(s):t.substr(s,e),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",BYt(t,s,e){if("string"!=typeof t||"string"!=typeof e)return"";let i=t.split(e);return(s=Math.floor(s))<0||s>=i.length?"":i[s]},$Yt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(nC.qe(s),"i")):-1,WYt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(nC.qe(s),"")):-1,replace:(t,s,e)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof e?t.replace(new RegExp(nC.qe(s),"gi"),e):"string"==typeof t?t:"",VYt(t,...s){let e=t;for(let t=0,i=s.length;t<i;++t)e=e.replaceAll(`{${t}}`,s[t].toString());return e},jYt(t,s,e){const i=this.lJt(s,e);return t?t.search(i):-1},UYt(t,s,e,i){const n=this.lJt(s,e);return t?t.replace(n,i):""},zYt(t,s,e){const i=this.uJt(t.toString(),s,e);return i?i.length:0},HYt(t,s,e,i){i=Math.floor(i);const n=this.uJt(t.toString(),s,e);return!n||i<0||i>=n.length?"":n[i]},JYt(t,s){let e=t<0?"-":"";t<0&&(t=-t);const i=s-t.toString().length;return e+="0".repeat(Math.max(i,0)),e+t.toString()},qYt:t=>encodeURIComponent(t),YYt:t=>decodeURIComponent(t),aN(){return this.Nc._8()},XYt(){return this.Nc.G8()},KYt(){return this.Nc.wN()},ZYt(){return(Date.now()-this.Nc.Yzt())/1e3},QYt:()=>Date.now(),time(){return this.Nc.dN()},tXt(){return this.Nc.mN()},sXt(){return this.Nc.Zzt()},bN(){return this.Nc.MN()},eXt(){return this.Nc.IN()},iXt(){return this.Nc.GN()},nXt(){return this.Nc.IB().N$()},rXt(){return this.Nc.IB().$$()},hXt(){return this.Nc.Ik()},oXt(){return this.Nc.Gk()},aXt(){return this.Nc.Ik()},lXt(){return this.Nc.Gk()},uXt(){return this.Nc.lB().dV()},cXt(){return this.Nc.lB().mV()},fXt(){return this.Nc.lB().Pc()},dXt(){return this.Nc.lB().lV()},pXt(){return nC.tr(this.Nc.lB().cV())},mXt(){return this.Nc.lB().Vg()},gXt(){return this.Nc.lB().Zg()},yXt(){return 100*this.Nc.lB().l1()},SXt(){return 100*this.Nc.lB().u1()},wXt(t){const s=this.Nc.lB().fB(t);return s?s.a1().Za():0},vXt(t){const s=this.Nc.lB().fB(t);return s?s.a1().Qa():0},bXt(t){const s=this.Nc.lB().fB(t);return s?s.a1().tl():0},MXt(t){const s=this.Nc.lB().fB(t);return s?s.a1().sl():0},xXt(t){const s=this.Nc.lB().fB(t);return s?s.a1().width():0},TXt(t){const s=this.Nc.lB().fB(t);return s?s.a1().height():0},CXt(t){const s=this.Nc.lB().fB(t);if(s){const t=s.a1();return(t.Za()+t.tl())/2}return 0},IXt(t){const s=this.Nc.lB().fB(t);if(s){const t=s.a1();return(t.Qa()+t.sl())/2}return 0},_Xt(t,s,e){const i=this.Nc.lB().fB(t);return i?i.Rj(s,e)[0]:0},GXt(t,s,e){const i=this.Nc.lB().fB(t);return i?i.Rj(s,e)[1]:0},PXt(t,s,e){const i=this.Nc.lB().fB(t);return i?i.Oj(s,e)[0]:0},AXt(t,s,e){const i=this.Nc.lB().fB(t);return i?i.Oj(s,e)[1]:0},RXt(t,s,e,i){const n=this.Nc.lB(),r=n.fB(t),h=n.fB(s);if(!r||!h||r===h)return e;const[o,a]=r.Oj(e,i);return h.Rj(o,a)[0]},EXt(t,s,e,i){const n=this.Nc.lB(),r=n.fB(t),h=n.fB(s);if(!r||!h||r===h)return i;const[o,a]=r.Oj(e,i);return h.Rj(o,a)[1]},OXt(t){const s=this.Nc.lB().fB(t);return s?s.rj():0},FXt(t){const s=this.Nc.lB().fB(t);return s?nC.tr(s.lj()):0},DXt(t){const s=this.Nc.lB().fB(t);return s?100*s.tO():0},LXt(t){const s=this.Nc.lB().fB(t);return s?s.aj():0},kXt(t){const s=this.Nc.lB().fB(t);return s?s.dV():0},NXt(t){const s=this.Nc.lB().fB(t);return s?s.mV():0},BXt(t){const s=this.Nc.lB().fB(t);return s?100*s.fj():0},$Xt(t){const s=this.Nc.lB().fB(t);return s?100*s.mj():0},WXt(t){const s=this.Nc.lB().fB(t);return s?s.XM():0},VXt(t){const s=this.Nc.lB().fB(t);return s?s.tk():-1},jXt(){const t=this.Nc.IB();return t?t.wWt():""},UXt(t){const s=this.imt;if(!s.Qpt())return 0;if(t){const e=s.smt(t);return e?e.tk():0}return s.Kpt().tk()},zXt(){return this.Nc.cHt()},HXt(t,s,...e){const i=this.CJt(t.toLowerCase(),!1);if(!i)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=i._Jt.get(s.toLowerCase());if(!n){if(!i.IJt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=i.IJt}const r=n.Xk(),h=n.Vk();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Iu())return h;const o=this.Nc.$k(),a=o.Hk().zk(),l=a.length>0;l&&(n.Yk()?o.DY(a):o.Qgt(a));const u=n.qyt();for(let t=e.length,s=u.length;t<s;++t)e.push(u[t].Qmt());const c=n.Uk(),f=c.qk(c.zk(),n.Yk(),r,h,...e);return l&&o.kY(a),f},JXt(){return this.Nc.rk().BN()},qXt(){return this.KK()},R_(){return this.Nc.sWt()?"webgpu":"webgl"},YXt(){return this.Nc.sWt()?this.Nc.sWt().eWt():this.Nc.tWt().oF()},XXt(){let t=this.Nc.pM().jb();return Math.round(100*t/1048576)/100},KXt:(t,s,e)=>nC._r(t,s,e),ZXt:(t,s,e)=>nC.Pr(t/100,s/100,e/100),QXt:(t,s,e,i)=>nC.Gr(t/100,s/100,e/100,i/100),tKt:(t,s,e)=>nC.Pr(t/255,s/255,e/255),sKt:(t,s,e,i)=>nC.Gr(t/255,s/255,e/255,i/255),eKt(){return this.Nc.dk()},iKt(){return this.Nc.mk()},nKt(){return this.Nc.yk()},rKt(){return this.Nc.wk()},hKt(){return this.Nc.Hk().y5().Pc()},oKt(){return this.Nc.Hk().Uwt()}}}{const rC=self._s;rC.EB.Keyboard=class extends rC.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{let hC=function(){return aC.wW().RH()};GetKeyboardSdkInstance=hC;const oC=self._s;self.Ns,oC.EB.Keyboard.ORt=class extends oC.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}W_t(){return self.aKt}};let aC=null;self.aKt=class extends self.LW{constructor(t){super(t),aC=t,t.$B().QN().keyboard=this}lKt(t){const s=hC();if("string"==typeof t)return s.uKt(t);if("number"==typeof t)return s.cKt(t);throw new TypeError("expected string or number")}}}{const lC=self._s,uC="keyboard";lC.EB.Keyboard.Instance=class extends lC.hGt{constructor(t,s){super(t,uC),this.fKt=new Set,this.dKt=new Set,this.pKt=0,this.mKt="",this.gKt="",this.yKt=!1;const e=this.$B().Sf();this.Xf=new lC.Jf(lC.Wf.Hf(e,"keydown",(t=>this.SKt(t.data))),lC.Wf.Hf(e,"keyup",(t=>this.wKt(t.data))),lC.Wf.Hf(e,"window-blur",(()=>this.vKt())),lC.Wf.Hf(e,"keyboard-blur",(()=>this.vKt()))),this.Nc.TB(this.UM())}Hn(){super.Hn()}async UM(){const t=await this.wGt("init");this.yKt=t.isKeyboardLockSupported}SKt(t){const s=t.which,e=t.code||s.toString(),i=t.key;this.fKt.has(e)||(this.fKt.add(e),this.dKt.add(s),this.mKt=e,this.pKt=s,this.gKt=i,this.xU(lC.EB.Keyboard.AB.bKt),this.xU(lC.EB.Keyboard.AB.MKt),this.xU(lC.EB.Keyboard.AB.xKt),this.xU(lC.EB.Keyboard.AB.TKt))}wKt(t){const s=t.which,e=t.code||s.toString(),i=t.key;this.fKt.delete(e),this.dKt.delete(s),this.mKt=e,this.pKt=s,this.gKt=i,this.xU(lC.EB.Keyboard.AB.CKt),this.xU(lC.EB.Keyboard.AB.IKt),this.xU(lC.EB.Keyboard.AB._Kt),this.xU(lC.EB.Keyboard.AB.GKt)}vKt(){for(const t of this.dKt)this.dKt.delete(t),this.pKt=t,this.xU(lC.EB.Keyboard.AB.CKt),this.xU(lC.EB.Keyboard.AB.IKt),this.xU(lC.EB.Keyboard.AB.GKt);this.fKt.clear()}uKt(t){return this.fKt.has(t)}cKt(t){return this.dKt.has(t)}hx(){return{tk:this.pKt,tkk:this.gKt}}ox(t){this.pKt=t.tk,t.hasOwnProperty("tkk")&&(this.gKt=t.tkk)}PGt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.pKt},{name:t+".debugger.last-key-string",value:lC.EB.Keyboard.Brt.PKt(this.pKt)},{name:t+".debugger.last-typed-key",value:this.gKt}]}]}}}{const cC=self._s,fC=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];cC.EB.Keyboard.AB={uKt(t){return this.dKt.has(t)},MKt(t){return this.pKt===t},bKt:()=>!0,CKt:()=>!0,IKt(t){return this.pKt===t},cKt(t){return t=Math.floor(t),this.dKt.has(t)},TKt(t){return this.pKt===t},GKt(t){return this.pKt===t},xKt(t){const s=fC[t];return this.mKt===s},_Kt(t){const s=fC[t];return this.mKt===s},AKt(t){const s=fC[t];return this.fKt.has(s)},RKt(){return this.yKt},EKt:()=>!0,OKt:()=>!0}}{const dC=self._s;dC.EB.Keyboard.Nrt={async FKt(t){if(!this.yKt)return;let s=[];t&&(s=t.split(",")),(await this.wGt("lock-keyboard",{keysArr:s})).isOk?this.xU(dC.EB.Keyboard.AB.EKt):this.xU(dC.EB.Keyboard.AB.OKt)},DKt(){this.yKt&&this.wGt("unlock-keyboard")}}}{let pC=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};StringFromCharCode=pC,self._s.EB.Keyboard.Brt={LKt(){return this.pKt},PKt:t=>pC(t),kKt(){return this.gKt}}}{const mC=self._s;mC.EB.NKt=class extends mC.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{let gC=function(){return vC.wW().RH()};GetSdkInstance=gC;const yC=self._s,SC=self.Ns;yC.EB.NKt.ORt=class extends yC.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}W_t(){return self.BKt}};const wC=new Set(["rgb","float"]);let vC=null;self.BKt=class extends self.LW{constructor(t){super(t),vC=t}set seed(t){SC.oi(t),gC().$Kt(t)}get seed(){return gC().WKt()}set VKt(t){SC.ii(t),gC().jKt(t)}get VKt(){return gC().UKt()}zKt(t,s){return SC.Ze(t),SC.Ze(s),gC().HKt(t,s)}JKt(t,s,e){return SC.Ze(t),SC.Ze(s),SC.Ze(e),gC().qKt(t,s,e)}YKt(t,s){return SC.Ze(t),SC.Ze(s),gC().XKt(t,s)}KKt(t,s,e){return SC.Ze(t),SC.Ze(s),SC.Ze(e),gC().ZKt(t,s,e)}QKt(t,s){return SC.Ze(t),SC.Ze(s),gC().tZt(t,s)}sZt(t,s,e){return SC.Ze(t),SC.Ze(s),SC.Ze(e),gC().eZt(t,s,e)}iZt(t,s){return SC.Ze(t),SC.Ze(s),gC().nZt(t,s)}rZt(t,s,e){return SC.Ze(t),SC.Ze(s),SC.Ze(e),gC().hZt(t,s,e)}oZt(t,s){return SC.Ze(t),SC.Ze(s),gC().aZt(t,s)}lZt(t,s,e){return SC.Ze(t),SC.Ze(s),SC.Ze(e),gC().uZt(t,s,e)}cZt(t,s){if(SC.oi(t),!wC.has(s))throw new Error("invalid mode");gC().fZt(t,s)}dZt(t){SC.oi(t),gC().pZt(t)}mZt(t,s){SC.Ze(t),SC.Ze(s),gC().gZt(t,s)}yZt(t,s){return SC.ai(t),SC.Ze(s),t?gC().SZt(t,s):gC().wZt(s)}vZt(t){SC.oi(t),gC().bZt(t)}MZt(t,s){SC.oi(t),SC.oi(s),gC().xZt(t,s)}TZt(){return gC().CZt()}IZt(t){SC.oi(t),gC()._Zt(t)}GZt(t,s){if(SC.Ze(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid value");gC().PZt(t,s)}AZt(t,s){if(SC.Ze(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid value");gC().RZt(t,s)}EZt(t){return SC.ai(t),t?gC().OZt(t):gC().FZt()}DZt(t,s){SC.ii(t),SC.Ze(s),gC().LZt(t,s)}kZt(){gC().NZt()}BZt(t){return SC.ii(t),gC().$Zt(t)}}}{let bC=function(t,s){let e=t.length;for(;e>0;){const i=Math.floor(s(0,e--)),n=t[e];t[e]=t[i],t[i]=n}return t};shuffle=bC;const MC=self._s;class xC{constructor(t,s){this.mode=t,this.name=s,this.WZt=[]}Pc(){return this.name}VZt(t,s){switch(this.mode){case"rgb":s=this.jZt(s);break;case"float":s=this.UZt(s)}let e=this.WZt.length;for(;e--;)if(t>this.WZt[e][0])return void this.WZt.splice(e+1,0,[t,s]);this.WZt.push([t,s])}UZt(t){return[t]}jZt(t){return[t,MC.Ar(t),MC.Rr(t),MC.Er(t),MC.Or(t)]}zZt(t,s,e){return MC._t(t[0],s[0],e)}HZt(t,s,e){return MC.Gr(MC._t(t[1],s[1],e),MC._t(t[2],s[2],e),MC._t(t[3],s[3],e),MC._t(t[4],s[4],e))}Rc(t){const s=this.WZt,e=s[0],i=s.length,n=s[i-1];if(t<e[0])return e[1][0];if(t>n[0])return n[1][0];let r=null,h=e;for(let e=1;e<i&&(r=h,h=s[e],!(h[0]>t));e++);switch(t=MC.Kn((t-r[0])/(h[0]-r[0]),0,1),this.mode){case"rgb":return this.HZt(r[1],h[1],t);case"float":return this.zZt(r[1],h[1],t)}}Dc(t=!1){return"rgb"===this.mode?JSON.stringify(this.WZt.map((([s,e])=>[s,t?e.slice(1):e[0]]))):JSON.stringify(this.WZt)}}MC.EB.NKt.Instance=class extends MC.hGt{constructor(t,s){super(t),this.JZt="",this.qZt=1,this.YZt=2,this.XZt=.5,this.KZt=new Map,this.ZZt=new Map,this.QZt=null,this.tQt=null,this.sQt=[0];let e=s[0];this.eQt=s[1],this.iQt=MC.EB.NKt.nQt,this.fZt("default","rgb"),this.gZt(0,MC.Pr(0,0,0)),this.gZt(1,MC.Pr(1,1,1)),this.bZt("default"),""===e&&(e=this.rQt(10)),this.$Kt(e),this.eQt&&this.Nc.NHt((()=>this.iQt.hQt(0,1)))}Hn(){super.Hn()}hx(){return{prng:this.iQt.oQt()}}ox(t){this.iQt.aQt(t.prng)}rQt(t){const s=[];for(;t--;)s.push(String.fromCharCode(Math.round(25*Math.random())+65));return s.join("")}$Kt(t){this.JZt=t;let s=5381;for(let e=0,i=t.length;e<i;e++)s=(s<<5)+s+t.charCodeAt(e);s>>>=0,this.iQt.seed(s)}WKt(){return this.JZt}jKt(t){this.qZt=MC.Kn(0|t,1,16)}UKt(){return this.qZt}HKt(t,s){return this.iQt.zKt(t,s,this.qZt)}qKt(t,s,e){return this.iQt.JKt(t,s,e,this.qZt)}XKt(t,s){return this.iQt.YKt(t,s,this.qZt)}ZKt(t,s,e){return this.iQt.KKt(t,s,e,this.qZt)}tZt(t,s){return this.iQt.QKt(t,s,this.qZt)}eZt(t,s,e){return this.iQt.sZt(t,s,e,this.qZt)}nZt(t,s){return this.iQt.iZt(t,s)}hZt(t,s,e){return this.iQt.rZt(t,s,e)}aZt(t,s){return this.iQt.oZt(t,s)}uZt(t,s,e){return this.iQt.lZt(t,s,e)}fZt(t,s){const e=new xC(s,t);this.KZt.set(t.toLowerCase(),e),this.QZt=e}pZt(t){this.QZt=this.KZt.get(t.toLowerCase())||null}gZt(t,s){const e=this.QZt;null!==e&&e.VZt(t,s)}wZt(t){const s=this.QZt;return s?s.Rc(t):0}SZt(t,s){const e=this.KZt.get(t.toLowerCase());return e?e.Rc(s):0}bZt(t){const s=new MC.Ic(t);this.ZZt.set(t.toLowerCase(),s),this.tQt=s}xZt(t,s){const e=MC.Ic.Lc(s,t);this.ZZt.set(t.toLowerCase(),e),this.tQt=e}CZt(){return this.tQt?this.tQt.Dc():""}_Zt(t){this.tQt=this.ZZt.get(t.toLowerCase())||null}PZt(t,s){const e=this.tQt;e&&e.Oc(t,s)}RZt(t,s){const e=this.tQt;e&&e.Fc(t,s)}FZt(){const t=this.tQt;return t?t.Rc(this.iQt.hQt(0,t.Ac())):0}OZt(t){const s=this.ZZt.get(t.toLowerCase());return s?s.Rc(this.iQt.hQt(0,s.Ac())):0}LZt(t,s){if(t<2)this.sQt=[s];else{this.sQt=[];for(let e=0;e<t;e++)this.sQt.push(e+s);bC(this.sQt,this.iQt.hQt)}}NZt(){bC(this.sQt,this.iQt.hQt)}$Zt(t){t=Math.floor(t);const s=this.sQt,e=s.length;return(t%=e)<0&&(t+=e),s[t]}PGt(){const t="plugins.advancedrandom.debugger",s=[],e=[],i=t=>t.toString().replace(/,/g,", ");for(const t of this.ZZt.values()){const s=t.Dc();e.push({name:"$"+t.Pc(),value:i(s.slice(1,-1))})}for(const t of this.KZt.values()){const e=t.Dc(!0);s.push({name:"$"+t.Pc(),value:i(e.slice(1,-1))})}return[{title:t+".title",properties:[{name:t+".seed",value:this.WKt(),lQt:t=>this.$Kt(t)},{name:t+".replace-system",value:this.eQt},{name:t+".noise-octaves",value:this.UKt()},{name:t+".noise-lacunarity",value:this.YZt},{name:t+".noise-persistence",value:this.XZt},{name:t+".current-probability-table",value:this.tQt?this.tQt.Pc():""},{name:t+".current-gradient",value:this.QZt?this.QZt.Pc():""},{name:t+".permutation-table",value:i(this.sQt)}]},{title:t+".gradients",properties:s},{title:t+".probability-tables",properties:e}]}}}self._s.EB.NKt.AB={},self._s.EB.NKt.Nrt={uQt(t){this.$Kt(t)},cQt(t){this.jKt(t)},fQt(t,s){const e=["rgb","float"][s];this.fZt(t,e)},dQt(t){this.pZt(t)},VZt(t,s){this.gZt(t,s)},pQt(t){this.bZt(t)},mQt(t,s){try{this.xZt(t,s)}catch(t){console.warn("Failed to create probability table from JSON String",t)}},gQt(t){this._Zt(t)},yQt(t,s){this.PZt(s,t)},SQt(t,s){this.RZt(s,t)},wQt(t,s){this.LZt(t,s)},vQt(){this.NZt()}},self._s.EB.NKt.Brt={bQt(t,s){return this.HKt(t,s)},MQt(t,s,e){return this.qKt(t,s,e)},xQt(t,s){return this.XKt(t,s)},TQt(t,s,e){return this.ZKt(t,s,e)},CQt(t,s){return this.tZt(t,s)},IQt(t,s,e){return this.eZt(t,s,e)},_Qt(t,s){return this.nZt(t,s)},GQt(t,s,e){return this.hZt(t,s,e)},PQt(t,s){return this.aZt(t,s)},AQt(t,s,e){return this.uZt(t,s,e)},RQt(t){return this.wZt(t)},EQt(t,s){return this.SZt(t,s)},OQt(){return this.FZt()},FQt(t){return this.OZt(t)},DQt(){return this.rQt(10)},LQt(){return this.WKt()},kQt(){return this.UKt()},NQt(t){return this.$Zt(t)},BQt(){return this.CZt()}};{let TC=function(t,s){return HC[HC[255&t]+(255&s)]},CC=function(t,s,e){return HC[HC[HC[255&t]+(255&s)]+(255&e)]},IC=function(t,s,e){const i=JC[t];return i.x*s+i.y*e},_C=function(t,s,e,i){const n=qC[t];return n.x*s+n.y*e+n.z*i},GC=function(t){return 6*t*t*t*t*t-15*t*t*t*t+10*t*t*t},PC=function(t){return t%1},AC=function(t){return t*t},RC=function(t,s,e){const i=t[s];t[s]=t[e],t[e]=i},EC=function(t){return BigInt.asUintN(64,t)},OC=function(){BC=EC(BC+BigInt("0x9e3779b97f4a7c15"));let t=BC;return t=EC((t^t>>BigInt(30))*BigInt("0xbf58476d1ce4e5b9")),t=EC((t^t>>BigInt(27))*BigInt("0x94d049bb133111eb")),EC(t^t>>BigInt(31))},FC=function(t,s){return EC(t<<s|t>>BigInt(64)-s)},DC=function(){const t=EC(FC(EC($C[1]*BigInt(5)),BigInt(7))*BigInt(9)),s=EC($C[1]<<BigInt(17));return $C[2]=EC($C[2]^$C[0]),$C[3]=EC($C[3]^$C[1]),$C[1]=EC($C[1]^$C[2]),$C[0]=EC($C[0]^$C[3]),$C[2]=EC($C[2]^s),$C[3]=FC($C[3],BigInt(45)),t},LC=function(){return Number(DC()>>BigInt(11))/NC};pickGradient2=TC,pickGradient3=CC,dot2=IC,dot3=_C,quintic=GC,fract=PC,sq=AC,swap=RC,uint64=EC,splitmix64=OC,rotl=FC,next=DC,nextFloat=LC;const kC=self._s,NC=9007199254740992;let BC=BigInt(0),$C=[BigInt(0),BigInt(0),BigInt(0),BigInt(0)],WC=.5,VC=2;const jC=.013,UC=256,zC=255,HC=Array.from({length:512},(()=>0)),JC=Array.from({length:256},(()=>({x:0,y:0}))),qC=Array.from({length:256},(()=>({x:0,y:0,z:0})));kC.EB.NKt.nQt={$Qt(t){VC=t},WQt(t){WC=t},oQt:()=>({splitstate:BC.toString(),s:$C.map((t=>t.toString()))}),aQt(t){BC=BigInt(t.splitstate);for(let s=0,e=$C.length;s<e;++s)$C[s]=BigInt(t.s[s])},VQt(t,s){const e=Math.floor(t),i=Math.floor(s),n=t-e,r=s-i,h=IC(TC(e,i),n,r),o=IC(TC(e+1,i),n-1,r),a=IC(TC(e,i+1),n,r-1),l=IC(TC(e+1,i+1),n-1,r-1),u=GC(n),c=GC(r);return kC._t(kC._t(h,a,c),kC._t(o,l,c),u)},jQt(t,s,e){const i=Math.floor(t),n=Math.floor(s),r=Math.floor(e),h=t-i,o=s-n,a=e-r,l=_C(CC(i,n,r),h,o,a),u=_C(CC(i+1,n,r),h-1,o,a),c=_C(CC(i,n+1,r),h,o-1,a),f=_C(CC(i+1,n+1,r),h-1,o-1,a),d=_C(CC(i,n,r+1),h,o,a-1),p=_C(CC(i+1,n,r+1),h-1,o,a-1),m=_C(CC(i,n+1,r+1),h,o-1,a-1),g=_C(CC(i+1,n+1,r+1),h-1,o-1,a-1),y=GC(h),S=GC(o),w=GC(a);return kC._t(kC._t(kC._t(l,u,y),kC._t(c,f,y),S),kC._t(kC._t(d,p,y),kC._t(m,g,y),S),w)},hQt:(t,s)=>LC()*(s-t)+t,UQt:(t,s)=>Number(OC()>>11)/NC*(s-t)+t,seed(t){BC=BigInt(t),$C[0]=OC(),$C[1]=OC(),$C[2]=OC(),$C[3]=OC(),OC(),OC();for(let t=0;t<256;++t){const s=LC(),e=Math.acos(2*s-1),i=2*LC()*Math.PI;qC[t].x=Math.cos(i)*Math.sin(e),qC[t].y=Math.sin(i)*Math.sin(e),qC[t].z=Math.cos(e),JC[t].x=Math.cos(i),JC[t].y=Math.sin(i),HC[t]=t}for(let t=0;t<256;++t)RC(HC,t,Number(DC()&BigInt(255)));for(let t=0;t<256;++t)HC[256+t]=HC[t]},JKt(t,s,e,i){if(1==i)return.5*(this.jQt(.013*t,.013*s,.013*e)+1);let n,r=1,h=.013,o=0,a=0;for(let l=0;l<i;l++)n=this.jQt(h*t,h*s,h*e),o+=r*n,a+=r,h*=VC,r*=WC;return(o/a+1)/2},KKt(t,s,e,i){if(1==i)return Math.abs(this.jQt(.013*t,.013*s,.013*e));let n,r=1,h=.013,o=0,a=0;for(let l=0;l<i;l++)n=this.jQt(h*t,h*s,h*e),n=Math.abs(n),o+=r*n,a+=r,h*=VC,r*=WC;return o/a},sZt(t,s,e,i){if(1==i)return AC(1-Math.abs(this.jQt(.013*t,.013*s,.013*e)));let n,r=1,h=.013,o=0,a=0;for(let l=0;l<i;l++)n=this.jQt(h*t,h*s,h*e),n=AC(1-Math.abs(n)),o+=r*n,a+=r,h*=VC,r*=WC;return o/a},zKt(t,s,e){if(1==e)return.5*(this.VQt(.013*t,.013*s)+1);let i,n=1,r=.013,h=0,o=0;for(let a=0;a<e;a++)i=this.VQt(r*t,r*s),h+=n*i,o+=n,r*=VC,n*=WC;return(h/o+1)/2},YKt(t,s,e){if(1==e)return Math.abs(this.VQt(.013*t,.013*s));let i,n=1,r=.013,h=0,o=0;for(let a=0;a<e;a++)i=this.VQt(r*t,r*s),i=Math.abs(i),h+=n*i,o+=n,r*=VC,n*=WC;return h/o},QKt(t,s,e){if(1==e)return AC(1-Math.abs(this.VQt(.013*t,.013*s)));let i,n=1,r=.013,h=0,o=0;for(let a=0;a<e;a++)i=this.VQt(r*t,r*s),i=1-Math.abs(i),i*=i,h+=n*i,o+=n,r*=VC,n*=WC;return h/o},iZt(t,s){t*=.013,s*=.013;const e=Math.floor(t),i=Math.floor(s),n=t-e,r=s-i;let h=1e5;for(let t=-1;t<=1;t++)for(let s=-1;s<=1;s++){const o=JC[TC(e+s,i+t)],a=s+Math.abs(o.x)-n,l=t+Math.abs(o.y)-r,u=a*a+l*l;h=Math.min(u,h)}return kC.Kn(Math.sqrt(h),0,1)},rZt(t,s,e){t*=.013,s*=.013,e*=.013;const i=Math.floor(t),n=Math.floor(s),r=Math.floor(e),h=t-i,o=s-n,a=e-r;let l=1e5;for(let t=-1;t<=1;t++)for(let s=-1;s<=1;s++)for(let e=-1;e<=1;e++){const u=qC[CC(i+s,n+t,r+e)],c=s+Math.abs(u.x)-h,f=t+Math.abs(u.y)-o,d=e+Math.abs(u.z)-a,p=c*c+f*f+d*d;l=Math.min(p,l)}return kC.Kn(Math.sqrt(l),0,1)},oZt(t,s){t*=.013,s*=.013;const e=Math.floor(t),i=Math.floor(s),n=t-e,r=s-i;let h,o=1e5;for(let t=-1;t<=1;t++)for(let s=-1;s<=1;s++){const a=e+s,l=i+t,u=JC[TC(a,l)],c=s+Math.abs(u.x)-n,f=t+Math.abs(u.y)-r,d=c*c+f*f;d<o&&(o=d,h=HC[HC[255&a]+(255&l)])}return h/255},lZt(t,s,e){t*=.013,s*=.013,e*=.013;const i=Math.floor(t),n=Math.floor(s),r=Math.floor(e),h=t-i,o=s-n,a=e-r;let l,u=1e5;for(let t=-1;t<=1;t++)for(let s=-1;s<=1;s++)for(let e=-1;e<=1;e++){const c=i+s,f=n+t,d=r+e,p=qC[CC(c,f,d)],m=s+Math.abs(p.x)-h,g=t+Math.abs(p.y)-o,y=e+Math.abs(p.z)-a,S=m*m+g*g+y*y;S<u&&(u=S,l=HC[HC[HC[255&c]+(255&f)]+(255&d)])}return l/255}}}{const YC=self._s;YC.EB.zQt=class extends YC.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{const XC=self._s;XC.EB.zQt.ORt=class extends XC.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const KC=self._s,ZC="localstorage";KC.EB.zQt.Instance=class extends KC.hGt{constructor(t,s){super(t,ZC),this.HQt="",this.x_="",this.JQt=[],this.qQt="",this.YQt=!1,this.XQt=0,this.KQt=0,this.ZQt=!1,s&&(this.ZQt=s[0]);const e=this.Nc.j$();this.V$=null,this.ZQt?this.V$=e.Te({Ce:!0}):this.V$=e,this.QQt=new Map,this.t0t=!1,this.Nc.TB(this.UM())}async UM(){const t=await Promise.race([this.wGt("init"),KC.ph(3e3)]);t&&(this.YQt=t.isPersistent)}Hn(){super.Hn()}async s0t(t){this.qQt=this.e0t(t),await this.GB(KC.EB.zQt.AB.i0t)}e0t(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}PGt(){return this.t0t||this.n0t(),[{title:"plugins.localstorage.name",properties:[...this.QQt.entries()].map((t=>({name:"$"+t[0],value:t[1],lQt:s=>this.V$.setItem(t[0],s)})))}]}async n0t(){this.t0t=!0;try{const t=await this.V$.keys();t.sort(((t,s)=>{const e=t.toLowerCase(),i=s.toLowerCase();return e<i?-1:i<e?1:0}));const s=await Promise.all(t.map((t=>this.V$.getItem(t))));this.QQt.clear();for(let e=0,i=t.length;e<i;++e)this.QQt.set(t[e],s[e])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.t0t=!1}}}}{const QC=self._s;QC.EB.zQt.AB={r0t(t){return this.HQt===t},h0t:()=>!0,o0t(t){return this.HQt===t},a0t:()=>!0,l0t(t){return this.HQt===t},u0t:()=>!0,c0t:()=>!0,f0t:()=>!0,i0t:()=>!0,d0t(t){return this.HQt===t},p0t(t){return this.HQt===t},m0t(t,s){return QC.compare(this.HQt,t,s)},g0t(t,s){return QC.compare(this.x_,t,s)},y0t(){return this.KQt>0},S0t(){return this.XQt>0},w0t:()=>!0,v0t:()=>!0,b0t(){return this.YQt}}}{let tI=function(t){return"string"==typeof t||"number"==typeof t};IsExpressionType=tI;const sI=self._s;sI.EB.zQt.Nrt={async M0t(t,s){this.KQt++;try{const e=await this.V$.setItem(t,s);await this.mGt((async()=>{this.HQt=t,this.x_=e,await this.GB(sI.EB.zQt.AB.h0t),await this.GB(sI.EB.zQt.AB.r0t)}))}catch(t){await this.s0t(t)}finally{this.KQt--,0===this.KQt&&await this.GB(sI.EB.zQt.AB.w0t)}},async x0t(t,s){if(!s)return;const e=s.cCt(this.fe);if(!e)return;const i=e.RH();if(!i)return;const n=i.T0t();this.KQt++;try{await this.V$.setItem(t,n),await this.mGt((async()=>{this.HQt=t,this.x_="",await this.GB(sI.EB.zQt.AB.h0t),await this.GB(sI.EB.zQt.AB.r0t)}))}catch(t){await this.s0t(t)}finally{this.KQt--,0===this.KQt&&await this.GB(sI.EB.zQt.AB.w0t)}},async C0t(t){this.XQt++;try{const s=await this.V$.getItem(t);await this.mGt((async()=>{this.HQt=t,this.x_=tI(s)?s:"",await this.GB(sI.EB.zQt.AB.a0t),await this.GB(sI.EB.zQt.AB.o0t)}))}catch(t){await this.s0t(t)}finally{this.XQt--,0===this.XQt&&await this.GB(sI.EB.zQt.AB.v0t)}},async I0t(t,s){if(!s)return;const e=s.cCt(this.fe);if(!e)return;const i=e.RH();this.XQt++;try{let s=await this.V$.getItem(t);s=s instanceof ArrayBuffer?s:new ArrayBuffer(0),await this.mGt((async()=>{this.x_="",this.HQt=t,i._0t(s),await this.GB(sI.EB.zQt.AB.a0t),await this.GB(sI.EB.zQt.AB.o0t)}))}catch(t){await this.s0t(t)}finally{this.XQt--,0===this.XQt&&await this.GB(sI.EB.zQt.AB.v0t)}},async G0t(t){try{const s=await this.V$.getItem(t);await this.mGt((async()=>{this.HQt=t,null==s?(this.x_="",await this.GB(sI.EB.zQt.AB.p0t)):(this.x_=tI(s)?s:"",await this.GB(sI.EB.zQt.AB.d0t))}))}catch(t){await this.s0t(t)}},async Fc(t){try{await this.V$.removeItem(t),await this.mGt((async()=>{this.HQt=t,this.x_="",await this.GB(sI.EB.zQt.AB.u0t),await this.GB(sI.EB.zQt.AB.l0t)}))}catch(t){await this.s0t(t)}},async P0t(){try{await this.V$.clear(),await this.mGt((async()=>{this.HQt="",this.x_="",sI.bh(this.JQt),await this.GB(sI.EB.zQt.AB.c0t)}))}catch(t){await this.s0t(t)}},async A0t(){try{const t=await this.V$.keys();await this.mGt((async()=>{this.JQt=t,await this.GB(sI.EB.zQt.AB.f0t)}))}catch(t){await this.s0t(t)}},async R0t(){const t=await this.wGt("request-persistent");t.isOk&&(this.YQt=t.isPersistent)},E0t(t){if(!this.ZQt)return;let s;try{s=JSON.parse(t)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}s&&s["is-c3-storage"]&&Array.isArray(s.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.V$.xe(new Map(s.items))}}}self._s.EB.zQt.Brt={O0t(){return this.x_},F0t(){return this.HQt},D0t(){return this.JQt.length},L0t(t){return(t=Math.floor(t))<0||t>=this.JQt.length?"":this.JQt[t]},k0t(){return this.qQt},N0t(){return this.ZQt?JSON.stringify({"is-c3-storage":!0,items:[...this.V$.Me()]}):""}};{const eI=self._s;eI.EB.B0t=class extends eI.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{let iI=function(){return hI.wW().RH()};GetMouseSdkInstance=iI;const nI=self._s,rI=self.Ns;nI.EB.B0t.ORt=class extends nI.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}W_t(){return self.$0t}};let hI=null;self.$0t=class extends self.LW{constructor(t){super(t),hI=t,t.$B().QN().tB=this}W0t(t){return iI().V0t(t)[0]}j0t(t){return iI().V0t(t)[1]}U0t(t){return iI().V0t(t)}z0t(t){return iI().H0t(t)}J0t(t){rI.oi(t),iI().q0t(t)}Y0t(t){const s=iI(),e=s.$B().g$(t);s.X0t(e)}}}{const oI=self._s,aI="mouse";let lI=null;oI.EB.B0t.Instance=class extends oI.hGt{constructor(t,s){super(t,aI),this.K0t=[!1,!1,!1,!1,!1],this.Z0t=0,this.Q0t=0,this.t1t=0,this.s1t=0,this.e1t=0,this.i1t=0,this.n1t=0,this.r1t=0,this.h1t=!1,this.o1t=0,this.a1t=0,this.yGt([["pointer-lock-change",t=>this.l1t(t)],["pointer-lock-error",t=>this.u1t(t)]]);const e=this.$B().Sf();this.Xf=new oI.Jf(oI.Wf.Hf(e,"pointermove",(t=>this.c1t(t.data))),oI.Wf.Hf(e,"pointerdown",(t=>this.f1t(t.data))),oI.Wf.Hf(e,"pointerup",(t=>this.d1t(t.data))),oI.Wf.Hf(e,"dblclick",(t=>this.p1t(t.data))),oI.Wf.Hf(e,"wheel",(t=>this.m1t(t.data))),oI.Wf.Hf(e,"window-blur",(()=>this.lUt())))}Hn(){super.Hn()}f1t(t){"mouse"===t.pointerType&&(this.Z0t=t.pageX-this.Nc.A$(),this.Q0t=t.pageY-this.Nc.E$(),this.g1t(t.lastButtons,t.buttons))}c1t(t){this.o1t=t.movementX,this.a1t=t.movementY,this.xU(oI.EB.B0t.AB.y1t),this.o1t=0,this.a1t=0,"mouse"===t.pointerType&&(this.Z0t=t.pageX-this.Nc.A$(),this.Q0t=t.pageY-this.Nc.E$(),this.g1t(t.lastButtons,t.buttons))}d1t(t){"mouse"===t.pointerType&&this.g1t(t.lastButtons,t.buttons)}g1t(t,s){this.S1t(t,s,1,0),this.S1t(t,s,4,1),this.S1t(t,s,2,2),this.S1t(t,s,8,3),this.S1t(t,s,16,4)}S1t(t,s,e,i){!(t&e)&&s&e?this.w1t(i):t&e&&!(s&e)&&this.v1t(i)}w1t(t){this.K0t[t]=!0,this.xU(oI.EB.B0t.AB.b1t),this.t1t=t,this.s1t=0,this.xU(oI.EB.B0t.AB.M1t),this.xU(oI.EB.B0t.AB.x1t)}v1t(t){this.K0t[t]&&(this.K0t[t]=!1,this.t1t=t,this.xU(oI.EB.B0t.AB.T1t))}p1t(t){this.t1t=t.button,this.s1t=1,this.xU(oI.EB.B0t.AB.M1t),this.xU(oI.EB.B0t.AB.x1t)}m1t(t){this.e1t=t.deltaY<0?1:0,this.i1t=t.deltaX,this.n1t=t.deltaY,this.r1t=t.deltaZ,this.xU(oI.EB.B0t.AB.C1t)}lUt(){for(let t=0,s=this.K0t.length;t<s;++t){if(!this.K0t[t])return;this.K0t[t]=!1,this.t1t=t,this.xU(oI.EB.B0t.AB.T1t)}}V0t(t){const s=this.Nc.jN(),e=this.Z0t,i=this.Q0t;if(void 0===t)return s.pB(0).m3(e,i);{const n=s.fB(t);return n?n.Rj(e,i):[0,0]}}H0t(t){return t=Math.floor(t),!!this.K0t[t]}I1t(){return this.Z0t>=0&&this.Q0t>=0&&this.Z0t<this.Nc.ezt()&&this.Q0t<this.Nc.izt()}q0t(t){lI!==t&&(lI=t,this.SGt("cursor",t))}async X0t(t){if(oI.Zs.oe||!t)return;const s=t.cCt();if(!s)return;const e=s.cB(),i=s.VGt();if(!e||!i)return;if(lI===i)return;lI=i;const n=`url(${await i.SAt()}) ${Math.round(e.iz()*i.Vg())} ${Math.round(e.hz()*i.Zg())}, auto`;this.SGt("cursor",n)}l1t(t){this._1t(t["has-pointer-lock"])}u1t(t){this._1t(t["has-pointer-lock"]),this.xU(oI.EB.B0t.AB.G1t)}_1t(t){this.h1t!==t&&(this.h1t=t,this.h1t?this.xU(oI.EB.B0t.AB.P1t):this.xU(oI.EB.B0t.AB.A1t))}PGt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.Z0t+","+this.Q0t},{name:t+".debugger.left-button",value:this.K0t[0]},{name:t+".debugger.middle-button",value:this.K0t[1]},{name:t+".debugger.right-button",value:this.K0t[2]},{name:t+".debugger.button-4",value:this.K0t[3]},{name:t+".debugger.button-5",value:this.K0t[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Nc.jN().vV().map((t=>({name:"$"+t.Pc(),value:t.Rj(this.Z0t,this.Q0t).join(", ")})))}]}}}{const uI=self._s;uI.EB.B0t.AB={M1t(t,s){return this.t1t===t&&this.s1t===s},b1t:()=>!0,R1t(t){return this.K0t[t]},T1t(t){return this.t1t===t},E1t(t){const s=this.Nc.sgt().xxt(),e=[];return this.I1t()&&e.push([this.Z0t,this.Q0t]),uI.xor(this.Nc.lk().Hkt(t,e,s),s)},x1t(t,s,e){if(t!==this.t1t||s!==this.s1t)return!1;if(!this.I1t())return!1;const i=this.Z0t,n=this.Q0t;return this.Nc.lk().Hkt(e,[[i,n]],!1)},C1t(t){return 2===t||this.e1t===t},P1t:()=>!0,A1t:()=>!0,G1t:()=>!0,O1t(){return this.h1t},y1t:()=>!0}}{const cI=self._s,fI=["auto","pointer","text","crosshair","move","help","wait","none"],dI=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];cI.EB.B0t.Nrt={F1t(t){this.q0t(fI[t])},D1t(t){this.q0t(dI[t])},L1t(t){this.X0t(t)},k1t(t){this.vGt("request-pointer-lock",{unadjustedMovement:t})},N1t(){this.SGt("release-pointer-lock")}}}self._s.EB.B0t.Brt={PIt(t){return this.V0t(t)[0]},AIt(t){return this.V0t(t)[1]},B1t(){return this.Z0t},$1t(){return this.Q0t},W1t(){return this.o1t},V1t(){return this.a1t},j1t(){return this.i1t},U1t(){return this.n1t},z1t(){return this.r1t}};{const pI=self._s;pI.EB.PlatformInfo=class extends pI.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{const mI=self._s;mI.EB.PlatformInfo.ORt=class extends mI.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const gI=self._s,yI="platform-info";gI.EB.PlatformInfo.Instance=class extends gI.hGt{constructor(t,s){super(t,yI),this.H1t=0,this.J1t=0,this.q1t=0,this.Y1t=0,this.X1t=[0,0,0,0],this.K1t=!1,this.Z1t=!1,this.yGt([["window-resize",t=>this.s$t(t)],["wake-lock-acquired",t=>this.Q1t(t)],["wake-lock-error",t=>this.t2t(t)],["wake-lock-released",t=>this.s2t(t)]]),navigator.connection&&navigator.connection.addEventListener("change",(()=>this.e2t())),this.Nc.TB(this.wGt("get-initial-state").then((t=>{this.H1t=t.screenWidth,this.J1t=t.screenHeight,this.q1t=t.windowOuterWidth,this.Y1t=t.windowOuterHeight,this.X1t=t.safeAreaInset,this.K1t=t.supportsWakeLock})))}Hn(){super.Hn()}s$t(t){this.q1t=t.windowOuterWidth,this.Y1t=t.windowOuterHeight,this.X1t=t.safeAreaInset}async e2t(){await this.GB(gI.EB.PlatformInfo.AB.i2t)}async Q1t(){this.Z1t=!0,await this.GB(gI.EB.PlatformInfo.AB.n2t)}async t2t(){this.Z1t=!1,await this.GB(gI.EB.PlatformInfo.AB.r2t)}async s2t(){this.Z1t=!1,await this.GB(gI.EB.PlatformInfo.AB.h2t)}}}{const SI=self._s;SI.EB.PlatformInfo.AB={o2t:()=>SI.Zs.oe,a2t:()=>"Windows"===SI.Zs.Qs,l2t:()=>"macOS"===SI.Zs.Qs,u2t:()=>"Linux"===SI.Zs.Qs,c2t:()=>"Chrome OS"===SI.Zs.Qs,f2t:()=>"Android"===SI.Zs.Qs,d2t:()=>"iOS"===SI.Zs.Qs,p2t(){const t=this.Nc.x$();return"html5"===t||"scirra-arcade"===t||"preview"===t||"instant-games"===t},m2t(){return this.Nc.$Wt()},g2t(){return this.Nc.T$()},y2t(){return"windows-uwp"===this.Nc.x$()},S2t(){return this.Nc.C$()},w2t(){return"macos-wkwebview"===this.Nc.x$()},v2t(){return"linux-cef"===this.Nc.x$()},i2t:()=>!0,n2t:()=>!0,r2t:()=>!0,h2t:()=>!0,b2t(){return this.Z1t},M2t(){return this.K1t}}}self._s.EB.PlatformInfo.Nrt={x2t(){this.K1t&&this.vGt("request-wake-lock")},T2t(){this.K1t&&(this.Z1t=!1,this.SGt("release-wake-lock"))}},self._s.EB.PlatformInfo.Brt={C2t(){return this.Nc.IB().I$()},I2t(){return this.Nc.IB().G$()},_2t(){return this.Nc.W$()},G2t(){return this.H1t},P2t(){return this.J1t},A2t(){return this.Nc.IB().Oq()},R2t(){return this.Nc.IB().Fq()},E2t(){return this.q1t},O2t(){return this.Y1t},F2t(){return this.Nc.IB().F$()},D2t(){return this.Nc.IB().L$()},L2t(){return this.Nc.IB().N$()},k2t(){return this.Nc.IB().$$()},N2t:()=>navigator.connection&&navigator.connection.downlink||0,B2t:()=>navigator.connection&&navigator.connection.downlinkMax||0,ConnectionType:()=>navigator.connection&&navigator.connection.type||"unknown",$2t:()=>navigator.connection&&navigator.connection.effectiveType||"unknown",W2t:()=>navigator.connection&&navigator.connection.rtt||0,V2t:()=>navigator.hardwareConcurrency||0,j2t:()=>navigator.deviceMemory||0,U2t(){return this.X1t[0]},z2t(){return this.X1t[1]},H2t(){return this.X1t[2]},J2t(){return this.X1t[3]},q2t(){return this.Nc.MN()},Y2t(){return this.Nc.TN()}};{const wI=self._s;wI.EB.se=class extends wI.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{const vI=self._s;vI.EB.se.ORt=class extends vI.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const bI=self._s,MI="browser";bI.EB.se.Instance=class extends bI.hGt{constructor(t,s){super(t,MI),this.X2t="",this.K2t=!1,this.Z2t="",this.Q2t="",this.t3t=!1,this.H1t=0,this.J1t=0,this.q1t=0,this.Y1t=0,this.s3t=!1,this.e3t=!1,this.i3t=new Map,this.n3t=!1,this.r3t="",this.h3t=!1,this.yGt([["online-state",t=>this.o3t(t)],["backbutton",()=>this.a3t()],["sw-message",t=>this.l3t(t)],["hashchange",t=>this.u3t(t)],["install-available",()=>this.c3t()],["app-installed",t=>this.f3t(t)]]);const e=this.$B().Sf();this.Xf=new bI.Jf(bI.Wf.Hf(e,"afterfirstlayoutstart",(()=>this.d3t())),bI.Wf.Hf(e,"window-resize",(()=>this.s$t())),bI.Wf.Hf(e,"window-focus",(()=>this.uUt())),bI.Wf.Hf(e,"window-blur",(()=>this.lUt())),bI.Wf.Hf(e,"suspend",(()=>this.p3t())),bI.Wf.Hf(e,"resume",(()=>this.m3t()))),this.Nc.TB(this.wGt("get-initial-state",{exportType:this.Nc.x$()}).then((t=>{this.X2t=t.location,this.K2t=t.isOnline,this.Z2t=t.referrer,this.Q2t=t.title,this.t3t=t.isCookieEnabled,this.H1t=t.screenWidth,this.J1t=t.screenHeight,this.q1t=t.windowOuterWidth,this.Y1t=t.windowOuterHeight,this.s3t=t.windowHasFocus,this.e3t=t.isConstructArcade})))}Hn(){super.Hn()}d3t(){this.SGt("ready-for-sw-messages")}async o3t(t){const s=!!t.isOnline;this.K2t!==s&&(this.K2t=s,this.K2t?await this.GB(bI.EB.se.AB.g3t):await this.GB(bI.EB.se.AB.y3t))}async s$t(){await this.GB(bI.EB.se.AB.S3t)}async uUt(){this.s3t=!0,await this.GB(bI.EB.se.AB.w3t)}async lUt(){this.s3t=!1,await this.GB(bI.EB.se.AB.v3t)}p3t(){this.xU(bI.EB.se.AB.b3t)}m3t(){this.xU(bI.EB.se.AB.M3t)}async a3t(){await this.GB(bI.EB.se.AB.x3t)}l3t(t){const s=t.type;"downloading-update"===s?this.xU(bI.EB.se.AB.T3t):"update-ready"===s||"update-pending"===s?this.xU(bI.EB.se.AB.C3t):"offline-ready"===s&&this.xU(bI.EB.se.AB.I3t)}u3t(t){this.X2t=t.location,this.xU(bI.EB.se.AB._3t)}c3t(){this.n3t=!0,this.xU(bI.EB.se.AB.G3t)}f3t(t){this.n3t=!1,this.xU(bI.EB.se.AB.P3t)}A3t(){return this.h3t}R3t(t){t=!!t,this.h3t!==t&&(this.h3t=t,this.SGt("set-warn-on-close",{enabled:t}))}PGt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.K2t},{name:t+".is-fullscreen",value:this.Nc.IB().V$t()}]}]}}}{const xI=self._s;xI.EB.se.AB={E3t(){return this.K2t},g3t:()=>!0,y3t:()=>!0,S3t:()=>!0,w3t:()=>!0,v3t:()=>!0,O3t(){return this.s3t},F3t(){return this.t3t},D3t(){return this.Nc.IB().V$t()},x3t:()=>!0,L3t(t){return(this.Nc.IB().Oq()<=this.Nc.IB().Fq()?0:1)===t},T3t:()=>!0,C3t:()=>!0,I3t:()=>!0,_3t:()=>!0,G3t:()=>!0,k3t(){return this.n3t},N3t(t){switch(t){case 0:return"accepted"===this.r3t;case 1:return"dismissed"===this.r3t;case 2:return"error"===this.r3t;case 3:return!0;default:return!1}},P3t:()=>!0,B3t(t){const s=this.Nc.IB().U$t();switch(t){case 0:return"browser"===s;case 1:return"minimal-ui"===s;case 2:return"standalone"===s;case 3:return"fullscreen"===s;default:return!1}},$3t(){return this.A3t()},W3t(){return!this.Nc.oN()},b3t:()=>!0,M3t:()=>!0,V3t:()=>!1,j3t:()=>!1,U3t:()=>!1,z3t:()=>!1,H3t:()=>!1,J3t:()=>!0,q3t:()=>!0}}{const C3=self._s,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.EB.se.Nrt={Y3t(t){this.SGt("alert",{message:t.toString()})},X3t(){this.e3t||(this.Nc.RU()?self.EU.K3t():this.SGt("close"))},Z3t(){this.SGt("set-focus",{isFocus:!0})},Q3t(){this.SGt("set-focus",{isFocus:!1})},t5t(){this.e3t||this.SGt("navigate",{type:"back"})},s5t(){this.e3t||this.SGt("navigate",{type:"forward"})},e5t(){},i5t(){this.e3t||(this.Nc.RU()?this.Nc.vUt({type:"reload"}):this.SGt("navigate",{type:"reload"}))},n5t(t,s){this.vGt("navigate",{type:"url",url:t,target:s,exportType:this.Nc.x$()})},r5t(t,s){this.vGt("navigate",{type:"new-window",url:t,tag:s,exportType:this.Nc.x$()})},h5t(t,s){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const e=C3.DNt.X$t(t);this.Nc.IB().H$t(e),this.vGt("request-fullscreen",{navUI:s})},o5t(){this.vGt("exit-fullscreen")},a5t(t){const s=t.split(",");for(let t=0,e=s.length;t<e;++t)s[t]=parseInt(s[t],10);this.vGt("vibrate",{pattern:s})},async nB(t,s){if(!t||!s)return;const e=await this.Nc.rk().HB(t);this.Nc.nB(e,s)},l5t(t,s,e){if(!e)return;const i=`data:${s},${encodeURIComponent(t)}`;this.Nc.nB(i,e)},u5t(t,s){s=s.toString(),0===t?console.log(s):1===t?console.warn(s):2===t&&console.error(s)},c5t(t){console.group(t)},f5t(){console.groupEnd()},d5t(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},p5t(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const s=ORIENTATIONS[t];this.vGt("lock-orientation",{orientation:s})},m5t(){this.vGt("unlock-orientation")},n$(t){this.Nc.rk().n$(t)},async g5t(t,s,e,i){await this.wGt("set-document-css-style",{prop:C3.bo(t),value:s,selector:e,"is-all":0!==i})},async y5t(t,s,e){const i=await this.wGt("get-document-css-style",{prop:t,selector:s});i.isOk&&this.i3t.set(e.toLowerCase(),i.result.trim())},S5t(t){this.SGt("set-hash",{hash:t})},w5t(t,s){this.SGt("set-window-size",{windowWidth:t,windowHeight:s})},v5t(t,s){this.SGt("set-window-position",{windowX:t,windowY:s})},async b5t(){const t=await this.wGt("request-install");this.r3t=t.result,this.xU(C3.EB.se.AB.N3t)},M5t(t){this.R3t(t)}}}{const C3=self._s;C3.EB.se.Brt={URL(){return this.Nc.Tk()?this.X2t:location.toString()},x5t(){return this.Nc.Tk()?new URL(this.X2t).protocol:location.protocol},T5t(){return this.Nc.Tk()?new URL(this.X2t).hostname:location.hostname},Port(){return this.Nc.Tk()?new URL(this.X2t).port:location.port},C5t(){return this.Nc.Tk()?new URL(this.X2t).pathname:location.pathname},I5t(){return this.Nc.Tk()?new URL(this.X2t).hash:location.hash},Ys(){return this.Nc.Tk()?new URL(this.X2t).search:location.search},_5t(t){const s=this.Nc.Tk()?new URL(this.X2t).search:location.search,e=RegExp("[?&]"+t+"=([^&]*)").exec(s);return e?decodeURIComponent(e[1].replace(/\+/g," ")):""},G5t(){return this.Z2t},P5t(){return this.Q2t},A5t:()=>navigator.language,Zs:()=>navigator.platform,R5t:()=>navigator.userAgent,E5t(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.i3t.get(t)||""},O5t:()=>navigator.appName,F5t:()=>navigator.appVersion,D5t:()=>navigator.product,L5t:()=>navigator.vendor,k5t:()=>1,N5t:()=>1/0,B5t(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},_2t:()=>self.devicePixelRatio,G2t(){return this.H1t},P2t(){return this.J1t},A2t(){return this.Nc.IB().Oq()},R2t(){return this.Nc.IB().Fq()},E2t(){return this.q1t},O2t(){return this.q1t},$5t(){return this.Nc.IB().U$t()},W5t(){return this.r3t}}}{const TI=self._s,CI=[];TI.EB.Audio=class extends TI.y_t{constructor(t){super(t)}V5t(t){CI.push(t)}static async j5t(){await Promise.all(CI),TI.bh(CI)}Hn(){super.Hn()}}}{let II=function(){return AI.wW().RH()},_I=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};GetAudioSdkInstance=II,GetAudioDOMInterface=_I;const GI=self._s,PI=self.Ns;GI.EB.Audio.ORt=class extends GI.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}W_t(){return self.U5t}};let AI=null;self.U5t=class extends self.LW{constructor(t){super(t),AI=t}get z5t(){return _I().GetAudioContextExtern()}get H5t(){return _I().GetDestinationNodeExtern()}get J5t(){return II().q5t()}set J5t(t){II().Y5t(t)}get X5t(){return II().K5t()}set X5t(t){PI.ii(t),II().Z5t(t)}Q5t(){II().t4t()}}}{const RI=self._s,EI="audio",OI=["interactive","balanced","playback"];RI.EB.Audio.Instance=class extends RI.hGt{constructor(t,s){super(t,EI),this.s4t=0,this.e4t=0,this.i4t=[],this.n4t=!0,this.r4t=0,this.h4t=0,this.o4t=!1,this.a4t=1,this.l4t=1,this.u4t=[this.Nc.m1()/2,this.Nc.g1()/2,600],this.c4t=[0,0,-1],this.f4t=[0,1,0],this.d4t=600,this.p4t=1e4,this.m4t=1,this.g4t=null,this.y4t=-1,this.S4t=1,this.w4t=!1,this.v4t=0,this.b4t="suspended",this.M4t=0,this.x4t=new Map,this.T4t=0,this.C4t=0,this.I4t=new Map,this._4t=new Map;let e="interactive";s&&(this.r4t=s[0],this.h4t=s[1],this.o4t=s[2],e=OI[s[3]],this.n4t=s[4],this.a4t=s[5],this.l4t=s[6],this.u4t[2]=s[7],this.d4t=s[8],this.p4t=s[9],this.m4t=s[10]),this.G4t=[],this.P4t=[],this.A4t=[],this.yGt([["state",t=>this.R4t(t)],["audiocontext-state",t=>this.E4t(t)],["fxstate",t=>this.O4t(t)],["trigger",t=>this.F4t(t)],["buffer-metadata",t=>this.D4t(t)]]);const i=this.$B().Sf();this.Xf=new RI.Jf(RI.Wf.Hf(i,"instancedestroy",(t=>this.L4t(t.VH))),RI.Wf.Hf(i,"afterload",(()=>this.E6())),RI.Wf.Hf(i,"suspend",(()=>this.p3t())),RI.Wf.Hf(i,"resume",(()=>this.m3t())));const n=this.Nc.x$(),r="Safari"===RI.Zs.se,h=this.Nc.sHt()||"macos-wkwebview"===n,o=this.Nc.rk()._K(),a="playable-ad-single-file"===this.Nc.x$(),l=r||h||o||a;this.Nc.TB(this.wGt("create-audio-context",{preloadList:this.Nc.rk().lZ().map((t=>({originalUrl:t.uZ,url:t.url,type:t.type,fileSize:t.fileSize}))),timeScaleMode:this.r4t,latencyHint:e,panningModel:this.a4t,distanceModel:this.l4t,refDistance:this.d4t,maxDistance:this.p4t,rolloffFactor:this.m4t,listenerPos:this.u4t,usePlayMusicAsSoundWorkaround:l}).then((t=>{this.v4t=t.sampleRate,this.b4t=t.audioContextState,this.M4t=t.outputLatency}))),this.CGt()}Hn(){this.g4t=null,super.Hn()}k4t(t){return this.n4t?t.split(" ").filter((t=>!!t)):t?[t]:[]}N4t(t,s){for(const e of s){let s=!1;for(const i of t)if(RI.Zi(i,e)){s=!0;break}if(!s)return!1}return!0}B4t(t,s){return this.N4t(t,this.k4t(s))}V5t(t){this.MW().V5t(t)}L4t(t){this.g4t===t&&(this.g4t=null)}$4t(t){return Math.pow(10,t/20)}W4t(t){const s=this.$4t(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}V4t(t){return Math.log(t)/Math.log(10)*20}j4t(t){return this.V4t(Math.max(Math.min(t,1),0))}U4t(){let t=0;const s=!!self.C3_GetAudioContextCurrentTime;return t=s?this.s4t:this.e4t,this.s4t=0,this.e4t=0,{z4t:t,H4t:s}}p3t(){this.o4t||this.SGt("set-suspended",{isSuspended:!0})}m3t(){this.o4t||this.SGt("set-suspended",{isSuspended:!1})}R4t(t){const s=t.tickCount;this.M4t=t.outputLatency;const e=this.G4t.filter((t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.G4t=t.audioInstances,this.A4t=t.analysers,e.length>0&&RI.On(this.G4t,e)}D4t(t){this.I4t.set(t.originalUrl,{duration:t.duration})}E4t(t){this.b4t=t.audioContextState}qrt(){return this.Nc._$t()?"running":this.b4t}O4t(t){this.P4t=t.fxstate}J4t(t){const s=this.k4t(t);for(const t of this.G4t)if(this.N4t(t.tags,s))return t;return null}q4t(t){const s=this.k4t(t);return this.G4t.some((t=>this.N4t(t.tags,s)&&t.isPlaying))}Y4t(t,s,e,i,n){if(this.q4t(s))return null;const r=this.I4t.get(t),h={tags:this.k4t(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:e,isLooping:i,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.G4t.push(h),h}X4t(t){const s=this.k4t(t);for(const t of this.G4t)this.N4t(t.tags,s)&&(t.isPlaying=!1)}async F4t(t){const s=t.type;this.i4t=t.tags;const e=t.aiid;if("ended"===s){for(const t of this.G4t)if(t.aiid===e){t.isPlaying=!1;break}await this.GB(RI.EB.Audio.AB.K4t)}else"fade-ended"===s&&await this.GB(RI.EB.Audio.AB.Z4t)}Q4t(t){return this.B4t(this.i4t,t)}P8(){const t={timeScale:this.Nc.wN(),gameTime:this.Nc.Xzt(),instPans:this.t6t(),tickCount:this.Nc.Kzt()};if(this.g4t){const s=this.g4t.cB();this.u4t[0]=s.zM(),this.u4t[1]=s.qM(),t.listenerPos=this.u4t,t.listenerOrientation=[...this.c4t,...this.f4t]}this.SGt("tick",t)}s6t(t,s,e,i,n){if(0===e)return[t,s];const r=Math.sin(e),h=Math.cos(e),o=(t-=i)*r;return t=t*h-(s-=n)*r,s=s*h+o,[t+=i,s+=n]}t6t(){return this.G4t.filter((t=>-1!==t.uid)).map((t=>this.Nc.hB(t.uid))).filter((t=>t)).map((t=>{const s=t.cB(),e=s.fB().cV(),[i,n]=this.s6t(s.zM(),s.qM(),-e,this.u4t[0],this.u4t[1]);return{uid:t.tU(),x:i,y:n,z:s.cz(),angle:s.cV()-e}}))}e6t(t,s){for(const e of this.A4t)if(e.index===s&&RI.Zi(e.tag,t))return e;return null}i6t(t){for(const s of this.k4t(t)){const t=s.toLowerCase();this.x4t.set(t,(this.x4t.get(t)||0)+1)}}q5t(){return this.w4t}Y5t(t){t=!!t,this.w4t!==t&&(this.w4t=t,this.SGt("set-silent",{isSilent:t}))}K5t(){return this.S4t}Z5t(t){this.S4t!==t&&(this.S4t=t,this.SGt("set-master-volume",{vol:t}))}t4t(){this.SGt("stop-all");for(const t of this.G4t)t.isPlaying=!1}n6t(t){return!(t.hasOwnProperty("placeholder")||3===this.h4t||t.isMusic&&1===this.h4t||!t.isMusic&&2===this.h4t)}hx(){return{isSilent:this.w4t,masterVolume:this.S4t,listenerZ:this.u4t[2],listenerForwardVec:this.c4t,listenerUpVec:this.f4t,listenerUid:this.g4t?this.g4t.tU():-1,remoteUrls:[...this._4t.entries()],playing:this.G4t.filter((t=>this.n6t(t))),effects:this.P4t,analysers:this.A4t}}ox(t){if(this.w4t=t.isSilent,this.S4t=t.masterVolume,this.u4t[2]=t.listenerZ,this.g4t=null,this.y4t=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.c4t=t.listenerForwardVec:this.c4t=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.f4t=t.listenerUpVec:this.f4t=[0,1,0],this._4t.clear(),t.remoteUrls)for(const[s,e]of t.remoteUrls)this._4t.set(s,e);this.G4t=t.playing;for(const t of this.G4t)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter((t=>!!t)));this.P4t=t.effects,this.A4t=t.analysers}E6(){if(-1!==this.y4t&&(this.g4t=this.Nc.hB(this.y4t),this.y4t=-1,this.g4t)){const t=this.g4t.cB();this.u4t[0]=t.zM(),this.u4t[1]=t.qM()}for(const t of this.G4t){const s=this.Nc.rk().aZ(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.P4t))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.Nc.rk().aZ(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this.SGt("load-state",{saveLoadMode:this.h4t,timeScale:this.Nc.wN(),gameTime:this.Nc.Xzt(),listenerPos:this.u4t,listenerOrientation:[...this.c4t,...this.f4t],isSilent:this.w4t,masterVolume:this.S4t,playing:this.G4t.filter((t=>null!==t.bufferUrl)),effects:this.P4t})}PGt(){const t=[];for(const[s,e]of Object.entries(this.P4t))t.push({name:"$"+s,value:e.map((t=>t.type)).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.G4t.length},...this.G4t.map(((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`})))]}]}}}self._s.EB.Audio.AB={K4t(t){return this.Q4t(t)},Z4t(t){return this.Q4t(t)},r6t(){return this.C4t===this.T4t},h6t:()=>!0,o6t(){return this.q5t()},a6t(){for(const t of this.G4t)if(t.isPlaying)return!0;return!1},l6t(t){return this.q4t(t)}};{const FI=self._s,DI=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];FI.EB.Audio.Nrt={Play(t,s,e,i,n){const r=FI.EB.Audio.Nrt.u6t.call(this,t,s,e,i,n);return this.V5t(r),r},Yrt(t,s,e,i){FI.EB.Audio.Nrt.u6t.call(this,t,0,s,0,e,i)},async u6t(t,s,e,i,n,r){if(this.w4t)return;const h=t[1],o=this.Nc.rk().aZ(t[0]);if(!o)return;const{z4t:a,H4t:l}=this.U4t(),u=this.Y4t(t[0],n,h,0!==s,this.W4t(e));try{await this.wGt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.k4t(n),isLooping:0!==s,vol:this.W4t(e),stereoPan:FI.Kn(i/100,-1,1),pos:r||0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.Kzt())}},async c6t(t,s,e,i,n,r,h,o,a,l,u){if(this.w4t)return;const c=t[1],f=this.Nc.rk().aZ(t[0]);if(!f)return;const{z4t:d,H4t:p}=this.U4t(),m=this.Y4t(t[0],u,c,0!==s,this.W4t(e));try{await this.wGt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.k4t(u),isLooping:0!==s,vol:this.W4t(e),pos:0,off:d,trueClock:p,panning:{x:i,y:n,z:r,angle:FI.Qn(h),innerAngle:FI.Qn(o),outerAngle:FI.Qn(a),outerGain:this.W4t(l)}})}finally{m&&(m.placeholder=this.Nc.Kzt())}},async f6t(t,s,e,i,n,r,h,o){if(this.w4t)return;if(!i)return;const a=i.cCt();if(!a||!a.cB())return;const l=a.cB(),u=l.fB().cV(),[c,f]=this.s6t(l.zM(),l.qM(),-u,this.u4t[0],this.u4t[1]),d=t[1],p=this.Nc.rk().aZ(t[0]);if(!p)return;const{z4t:m,H4t:g}=this.U4t(),y=this.Y4t(t[0],o,d,0!==s,this.W4t(e));try{await this.wGt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.k4t(o),isLooping:0!==s,vol:this.W4t(e),pos:0,off:m,trueClock:g,panning:{x:c,y:f,z:l.cz(),angle:l.cV()-u,innerAngle:FI.Qn(n),outerAngle:FI.Qn(r),outerGain:this.W4t(h),uid:a.tU()}})}finally{y&&(y.placeholder=this.Nc.Kzt())}},async d6t(t,s,e,i,n,r){if(this.w4t)return;const h=1===t,o=this.Nc.rk().aZ(s)||this._4t.get(s.toLowerCase());if(!o)return;const{z4t:a,H4t:l}=this.U4t(),u=this.Y4t(s,r,h,0!==e,this.W4t(i));try{await this.wGt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.k4t(r),isLooping:0!==e,vol:this.W4t(i),stereoPan:FI.Kn(n/100,-1,1),pos:0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.Kzt())}},async p6t(t,s,e,i,n,r,h,o,a,l,u,c){if(this.w4t)return;const f=1===t,d=this.Nc.rk().aZ(s)||this._4t.get(s.toLowerCase());if(!d)return;const{z4t:p,H4t:m}=this.U4t(),g=this.Y4t(s,c,f,0!==e,this.W4t(i));try{await this.wGt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.k4t(c),isLooping:0!==e,vol:this.W4t(i),pos:0,off:p,trueClock:m,panning:{x:n,y:r,z:h,angle:FI.Qn(o),innerAngle:FI.Qn(a),outerAngle:FI.Qn(l),outerGain:this.W4t(u)}})}finally{g&&(g.placeholder=this.Nc.Kzt())}},async m6t(t,s,e,i,n,r,h,o,a){if(this.w4t)return;if(this.w4t)return;if(!n)return;const l=n.cCt();if(!l||!l.cB())return;const u=l.cB(),c=u.fB().cV(),[f,d]=this.s6t(u.zM(),u.qM(),-c,this.u4t[0],this.u4t[1]),p=1===t,m=this.Nc.rk().aZ(s)||this._4t.get(s.toLowerCase());if(!m)return;const{z4t:g,H4t:y}=this.U4t(),S=this.Y4t(s,a,p,0!==e,this.W4t(i));try{await this.wGt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.k4t(a),isLooping:0!==e,vol:this.W4t(i),pos:0,off:g,trueClock:y,panning:{x:f,y:d,z:u.cz(),angle:u.cV()-c,innerAngle:FI.Qn(r),outerAngle:FI.Qn(h),outerGain:this.W4t(o),uid:l.tU()}})}finally{S&&(S.placeholder=this.Nc.Kzt())}},g6t(t,s){this.SGt("set-looping",{tags:this.k4t(t),isLooping:0===s})},y6t(t,s){this.SGt("set-muted",{tags:this.k4t(t),isMuted:0===s})},Hrt(t,s){this.SGt("set-volume",{tags:this.k4t(t),vol:this.W4t(s)})},S6t(t,s,e,i){this.SGt("fade-volume",{tags:this.k4t(t),vol:this.W4t(s),duration:e,stopOnEnd:0===i})},w6t(t,s){this.SGt("set-stereo-pan",{tags:this.k4t(t),p:FI.Kn(s/100,-1,1)})},async v6t(t){const s=t[1],e=this.Nc.rk().aZ(t[0]);e&&(this.T4t++,await this.wGt("preload",{originalUrl:t[0],url:e.url,type:e.type,isMusic:s}),this.C4t++)},async b6t(t,s){const e=1===t,i=this.Nc.rk().aZ(s)||this._4t.get(s.toLowerCase());i&&(this.T4t++,await this.wGt("preload",{originalUrl:s,url:i.url,type:i.type,isMusic:e}),this.C4t++)},jJ(t,s){this.SGt("set-playback-rate",{tags:this.k4t(t),rate:Math.max(s,0)})},OJ(t){this.X4t(t),this.SGt("stop",{tags:this.k4t(t)})},M6t(){this.t4t()},x6t(t,s){this.SGt("set-paused",{tags:this.k4t(t),paused:0===s})},T6t(t,s){this.SGt("seek",{tags:this.k4t(t),pos:s})},C6t(t){2===t&&(t=this.q5t()?1:0),this.Y5t(0===t)},I6t(t){const s=this.W4t(t);this.Z5t(s)},_6t(t,s,e,i,n,r,h){const o=DI[s];this.i6t(t),this.SGt("add-effect",{type:"filter",tags:this.k4t(t),params:[o,e,i,n,r,FI.Kn(h/100,0,1)]})},G6t(t,s,e,i){this.i6t(t),this.SGt("add-effect",{type:"delay",tags:this.k4t(t),params:[s,this.W4t(e),FI.Kn(i/100,0,1)]})},P6t(t,s,e,i,n,r){this.i6t(t),this.SGt("add-effect",{type:"flanger",tags:this.k4t(t),params:[s/1e3,e/1e3,i,n/100,FI.Kn(r/100,0,1)]})},A6t(t,s,e,i,n,r,h){this.i6t(t),this.SGt("add-effect",{type:"phaser",tags:this.k4t(t),params:[s,e,i,n,r,FI.Kn(h/100,0,1)]})},R6t(t,s,e,i){const n=this.Nc.rk().aZ(s[0]);n&&(this.i6t(t),this.SGt("add-effect",{type:"convolution",tags:this.k4t(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===e,FI.Kn(i/100,0,1)]}))},E6t(t,s){this.i6t(t),this.SGt("add-effect",{type:"gain",tags:this.k4t(t),params:[this.W4t(s)]})},O6t(t,s){this.i6t(t),this.SGt("add-effect",{type:"stereopan",tags:this.k4t(t),params:[FI.Kn(s/100,-1,1)]})},F6t(t){this.i6t(t),this.SGt("add-effect",{type:"gain",tags:this.k4t(t),params:[0]})},D6t(t,s,e){this.i6t(t),this.SGt("add-effect",{type:"tremolo",tags:this.k4t(t),params:[s,FI.Kn(e/100,0,1)]})},L6t(t,s,e){this.i6t(t),this.SGt("add-effect",{type:"ringmod",tags:this.k4t(t),params:[s,FI.Kn(e/100,0,1)]})},k6t(t,s,e,i,n,r){this.i6t(t),this.SGt("add-effect",{type:"distortion",tags:this.k4t(t),params:[this.$4t(s),this.$4t(e),i,this.$4t(n),FI.Kn(r/100,0,1)]})},N6t(t,s,e,i,n,r){this.i6t(t),this.SGt("add-effect",{type:"compressor",tags:this.k4t(t),params:[s,e,i,n/1e3,r/1e3]})},B6t(t,s,e){this.i6t(t),this.SGt("add-effect",{type:"analyser",tags:this.k4t(t),params:[s,e]})},$6t(t){const s=this.k4t(t);for(const t of s)this.x4t.set(t.toLowerCase(),0);this.SGt("remove-effects",{tags:s}),this.P4t={}},KH(t,s,e,i,n,r){this.SGt("set-effect-param",{tags:this.k4t(t),index:Math.floor(s),param:e,value:i,ramp:n,time:r})},W6t(t){if(!t)return;const s=t.cCt();s&&s.cB()&&(this.g4t=s)},V6t(t){this.u4t[2]=t},j6t(t,s,e,i,n,r){this.c4t[0]=t,this.c4t[1]=s,this.c4t[2]=-e,this.f4t[0]=i,this.f4t[1]=n,this.f4t[2]=-r},U6t(t){this.s4t=Math.max(t,0),this.e4t=Math.max(t-performance.now()/1e3,0)},z6t(t){const s=t[1],e=this.Nc.rk().aZ(t[0]);e&&this.SGt("unload",{url:e.url,type:e.type,isMusic:s})},H6t(t,s){const e=1===t,i=this.Nc.rk().aZ(s)||this._4t.get(s.toLowerCase());i&&this.SGt("unload",{url:i.url,type:i.type,isMusic:e})},J6t(){this.SGt("unload-all")},q6t(t,s,e){this._4t.set(e.toLowerCase(),{url:t,type:s})}}}{const LI=self._s;LI.EB.Audio.Brt={Y6t(t){const s=this.J4t(t);return s?s.duration:0},Vrt(t){const s=this.J4t(t);return s?s.playbackTime:0},Jrt(t){const s=this.J4t(t);return s?s.playbackRate:0},jrt(t){const s=this.J4t(t);return s?this.j4t(s.volume):0},X6t(){return this.j4t(this.K5t())},K6t(t){return this.x4t.get(t.toLowerCase())||0},Z6t(t,s){const e=this.e6t(t,Math.floor(s));return e?e.binCount:0},Q6t(t,s,e){const i=this.e6t(t,Math.floor(s));return i?(e=Math.floor(e))<0||e>=i.binCount?0:i.freqBins[e]:0},t8t(t,s){const e=this.e6t(t,Math.floor(s));return e?e.peak:0},s8t(t,s){const e=this.e6t(t,Math.floor(s));return e?e.rms:0},e8t(){return this.v4t},i8t:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,n8t(){return this.M4t},r8t(t,s){return 0==(t=LI.Kn(+t,0,100)/100)?-1/0:t<.1?this.j4t(LI._t(0,this.W4t(s),10*t)):LI._t(s,0,(t-.1)/.9)}}}{const kI=self._s;kI.EB.h8t=class extends kI.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{const NI=self._s;NI.EB.h8t.ORt=class extends NI.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const BI=self._s;BI.EB.h8t.Instance=class extends BI.hGt{constructor(t,s){super(t,s),this.o8t=!1,this.a8t=s[0],this.l8t=globalThis.u8t,this.l8t.init(this.$B()),this.c8t=null,this.$B().Sf().addEventListener("beforelayoutchange",(()=>{this.l8t.f8t=!1}))}d8t(){this.l8t.p8t={},this.l8t.m8t(),this.l8t.g8t(),this.l8t.y8t(),this.l8t.f8t=!0}S8t(t){for(var s,e,i,n=0,r=[BI.Llt.w8t,BI.Llt.v8t,BI.Llt.b8t,BI.Llt.M8t].length;n<r;n++){const n=this.$B().CVt?this.$B().CVt:this.$B().x8t;if(s=BI?.H$?.HH?BI.H$.HH(BI.Llt.T8t):n.C8t.get(BI.Llt.T8t))for(var h=0,o=(e=s.FW()).length;h<o;h++)if(i=e[h].Pxt().I8t)for(var a in i)i[a]._8t(t)}}G8t(t,s){for(var e=t.MW().constructor,i=0,n=s.length;i<n;i++)if(e==s[i])return!0;return!1}Hn(){super.Hn()}hx(){return{}}ox(t){}}}{const $I=self.TWEEN,WI=self._s;globalThis.P8t={},globalThis.A8t=class{constructor(t,s){this.runtime=s,this.R8t(t),WI.EB.Audio&&(this.E8t=WI.EB.Audio.Nrt.d6t)}R8t(t){t=t.split(";"),this.fileName=t[0],this.volume=parseInt(t[1]),this.volume||(this.volume=0)}O8t(){if(!this.audio){var t=this.runtime.krt(WI.EB.Audio);t&&(this.audio=t.wW().RH())}return this.audio}_8t(t){this.volume=t}play(){if(this.fileName){var t=this.O8t();t?this.E8t.call(t,1,this.fileName,0,this.volume,0,"sound"):console.error("ProUI: Please add the Audio plugin to the project.")}}},globalThis.F8t=class{constructor(t){this.map={},this.D8t=t}on(t,s,e){this.map[t]||(this.map[t]=[]);var i=!1;e&&(i=e.once);var n={callback:s,once:i,eventName:t};return this.map[t].push(n),n}emit(t,s){s=s||{};var e,i=this.map[t];if(i)for(var n=0,r=i.length;n<r;n++)if((e=i[n]).callback(s.args),e.once){if(this.removeListener(e),0==(r=i.length))break;n--}null==s.propagate&&(s.propagate=!0),null==s.bubble&&(s.bubble=!0);var h=Object.assign({},s);(h.propagate=!1,!0===s.bubble&&this.D8t)&&((o=this.D8t.Pxt().T8t).parent&&o.parent.Pxt().T8t.L8t.emit(t,h));if((h=Object.assign({},s)).bubble=!1,!0===s.propagate&&this.D8t){var o,a=(o=this.D8t.Pxt().T8t).children;for(n=0,r=a.length;n<r;n++)a[n].Pxt().T8t.L8t.emit(t,s)}}removeListener(t){var s=this.map[t.eventName],e=s.indexOf(t);s.splice(e,1)}},globalThis.u8t={p8t:{},k8t:!1,N8t:!1,L8t:new globalThis.F8t,c8t:0,init:function(t){this.runtime||(this.runtime=t,this.runtime.Sf().addEventListener("instancedestroy",(function(t){var s=t.VH.Pxt().T8t;s&&s.B8t()})))},$8t:function(){var t;for(t in this.p8t)this.p8t[t].Jq()&&this.W8t(t)},V8t:function(t){if(t&&!this.k8t){var s=t.Pxt().T8t;s.name||(s.name="o"+t.tU());var e=s.name;this.p8t.hasOwnProperty(e)&&(console.error("Aekiro Hierarchy: GameObject already exist with name: %s !",e),s.name="o"+t.tU(),e=s.name),this.p8t[e]=t}},W8t:function(t){delete this.p8t[t]},j8t:function(t,s){if(!this.p8t[t])throw new Error("ProUI-goManager.setGoName() : game object to be renamed not found");if(this.p8t.hasOwnProperty(s))throw new Error("ProUI-goManager.setGoName() : game object already exist with name: "+s);this.p8t[s]=this.p8t[t],this.W8t(t)},getName:function(t){var s;for(s in this.p8t)if(this.p8t[s]==t)return s;return!1},U8t:function(t){var s;for(s in this.p8t)this.p8t[s]==t&&this.W8t(s)},Te:function(t,s,e,i){var n=this.runtime.$W(this.runtime.QUt(t),s,e,i);const r=this.runtime.$k();return r.VW(!0),r.VW(!1),n},clone:function(t,s,e,i,n,r,h){if(!this.p8t[s]){if("string"==typeof e&&(e=this.p8t[e]),e){var o=e.cB(),a=this.z8t(n,r,0,o.zM(),o.qM(),o.cV());n=a.x,r=a.y}var l=this.H8t(t,s,e,i,n,r,h);return l.Pxt().T8t.J8t(),l.Pxt().T8t.q8t(),l.Pxt().T8t.L8t.emit("cloned"),l}console.error("Aekiro GameObject: GameObject already exist with name: %s !",s)},H8t:function(t,s,e,i,n,r,h){this.k8t=!0;var o,a=this.Te(t.type,i);this.k8t=!1;try{o=JSON.parse(t.json)}catch(t){return void console.error("Failed to load from JSON string: ",t)}a.ox(o,!0);var l=a.Pxt().T8t;a.Pxt().Y8t=t.Y8t,a.RH().RGt(l.X8t.lCt,i),l.name="",l.K8t="",s&&(l.name=s),this.V8t(a),e&&e.Pxt().T8t.Z8t(a);var u,c=a.cB();c.HM(n,!0),c.YM(r,!0),c.ZU(),h&&h(a),a.r4();for(var f=0,d=t.children.length;f<d;f++)u=t.children[f],this.H8t(u,null,a,i,u.x,u.y,h);return a},z8t:function(t,s,e,i,n,r){var h={};return h.x=(t-i)*Math.cos(r)+(s-n)*Math.sin(r),h.y=-(t-i)*Math.sin(r)+(s-n)*Math.cos(r),h.angle=e-r,h},m8t:function(){const t=this.runtime.CVt?this.runtime.CVt:this.runtime.x8t;var s;if(s=WI?.H$?.HH?WI.H$.HH(WI.Llt.T8t):t.C8t.get(WI.Llt.T8t))for(var e=s.FW(),i=e.length,n=0;n<i;n++)e[n].Jq()||this.V8t(e[n])},y8t:function(){var t,s,e,i={};for(t in this.p8t)(e=(s=this.p8t[t]).Pxt().T8t).K8t&&this.p8t[e.K8t]&&this.p8t[e.K8t].Pxt().T8t.Z8t(s),e.Q8t&&(i[t]=s);for(t in i)(e=(s=i[t]).Pxt().T8t).t7t(e.cB().fB());for(t in this.p8t)this.p8t[t].Pxt().T8t.J8t();this.L8t.emit("childrenRegistred")},g8t:function(){var t;for(t in this.p8t)this.p8t[t].Pxt().T8t.Jz()}},globalThis.P8t.button=class extends WI.TPt{constructor(t,s){super(t)}s7t(){this.e7t=this.$B().krt(WI.EB.h8t),this.e7t&&(this.e7t=this.e7t.wW().RH()),this.e7t.G8t(this.jH(),[WI.EB.rrt,WI.EB.i7t,WI.EB.n7t],"Pro UI: Button behavior is only applicable to Sprite, 9-patch or tiled backgrounds objects."),this.D8t=this.jH(),this.r7t=this.D8t.cB(),this.l8t=globalThis.u8t,this.h7t=globalThis.o7t.h7t,this.a7t=globalThis.a7t,this.jH().Pxt().w8t=this,this.l7t=this.jH().MW().constructor==WI.EB.rrt,this.u7t={c7t:0,f7t:1,d7t:2,DISABLED:3,p7t:4},this.m7t=WI.Zs.oe,this.g7t=!1,this.y7t=!1,this.S7t=!1,this.w7t=[],this.v7t=[],this.b7t={M7t:null,animationName:null,color:null},this.x7t={x:0,y:0}}_Pt(){this.T8t=this.jH().Pxt().T8t,this.T7t=this.jH().RH(),this.C7t=this.T7t.RGt,this.I7t=this.T7t.EGt,this._7t=this.jH().MW().constructor.Nrt,this.G7t=this.jH().MW().constructor.Brt,this.P7t(),this.A7t()}P7t(){this.R7t=!0,(!this.l7t||""==this.E7t&&""==this.O7t&&""==this.F7t&&""==this.D7t)&&(this.R7t=!1),this.state=this.isEnabled?this.u7t.c7t:this.u7t.DISABLED,this.L7t(),this.k7t(),this.N7t(),this.B7t(),this.$7t()}W7t(){var t=this.b7t.color;this.b7t.color=new WI.To,this.b7t.color.Sa(t)}V7t(){this.j7t(this.state),this.setColor(this.state)}A7t(){this.U7t=!0,this.CGt()}setEnabled(t){this.isEnabled!=t&&(this.isEnabled=t,this.state=t?this.u7t.c7t:this.u7t.DISABLED,this.j7t(this.state),this.setColor(this.state))}z7t(t,s){var e,i;return null==t&&(t=""),t=t.split("/"),isNaN(parseInt(t[0]))?(i=t[0],e=parseInt(t[1])):(i=t[1],e=parseInt(t[0])),isNaN(e)&&(e=s?s.f:this.b7t.M7t),isNaN(i)&&i||(i=s?s.a:this.b7t.animationName),{f:e,a:i}}H7t(t,s){return t?(t=t.split(","),t=new WI.To(t[0]/255,t[1]/255,t[2]/255,1)):t=void 0!==s?s:this.b7t.color,t}k7t(){var t=this.jH().Pxt();t.I8t||(t.I8t={});var s=globalThis.A8t;this.I8t=t.I8t,this.I8t.click=new s(this.J7t,this.$B()),this.I8t.q7t=new s(this.Y7t,this.$B()),this.I8t.focus=new s(this.X7t,this.$B())}$7t(){this.K7t=[],this.K7t[this.u7t.c7t]=this.H7t(this.Z7t),this.K7t[this.u7t.f7t]=this.H7t(this.Q7t,null),this.K7t[this.u7t.d7t]=this.H7t(this.t9t,null),this.K7t[this.u7t.DISABLED]=this.H7t(this.s9t),this.K7t[this.u7t.p7t]=this.H7t(this.e9t,null)}setColor(t){var s;this.S7t?this.state==this.u7t.c7t?s=this.K7t[this.u7t.p7t]||this.K7t[this.u7t.c7t]:(s=this.K7t[t]||this.K7t[this.u7t.p7t],this.K7t[t]||this.K7t[this.u7t.p7t]||(s=this.K7t[this.u7t.c7t])):s=this.K7t[t],s&&(this.r7t.bz(s),this.r7t.ZU())}L7t(){this.l7t&&(this.b7t.M7t=null===this.b7t.M7t?this.T7t.EGt(this.G7t.i9t):this.b7t.M7t,this.b7t.animationName=this.b7t.animationName||this.T7t.EGt(this.G7t.n9t)),this.b7t.color=this.b7t.color||this.r7t.vz()}N7t(){this.R7t&&(this.v7t[this.u7t.c7t]=this.z7t(this.E7t),this.v7t[this.u7t.f7t]=this.z7t(this.O7t,{f:null,a:null}),this.v7t[this.u7t.d7t]=this.z7t(this.F7t,{f:null,a:null}),this.v7t[this.u7t.DISABLED]=this.z7t(this.D7t),this.v7t[this.u7t.p7t]=this.z7t(this.r9t,{f:null,a:null}))}j7t(t){var s,e;this.R7t&&(this.S7t?this.state==this.u7t.c7t?(s=null===this.v7t[this.u7t.p7t].f?this.v7t[this.u7t.c7t].f:this.v7t[this.u7t.p7t].f,e=this.v7t[this.u7t.p7t].a||this.v7t[this.u7t.c7t].a):null!=this.v7t[t].f||this.v7t[t].a?(s=null===this.v7t[t].f?this.v7t[this.u7t.p7t].f:this.v7t[t].f,e=this.v7t[t].a||this.v7t[this.u7t.p7t].a):(s=this.v7t[this.u7t.c7t].f,e=this.v7t[this.u7t.c7t].a):(s=this.v7t[t].f,e=this.v7t[t].a),e&&this.T7t.RGt(this._7t.h9t,e,0),null!==s&&this.T7t.RGt(this._7t.o9t,s,0))}B7t(){this.a9t={x:0,y:0,width:0,height:0},this.l9t={x:0,y:0,width:0,height:0},this.u9t=new $I.Tween(this.a9t)}c9t(t){this.f9t={x:this.a9t.x,y:this.a9t.y,width:this.a9t.width,height:this.a9t.height},1==t?this.u9t.easing($I.Easing.Quadratic.Out).to(this.l9t,200):2==t?this.u9t.easing($I.Easing.Elastic.Out).to(this.l9t,500):(3==t||4==t||5==t||6==t)&&this.u9t.easing($I.Easing.Quadratic.Out).to(this.l9t,100)}d9t(t,s){var e=this.r7t,i={x:0,y:0,width:0,height:0},n=.1;return"click"==s?n=this.p9t:"hover"==s?n=this.m9t:"focus"==s&&(n=this.g9t),1==t||2==t?(i.width=e.Vg()*n,i.height=e.Zg()*n):3==t?i.y=e.Zg()*n:4==t?i.y=-e.Zg()*n:5==t?i.x=-e.Vg()*n:6==t&&(i.x=e.Vg()*n),i}y9t(t,s){this.r7t.Oz(t,s)&&this.S9t(t,s)}w9t(t,s){this.m7t||(this.r7t.Oz(t,s)?this.y7t||this.v9t(t,s):this.y7t&&this.b9t())}M9t(t){this.isEnabled&&t!=this.S7t&&(this.S7t=t,t?(this.j7t(this.state),this.setColor(this.state),this.I8t.focus.play(),this.x9t>0&&(this.u9t.stop(),this.T9t=this.d9t(this.x9t,"focus"),this.l9t.width+=this.T9t.width,this.l9t.height+=this.T9t.height,this.l9t.x+=this.T9t.x,this.l9t.y+=this.T9t.y,this.c9t(this.x9t),this.CGt(),this.u9t.start(1e3*this.$B().yN())),this.C9t&&this.C9t()):(this.j7t(this.u7t.c7t),this.setColor(this.u7t.c7t),this.j7t(this.state),this.setColor(this.state),this.x9t>0&&(this.u9t.stop(),this.l9t.width-=this.T9t.width,this.l9t.height-=this.T9t.height,this.l9t.x-=this.T9t.x,this.l9t.y-=this.T9t.y,this.c9t(this.x9t),this.CGt(),this.u9t.start(1e3*this.$B().yN())),this.I9t&&this.I9t()))}v9t(t,s){if(this._9t(t,s)&&!this.g7t&&(this.y7t=!0,this.state=this.u7t.f7t,this.j7t(this.state),this.setColor(this.state),this.I8t.q7t.play(),this.G9t&&this.G9t(),this.P9t>0)){this.r7t;this.u9t.stop(),this.A9t=this.d9t(this.P9t,"hover"),this.l9t.width+=this.A9t.width,this.l9t.height+=this.A9t.height,this.l9t.x+=this.A9t.x,this.l9t.y+=this.A9t.y,this.c9t(this.P9t),this.CGt(),this.u9t.start(1e3*this.$B().yN())}}async S9t(t,s){this._9t(t,s)&&!this.g7t&&(this.g7t=!0,this.x7t.x=t,this.x7t.y=s,this.R9t>0&&(this.u9t.stop(),this.E9t=this.d9t(this.R9t,"click"),this.l9t.width+=this.E9t.width,this.l9t.height+=this.E9t.height,this.l9t.x+=this.E9t.x,this.l9t.y+=this.E9t.y,this.c9t(this.R9t),this.CGt(),this.u9t.start(1e3*this.$B().yN())),!this.S7t&&this.x9t>0&&(this.u9t.stop(),this.T9t=this.d9t(this.x9t,"focus"),this.l9t.width+=this.T9t.width,this.l9t.height+=this.T9t.height,this.l9t.x+=this.T9t.x,this.l9t.y+=this.T9t.y,this.c9t(this.x9t),this.CGt(),this.u9t.start(1e3*this.$B().yN())),this.S7t||this.C9t&&this.C9t(),this.S7t=!0,this.state=this.u7t.d7t,this.j7t(this.state),this.setColor(this.state),this.I8t.click.play())}async O9t(t,s){if(this.g7t){if(this.g7t=!1,this.R9t>0&&this.state!=this.u7t.c7t&&(this.u9t.stop(),this.l9t.width-=this.E9t.width,this.l9t.height-=this.E9t.height,this.l9t.x-=this.E9t.x,this.l9t.y-=this.E9t.y,this.c9t(this.R9t),this.CGt(),this.u9t.start(1e3*this.$B().yN())),this.r7t.Oz(t,s)){if(this.m7t?this.state=this.u7t.c7t:this.state=this.u7t.f7t,this.F9t()&&(Math.abs(this.x7t.x-t)>10||Math.abs(this.x7t.y-s)>10))return;this.D9t()}else this.state=this.u7t.c7t;this.j7t(this.state),this.setColor(this.state)}}D9t(){for(var t=0,s=this.w7t.length;t<s;t++)this.w7t[t]();this.L9t&&this.L9t()}b9t(){this.y7t=!1,this.state!=this.u7t.DISABLED&&(this.state=this.u7t.c7t),this.j7t(this.state),this.setColor(this.state),this.P9t>0&&(this.l9t.width-=this.A9t.width,this.l9t.height-=this.A9t.height,this.l9t.x-=this.A9t.x,this.l9t.y-=this.A9t.y),this.R9t>0&&this.g7t&&(this.l9t.width-=this.E9t.width,this.l9t.height-=this.E9t.height,this.l9t.x-=this.E9t.x,this.l9t.y-=this.E9t.y),(this.P9t>0||this.R9t>0&&this.g7t)&&(this.u9t.stop(),this.u9t.easing($I.Easing.Quadratic.Out).to(this.l9t,100),this.CGt(),this.u9t.start(1e3*this.$B().yN())),this.k9t&&this.k9t()}N9t(t){this.o8t=t}P8(){if(this.U7t)return this.V7t(),this.lGt(),void(this.U7t=!1);if(this.B9t&&(this.B9t=!1),this.u9t.isPlaying&&(this.u9t.update(1e3*this.$B().yN()),this.B9t=!0),this.B9t){var t=this.r7t;this.r7t.sz(this.a9t.x-this.f9t.x,this.a9t.y-this.f9t.y),this.r7t.TA(t.Vg()+this.a9t.width-this.f9t.width,t.Zg()+this.a9t.height-this.f9t.height),this.r7t.ZU(),this.f9t={x:this.a9t.x,y:this.a9t.y,width:this.a9t.width,height:this.a9t.height}}else this.lGt()}_9t(t,s){if(void 0!==t&&void 0!==s||(t=this.r7t.pz().Za()+10,s=this.r7t.pz().Qa()+10),1===this.o8t||this.e7t.o8t)return!1;if(0==this.o8t)return!0;var e=this.r7t.fB().YV()&&this.r7t.YV(),i=this.$9t(t,s),n=!1;return 2===this.o8t&&this.a7t&&(n=this.a7t.W9t(this.r7t.fB().tk())),this.isEnabled&&e&&!n&&i}$9t(t,s){var e=!0,i=this.h7t["l"+this.D8t.cB().fB().tk()];return i&&(e=i.cB().Oz(t,s)),e}F9t(){return!!this.h7t["l"+this.D8t.cB().fB().tk()]}V9t(t){null==t&&(t=20);var s=this.h7t["l"+this.D8t.cB().fB().tk()];return!!s&&new Promise((e=>{setTimeout((()=>{s.Pxt().U9t.j9t()?(console.log("moving"),e(!0)):e(!1)}),t)}))}Hn(){super.Hn()}},globalThis.P8t.button.AB={v9t:()=>!0,b9t:()=>!0,Iu(){return this.isEnabled},z9t(){return this._9t()},H9t:()=>!0,J9t:()=>!0,zIt(){return this.S7t},q9t:()=>!0},globalThis.P8t.button.Nrt={setEnabled(t){this.setEnabled(t)},Y9t(t){this.M9t(t)},X9t(t){this.N9t(t)},K9t(t){this.I8t.click._8t(t)},Z9t(t){this.I8t.q7t._8t(t)},Q9t(){if(!this.g7t){var t=this.r7t.pz().Za()+10,s=this.r7t.pz().Qa()+10;this.S9t(t,s),setTimeout((()=>{t=this.r7t.pz().Za()-50,s=this.r7t.pz().Qa()-50,this.O9t(t,s),this.D9t()}),100)}},tts(t){this.E7t=t,this.N7t(),this.j7t(this.state)},sts(t){this.O7t=t,this.N7t()},ets(t){this.F7t=t,this.N7t()},its(t){this.D7t=t,this.N7t()},nts(t){this.r9t=t,this.N7t()},rts(t){this.R9t=t,this.B7t()},hts(t){this.P9t=t,this.B7t()},ots(t){this.x9t=t,this.B7t()},ats(t){this.Z7t=t,this.$7t()},lts(t){this.Q7t=t,this.$7t()},uts(t){this.t9t=t,this.$7t()},cts(t){this.e9t=t,this.$7t()}},globalThis.P8t.fts=class extends globalThis.P8t.button{constructor(t,s){super(t,s)}dts(){this.s7t(),this.v7t=[[],[]]}N7t(){if(this.R7t=!0,!this.l7t||""==this.E7t&&""==this.O7t&&""==this.D7t)this.R7t=!1;else{this.pts=this.T7t.EGt(this.G7t.i9t),this.mts=this.T7t.EGt(this.G7t.n9t);var t=this.E7t.split(",");this.v7t[0][this.u7t.c7t]=this.z7t(t[0]),this.v7t[1][this.u7t.c7t]=this.z7t(t[1]),t=this.O7t.split(","),this.v7t[0][this.u7t.f7t]=this.z7t(t[0],{f:null,a:null}),this.v7t[1][this.u7t.f7t]=this.z7t(t[1],{f:null,a:null}),t=this.D7t.split(","),this.v7t[0][this.u7t.DISABLED]=this.z7t(t[0]),this.v7t[1][this.u7t.DISABLED]=this.z7t(t[1]),t=this.r9t.split(","),this.v7t[0][this.u7t.p7t]=this.z7t(t[0],{f:null,a:null}),this.v7t[1][this.u7t.p7t]=this.z7t(t[1],{f:null,a:null})}}j7t(t){if(this.R7t){t==this.u7t.d7t&&(t=this.u7t.c7t);var s,e,i=this.value?1:0;this.S7t?this.state==this.u7t.c7t?(s=null===this.v7t[i][this.u7t.p7t].f?this.v7t[i][this.u7t.c7t].f:this.v7t[i][this.u7t.p7t].f,e=this.v7t[i][this.u7t.p7t].a||this.v7t[i][this.u7t.c7t].a):null!=this.v7t[i][t].f||this.v7t[i][t].a?(s=null===this.v7t[i][t].f?this.v7t[i][this.u7t.p7t].f:this.v7t[i][t].f,e=this.v7t[i][t].a||this.v7t[i][this.u7t.p7t].a):(s=this.v7t[i][this.u7t.c7t].f,e=this.v7t[i][this.u7t.c7t].a):(s=this.v7t[i][t].f,e=this.v7t[i][t].a),e&&this.T7t.RGt(this._7t.h9t,e,0),null!==s&&this.T7t.RGt(this._7t.o9t,s,0)}}$7t(){var t;this.gts=this.r7t.vz(),this.K7t=[[],[]],t=this.Z7t.split(";"),this.K7t[0][this.u7t.c7t]=this.H7t(t[0]),this.K7t[1][this.u7t.c7t]=this.H7t(t[1],this.K7t[0][this.u7t.c7t]),t=this.Q7t.split(";"),this.K7t[0][this.u7t.f7t]=this.H7t(t[0],null),this.K7t[1][this.u7t.f7t]=this.H7t(t[1],this.K7t[0][this.u7t.f7t]),t=this.t9t.split(";"),this.K7t[0][this.u7t.d7t]=this.H7t(t[0],null),this.K7t[1][this.u7t.d7t]=this.H7t(t[1],this.K7t[0][this.u7t.d7t]),t=this.s9t.split(";"),this.K7t[0][this.u7t.DISABLED]=this.H7t(t[0]),this.K7t[1][this.u7t.DISABLED]=this.H7t(t[1]),this.K7t[0][this.u7t.DISABLED],t=this.e9t.split(";"),this.K7t[0][this.u7t.p7t]=this.H7t(t[0],null),this.K7t[1][this.u7t.p7t]=this.H7t(t[1],this.K7t[0][this.u7t.p7t])}setColor(t){var s,e=this.value?1:0;this.S7t?this.state==this.u7t.c7t?s=this.K7t[e][this.u7t.p7t]||this.K7t[e][this.u7t.c7t]:(s=this.K7t[e][t]||this.K7t[e][this.u7t.p7t],this.K7t[e][t]||this.K7t[e][this.u7t.p7t]||(s=this.K7t[e][this.u7t.c7t])):s=this.K7t[e][t],s&&(this.r7t.bz(s),this.r7t.ZU())}yts(t){return null!=t&&""!==t}Sts(t){t=(t=!!t)?1:0,this.value!=t&&(this.value=t,this.j7t(this.state),this.setColor(this.state))}},globalThis.o7t={h7t:{},add:function(t){this.h7t["l"+t.cB().fB().tk()]=t},remove:function(t){for(var s in this.h7t)this.h7t[s]==t&&delete this.h7t[s]},wts:function(t,s,e){for(var i,n=t.$B().jN().S5(),r=!1,h=t.cB().fB().tk()+1,o=n;h<o;h++)if(i=this.h7t["l"+h]){if(!i.cB().fB().YV())continue;if(i.cB().Oz(s,e)){r=!0;break}}return r}},globalThis.a7t={vts:[],bts:function(t){this.vts.push(t)},Mts:function(t){var s=this.vts.indexOf(t);-1!=s&&this.vts.splice(s,1)},xts:function(){return this.vts.length},Tts:function(){for(var t=0;t<this.vts.length;t++)if(this.vts[t].Pxt().M8t.Cts)return!0;return!1},Its:function(t){for(var s=0,e=this.vts.length;s<e;s++)if(t<this.vts[s].cB().fB().tk())return!0;return!1},W9t:function(t){for(var s,e=0,i=this.vts.length;e<i;e++)if(t<(s=this.vts[e]).cB().fB().tk()&&s.Pxt().M8t.Cts)return!0;return!1}}}{const VI=self._s;VI.EB.h8t.AB={_ts:()=>globalThis.a7t.xts(),Gts:()=>!0}}{const jI=self._s;jI.EB.h8t.Nrt={Pts(t){this.o8t=t},JRt(t,s,e,i,n,r){t=JSON.parse(t),globalThis.u8t.clone(t,n,r,s,e,i).Pxt().T8t.q8t()},Ats(t){this.S8t(t)},eOt(){this.d8t()}}}{const UI=self._s;UI.EB.h8t.Brt={}}{const zI=self._s;zI.EB.Rts=class extends zI.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{const HI=self._s;HI.EB.Rts.ORt=class extends HI.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const JI=self._s;JI.EB.Rts.Instance=class extends JI.hGt{constructor(t,s){if(super(t),this.Ets="",this.Ots=0,this.Fts="",this.Dts=0,this.Lf=-1,this.Lts=new Map,this.kts=null,this.Nts="",this.Bts=!1,this.$ts=null,this.Wts=null,this.Vts=null,this.XWt=this.Nc.T$(),this.XWt){this.$ts=__require("fs"),this.Wts=__require("path");const t=self.process||nw.process;this.Vts=this.Wts.dirname(t.execPath)+"\\"}}Hn(){super.Hn()}async jts(t,s,e){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,e),this.Fts=t,await this.GB(JI.EB.Rts.AB.Uts),this.Fts=t,await this.GB(JI.EB.Rts.AB.i0t)}async zts(t){this.Fts=t,await this.GB(JI.EB.Rts.AB.Hts),this.Fts=t,await this.GB(JI.EB.Rts.AB.Jts)}async qts(t,s){s.lengthComputable&&(this.Dts=s.loaded/s.total,this.Fts=t,await this.GB(JI.EB.Rts.AB.Yts))}async Xts(t,s){s.lengthComputable&&(this.Dts=s.loaded/s.total,this.Fts=t,await this.GB(JI.EB.Rts.AB.Kts))}Zts(t,s,e){if(!this.XWt)return void this.jts(t,s,e);const i=this.$ts,n=this.Vts+s;i.existsSync(n)?i.readFile(n,{encoding:"utf8"},((e,i)=>{e?this.jts(t,s,e):(this.Ets=i.replace(/\r\n/g,"\n"),this.zts(t))})):this.jts(t,s,e)}async Qts(t,s){const e=this.Nc.rk(),i=this.kts;this.kts=null;try{if(i){const n=await e.PK(s);i._0t(n),this.Ets="",this.Ots=0,this.zts(t)}else{const i=await e.AK(s);this.Ets=i.replace(/\r\n/g,"\n"),this.Ots=0,this.zts(t)}}catch(e){this.jts(t,s,e)}}tss(t,s,e,i){return new Promise((n=>{const r=e=>{this.Zts(t,s,e),n()},h=this.kts;this.kts=null;try{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(this.Ets=h?"":(o.responseText||"").replace(/\r\n/g,"\n"),this.Ots=o.status,o.status>=400)this.jts(t,s,o.status+o.statusText);else{const s=this.Ets.length||h&&o.response instanceof ArrayBuffer;this.XWt&&!s||!this.XWt&&0===o.status&&!s||(h&&h._0t(o.response),this.zts(t))}n()}},o.onerror=r,o.ontimeout=r,o.onabort=r,o.onprogress=s=>this.qts(t,s),o.upload.onprogress=s=>this.Xts(t,s),o.open(e,s),this.Lf>=0&&void 0!==o.timeout&&(o.timeout=this.Lf),o.responseType=h?"arraybuffer":"text",i&&!this.Lts.has("Content-Type")&&("string"!=typeof i?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[t,s]of this.Lts)try{o.setRequestHeader(t,s)}catch(e){console.error(`[Construct] AJAX: Failed to set header '${t}: ${s}': `,e)}if(this.Lts.clear(),this.Nts){try{o.overrideMimeType(this.Nts)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.Nts=""}this.Bts&&(o.withCredentials=!0,this.Bts=!1),i?o.send(i):o.send()}catch(t){r(t)}}))}PGt(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.Ots},{name:t+".last-data",value:this.Ets}]}]}hx(){return{lastData:this.Ets,lastStatusCode:this.Ots}}ox(t){this.Ets=t.lastData,this.Ots=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.Fts="",this.Dts=0}}}{const qI=self._s;qI.EB.Rts.AB={Jts(t){return qI.Zi(this.Fts,t)},Hts:()=>!0,i0t(t){return qI.Zi(this.Fts,t)},Uts:()=>!0,Yts(t){return qI.Zi(this.Fts,t)},Kts(t){return qI.Zi(this.Fts,t)}}}{const YI=self._s;YI.EB.Rts.Nrt={async Request(t,s){this.Nc.$Wt()&&YI.Zh(s)&&this.Nc.rk()._K()?await this.Qts(t,s):await this.tss(t,s,"GET",null)},async sss(t,s){this.Nc.$Wt()&&this.Nc.rk()._K()?await this.Qts(t,s):await this.tss(t,s,"GET",null)},async ess(t,s,e,i){await this.tss(t,s,i,e)},async iss(t,s,e,i){if(!e)return;const n=e.cCt(this.fe);if(!n)return;const r=n.RH().T0t();await this.tss(t,s,i,r)},nss(t){this.Lf=1e3*t},rss(t,s){this.Lts.set(t,s)},hss(t){if(!t)return;const s=t.cCt(this.fe);s&&(this.kts=s.RH())},oss(t){this.Nts=t},ass(t){this.Bts=!!t}}}self._s.EB.Rts.Brt={lss(){return this.Ets},uss(){return this.Ots},css(){return this.Dts},Tag(){return this.Fts}};{const XI=self._s;XI.EB.Touch=class extends XI.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{let KI=function(){return t_.wW().RH()};GetTouchSdkInstance=KI;const ZI=self._s,QI=self.Ns;ZI.EB.Touch.ORt=class extends ZI.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}W_t(){return self.fss}};let t_=null;self.fss=class extends self.LW{constructor(t){super(t),t_=t,t.$B().QN().sB=this}requestPermission(t){QI.oi(t);const s=KI();if("orientation"===t)return s.dss(0);if("motion"===t)return s.dss(1);throw new Error("invalid type")}}}{const s_=self._s,e_="touch";s_.EB.Touch.Instance=class extends s_.hGt{constructor(t,s){super(t,e_),this.pss=new Map,this.mss=!1,this.gss=!1,this.yss=0,this.Sss=0,this.wss=0,this.vss=0,this.bss=0,this.Mss=0,this.xss=0,this.Tss=0,this.Css=0,this.Iss=0,this._ss=0,this.Gss=0,this.Pss=0,this.Ass=0,this.Rss=0,this.Ess=0,this.s1t=0,this.Oss=[],s&&(this.mss=s[0]),this.gGt("permission-result",(t=>this.Fss(t)));const e=this.$B().Sf();this.Xf=new s_.Jf(s_.Wf.Hf(e,"pointerdown",(t=>this.f1t(t.data))),s_.Wf.Hf(e,"pointermove",(t=>this.c1t(t.data))),s_.Wf.Hf(e,"pointerup",(t=>this.d1t(t.data,!1))),s_.Wf.Hf(e,"pointercancel",(t=>this.d1t(t.data,!0))),s_.Wf.Hf(e,"deviceorientation",(t=>this.Dss(t.data))),s_.Wf.Hf(e,"deviceorientationabsolute",(t=>this.Lss(t.data))),s_.Wf.Hf(e,"devicemotion",(t=>this.kss(t.data))),s_.Wf.Hf(e,"tick2",(t=>this.M6())))}Hn(){this.pss.clear(),super.Hn()}f1t(t){if("mouse"===t.pointerType){if(!this.mss)return;this.gss=!0}const s=t.pointerId;if(this.pss.has(s))return;const e=t.pageX-this.Nc.A$(),i=t.pageY-this.Nc.E$(),n=performance.now(),r=this.pss.size;this._ss=r,this.Gss=s;const h=s_.zn(s_.EB.Touch.Nss);h.eOt(n,e,i,s,r),this.pss.set(s,h),this.xU(s_.EB.Touch.AB.Bss),this.xU(s_.EB.Touch.AB.$ss),this.Ass=e,this.Rss=i,this.s1t=0,this.xU(s_.EB.Touch.AB.Wss)}c1t(t){if("mouse"===t.pointerType&&!this.gss)return;const s=this.pss.get(t.pointerId);if(!s)return;const e=performance.now();if(e-s._F()<2)return;const i=t.pageX-this.Nc.A$(),n=t.pageY-this.Nc.E$();s.XZ(e,i,n,t.width,t.height,t.pressure)}d1t(t,s){if("mouse"===t.pointerType){if(!this.gss)return;this.gss=!1}const e=performance.now(),i=t.pointerId,n=this.pss.get(i);if(n){if(this._ss=n.Vss(),this.Gss=n.oq(),!s){const s=t.pageX-this.Nc.A$(),e=t.pageY-this.Nc.E$();this.Ass=s,this.Rss=e,this.s1t=1,this.xU(s_.EB.Touch.AB.Wss)}if(this.xU(s_.EB.Touch.AB.jss),this.xU(s_.EB.Touch.AB.Uss),!s){const t=n.zss(e);"single-tap"===t?(this.xU(s_.EB.Touch.AB.Hss),this.Ass=n.zM(),this.Rss=n.qM(),this.xU(s_.EB.Touch.AB.Jss)):"double-tap"===t&&(this.xU(s_.EB.Touch.AB.qss),this.Ass=n.zM(),this.Rss=n.qM(),this.xU(s_.EB.Touch.AB.Yss))}n.Hn(),this.pss.delete(i)}}dss(t){return this.vGt("request-permission",{type:t}),new Promise(((s,e)=>{this.Oss.push({type:t,resolve:s,reject:e})}))}Fss(t){const s=t.result,e=t.type;this.Pss=e;const i=this.Oss.filter((t=>t.type===e));for(const t of i)t.resolve(s?"granted":"denied");this.Oss=this.Oss.filter((t=>t.type!==e)),s?(this.xU(s_.EB.Touch.AB.Xss),0===e?this.Nc.LHt():this.Nc.kHt()):this.xU(s_.EB.Touch.AB.Kss)}Dss(t){"number"==typeof t.webkitCompassHeading?this.yss=t.webkitCompassHeading:t.absolute&&(this.yss=t.alpha),this.Sss=t.alpha,this.wss=t.beta,this.vss=t.gamma}Lss(t){this.yss=t.alpha}kss(t){const s=t.acceleration;s&&(this.bss=s.x,this.Mss=s.y,this.xss=s.z);const e=t.accelerationIncludingGravity;e&&(this.Tss=e.x,this.Css=e.y,this.Iss=e.z)}M6(){const t=performance.now();let s=0;for(const e of this.pss.values())e._F()<=t-50&&e.Zss(t),e.Qss(t)&&(this._ss=e.Vss(),this.Gss=e.oq(),this.Ess=s,this.xU(s_.EB.Touch.AB.tes),this.Ass=e.zM(),this.Rss=e.qM(),this.xU(s_.EB.Touch.AB.ses),this.Ess=0),++s}ees(t){t=Math.floor(t);for(const s of this.pss.values()){if(0===t)return s;--t}return null}ies(t,s){return t>=0&&s>=0&&t<this.Nc.ezt()&&s<this.Nc.izt()}PGt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.pss.values()].map((t=>({name:"$"+t.oq(),value:t.zM()+", "+t.qM()})))}]}}}{const i_=self._s;i_.EB.Touch.AB={$ss:()=>!0,Uss:()=>!0,nes(){return this.pss.size>0},Wss(t,s){return!!t&&s===this.s1t&&!!this.ies(this.Ass,this.Rss)&&this.Nc.lk().Hkt(t,[[this.Ass,this.Rss]],!1)},res(t){if(!t)return!1;const s=this.Nc.sgt().xxt(),e=[...this.pss.values()].filter((t=>this.ies(t.zM(),t.qM()))).map((t=>[t.zM(),t.qM()]));return i_.xor(this.Nc.lk().Hkt(t,e,s),s)},hes(t,s,e){const i=this.ees(t);return!!i&&i_.compare(i.QH(),s,e)},oes:()=>!0,aes:()=>!0,les(t,s,e){this.Nc.LHt();let i=0;return i=0===t?this.Sss:1===t?this.wss:this.vss,i_.compare(i,s,e)},ues(t,s,e){this.Nc.kHt();let i=0;return i=0===t?this.Tss:1===t?this.Css:2===t?this.Iss:3===t?this.bss:4===t?this.Mss:this.xss,i_.compare(i,s,e)},Bss(t){return(t=Math.floor(t))===this._ss},jss(t){return(t=Math.floor(t))===this._ss},ces(t){return t=Math.floor(t),this.pss.size>=t+1},tes:()=>!0,Hss:()=>!0,qss:()=>!0,ses(t){return!!t&&!!this.ies(this.Ass,this.Rss)&&this.Nc.lk().Hkt(t,[[this.Ass,this.Rss]],!1)},Jss(t){return!!t&&!!this.ies(this.Ass,this.Rss)&&this.Nc.lk().Hkt(t,[[this.Ass,this.Rss]],!1)},Yss(t){return!!t&&!!this.ies(this.Ass,this.Rss)&&this.Nc.lk().Hkt(t,[[this.Ass,this.Rss]],!1)},Xss(t){return this.Pss===t},Kss(t){return this.Pss===t}}}self._s.EB.Touch.Nrt={fes(t){this.dss(t)}};{const n_=self._s;n_.EB.Touch.Brt={des(){return this.pss.size},PIt(t){const s=this.ees(this.Ess);return s?s.pes(this.Nc.lB(),t,!0):0},AIt(t){const s=this.ees(this.Ess);return s?s.pes(this.Nc.lB(),t,!1):0},mes(t,s){const e=this.ees(t);return e?e.pes(this.Nc.lB(),s,!0):0},ges(t,s){const e=this.ees(t);return e?e.pes(this.Nc.lB(),s,!1):0},yes(t,s){const e=this.pss.get(t);return e?e.pes(this.Nc.lB(),s,!0):0},Ses(t,s){const e=this.pss.get(t);return e?e.pes(this.Nc.lB(),s,!1):0},B1t(){const t=this.ees(0);return t?t.zM():0},$1t(){const t=this.ees(0);return t?t.qM():0},wes(t){const s=this.ees(t);return s?s.zM():0},ves(t){const s=this.ees(t);return s?s.qM():0},bes(t){const s=this.pss.get(t);return s?s.zM():0},Mes(t){const s=this.pss.get(t);return s?s.qM():0},xes(t){const s=this.ees(t);return s?s.QH():0},Tes(t){const s=this.pss.get(t);return s?s.QH():0},Ces(t){const s=this.ees(t);return s?n_.tr(s.cV()):0},Ies(t){const s=this.pss.get(t);return s?n_.tr(s.cV()):0},_es(){return this.Nc.LHt(),this.yss},Ges(){return this.Nc.LHt(),this.Sss},Pes(){return this.Nc.LHt(),this.wss},Aes(){return this.Nc.LHt(),this.vss},Res(){return this.Nc.kHt(),this.Tss},Ees(){return this.Nc.kHt(),this.Css},Oes(){return this.Nc.kHt(),this.Iss},Fes(){return this.Nc.kHt(),this.bss},Des(){return this.Nc.kHt(),this.Mss},Les(){return this.Nc.kHt(),this.xss},kes(){return this._ss},Nes(){return this.Gss},Bes(t){const s=this.pss.get(t);return s?s.Vg():0},$es(t){const s=this.pss.get(t);return s?s.Zg():0},Wes(t){const s=this.pss.get(t);return s?s.Ves():0}}}{const r_=self._s,h_=15,o_=500,a_=333,l_=25;let u_=-1e3,c_=-1e3,f_=-1e4;r_.EB.Touch.Nss=class extends r_.jn{constructor(){super(),this.jes=0,this.k_=0,this.vjt=0,this.xD=0,this.Ues=0,this.zes=0,this.Hes=0,this.Pa=0,this.Aa=0,this.Jes=0,this.qes=0,this.Py=0,this.Ay=0,this.Yes=0,this.Xes=!1,this.Kes=!1}Hn(){}eOt(t,s,e,i,n){this.jes=i,this.k_=n,this.xD=t,this.Ues=t,this.vjt=t,this.zes=s,this.Hes=e,this.Pa=s,this.Aa=e,this.Jes=s,this.qes=e}XZ(t,s,e,i,n,r){this.Ues=this.xD,this.xD=t,this.Jes=this.Pa,this.qes=this.Aa,this.Pa=s,this.Aa=e,this.Py=i,this.Ay=n,this.Yes=r,!this.Kes&&r_.ir(this.zes,this.Hes,this.Pa,this.Aa)>=15&&(this.Kes=!0)}oq(){return this.jes}Vss(){return this.k_}_F(){return this.xD}Zss(t){this.Ues=t}zM(){return this.Pa}qM(){return this.Aa}QH(){const t=r_.ir(this.Pa,this.Aa,this.Jes,this.qes),s=(this.xD-this.Ues)/1e3;return s>0?t/s:0}cV(){return r_.rr(this.Jes,this.qes,this.Pa,this.Aa)}Vg(){return this.Py}Zg(){return this.Ay}Ves(){return this.Yes}Qss(t){return!this.Xes&&t-this.vjt>=500&&!this.Kes&&r_.ir(this.zes,this.Hes,this.Pa,this.Aa)<15&&(this.Xes=!0,!0)}zss(t){return this.Xes?"":t-this.vjt<=333&&!this.Kes&&r_.ir(this.zes,this.Hes,this.Pa,this.Aa)<15?t-f_<=666&&r_.ir(u_,c_,this.Pa,this.Aa)<25?(u_=-1e3,c_=-1e3,f_=-1e4,"double-tap"):(u_=this.Pa,c_=this.Aa,f_=t,"single-tap"):""}pes(t,s,e){if(void 0===s)return t.pB(0).m3(this.Pa,this.Aa)[e?0:1];{const i=t.fB(s);return i?i.Rj(this.Pa,this.Aa)[e?0:1]:0}}}}{const d_=self._s;d_.EB.rrt=class extends d_.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{const p_=self._s,m_=self.Ns,g_=[];p_.EB.rrt.ORt=class extends p_.sGt{constructor(t){super(t),this.IRt=t.cEt()}Hn(){p_.bh(this.IRt),super.Hn()}$_t(){for(const t of this.IRt)t._At(this.Nc)}O5(t){const s={Kx:this.Nc.Pk()};return Promise.all(this.IRt.map((e=>e.GAt(t,s))))}B5(){for(const t of this.IRt)t.PAt()}L5(){this.Zes()}Zes(){for(const t of this.Ddt.OW())t.RH().Qes()}Fxt(t){p_.EB.rrt.YIt(this,t)}wTt(t){g_.push({rGt:null,tis:!1,TW:[]})}sis(t,s,e){const i=g_.at(-1);i.rGt=t,i.tis=e,i.TW.push(s)}vTt(t){const s=g_.pop(),e=s.rGt,i=s.tis;if(!e)return;const n=new Map;for(const t of s.TW)t.xOt(n,e,i);for(const[t,s]of n)t.DW().rpt(s)}eis(t){const s=this.Wj().gEt(t),e=this.$B();return s.AAt(0).gJ().wX(e.pM(),{Kx:e.Pk()}).then((()=>this.Zes())),s}iis(t){for(const s of this.Ddt.OW())s.RH().nis(t);this.Wj().yEt(t)}ris(t,s){const e=this.Ddt.pEt(t);if(!e)throw new Error(`cannot find animation name '${t}'`);let i=e.FAt(s);i<0&&(i+=e.aJ()+1);const n=p_.TAt.IAt(this.$B());e.RAt(n,i);const r=this.$B();n.gJ().wX(r.pM(),{Kx:r.Pk()}).then((()=>this.Zes()));for(const t of this.Ddt.OW())t.RH().his();return n}ois(t,s){const e=this.Ddt.pEt(t);if(!e)throw new Error(`cannot find animation name '${t}'`);if(1===e.aJ())throw new Error(`cannot remove last frame from animation '${t}'`);let i=e.FAt(s);i<0&&(i+=e.aJ()),e.EAt(i);for(const t of this.Ddt.OW())t.RH().his()}W_t(){return self.ais}};const y_=new WeakMap;self.ais=class extends self.LW{constructor(t){super(t),y_.set(this,t.STt())}lis(t){m_.oi(t);const s=y_.get(this).Wj().pEt(t);return s?s.DAt():null}uis(){return y_.get(this).Wj().dEt().map((t=>t.DAt()))}cis(t){return m_.oi(t),y_.get(this).eis(t).DAt()}fis(t){m_.oi(t),y_.get(this).iis(t)}dis(t,s){if(m_.oi(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return y_.get(this).ris(t,s).cJ()}pis(t,s){if(m_.oi(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");y_.get(this).ois(t,s)}}}{const S_=self._s,w_=self.Ns,v_=0,b_=1,M_=2,x_=3,T_=S_.zn(S_.Rect),C_=S_.zn(S_.Gl),I_=S_.zn(S_.Ga),__=1,G_=2,P_=4;S_.EB.rrt.Instance=class extends S_.FGt{constructor(t,s){super(t);let e=!0,i="",n=0,r=!0;s&&(e=!!s[v_],i=s[b_],n=s[M_],r=s[x_]),this.mis=this.Ddt.pEt(i)||this.Ddt.cEt()[0],this.gis=S_.Kn(n,0,this.mis.aJ()-1),this.yis=this.mis.AAt(this.gis);const h=this.yis.gJ();this.Sis=h.cC(),this.wis=h.sR(),this.vis=h.HGt(),this.NGt(),t.bOt(G_,!0),t.bOt(__,this.mis.QH()>=0),this.bis=Math.abs(this.mis.QH()),this.Mis=this.mis.rJ(),this.xis=S_.zn(S_.Qf),this.Tis=0,this.Cis=0,this.Iis="",this._is=-1,this.Gis="",this.Pis=0;const o=this.cB();this.Ais=o.gz(),o.JV(e),o.Ez(r),o.nz(this.yis.iz()),o.oz(this.yis.hz()),o.TLt(this.yis.IJ()),o.ZU(),1===this.Ddt.fEt()&&1===this.Ddt.cEt()[0].aJ()||0===this.bis||this.CGt()}Hn(){this.mis=null,this.yis=null,this.Sis=null,this.xis=null,super.Hn()}VGt(){return this.yis.gJ()}Bet(){return!0}IZ(){this.Sis=null}WGt(){this.Qes()}$x(t){const s=this.Sis;if(null===s)return;t.rO(s);const e=this.cB();e.bH()?this.Ris(e,t):this.Eis(e,t)}Eis(t,s){let e=this.Ais;this.Nc.Rk()&&(e=t.yLt(e)),s.mO(e,this.vis)}Ris(t,s){const e=t.DLt();if(t.kLt()){t.dz(T_,C_,!1);let s=C_;this.Nc.Rk()&&(s=t.yLt(s)),e.Bx(t.MH(),s,this.vis),t.LLt(!1)}e.$x(s)}Ois(){return this.xis.Hs()}Fis(){return this.fe.MOt(G_)}Dis(t){this.fe.bOt(G_,t)}Lis(){return this.fe.MOt(__)}kis(t){this.fe.bOt(__,t)}Nis(){return this.fe.MOt(P_)}Bis(t){this.fe.bOt(P_,t)}P8(){this.Gis&&this.$is(),this._is>=0&&this.Wis();const t=this.bis;if(!this.Fis()||0===t)return void this.lGt();const s=this.Nc.lN(this.fe);this.xis.Bu(s);const e=this.Ois(),i=this.yis,n=i.yJ()/t;if(e<this.Tis+n)return;const r=this.mis,h=this.Mis,o=r.aJ(),a=r.iJ(),l=r.sJ(),u=r.oJ();this.Lis()?this.gis++:this.gis--,this.Tis+=n,this.gis>=o&&(u?(this.kis(!1),this.gis=o-2):l?this.gis=h:(this.Cis++,this.Cis>=a?this.Vis(!1):this.gis=h)),this.gis<0&&(u?(this.gis=1,this.kis(!0),l||(this.Cis++,this.Cis>=a&&this.Vis(!0))):l?this.gis=h:(this.Cis++,this.Cis>=a?this.Vis(!0):this.gis=h)),this.gis=S_.Kn(this.gis,0,o-1);const c=r.AAt(this.gis);e>this.Tis+c.yJ()/t&&(this.Tis=e),this.jis(i,c)}Vis(t){this.gis=t?0:this.mis.aJ()-1,this.Dis(!1),this.Iis=this.mis.Pc(),this.Bis(!0),this.nGt("animationend",!1,{animationName:this.Iis}),this.xU(S_.EB.rrt.AB.Uis),this.xU(S_.EB.rrt.AB.zis),this.Bis(!1),this.Cis=0}jis(t,s,e){if(t===s)return;const i=this.cB(),n=t.gJ(),r=s.gJ(),h=n.Vg(),o=n.Zg(),a=r.Vg(),l=r.Zg();e&&e.hrt?e.hrt(i,h,o,a,l):(h!==a&&i.Yg(i.Vg()*(a/h)),o!==l&&i.jg(i.Zg()*(l/o))),i.nz(s.iz()),i.oz(s.hz()),i.TLt(s.IJ()),i.ZU(),this.yis=s,this.Sis=r.cC(),this.wis=r.sR(),this.vis=r.HGt();const u=this.iq().Qnt();for(let e=0,i=u.length;e<i;++e)u[e].RPt(t,s);this.nGt("framechange",!1,{animationName:this.mis.Pc(),M7t:this.gis}),this.xU(S_.EB.rrt.AB.His),this.Nc.SB()}Jis(t){this.Dis(!0),this.Tis=this.Ois(),1===t&&0!==this.gis&&(this._is=0,this.Nis()||this.Wis()),this.CGt()}qis(t,s,e){this.Gis=t,this.Pis=s,this.CGt(),!e&&this.Nis()||this.$is()}Yis(){return this.mis}Xis(){return this.Gis?this.Gis:this.mis.Pc()}nis(t){S_.Zi(t,this.Xis())&&this.qis(this.Ddt.SEt().Pc(),1,!0)}Kis(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Ddt.pEt(this.Xis());if(!s)return;if(-1===(t=s.OAt(t)))return}isFinite(t)&&(this._is=t,this.Nis()||this.Wis())}his(){if(this.Gis||-1!==this._is)return;const t=this.yis,s=this.mis.AAt(S_.Kn(this.gis,0,this.mis.aJ()-1));t!==s&&this.jis(t,s),this.mis.aJ()>1&&this.bis>0&&this.CGt()}Zis(){return this.gis}Qis(){return this.yis.AJ()}tns(t){this.bis=Math.abs(t),this.kis(t>=0),this.bis>0&&this.CGt()}sns(){return this.Lis()?this.bis:-this.bis}ens(t){"string"==typeof t&&-1===(t=this.mis.OAt(t))||(t=S_.Kn(Math.floor(t),0,this.mis.aJ()-1),this.Mis=t)}ins(){return this.Mis}$is(t){const s=this.yis,e=this.Ddt.pEt(this.Gis);if(this.Gis="",!e)return;if(e===this.mis&&this.Fis())return;this.mis=e,this.kis(e.QH()>=0),this.bis=Math.abs(e.QH()),this.Mis=e.rJ(),this.gis=S_.Kn(this.gis,0,this.mis.aJ()-1),1===this.Pis&&(this.gis=0),this.Dis(!0),this.Tis=this.Ois();const i=this.mis.AAt(this.gis);this.jis(s,i,t)}Wis(t){const s=this.yis,e=this.gis;if(this.gis=S_.Kn(Math.floor(this._is),0,this.mis.aJ()-1),this._is=-1,!t&&e===this.gis)return;const i=this.mis.AAt(this.gis);this.jis(s,i),this.Tis=this.Ois()}Qes(){const t=this.yis.gJ();this.Sis=t.cC(),this.wis=t.sR(),this.vis=t.HGt(),this.cB().LLt(!0)}cC(){return this.Sis}sR(){return this.wis}HGt(){return this.vis}wJ(){return this.yis.wJ()}FTt(t){const s=this.yis,e=this.cB();let i=null;if("string"==typeof t)i=s.TJ(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");i=s.xJ(t-1)}let n=e.cz();if(!i)return[e.zM(),e.qM(),n];if(I_.S(i.HAt()),e.bH()){const[t,s,i]=e.MH().Hx(I_.Oa(),I_.Da());I_.set(t,s),n+=i}return I_.offset(-s.iz(),-s.hz()),I_.scale(e.Vg(),e.Zg()),I_.rotate(e.cV()),I_.offset(e.zM(),e.qM()),[I_.Oa(),I_.Da(),n]}nns(){return this.cB().PLt().pu()}rns(t){t=Math.floor(t);const s=this.cB(),e=s.PLt(),i=e.pu();if(t===i&&(t=0),t<0||t>=i)return[0,0];const n=e.du();return[n[2*t+0]+s.zM(),n[2*t+1]+s.qM()]}PGt(){const t=S_.EB.rrt.Nrt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.mis.Pc(),lQt:s=>this.RGt(t.h9t,s,0)},{name:s+".current-frame",value:this.gis,lQt:s=>this.RGt(t.o9t,s)},{name:s+".is-playing",value:this.Fis(),lQt:s=>s?this.RGt(t.hns,0):this.RGt(t.ons)},{name:s+".speed",value:this.bis,lQt:s=>this.RGt(t.ans,s)},{name:s+".repeats",value:this.Cis,lQt:t=>this.Cis=t}]}]}hx(){const t={a:this.mis.U0()};0!==this.Tis&&(t.fs=this.Tis);const s=this.Ois();0!==s&&(t.at=s),0!==this.gis&&(t.f=this.gis),0!==this.bis&&(t.cas=this.bis),1!==this.Cis&&(t.ar=this.Cis),0!==this.Mis&&(t.rt=this.Mis),this.Fis()||(t.ap=this.Fis()),this.Lis()||(t.af=this.Lis());const e=this.cB();return e.Rz()&&(t.ce=e.Rz()),t}ox(t){const s=this.Wj().mEt(t.a);s&&(this.mis=s),this.Tis=t.hasOwnProperty("fs")?t.fs:0,this.xis.Set(t.hasOwnProperty("at")?t.at:0);const e=t.hasOwnProperty("f")?t.f:0;this.gis=S_.Kn(e,0,this.mis.aJ()-1),this.bis=t.hasOwnProperty("cas")?t.cas:0,this.Cis=t.hasOwnProperty("ar")?t.ar:1;const i=t.hasOwnProperty("rt")?t.rt:0;this.Mis=S_.Kn(i,0,this.mis.aJ()-1),this.Dis(!t.hasOwnProperty("ap")||!!t.ap),this.kis(!t.hasOwnProperty("af")||!!t.af);const n=this.mis.AAt(this.gis);this.yis=n,this.Qes();const r=this.cB();r.nz(n.iz()),r.oz(n.hz()),r.TLt(n.IJ()),r.Ez(!!t.ce),this.Fis()&&this.CGt()}bht(t){const s=this.cB();switch(t){case x_:return s.Rz();case M_:return S_.Kn(this.gis,0,this.mis.aJ()-1);case b_:return this.mis.Pc()}}_ht(t,s,e){const i=this.cB();switch(t){case x_:i.Ez(!!s);break;case M_:{this.Dis(!1);const t=this.mis.aJ()-1,i=s=S_.Kn(s,0,t),n=this.mis.AAt(this.gis),r=this.mis.AAt(i);this.jis(n,r,e),this.gis=S_.Kn(i,0,t);break}case b_:this.Gis=s,this.$is(e),this.mis.aJ()>1&&this.mis.QH()>0?this.CGt():this.lGt()}}W_t(){return self.lns}};const A_=new WeakMap,R_=new Map([["current-frame",0],["beginning",1]]);self.lns=class extends self.IH{constructor(){super(),A_.set(this,self.$j.Uj().RH())}SJ(){return A_.get(this).wJ()}vJ(t){return this.bJ(t)[0]}MJ(t){return this.bJ(t)[1]}uns(t){return this.bJ(t)[2]}bJ(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return A_.get(this).FTt(t)}CJ(){return A_.get(this).nns()}_J(t){return w_.ii(t),A_.get(this).rns(t)[0]}PJ(t){return w_.ii(t),A_.get(this).rns(t)[1]}GJ(t){return w_.ii(t),A_.get(this).rns(t)}cns(){A_.get(this).Dis(!1)}fns(t="current-frame"){w_.oi(t);const s=R_.get(t);if(void 0===s)throw new Error("invalid mode");A_.get(this).Jis(s)}pns(t,s="beginning"){w_.oi(t),w_.oi(s);const e=R_.get(s);if(void 0===e)throw new Error("invalid mode");const i=A_.get(this);if(!i.Wj().pEt(t))throw new Error(`animation name "${t}" does not exist`);i.qis(t,e)}lis(t){w_.oi(t);const s=A_.get(this).Wj().pEt(t);return s?s.DAt():null}get animation(){return A_.get(this).Yis().DAt()}get animationName(){return A_.get(this).Xis()}set M7t(t){w_.ii(t),A_.get(this).Kis(t)}get M7t(){return A_.get(this).Zis()}set mns(t){w_.oi(t),A_.get(this).Kis(t)}get mns(){return A_.get(this).Qis()}set gns(t){w_.ii(t),A_.get(this).tns(t)}get gns(){return A_.get(this).sns()}set yns(t){w_.ii(t),A_.get(this).ens(t)}get yns(){return A_.get(this).ins()}get imageWidth(){return A_.get(this).VGt().Vg()}get imageHeight(){return A_.get(this).VGt().Zg()}Sns(){const t=A_.get(this).VGt();return[t.Vg(),t.Zg()]}async wns(t){w_.Ni(t,Blob);const s=A_.get(this),e=s.$B(),i=s.VGt(),n=S_.zn(S_.XPt);if(n.uAt(e,t),await n.wX(e.pM(),{Kx:e.Pk()}),s.Jn())return void n.Hn();i.cAt(n);const r=s.STt();r.Zes(),r.Wj().Sf().dispatchEvent(new S_.Event("animationframeimagechange")),e.SB()}vns(t,s){w_.oi(s),A_.get(this).cB().dLt(!!t,s)}}}{const E_=self._s;E_.EB.rrt.AB={bns(t){return E_.Zi(this.Xis(),t)},Mns(t,s){return E_.compare(this.gis,t,s)},xns(t,s){if("string"!=typeof s)return!1;const e=this.yis.AJ();return E_.compare(e.toLowerCase(),t,s.toLowerCase())},Tns(t,s){return E_.compare(this.sns(),t,s)},zis(t){return E_.Zi(this.Iis,t)},Uis:()=>!0,His:()=>!0,Cns(){return this.cB().Vg()<0},Ins(){return this.cB().Zg()<0},_ns:()=>!0,Gns:()=>!0,Rz(){return this.cB().Rz()}}}{const O_=self._s;O_.EB.rrt.Nrt={Pns(t,s,e,i,n){if(!t||!s)return;const[r,h]=this.FTt(e),o=this.Nc.$W(t,s,r,h,i,n);if(!o)return;if(i&&s.WW(o),t.MW().eW()){const t=o.cB();t.uV(this.cB().cV()),t.ZU()}const a=this.Nc.$k();a.VW(!0),o.jW(),a.VW(!1),t!==this.Nc.igt().Wj()&&this.aGt.sis(t,o,i)},ons(){this.Dis(!1)},hns(t){this.Jis(t)},h9t(t,s){this.qis(t,s)},o9t(t){this.Kis(t)},ans(t){this.tns(t)},Ans(t){this.ens(t)},Rns(t,s){try{0===t?this.STt().eis(s):this.STt().iis(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},Ens(t,s,e){try{0===t?this.STt().ris(s,e):this.STt().ois(s,e)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},Ons(t){const s=this.cB(),e=s.Vg(),i=Math.abs(e)*(0===t?-1:1);e!==i&&(s.Yg(i),s.ZU())},Fns(t){const s=this.cB(),e=s.Zg(),i=Math.abs(e)*(0===t?-1:1);e!==i&&(s.jg(i),s.ZU())},aV(t){const s=this.yis.gJ(),e=this.cB(),i=e.Vg()<0?-1:1,n=e.Zg()<0?-1:1,r=s.Vg()*t*i,h=s.Zg()*t*n;e.Vg()===r&&e.Zg()===h||(e.TA(r,h),e.ZU())},async Dns(t,s,e){const i=this.yis.gJ(),n=this.cB(),r=this.Nc,h=this.aGt;if(i.zK()===t)return 0===s&&(n.TA(i.Vg(),i.Zg()),n.ZU()),void this.xU(O_.EB.rrt.AB._ns);const o=O_.zn(O_.XPt);try{if(await o.lAt(r,t),!o.wZ())throw new Error("image failed to load");if(this.Jn())return void o.Hn();await o.wX(r.pM(),{Kx:r.Pk()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.xU(O_.EB.rrt.AB.Gns))}this.Jn()?o.Hn():(i.cAt(o),h.Zes(),h.Wj().Sf().dispatchEvent(new O_.Event("animationframeimagechange")),r.SB(),0===s&&(n.TA(i.Vg(),i.Zg()),n.ZU()),await this.GB(O_.EB.rrt.AB._ns))},Lns(t){this.cB().Ez(t)},dLt(t,s){this.cB().dLt(0===t,s)},kns(t){this.cB().FM(t),this.Nc.SB()}}}self._s.EB.rrt.Brt={i9t(){return this.Zis()},Nns(){return this.Qis()},Bns(){return this.mis.aJ()},n9t(){return this.mis.Pc()},$ns(){return this.sns()},Wns(){return this.mis.QH()},Vns(t){return this.FTt(t)[0]},jns(t){return this.FTt(t)[1]},Uns(t){return this.FTt(t)[2]},zns(){return this.wJ()},Hns(){return this.VGt().Vg()},Jns(){return this.VGt().Zg()},qns(t){return this.rns(t)[0]},Yns(t){return this.rns(t)[1]},Xns(){return this.nns()}};{const F_=self._s;F_.EB.n7t=class extends F_.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{let D_=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};WrapModeToStr=D_;const L_=self._s;L_.EB.n7t.ORt=class extends L_.sGt{constructor(t,s){super(t),this.oT="repeat",this.aT="repeat",s&&(this.oT=D_(s[0]),this.aT=D_(s[1]))}Hn(){super.Hn()}$_t(){this.gJ().BB(this.Nc)}O5(t){return this.gJ().wX(t,{Kx:this.Nc.Pk(),Yx:this.oT,Xx:this.aT})}B5(){this.gJ().HP()}Kns(){return this.oT}Zns(){return this.aT}}}{const k_=self._s,N_=self.Ns,B_=0,$_=4,W_=5,V_=6,j_=7,U_=8,z_=9,H_=10,J_=11,q_=12,Y_=13,X_=14,K_=k_.zn(k_.Rect),Z_=k_.zn(k_.Gl),Q_=k_.zn(k_.Rect),tG=k_.zn(k_.Gl);k_.EB.n7t.Instance=class extends k_.FGt{constructor(t,s){super(t),this.Qns=0,this.trs=0,this.srs=1,this.ers=1,this.irs=0,this.nrs=!1,this.rrs=0,this.hrs=0,this.ors=0,this.ars=0,this.lrs=0,this.urs=null,s&&(this.cB().JV(!!s[B_]),this.Qns=s[$_],this.trs=s[W_],this.srs=s[V_],this.ers=s[j_],this.irs=k_.Qn(s[U_]),this.nrs=!!s[z_],this.rrs=s[H_],this.hrs=s[J_],this.ors=s[q_],this.ars=s[Y_],this.lrs=s[X_])}Hn(){this.crs(),super.Hn()}crs(){this.urs&&(this.urs.Hn(),this.urs=null)}frs(t,s,e){const i=this.VGt(),n=i.Vg(),r=i.Zg(),h=this.Qns/n,o=this.trs/r,a=this.irs;Q_.set(0,0,t/(n*this.srs),s/(r*this.ers)),Q_.offset(-h,-o),0===a?e.Yl(Q_):e.Xl(Q_,-a)}drs(t,s=!0){if(this.nrs){const s=this.VGt();t.mv(),t.GO(s.Vg()*this.srs,s.Zg()*this.ers,this.rrs,this.hrs,this.ors,this.ars,this.lrs)}else s&&t.uv()}$x(t){const s=this.VGt(),e=s.cC();if(null===e)return;this.drs(t),t.rO(e);const i=s.Vg(),n=s.Zg();let r=this.Qns/i,h=this.trs/n;0!==this.irs||this.nrs||("repeat"===this.STt().Kns()&&(r%=1),"repeat"===this.STt().Zns()&&(h%=1));const o=this.cB();Q_.set(0,0,o.Vg()/(i*this.srs),o.Zg()/(n*this.ers)),Q_.offset(-r,-h),o.bH()?this.Ris(o,t):this.Eis(o,t)}Eis(t,s){let e=t.gz();this.Nc.Rk()&&(e=t.yLt(e)),0===this.irs?s.sb(e,Q_):(tG.Xl(Q_,-this.irs),s.mO(e,tG))}Ris(t,s){const e=t.DLt();if(t.kLt()){t.dz(K_,Z_,!1);let s=Z_;this.Nc.Rk()&&(s=t.yLt(s));let i=Q_;0!==this.irs&&(tG.Xl(Q_,-this.irs),i=tG),e.Bx(t.MH(),s,i),t.LLt(!1)}e.$x(s)}VGt(){return this.urs||this.Ddt.gJ()}Bet(){return!0}cC(){return this.VGt().cC()}prs(){this.cB().LLt(!0)}mrs(t){this.Qns!==t&&(this.Qns=t,this.Nc.SB(),this.prs())}grs(){return this.Qns}yrs(t){this.trs!==t&&(this.trs=t,this.Nc.SB(),this.prs())}Srs(){return this.trs}wrs(t){this.srs!==t&&(this.srs=t,this.Nc.SB(),this.prs())}vrs(){return this.srs}brs(t){this.ers!==t&&(this.ers=t,this.Nc.SB(),this.prs())}Mrs(){return this.ers}xrs(t){this.irs!==t&&(this.irs=t,this.Nc.SB(),this.prs())}Trs(){return this.irs}Crs(t){t=!!t,this.nrs!==t&&(this.nrs=t,this.Nc.SB())}Irs(){return this.nrs}_rs(t){this.rrs!==t&&(this.rrs=t,this.Irs()&&this.Nc.SB())}Grs(){return this.rrs}Prs(t){this.hrs!==t&&(this.hrs=t,this.Irs()&&this.Nc.SB())}Ars(){return this.hrs}Rrs(t){this.ors!==t&&(this.ors=t,this.Irs()&&this.Nc.SB())}Ers(){return this.ors}Ors(t){this.ars!==t&&(this.ars=t,this.Irs()&&this.Nc.SB())}Frs(){return this.ars}Drs(t){this.lrs!==t&&(this.lrs=t,this.Irs()&&this.Nc.SB())}Lrs(){return this.lrs}hx(){const t={};return 0!==this.Qns&&(t.iox=this.Qns),0!==this.trs&&(t.ioy=this.trs),1!==this.srs&&(t.isx=this.srs),1!==this.ers&&(t.isy=this.ers),0!==this.irs&&(t.ia=this.irs),this.nrs&&(t.tr=!0),1!==this.rrs&&(t.trx=this.rrs),1!==this.hrs&&(t.try=this.hrs),1!==this.ors&&(t.tra=this.ors),.1!==this.ars&&(t.trbmx=this.ars),.1!==this.lrs&&(t.trbmy=this.lrs),t}ox(t){this.Qns=t.iox||0,this.trs=t.ioy||0,this.srs=t.hasOwnProperty("isx")?t.isx:1,this.ers=t.hasOwnProperty("isy")?t.isy:1,this.irs=t.ia||0,this.nrs=!!t.tr,this.rrs=t.hasOwnProperty("trx")?t.trx:1,this.hrs=t.hasOwnProperty("try")?t.try:1,this.ors=t.hasOwnProperty("tra")?t.tra:1,this.ars=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.lrs=t.hasOwnProperty("trbmy")?t.trbmy:.1}PGt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.grs(),lQt:t=>this.mrs(t)},{name:t+".image-offset-y.name",value:this.Srs(),lQt:t=>this.yrs(t)},{name:t+".image-scale-x.name",value:100*this.vrs(),lQt:t=>this.wrs(t/100)},{name:t+".image-scale-y.name",value:100*this.Mrs(),lQt:t=>this.brs(t/100)},{name:t+".image-angle.name",value:k_.tr(this.Trs()),lQt:t=>this.xrs(k_.Qn(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.Irs(),lQt:t=>this.Crs(t)},{name:t+".x-random.name",value:100*this.Grs(),lQt:t=>this._rs(t/100)},{name:t+".y-random.name",value:100*this.Ars(),lQt:t=>this.Prs(t/100)},{name:t+".angle-random.name",value:100*this.Ers(),lQt:t=>this.Rrs(t/100)},{name:t+".blend-margin-x.name",value:100*this.Frs(),lQt:t=>this.Ors(t/100)},{name:t+".blend-margin-y.name",value:100*this.Lrs(),lQt:t=>this.Drs(t/100)}]}]}bht(t){switch(t){case $_:return this.grs();case W_:return this.Srs();case V_:return this.vrs();case j_:return this.Mrs();case U_:return this.Trs();case z_:return this.Irs();case H_:return this.Grs();case J_:return this.Ars();case q_:return this.Ers();case Y_:return this.Frs();case X_:return this.Lrs()}}_ht(t,s){switch(t){case $_:this.mrs(s);break;case W_:this.yrs(s);break;case V_:this.wrs(s);break;case j_:this.brs(s);break;case U_:this.xrs(s);break;case z_:this.Crs(!!s);break;case H_:this._rs(s);break;case J_:this.Prs(s);break;case q_:this.Rrs(s);break;case Y_:this.Ors(s);break;case X_:this.Drs(s)}}W_t(){return self.krs}};const sG=new WeakMap;self.krs=class extends self.IH{constructor(){super(),sG.set(this,self.$j.Uj().RH())}set Nrs(t){N_.ii(t),sG.get(this).mrs(t)}get Nrs(){return sG.get(this).grs()}set Brs(t){N_.ii(t),sG.get(this).yrs(t)}get Brs(){return sG.get(this).Srs()}$rs(t,s){N_.ii(t),N_.ii(s);const e=sG.get(this);e.mrs(t),e.yrs(s)}Wrs(){const t=sG.get(this);return[t.grs(),t.Srs()]}set Vrs(t){N_.ii(t),sG.get(this).wrs(t)}get Vrs(){return sG.get(this).vrs()}set jrs(t){N_.ii(t),sG.get(this).brs(t)}get jrs(){return sG.get(this).Mrs()}Urs(t,s){N_.ii(t),N_.ii(s);const e=sG.get(this);e.wrs(t),e.brs(s)}zrs(){const t=sG.get(this);return[t.vrs(),t.Mrs()]}set Hrs(t){N_.ii(t),sG.get(this).xrs(t)}get Hrs(){return sG.get(this).Trs()}set Jrs(t){N_.ii(t),sG.get(this).xrs(k_.Qn(t))}get Jrs(){return k_.tr(sG.get(this).Trs())}get imageWidth(){return sG.get(this).VGt().Vg()}get imageHeight(){return sG.get(this).VGt().Zg()}Sns(){const t=sG.get(this).VGt();return[t.Vg(),t.Zg()]}set qrs(t){sG.get(this).Crs(!!t)}get qrs(){return sG.get(this).Irs()}set Yrs(t){N_.ii(t),sG.get(this)._rs(t)}get Yrs(){return sG.get(this).Grs()}set Xrs(t){N_.ii(t),sG.get(this).Prs(t)}get Xrs(){return sG.get(this).Ars()}Krs(t,s){N_.ii(t),N_.ii(s);const e=sG.get(this);e._rs(t),e.Prs(s)}Zrs(){const t=sG.get(this);return[t.Grs(),t.Ars()]}set Qrs(t){N_.ii(t),sG.get(this).Rrs(t)}get Qrs(){return sG.get(this).Ers()}set ths(t){N_.ii(t),sG.get(this).Ors(t)}get ths(){return sG.get(this).Frs()}set shs(t){N_.ii(t),sG.get(this).Drs(t)}get shs(){return sG.get(this).Lrs()}ehs(t,s){N_.ii(t),N_.ii(s);const e=sG.get(this);e.Ors(t),e.Drs(s)}ihs(){const t=sG.get(this);return[t.Frs(),t.Lrs()]}async nhs(t){N_.Ni(t,Blob);const s=sG.get(this),e=s.$B(),i=k_.zn(k_.XPt);i.uAt(e,t),await i.wX(e.pM(),{Kx:e.Pk(),Yx:s.STt().Kns(),Xx:s.STt().Zns()}),s.Jn()?i.Hn():(s.crs(),s.urs=i,e.SB())}}}self._s.EB.n7t.AB={_ns:()=>!0,Gns:()=>!0,rhs(){return this.Irs()}};{const eG=self._s;eG.EB.n7t.Nrt={hhs(t){this.mrs(t)},ohs(t){this.yrs(t)},ahs(t){this.wrs(t/100)},lhs(t){this.brs(t/100)},uhs(t){this.xrs(eG.Qn(t))},chs(t){this.Crs(t)},fhs(t,s){this._rs(t/100),this.Prs(s/100)},dhs(t){this.Rrs(t/100)},phs(t,s){this.Ors(t/100),this.Drs(s/100)},kns(t){this.cB().FM(t),this.Nc.SB()},async Dns(t,s){if(this.urs&&this.urs.zK()===t)return;const e=this.Nc,i=eG.zn(eG.XPt);try{if(await i.lAt(e,t,!0),!i.wZ())throw new Error("image failed to load");if(this.Jn())return i.Hn(),null;if(!await i.wX(e.pM(),{Kx:e.Pk(),Yx:this.STt().Kns(),Xx:this.STt().Zns()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.xU(eG.EB.n7t.AB.Gns))}this.Jn()?i.Hn():(this.crs(),this.urs=i,e.SB(),await this.GB(eG.EB.n7t.AB._ns))}}}{const iG=self._s;iG.EB.n7t.Brt={Hns(){return this.VGt().Vg()},Jns(){return this.VGt().Zg()},mhs(){return this.Qns},ghs(){return this.trs},yhs(){return 100*this.srs},Shs(){return 100*this.ers},whs(){return iG.tr(this.irs)},vhs(){return 100*this.Grs()},bhs(){return 100*this.Ars()},Mhs(){return 100*this.Ers()},xhs(){return 100*this.Frs()},Ths(){return 100*this.Lrs()}}}{const nG=self._s;nG.EB.i7t=class extends nG.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{const rG=self._s;rG.EB.i7t.ORt=class extends rG.sGt{constructor(t){super(t),this.Chs=null,this.AS=null}Hn(){this.B5(),super.Hn()}$_t(){this.gJ().BB(this.Nc)}async O5(t){const s=this.gJ();this.AS=await s.yAt()}Ihs(t,s,e,i){!this.Chs&&this.AS&&(this.Chs=new self._hs(this),this.Chs.Ghs(this.AS,t,s,e,i))}B5(){this.Chs&&(this.Chs.Hn(),this.Chs=null)}Phs(){return this.Chs}}}{const hG=self._s,oG=0,aG=1,lG=2,uG=3,cG=4,fG=5,dG=6,pG=8,mG=hG.zn(hG.Rect),gG=hG.zn(hG.Rect),yG=hG.zn(hG.Gl);hG.EB.i7t.Instance=class extends hG.FGt{constructor(t,s){super(t),this.Ahs=16,this.Rhs=16,this.Ehs=16,this.Ohs=16,this.Fhs=1,this.Dhs=1,this.Lhs=!0,this.khs=null,s&&(this.Ahs=s[oG],this.Rhs=s[aG],this.Ehs=s[lG],this.Ohs=s[uG],this.Fhs=s[cG],this.Dhs=s[fG],this.Lhs=!!s[pG],this.cB().JV(!!s[dG])),this.aGt.Ihs(this.Ahs,this.Rhs,this.Ehs,this.Ohs)}Hn(){super.Hn()}Nhs(t){this.khs=t}$x(t){const s=this.cB(),e=s.gz();this.Bhs(t,e.Br(),e.$r(),s.Vg(),s.Zg())}Bhs(t,s,e,i,n){let r=this.aGt.Phs();if(!r&&(this.aGt.Ihs(this.Ahs,this.Rhs,this.Ehs,this.Ohs),r=this.aGt.Phs(),!r))return;const h=r.$hs(),o=r.Whs(),a=Math.min(this.Ahs,h),l=Math.min(this.Rhs,h),u=Math.min(this.Ehs,o),c=Math.min(this.Ohs,o),f=h-l,d=o-c,p=this.Lhs?1:0,m=this.Fhs,g=this.Dhs;if(a>0&&u>0&&this.Vhs(t,r.cC(),0,0,a+p,u+p,s,e,a+p,u+p),l>0&&u>0&&this.Vhs(t,r.cC(),f-p,0,l+p,u+p,s+i-l-p,e,l+p,u+p),l>0&&c>0&&this.Vhs(t,r.cC(),f-p,d-p,l+p,c+p,s+i-l-p,e+n-c-p,l+p,c+p),a>0&&c>0&&this.Vhs(t,r.cC(),0,d-p,a+p,c+p,s,e+n-c-p,a+p,c+p),0===m){const h=2===g?0:p;a>0&&d>u&&this.jhs(t,r.Uhs(),s,e+u,a+h,n-u-c,0,0),l>0&&d>u&&this.jhs(t,r.zhs(),s+i-l-h,e+u,l+h,n-u-c,h,0),u>0&&f>a&&this.jhs(t,r.Hhs(),s+a,e,i-a-l,u+h,0,0),c>0&&f>a&&this.jhs(t,r.Jhs(),s+a,e+n-c-h,i-a-l,c+h,0,h)}else 1===m&&(a>0&&d>u&&this.Vhs(t,r.cC(),0,u,a,d-u,s,e+u,a,n-u-c),l>0&&d>u&&this.Vhs(t,r.cC(),f,u,l,d-u,s+i-l,e+u,l,n-u-c),u>0&&f>a&&this.Vhs(t,r.cC(),a,0,f-a,u,s+a,e,i-a-l,u),c>0&&f>a&&this.Vhs(t,r.cC(),a,d,f-a,c,s+a,e+n-c,i-a-l,c));d>u&&f>a&&(0===g?this.jhs(t,r.qhs(),s+a,e+u,i-a-l,n-u-c,0,0):1===g&&this.Vhs(t,r.cC(),a,u,f-a,d-u,s+a,e+u,i-a-l,n-u-c))}Vhs(t,s,e,i,n,r,h,o,a,l){const u=s.Vg(),c=s.Zg();if(t.rO(s),mG.set(h,o,h+a,o+l),gG.set(e/u,i/c,(e+n)/u,(i+r)/c),null===this.khs){const s=this.cB(),e=s.gz(),i=e.Br(),n=e.$r();mG.offset(-i,-n),yG.Xl(mG,s.cV()),yG.offset(i,n),t.sb(yG,gG)}else this.khs(mG,gG)}jhs(t,s,e,i,n,r,h,o){const a=s.Vg(),l=s.Zg();if(t.rO(s),mG.set(e,i,e+n,i+r),gG.set(-h/a,-o/l,(n-h)/a,(r-o)/l),null===this.khs){const s=this.cB(),e=s.gz(),i=e.Br(),n=e.$r();mG.offset(-i,-n),yG.Xl(mG,s.cV()),yG.offset(i,n),t.sb(yG,gG)}else this.khs(mG,gG)}VGt(){this.Ddt.gJ()}bht(t){}_ht(t,s){}}}self._s.EB.i7t.AB={},self._s.EB.i7t.Nrt={kns(t){this.cB().FM(t),this.Nc.SB()}},self._s.EB.i7t.Brt={};{let SG=function(t){const s=wG.co(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),s};CloneDrawable=SG;const wG=self._s;self._hs=class{constructor(t){this.aGt=t,this.Nc=this.aGt.$B(),this.rT=null,this.Yhs=null,this.Xhs=null,this.Khs=null,this.Zhs=null,this.Qhs=null,this.xZ=0,this.TZ=0,this.qb=this.Nc.pM(),this.yS=!1,this.YP=!1}Hn(){this.qb.QA()||(this.qb.rC(this.rT),this.qb.rC(this.Yhs),this.qb.rC(this.Xhs),this.qb.rC(this.Khs),this.qb.rC(this.Zhs),this.qb.rC(this.Qhs)),this.rT=null,this.Yhs=null,this.Xhs=null,this.Khs=null,this.Zhs=null,this.Qhs=null,this.aGt=null,this.qb=null,this.YP=!0}Jn(){return this.YP}Ghs(t,s,e,i,n){this.tos(t,s,e,i,n)}sos(){return!!this.rT}tos(t,s,e,i,n){if(this.YP)return;const r=t.width,h=t.height;this.xZ=r,this.TZ=h,s=Math.min(Math.floor(s),r),e=Math.min(Math.floor(e),r),i=Math.min(Math.floor(i),h);const o=r-e,a=h-(n=Math.min(Math.floor(n),h)),l=this.Nc.Pk(),u=this.Nc.IB()._Z();this.rT=this.qb.WO(SG(t),{Kx:l,Zx:u}),o>s&&a>i&&(this.Yhs=this.qb.WO(this.eos(SG(t),s,i,o,a),{Yx:"repeat",Xx:"repeat",Kx:l,Zx:u})),s>0&&a>i&&(this.Xhs=this.qb.WO(this.eos(SG(t),0,i,s,a),{Xx:"repeat",Kx:l,Zx:u})),e>0&&a>i&&(this.Khs=this.qb.WO(this.eos(SG(t),o,i,r,a),{Xx:"repeat",Kx:l,Zx:u})),i>0&&o>s&&(this.Zhs=this.qb.WO(this.eos(SG(t),s,0,o,i),{Yx:"repeat",Kx:l,Zx:u})),n>0&&o>s&&(this.Qhs=this.qb.WO(this.eos(SG(t),s,a,o,h),{Yx:"repeat",Kx:l,Zx:u}))}eos(t,s,e,i,n){const r=i-s,h=n-e,o=wG.co(r,h);return o.getContext("2d").drawImage(t,s,e,r,h,0,0,r,h),o}$hs(){return this.xZ}Whs(){return this.TZ}cC(){return this.rT}qhs(){return this.Yhs}Uhs(){return this.Xhs}zhs(){return this.Khs}Hhs(){return this.Zhs}Jhs(){return this.Qhs}}}{const vG=self._s;vG.EB.Text=class extends vG.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{const bG=self._s;bG.EB.Text.ORt=class extends bG.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}O5(t){}B5(){}}}{const MG=self._s,xG=self.Ns,TG=[0,0,0],CG=0,IG=1,_G=2,GG=3,PG=4,AG=5,RG=6,EG=7,OG=8,FG=9,DG=10,LG=11,kG=12,NG=13,BG=15,$G=["left","center","right"],WG=["top","center","bottom"],VG=["ltr","rtl"],jG=["word","cjk","character"],UG=new MG.Rect,zG=new MG.Gl,HG=new MG.To,JG=MG.zn(MG.Ga),qG=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);MG.EB.Text.Instance=class extends MG.FGt{constructor(t,s){if(super(t),this.Bc="",this.ios=!0,this.nos="Arial",this.ros=12,this.hos=0,this.lP=!1,this.uP=!1,this.RM=MG.zn(MG.To),this.gP=0,this.yP=0,this.vP="word",this.bP=0,this.oos="auto",this.aos=1,this.los=null,this.uos="",this.fos=!1,this.dos=!1,this.pos=null,this.mos=-1,this.gos=-1,this.yos=0,this.Sos=MG.zn(MG.DS.Hb,this.Nc.pM(),{timeout:5}),this.Sos.qP=()=>this.Nc.SB(),this.wos=()=>this.vos(),this.bos=!1,s){this.Bc=s[CG],this.ios=!!s[IG],this.nos=s[_G],this.ros=s[GG],this.hos=s[PG],this.lP=!!s[AG],this.uP=!!s[RG],this.gP=s[OG],this.yP=s[FG],this.vP=jG[s[DG]],this.bP=s[LG],this.Mos(this.Nc._Y(s[kG]));const t=s[EG];this.RM.Ao(t[0],t[1],t[2]),this.cB().JV(s[NG]),this.dos=!!s[BG]}this.xos(),this.Tos()}Hn(){this.Mos(null),this.Cos(),this.pos&&(this.pos.Hn(),this.pos=null),this.Sos.Hn(),this.Sos=null,super.Hn()}xos(){const t=this.Sos;t.Vc(this.Bc),t.ZP(this.ios),this.Sos.eP()&&this.los?this.Sos.$g(this.$B().hHt(this.los)):this.Sos.$g(null),t.QP("nearest"!==this.Nc.Pk()),t.tA(this.nos),t.nA(this.hos),t.hA(this.lP),t.aA(this.uP),t.DM(this.RM),t.mA($G[this.gP]),t.yA(WG[this.yP]),t.wA(this.vP),t.bA(VG[this.bP])}Ios(){const t=this.cB();this.Sos.sA(this.ros),this.Sos.iA(t.FDt());const s=t.fB();let e;"auto"===this.oos?e=s.u2(t.cz()):"fixed"===this.oos&&(e=this.aos),t.bH()&&e!==this.Sos.CA()&&t.LLt(!0),this.Sos.TA(t.Vg(),t.Zg(),e)}Mos(t){t&&(t.k0()||t.MW().constructor!==MG.EB.rrt)||t!==this.los&&(this.los&&this.los.Sf().removeEventListener("animationframeimagechange",this.wos),this.los=t,this.los&&this.los.Sf().addEventListener("animationframeimagechange",this.wos),this.xos(),this.fos=!1,this.Nc.SB())}vos(){this.Nc.oHt(this.los),this.Nc.SB(),this.bos=!0}Tos(){if(this.dos){let t=this.Bc;this.ios&&(t=MG.pn.Fg(t)),this.pos?this.pos.Vc(t):this.pos=MG.zn(MG.kc,this.Nc,t)}else this.pos&&(this.pos.Hn(),this.pos=null)}$x(t){const s=this.cB();this.Ios(),this.bos&&(this.bos=!1,this.Sos.eP()&&this.los&&this.Sos.$g(this.$B().hHt(this.los)));const e=this.Sos.cC();if(!e)return;const i=s.fB();if(0===s.cV()&&0===i.cV()&&0===s.cz()&&!s.bH()&&i.I1()){const n=s.gz(),[r,h]=i.kj(n.Br(),n.$r()),[o,a]=i.kj(n.jr(),n.Ur()),l=r-Math.round(r),u=h-Math.round(h);UG.set(r,h,o,a),UG.offset(-l,-u),zG.Yl(UG);const[c,f]=t.wO(t.NO());this.Nc.IB()._X(t,c,f),t.rO(e),t.sb(zG,this.Sos.sR()),i.PX(t)}else t.rO(e),s.bH()?this.Ris(s,t):this.Eis(s,t)}Eis(t,s){let e=t.gz();this.Nc.Rk()&&(e=this._os(e)),s.sb(e,this.Sos.sR())}Ris(t,s){const e=t.DLt();if(t.kLt()){t.dz(UG,zG,!1);let s=zG;this.Nc.Rk()&&(s=this._os(s)),e.Bx(t.MH(),s,this.Sos.sR()),t.LLt(!1)}e.$x(s)}_os(t){const s=t.Br()-Math.round(t.Br()),e=t.$r()-Math.round(t.$r());return 0===s&&0===e?t:(zG.S(t),zG.offset(-s,-e),zG)}jGt(){const t=this.Sos.cC();return t?[t.Vg(),t.Zg()]:[100,100]}UGt(){return this.Sos.sR()}JGt(){return!1}hx(){const t={t:this.Bc,c:this.RM.toJSON(),fn:this.nos,ps:this.ros};return this.ios&&(t.bbc=this.ios),0!==this.gP&&(t.ha=this.gP),0!==this.yP&&(t.va=this.yP),"word"!==this.vP&&(t.wr=this.vP),0!==this.hos&&(t.lho=this.hos),this.lP&&(t.b=this.lP),this.uP&&(t.i=this.uP),-1!==this.gos&&(t.tw={st:this.mos,en:this.gos,l:this.yos}),this.los&&(t.ioc=this.los.U0()),"fixed"===this.oos&&(t.fs=this.aos),t}ox(t){if(this.Cos(),this.Bc=t.t,this.RM.Sa(t.c),this.nos=t.fn,this.ros=t.ps,this.ios=!!t.hasOwnProperty("bbc")&&t.bbc,this.gP=t.hasOwnProperty("ha")?t.ha:0,this.yP=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.vP="boolean"==typeof s?s?"word":"character":s}else this.vP="word";if(this.hos=t.hasOwnProperty("lho")?t.lho:0,this.lP=!!t.hasOwnProperty("b")&&t.b,this.uP=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.mos=s.st,this.gos=s.en,this.yos=s.l}if(t.hasOwnProperty("ioc")){const s=this.$B()._Y(t.ioc);s&&this.Mos(s)}else this.Mos(null);t.hasOwnProperty("fs")?(this.oos="fixed",this.aos=t.fs):this.oos="auto",this.xos(),this.Tos(),this.fos=!1,-1!==this.gos&&this.CGt()}bht(t){switch(t){case CG:return this.xA();case IG:return this.ios;case _G:return this.Gos();case GG:return this.Pos();case PG:return this.Aos();case AG:return this.Ros();case RG:return this.Eos();case EG:return TG[0]=this.RM.No(),TG[1]=this.RM.Bo(),TG[2]=this.RM.$o(),TG;case OG:return this.Oos();case FG:return this.Fos();case DG:return this.Dos();case BG:return this.Los()}}_ht(t,s){switch(t){case CG:this.kos(s);break;case IG:if(this.ios===!!s)return;this.ios=!!s,this.xos();break;case _G:this.Nos(s);break;case GG:this.Bos(s);break;case PG:this.$os(s);break;case AG:this.Wos(s);break;case RG:this.Vos(s);break;case EG:const t=this.RM,e=s;if(t.No()===e[0]&&t.Bo()===e[1]&&t.$o()===e[2])return;this.RM.Ao(e[0],e[1],e[2]),this.xos();break;case OG:this.jos(s);break;case FG:this.Uos(s);break;case DG:this.zos(s)}}AGt(t,s,e,i){0===s&&0===e&&0===i||t!==EG||(this.RM.Ro(s,e,i),this.xos())}kos(t){this.Bc!==t&&(this.Bc=t,this.Sos.Vc(t),this.Tos(),this.fos=!1,this.Nc.SB())}xA(){return this.Bc}Hos(t,s){this.Ios(),this.kos(t),this.mos=this.Nc.yN(),this.gos=this.mos+s/this.iq().rU(),this.yos=this.Sos.PA(),this.Sos.uA(0),this.CGt()}Cos(){this.mos=-1,this.gos=-1,this.yos=0,this.Sos.uA(-1),this.lGt()}Jos(){-1!==this.gos&&(this.Cos(),this.xU(MG.EB.Text.AB.qos),this.Nc.SB())}Nos(t){this.nos!==t&&(this.nos=t,this.Sos.tA(t),this.Nc.SB())}Gos(){return this.nos}Wos(t){t=!!t,this.lP!==t&&(this.lP=t,this.Sos.hA(t),this.Nc.SB())}Ros(){return this.lP}Vos(t){t=!!t,this.uP!==t&&(this.uP=t,this.Sos.aA(t),this.Nc.SB())}Eos(){return this.uP}Bos(t){this.ros!==t&&(this.ros=t,this.Nc.SB())}Pos(){return this.ros}Yos(t){this.RM.zo(t)||(this.RM.ko(t),this.Sos.DM(this.RM),this.Nc.SB())}Xos(){return this.RM}$os(t){this.hos!==t&&(this.hos=t,this.xos(),this.Nc.SB())}Aos(){return this.hos}jos(t){this.gP!==t&&(this.gP=t,this.xos(),this.Nc.SB())}Oos(){return this.gP}Uos(t){this.yP!==t&&(this.yP=t,this.xos(),this.Nc.SB())}Fos(){return this.yP}Kos(t){this.zos(jG[t])}zos(t){this.vP!==t&&(this.vP=t,this.xos(),this.Nc.SB())}Dos(){return this.vP}Zos(t){this.bP!==t&&(this.bP=t,this.xos(),this.Nc.SB())}Qos(){return this.bP}tas(t){this.dos=!!t,this.Tos()}Los(){return this.dos}sas(t){this.oos!==t&&(this.oos=t,this.Nc.SB())}eas(){return this.oos}ias(t){this.aos!==t&&(this.aos=t,"fixed"===this.oos&&this.Nc.SB())}nas(){return this.aos}ras(){return this.Ios(),this.Sos.IA()}oas(){return this.Ios(),this.Sos.GA()}aas(t,s){this.Ios();const e=this.cB();JG.set(t-e.zM(),s-e.qM()),JG.rotate(-e.cV()),JG.offset(e.Vg()*e.iz(),e.Zg()*e.hz()),JG.wt(e.Vg(),e.Zg()),JG.scale(this.Sos.Vg(),this.Sos.Zg());const i=this.Sos.RA(JG.Oa(),JG.Da());if(i){const t=i.Uy("tag");if(t)return t.Gg}return""}las(t,s,e){const i=this.aas(s,e);return i&&MG.Zi(t,i)}uas(t,s){this.Ios(),s=Math.floor(s);const e=this.Sos.OA(t,s);if(!e)return null;const i=this.cB(),n=this.Sos.dA(),r=e.By(),h=e.Wy()-(e.Zg()-e.ty())*n,o=e.Vg()*n/this.Sos.Vg()*i.Vg(),a=e.Zg()*n/this.Sos.Zg()*i.Zg();return JG.set(r,h),JG.wt(this.Sos.Vg(),this.Sos.Zg()),JG.scale(i.Vg(),i.Zg()),JG.offset(-i.Vg()*i.iz(),-i.Zg()*i.hz()),JG.rotate(i.cV()),JG.offset(i.zM(),i.qM()),{x:JG.Oa(),y:JG.Da(),width:o,height:a}}cas(t){return this.Ios(),this.Sos.FA(t)}fas(t){let s=qG.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}das(t,s){let e=qG.get(t);if(null===e)return"";switch(e||(e="span"),t){case"color":return`<${e} style="color: ${s}">`;case"font":return`<${e} style="font-family: '${s}'">`;case"opacity":return`<${e} style="opacity: ${s}%">`;case"size":return`<${e} style="font-size: ${s}pt">`;case"background":return`<${e} style="background-color: ${s}">`;case"hide":return`<${e} style="visibility: hidden">`;case"class":return`<${e} class="${s}">`;case"tag":return`<${e} data-tag="${s}">`;default:return`<${e}>`}}async pas(){if(this.fos)return this.uos;const t=new MG.pn(this.Bc,{dg:!0}).Ig(),s=new Map;let e='<span class="c3-text"';const i=[];i.push(`font-family: '${this.Gos()}';`),this.Ros()&&i.push("font-weight: bold;"),this.Eos()&&i.push("font-style: italic;"),"character"===this.Dos()&&i.push("word-break: break-all;"),e+=` style="${i.join(" ")}">`;const n=this.los?this.$B().hHt(this.los):null;if(this.los){const e=MG.zn(MG.Ud),i=[],r=new Map;for(const s of t)if(s.Xg()){const t=s.Xy(n);if(t){const s=t.RS().gJ().gAt();if(r.has(s))continue;r.set(s,null),i.push(e.Bu((async()=>{const t=await s.AZ();r.set(s,t)})))}}await Promise.all(i);const h=[];for(const i of t)if(i.Xg()){const t=i.Xy(n);if(t){const i=t.RS(),n=i.gJ().gAt();h.push(e.Bu((async()=>{const e=await i.gJ().SAt(r.get(n));s.set(t,e)})))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const i of t){const t=i.Hy();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),e+=this.fas(s));for(const[s,i]of t)r.has(s)||(r.set(s,i),e+=this.das(s,i));if(i.qg()&&(e+=MG.Pm(MG._m(i.yy().join("")),"\n","<br>")),i.Xg()&&n){const r=i.Xy(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Nc.Pk()&&s.push("image-rendering: pixelated"),e+=`<img class="c3-text-icon" data-icon="${i.Yy()}" width="${r.Vg()}" height="${r.Zg()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)e+=this.fas(t);return e+="</span>",this.uos=e,this.fos=!0,this.uos}P8(){const t=this.Nc.yN();if(t>=this.gos)this.Cos(),this.xU(MG.EB.Text.AB.qos),this.Nc.SB();else{let s=MG.gr(this.mos,this.gos,t,0,this.yos);s=Math.floor(s),s!==this.Sos.cA()&&(this.Sos.uA(s),this.Nc.SB())}}PGt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.xA(),lQt:t=>this.kos(t)},{name:t+".properties.font.name",value:this.Gos(),lQt:t=>this.Nos(t)},{name:t+".properties.size.name",value:this.Pos(),lQt:t=>this.Bos(t)},{name:t+".properties.line-height.name",value:this.Aos(),lQt:t=>this.$os(t)},{name:t+".properties.bold.name",value:this.Ros(),lQt:t=>this.Wos(t)},{name:t+".properties.italic.name",value:this.Eos(),lQt:t=>this.Vos(t)}]}]}W_t(){return self.mas}};const YG=new WeakMap,XG=new Map([["left",0],["center",1],["right",2]]),KG=new Map([["top",0],["center",1],["bottom",2]]),ZG=["ltr","rtl"];self.mas=class extends self.IH{constructor(){super(),YG.set(this,self.$j.Uj().RH())}get text(){return YG.get(this).xA()}set text(t){xG.oi(t);const s=YG.get(this);s.Cos(),s.kos(t)}gas(t,s){xG.oi(t),xG.ii(s);const e=YG.get(this);e.Cos(),e.Hos(t,s)}yas(){YG.get(this).Jos()}set RX(t){xG.oi(t),YG.get(this).Nos(t)}get RX(){return YG.get(this).Gos()}set OX(t){YG.get(this).Wos(t)}get OX(){return YG.get(this).Ros()}set FX(t){YG.get(this).Vos(t)}get FX(){return YG.get(this).Eos()}set EX(t){xG.ii(t),YG.get(this).Bos(t)}get EX(){return YG.get(this).Pos()}set Sas(t){if(xG.Ti(t),t.length<3)throw new Error("expected 3 elements");HG.Ao(t[0],t[1],t[2]),YG.get(this).Yos(HG)}get Sas(){const t=YG.get(this).Xos();return[t.No(),t.Bo(),t.$o()]}set lineHeight(t){xG.ii(t),YG.get(this).$os(t)}get lineHeight(){return YG.get(this).Aos()}set kX(t){xG.oi(t);const s=XG.get(t);if(void 0===s)throw new Error("invalid mode");YG.get(this).jos(s)}get kX(){return $G[YG.get(this).Oos()]}set verticalAlign(t){xG.oi(t);const s=KG.get(t);if(void 0===s)throw new Error("invalid mode");YG.get(this).Uos(s)}get verticalAlign(){return WG[YG.get(this).Fos()]}set NX(t){if(!jG.includes(t))throw new Error("invalid mode");YG.get(this).zos(t)}get NX(){return YG.get(this).Dos()}set BX(t){xG.oi(t);const s=ZG.indexOf(t);if(-1===s)throw new Error("invalid text direction");YG.get(this).Zos(s)}get BX(){return ZG[YG.get(this).Qos()]}set was(t){YG.get(this).tas(!!t)}get was(){return YG.get(this).Los()}vas(t){xG.ii(t);const s=YG.get(this);s.sas("fixed"),s.ias(t)}bas(){YG.get(this).sas("auto")}get VX(){return YG.get(this).ras()}get jX(){return YG.get(this).oas()}Mas(){const t=YG.get(this);return[t.ras(),t.oas()]}xas(t,s,e){return xG.oi(t),xG.ii(s),xG.ii(e),YG.get(this).las(t,s,e)}Tas(t,s){return xG.ii(t),xG.ii(s),YG.get(this).aas(t,s)}Cas(t,s=0){return xG.oi(t),xG.ii(s),YG.get(this).uas(t,s)}Ias(t){return xG.oi(t),YG.get(this).cas(t)}_as(t){const s=YG.get(this),e=s.$B().g$(t);s.Mos(e)}Gas(){return YG.get(this).pas()}}}{const QG=self._s;QG.EB.Text.AB={Pas(t,s){return s?this.Bc===t:QG.Zi(this.Bc,t)},Aas(){return-1!==this.gos},qos:()=>!0,Ras(t,s,e){return this.las(t,s,e)}}}{const tP=self._s,sP=tP.zn(tP.To);tP.EB.Text.Nrt={Vc(t){this.Cos(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.kos(t.toString())},Eas(t){this.Cos(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.kos(this.Bc+t)},Oas(t,s){this.Cos(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.Hos(t.toString(),s)},Fas(t,s){let e=!1,i=!1;switch(s){case 1:e=!0;break;case 2:i=!0;break;case 3:e=!0,i=!0}t===this.nos&&e===this.lP&&i===this.uP||(this.Nos(t),this.Wos(e),this.Vos(i))},sA(t){this.Bos(t)},Das(t){sP.Qo(t),sP.Kn(),this.Yos(sP)},Las(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},kns(t){this.cB().FM(t),this.Nc.SB()},kas(){this.Jos()},nA(t){this.$os(t)},Nas(t){this.jos(t)},Bas(t){this.Uos(t)},$as(t){this.Kos(t)},bA(t){this.Zos(t)},Was(t){this.Mos(t)},Vas(){return this.pas()},jas(t){this.tas(t)},Uas(t,s){this.sas(["auto","fixed"][t]),this.ias(s)}}}{const eP=self._s;eP.EB.Text.Brt={Text(){return this.Bc},zas(){return this.ios?eP.pn.Fg(this.Bc):this.Bc},Has(){return this.nos},Jas(){return this.ros},qas(){return this.ras()},Yas(){return this.oas()},Xas(){return this.hos},Kas(t,s){return this.aas(t,s)},Zas(t){return this.cas(t)},Qas(t,s){const e=this.uas(t,s);return e?e.x:0},tls(t,s){const e=this.uas(t,s);return e?e.y:0},sls(t,s){const e=this.uas(t,s);return e?e.width:0},els(t,s){const e=this.uas(t,s);return e?e.height:0},ils(){return this.uos}}}{const iP=self._s;iP.EB.nls=class extends iP.y_t{constructor(t){super(t)}Hn(){super.Hn()}}}{const nP=self._s;nP.EB.nls.ORt=class extends nP.sGt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){this.gJ().BB(this.Nc)}O5(t){return this.gJ().wX(t,{Kx:this.Nc.Pk()})}B5(){this.gJ().HP()}}}{let rP=function(t){return EP.get(t).rls()};GetParticleEngine=rP;const hP=self._s,oP=self.Ns,aP=0,lP=1,uP=2,cP=3,fP=4,dP=5,pP=6,mP=7,gP=8,yP=9,SP=10,wP=11,vP=12,bP=13,MP=14,xP=15,TP=16,CP=17,IP=18,_P=19,GP=20,PP=0,AP=1,RP=hP.zn(hP.Rect);hP.EB.nls.Instance=class extends hP.FGt{constructor(t,s){super(t),this.hls=!0;const e=hP.zn(self.ols);this.als=e,e.lls=()=>this.uls(),this.cls=null,this.fls=(t,s,e,i,n,r)=>this.dls(t,s,e,i,n,r),this.pls=t=>this.mls(t),this.gls=!0;let i=!0;s&&(e.yls(s[aP]),e.Sls(hP.Qn(s[lP])),e.wls(s[uP]?"one-shot":"continuous-spray"),this.vls(this.Nc._Y(s[cP])),i=s[fP],e.bls(s[dP]),e.Mls(s[pP]),e.xls(s[mP]/100),e.Tls(s[gP]),e.Cls(s[yP]),e.Ils(s[SP]),e._ls(s[wP]),e.Gls(s[vP]),e.Pls(s[bP]),e.Als(s[MP]),e.Rls(s[xP]),e.Els(s[TP]),e.Ols(s[CP]),e.Fls(s[IP]),e.Dls(s[_P]),e.nss(s[GP])),this.Lls(),this.cls&&(this.gls=!1),"one-shot"===e.kls()?e.Nls():e.Bls(!0);const n=this.cB();n.JV(i),n.wLt(!0),this.fe.Sf().addEventListener("bboxchange",(()=>{n.SLt(this.als.pz())})),this.$B().pM().sv()&&n.uLt(),this.R6=t=>this.E6(t),this.$B().Sf().addEventListener("afterload",this.R6),this.CGt()}Hn(){this.$B().Sf().removeEventListener("afterload",this.R6),this.R6=null,this.als.Hn(),this.als=null,this.fls=null,this.pls=null,super.Hn()}rls(){return this.als}$ls(t){this.als.yls(t),"one-shot"===this.als.kls()&&this.hls&&this.als.Wls(t)}vls(t){t===this.Wj()&&(t=null),t!==this.cls&&(this.cls=t,this.als.Vls=t?t=>this.jls(t):null,this.cls||(this.gls=!0))}Lls(){const t=this.als,s=this.cB();t.Uls(s.tO()),t.Eqt(this.Nc.Rk()),t.zls(s.zM()),t.Hls(s.qM()),t.Jls(s.cV()),t.qls(Math.abs(s.FDt()))}uls(){this.Nc.Jj(this.fe)}$x(t){if(!this.gls)return;const s=this.Ddt.gJ(),e=s.cC();if(!e)return;const i=this.cB(),n=i.fB(),r=RP;this.Nc.IB().bWt()?r.set(-1/0,-1/0,1/0,1/0):n.G1()?n.f3(i.cz(),r):n.c1(i.cz(),r),t.rO(e);const h=n.f1(i.cz());this.als.Yls(n.Bj()*h),this.als.$x(t,s.HGt(),r,n.G1())}hx(){const t=this.als;return{r:t.Xls(),sc:t.Kls(),st:t.kls(),isp:t.Zls(),isz:t.Qls(),io:t.tus(),gr:t.sus(),xr:t.eus(),yr:t.ius(),spr:t.nus(),szr:t.rus(),grnd:t.hus(),acc:t.ous(),g:t.aus(),lar:t.lus(),lsr:t.uus(),lor:t.cus(),dm:t.fus(),to:t.dus(),s:t.pus(),pcc:t.mus(),ft:this.hls,soc:this.cls?this.cls.U0():null,p:t.gus().map((t=>t.toJSON()))}}ox(t,s){const e=this.als;if(e.yls(t.r),e.Sls(t.sc),e.wls(t.st),e.bls(t.isp),e.Mls(t.isz),e.xls(t.io),e.Tls(t.gr),e.Cls(t.xr),e.Ils(t.yr),e._ls(t.spr),e.Gls(t.szr),e.Pls(t.grnd),e.Als(t.acc),e.Rls(t.g),e.Els(t.lar),e.Ols(t.lsr),e.Fls(t.lor),e.Dls(t.dm),e.nss(t.to),e.Bls(t.s),e.yus(t.pcc),this.hls=t.ft,t.hasOwnProperty("soc")){const s=this.$B()._Y(t.soc);s&&this.vls(s)}const i=t.p;e.Wls(i.length,!1);const n=e.gus();for(let t=0,s=n.length;t<s;++t)n[t].Sa(i[t]);"state"===s&&this.cls&&(e.Sus(),e.wus(this))}E6(){const t=this.als;t.Sus(),t.wus(this);const s=t.gus();for(let t=0,e=s.length;t<e;++t){const e=s[t],i=e.vus();if(!i)continue;const n=i.cB();if(!n)continue;const r=n.iq();if(!r)continue;const h=e.bus(),o=r.tU();if(("number"!=typeof h||"number"!=typeof o||h!==o)&&"number"==typeof h){const t=this.$B(),s=t.hB(h);s&&t.Jj(s)}}}P8(){const t=this.Nc.lN(this.fe);this.Lls(),this.hls&&"one-shot"===this.als.kls()&&this.als.Mus(),this.als.P8(t),this.als.pus()&&this.Nc.SB(),this.cB().ZU(),this.hls=!1}xus(t){const s=1/60;for(this.hls&&"one-shot"===this.als.kls()&&this.als.Mus();t>0;)this.als.P8(s),t-=s;this.als.pus()&&this.Nc.SB(),this.cB().ZU(),this.hls=!1}jls(t,s){let e;"number"==typeof s&&(e=this.Nc.hB(s)),e&&e.Wj()!==this.cls&&(e=null),e||(e=this.Nc.$W(this.cls,this.cB().fB(),t.zM(),t.qM()));const i=e.cB();return i.TA(t.Ou(),t.Ou()),i.uV(t.cV()),i.eO(t.tO()),i.bz(this.cB().vz()),i.ZU(),i.Pz(this.iq(),!0),e.r4(),t.Tus(this.fls),t.Cus(this.pls),e}dls(t,s,e,i,n,r){if(t.Jq())return;const h=t.cB();h.sz(s,e),h.TA(h.Vg()+i,h.Zg()+i),h.uV(h.cV()+n),h.eO(h.tO()+r),h.ZU()}mls(t){t.Jq()||this.Nc.Jj(t)}bht(t){const s=this.als;switch(t){case aP:return s.Xls();case lP:return hP.tr(s.Kls());case uP:return"one-shot"===s.kls()?AP:PP;case dP:return s.Zls();case pP:return s.Qls();case mP:return 100*s.tus();case gP:return s.sus();case yP:return s.eus();case SP:return s.ius();case wP:return s.nus();case vP:return s.rus();case bP:return s.hus();case MP:return s.ous();case xP:return s.aus();case TP:return s.lus();case CP:return s.uus();case IP:return s.cus();case _P:return s.fus();case GP:return s.dus()}}_ht(t,s){const e=this.als;switch(t){case aP:e.yls(s);break;case lP:e.Sls(hP.Qn(s));break;case uP:e.wls(s?"one-shot":"continuous-spray");break;case dP:e.bls(s);break;case pP:e.Mls(s);break;case mP:e.xls(s/100);break;case gP:e.Tls(s);break;case yP:e.Cls(s);break;case SP:e.Ils(s);break;case wP:e._ls(s);break;case vP:e.Gls(s);break;case bP:e.Pls(s);break;case MP:e.Als(s);break;case xP:e.Rls(s);break;case TP:e.Els(s);break;case CP:e.Ols(s);break;case IP:e.Fls(s);break;case _P:e.Dls(s);break;case GP:e.nss(s)}}PGt(){const t="plugins.particles",s=t+".properties",e=t+".debugger",i=this.als;return[{title:t+".name",properties:[{name:e+".particle-count",value:i.Ius()},{name:s+".type.name",value:[s+".type.items."+i.kls()]},{name:e+".is-spraying",value:i.pus(),lQt:t=>i.Bls(t)},{name:s+".rate.name",value:i.Xls(),lQt:t=>i.yls(t)},{name:s+".spray-cone.name",value:hP.tr(i.Kls()),lQt:t=>i.Sls(hP.Qn(t))},{name:s+".speed.name",value:i.Zls(),lQt:t=>i.bls(t)},{name:s+".size.name",value:i.Qls(),lQt:t=>i.Mls(t)},{name:s+".opacity.name",value:i.tus(),lQt:t=>i.xls(t)},{name:s+".grow-rate.name",value:i.sus(),lQt:t=>i.Tls(t)},{name:s+".x-randomiser.name",value:i.eus(),lQt:t=>i.Cls(t)},{name:s+".y-randomiser.name",value:i.ius(),lQt:t=>i.Ils(t)},{name:s+".initial-speed-randomiser.name",value:i.nus(),lQt:t=>i._ls(t)},{name:s+".size-randomiser.name",value:i.rus(),lQt:t=>i.Gls(t)},{name:s+".grow-rate-randomiser.name",value:i.hus(),lQt:t=>i.Pls(t)},{name:s+".acceleration.name",value:i.ous(),lQt:t=>i.Als(t)},{name:s+".gravity.name",value:i.aus(),lQt:t=>i.Rls(t)},{name:s+".angle-randomiser.name",value:i.lus(),lQt:t=>i.Els(t)},{name:s+".life-speed-randomiser.name",value:i.uus(),lQt:t=>i.Ols(t)},{name:s+".opacity-randomiser.name",value:i.cus(),lQt:t=>i.Fls(t)},{name:s+".timeout.name",value:i.dus(),lQt:t=>i.nss(t)}]}]}W_t(){return self._us}};const EP=new WeakMap;self._us=class extends self.IH{constructor(){super(),EP.set(this,self.$j.Uj().RH())}set Gus(t){rP(this).Bls(!!t)}get Gus(){return rP(this).pus()}set rate(t){oP.ii(t),EP.get(this).$ls(t)}get rate(){return rP(this).Xls()}set Pus(t){oP.ii(t),rP(this).Sls(t)}get Pus(){return rP(this).Kls()}set Aus(t){oP.ii(t),rP(this).bls(t)}get Aus(){return rP(this).Zls()}set Rus(t){oP.ii(t),rP(this).Mls(t)}get Rus(){return rP(this).Qls()}set Eus(t){oP.ii(t),rP(this).xls(t)}get Eus(){return rP(this).tus()}set Ous(t){oP.ii(t),rP(this).Cls(t)}get Ous(){return rP(this).eus()}set Fus(t){oP.ii(t),rP(this).Ils(t)}get Fus(){return rP(this).ius()}set Dus(t){oP.ii(t),rP(this)._ls(t)}get Dus(){return rP(this).nus()}set Lus(t){oP.ii(t),rP(this).Gls(t)}get Lus(){return rP(this).rus()}set kus(t){oP.ii(t),rP(this).Tls(t)}get kus(){return rP(this).sus()}set Nus(t){oP.ii(t),rP(this).Pls(t)}get Nus(){return rP(this).hus()}set acceleration(t){oP.ii(t),rP(this).Als(t)}get acceleration(){return rP(this).ous()}set Bus(t){oP.ii(t),rP(this).Rls(t)}get Bus(){return rP(this).aus()}set $us(t){oP.ii(t),rP(this).Els(t)}get $us(){return rP(this).lus()}set Wus(t){oP.ii(t),rP(this).Ols(t)}get Wus(){return rP(this).uus()}set Vus(t){oP.ii(t),rP(this).Fls(t)}get Vus(){return rP(this).cus()}set timeout(t){oP.ii(t),rP(this).nss(t)}get timeout(){return rP(this).dus()}jus(t){oP.ii(t),EP.get(this).xus(t)}Uus(t){const s=EP.get(this);t?s.vls(s.$B().g$(t)):s.vls(null)}}}self._s.EB.nls.AB={pus(){return this.als.pus()}};{const OP=self._s;OP.EB.nls.Nrt={Bls(t){this.als.Bls(0!==t)},yls(t){this.$ls(t)},zus(t){this.vls(t)},Hus(){this.vls(null)},Sls(t){this.als.Sls(OP.Qn(t))},bls(t){this.als.bls(t)},Mls(t){this.als.Mls(t)},xls(t){this.als.xls(t/100)},Tls(t){this.als.Tls(t)},Jus(t){this.als.Cls(t)},qus(t){this.als.Ils(t)},Yus(t){this.als._ls(t)},Xus(t){this.als.Gls(t)},Kus(t){this.als.Pls(t)},Zus(t){this.als.Als(t)},Rls(t){this.als.Rls(t)},Qus(t){this.als.Els(t)},tcs(t){this.als.Ols(t)},scs(t){this.als.Fls(t)},nss(t){this.als.nss(t)},ecs(t){this.xus(t)},kns(t){this.cB().FM(t),this.Nc.SB()}}}{const FP=self._s;FP.EB.nls.Brt={ics(){return this.als.Ius()},ncs(){return this.als.Xls()},rcs(){return FP.tr(this.als.Kls())},hcs(){return this.als.Zls()},ocs(){return this.als.Qls()},acs(){return 100*this.als.tus()},lcs(){return this.als.sus()},ucs(){return this.als.eus()},ccs(){return this.als.ius()},fcs(){return this.als.rus()},dcs(){return this.als.nus()},pcs(){return this.als.hus()},mcs(){return this.als.ous()},gcs(){return this.als.aus()},ycs(){return this.als.lus()},Scs(){return this.als.uus()},wcs(){return this.als.cus()},vcs(){return this.als.dus()}}}{const DP=self._s,LP=[],kP=1e3,NP=new Set(["continuous-spray","one-shot"]),BP=["fade-to-invisible","timeout-expired","particle-stopped"],$P=DP.zn(DP.Rect);self.ols=class{constructor(){this.bcs=0,this.Mcs=0,this.xcs="continuous-spray",this.Tcs=!1,this.Ccs=0,this.Ics=!1,this._cs=0,this.Gcs=0,this.Pcs=0,this.Acs=0,this.Rcs=0,this.Ecs=1,this.Ocs=0,this.Fcs=0,this.Dcs=0,this.Lcs=0,this.kcs=0,this.Ncs=0,this.Bcs=0,this.$cs=0,this.Wcs=0,this.Vcs=0,this.jcs=0,this.Ucs=0,this.zcs=0,this.Lf=0,this.Hcs=0,this.Jcs=1,this.lls=null,this.Vls=null,this.qcs=[],this.nDt=new DP.Rect,this.RM=new DP.To,this.vD=globalThis.devicePixelRatio||1}Hn(){this.$f(),DP.bh(this.qcs),this.qcs=null,this.lls=null,this.Vls=null,this.nDt=null,this.RM=null}$f(){const t=this.qcs;for(let s=0,e=t.length;s<e;++s)t[s].lIt();DP.On(LP,t),DP.bh(t),LP.length>1e3&&DP.wh(LP,1e3),this.Tcs=!1}Nls(){for(let t=0,s=this.bcs;t<s;++t)this.Ycs();this.qcs.length&&(this.Tcs=!0)}Ycs(t=!0){let s=null;return LP.length?(s=LP.pop(),s.Xcs(this)):s=DP.zn(self.Kcs,this),this.qcs.push(s),t?s.eOt(this.Vls):s.eOt(),s}Mus(){const t=this.qcs,s=this.Vls;for(let e=0,i=t.length;e<i;++e)t[e].eOt(s)}Sus(){const t=this.qcs,s=this.Vls;for(let e=0,i=t.length;e<i;++e)t[e].Zcs(s)}wus(t){const s=this.qcs;for(let e=0,i=s.length;e<i;++e){const i=s[e],n=i.vus();if(n){const s=n.cB();s.HM(i.zM()),s.YM(i.qM()),s.TA(i.Ou(),i.Ou()),s.eO(i.tO()),s.uV(i.cV()),s.bz(t.cB().vz()),s.ZU()}}}Wls(t,s=!0){const e=this.qcs;if(t<e.length){const s=e.length-t;for(let t=0;t<s;++t){const t=e.pop();t.lIt(),LP.push(t)}LP.length>1e3&&DP.wh(LP,1e3)}else if(t>e.length){const i=t-e.length;for(let t=0;t<i;++t)this.Ycs(s)}}gus(){return this.qcs}Ius(){return this.qcs.length}P8(t){this.Qcs(t),this.tfs(t),this.sfs()}Qcs(t){if("continuous-spray"===this.xcs&&this.Tcs){this.Hcs+=t*this.bcs;const s=Math.floor(this.Hcs);this.Hcs-=s;for(let t=0;t<s;++t)this.Ycs()}}yus(t){this.Hcs=t}mus(){return this.Hcs}tfs(t){const s=this.nDt;s.set(this._cs,this.Gcs,this._cs,this.Gcs);const e=this.qcs;let i=0;for(let n=0,r=e.length;n<r;++n){const r=e[n];e[i]=r,r.P8(t),r.ASt()?(++i,s.Il(r.pz())):(r.lIt(),LP.push(r))}DP.wh(e,i),LP.length>1e3&&DP.wh(LP,1e3)}sfs(){"one-shot"===this.xcs&&0===this.qcs.length&&this.Tcs&&(this.lls&&this.lls(),this.Tcs=!1)}$x(t,s,e,i){this.vD=globalThis.devicePixelRatio||1,$P.set(s.Br(),s.$r(),s.jr(),s.Ur()),t.vO($P),this.RM.S(t.nO());const n=this.qcs;for(let r=0,h=n.length;r<h;++r){const h=n[r];e.Ml(h.pz())&&h.$x(t,s,i)}t.bO()}nO(){return this.RM}yls(t){this.bcs=+t}Xls(){return this.bcs}Sls(t){this.Mcs=+t}Kls(){return this.Mcs}wls(t){if(!NP.has(t))throw new Error("invalid spray type");this.xcs=t}kls(){return this.xcs}Bls(t){this.Tcs=!!t}pus(){return this.Tcs}Uls(t){this.Ccs=+t}efs(){return this.Ccs}Eqt(t){this.Ics=!!t}ifs(){return this.Ics}zls(t){this._cs=+t}nfs(){return this._cs}Hls(t){this.Gcs=+t}rfs(){return this.Gcs}Jls(t){this.Pcs=+t}hfs(){return this.Pcs}bls(t){this.Acs=+t}Zls(){return this.Acs}Mls(t){this.Rcs=+t}Qls(){return this.Rcs}qls(t){this.Ecs=+t}ofs(){return this.Ecs}xls(t){this.Ocs=+t}tus(){return this.Ocs}Tls(t){this.Fcs=+t}sus(){return this.Fcs}Cls(t){this.Dcs=+t}eus(){return this.Dcs}Ils(t){this.Lcs=+t}ius(){return this.Lcs}_ls(t){this.kcs=+t}nus(){return this.kcs}Gls(t){this.Ncs=+t}rus(){return this.Ncs}Pls(t){this.Bcs=+t}hus(){return this.Bcs}Als(t){this.$cs=+t}ous(){return this.$cs}Rls(t){this.Wcs=+t}aus(){return this.Wcs}Els(t){this.Vcs=+t}lus(){return this.Vcs}Ols(t){this.jcs=+t}uus(){return this.jcs}Fls(t){this.Ucs=+t}cus(){return this.Ucs}afs(t){let s=BP.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.zcs=s}Dls(t){this.afs(BP[t])}lfs(){return BP[this.zcs]}fus(){return this.zcs}nss(t){this.Lf=+t}dus(){return this.Lf}Yls(t){this.Jcs=+t}ufs(){return this.Jcs}pz(){return this.nDt}W$(){return this.vD}}}{let WP=function(t){return Math.random()*t-t/2};randomOffset=WP;const VP=self._s,jP=self.ols,UP=new VP.Gl,zP=new VP.To;let HP=!1;self.Kcs=class{constructor(t){this.cfs=t,this.Nf=!1,this.Pa=0,this.Aa=0,this.vAt=0,this.PQ=0,this.ffs=1,this.dfs=0,this.pfs=0,this.mZ=0,this.mfs=0,this.gfs=0,this.yfs=0,this.uu=new VP.Rect,this.Sfs=null,this.wfs=NaN,this.vfs=null,this.bfs=null}Xcs(t){this.cfs=t}eOt(t){const s=this.cfs;this.Nf=!0,this.Pa=s.nfs()+WP(s.eus()),this.Aa=s.rfs()+WP(s.ius()),this.vAt=s.Zls()+WP(s.nus()),this.PQ=s.hfs()+WP(s.Kls()),this.ffs=s.tus(),this.dfs=this.ffs,this.mZ=(s.Qls()+WP(s.rus()))*s.ofs(),this.mfs=this.mZ/2,this.pfs=s.sus()+WP(s.hus()),this.gfs=0,this.yfs=0,this.Mfs(),t?this.Sfs||(this.Sfs=t(this)):(this.Sfs=null,this.vfs=null,this.bfs=null)}Zcs(t){t?this.Sfs&&!this.Sfs.Jq()||(this.Sfs=t(this,this.wfs)):(this.Sfs=null,this.vfs=null,this.bfs=null)}Tus(t){this.vfs=t}Cus(t){this.bfs=t}lIt(){const t=this.bfs;t&&t(this.Sfs),this.Sfs=null,this.vfs=null,this.bfs=null}toJSON(){let t;return this.Sfs&&this.Sfs.cB()&&(t=this.Sfs.cB().iq().tU()),[this.Pa,this.Aa,this.vAt,this.PQ,this.ffs,this.pfs,this.mZ,this.gfs,this.yfs,t]}Sa(t){this.Pa=t[0],this.Aa=t[1],this.vAt=t[2],this.PQ=t[3],this.ffs=t[4],this.dfs=this.ffs,this.pfs=t[5],this.mZ=t[6],this.gfs=t[7],this.yfs=t[8],this.wfs=t[9],this.mfs=this.mZ/2,this.Mfs()}P8(t){const s=this.cfs,e=this.vAt*t,i=this.PQ,n=Math.cos(i)*e,r=Math.sin(i)*e+this.gfs*t;this.Pa+=n,this.Aa+=r;const h=this.pfs*t;this.mZ+=h,this.mfs=this.mZ/2,this.vAt+=s.ous()*t,this.gfs+=s.aus()*t,this.yfs+=t,this.Mfs();const o=s.lus(),a=s.uus(),l=s.cus();let u=0;0!==o&&(u=WP(o*t),this.PQ+=u),0!==a&&(this.vAt+=WP(a*t)),0!==l&&(this.ffs=VP.Kn(this.ffs+WP(l*t),0,1));const c=this.mZ>=1&&(2===s.fus()?this.vAt>0:this.yfs<s.dus()),f=this.vfs;if(f&&c){let t=s.efs()*this.ffs;0===s.fus()&&(t*=1-this.yfs/s.dus());const e=t-this.dfs;this.dfs=t,f(this.Sfs,n,r,h,u,e)}this.Nf=c}ASt(){return this.Nf}pz(){return this.uu}Mfs(){const t=this.Pa,s=this.Aa,e=this.mfs;this.uu.set(t-e,s-e,t+e,s+e)}$x(t,s,e){if(this.Sfs)return;const i=this.cfs;let n=i.efs()*this.ffs;if(0===i.fus()&&(n*=1-this.yfs/i.dus()),n<=0)return;const r=this.mZ,h=r*i.ufs()*i.W$();if(h<1)return;let o=this.Pa,a=this.Aa;i.ifs()&&(o=o+.5|0,a=a+.5|0),t.sv()?t.MO(o,a,r,n):e||h>t.rF()||h<t.nF()?(zP.S(i.nO()),zP.Xo(n),t.DM(zP),HP=!0,UP.Yl(this.uu),t.mO(UP,s)):(HP&&(t.DM(i.nO()),HP=!1),t.MO(o,a,h,n))}vus(){return this.Sfs}bus(){return this.wfs}zM(){return this.Pa}qM(){return this.Aa}Ou(){return this.mZ}cV(){return this.PQ}tO(){return this.ffs}}}{const JP=self._s;JP.Llt.xfs=class extends JP.yPt{constructor(t){super(t)}Hn(){super.Hn()}}}{const qP=self._s;qP.Llt.xfs.ORt=class extends qP.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const YP=self._s,XP=self.Ns,KP=self.LH,ZP=0,QP=1,tA=2,sA=3,eA=4,iA=5,nA=6,rA=7,hA=8,oA=0,aA=1,lA=2,uA=3,cA=4,fA=5,dA=6,pA=7,mA=8,gA=9,yA=0,SA=1,wA=2,vA=3,bA=4,MA=2*Math.PI,xA=Math.PI/2,TA=3*Math.PI/2,CA=[0,1,8,3,4,2,5,6,9,7];YP.Llt.xfs.Instance=class extends YP.TPt{constructor(t,s){super(t),this.Tfs=0,this.Cfs=0,this.Ifs=0,this._fs=0,this.Gfs=0,this.Qvt=!0,this.Pfs=0,this.Afs=0,this.Rfs=0,this.Efs=0,this.Ofs=0,this.Ffs=0,this.Tbt=0,this.Dfs=0,this.Lfs=0,this.kfs=0,this.Nfs=0,s&&(this.Cfs=CA[s[ZP]],this.Ifs=s[QP],this.Efs=this.Nc.VN()*s[sA],this.Pfs=s[tA],this._fs=s[tA],this._fs+=this.Efs,this.Afs=s[eA],0!==this._fs&&(this.Ofs=this.Nc.VN()*s[iA],this.Tfs=s[eA]/this._fs*MA,this.Tfs+=this.Ofs/this._fs*MA),this.Ffs=this.Nc.VN()*s[rA],this.Rfs=s[nA],this.Gfs=s[nA],this.Gfs+=this.Ffs,this.Qvt=!!s[hA]),this.Cfs===fA&&(this.Gfs=YP.Qn(this.Gfs)),this.eOt(),this.Qvt&&this.CGt()}Hn(){super.Hn()}hx(){return{i:this.Tfs,e:this.Qvt,mv:this.Cfs,w:this.Ifs,p:this._fs,mag:this.Gfs,iv:this.Tbt,iv2:this.Dfs,r:this.Nfs,lkv:this.Lfs,lkv2:this.kfs}}ox(t){this.Tfs=t.i,this.XCt(t.e),this.Cfs=t.mv,this.Ifs=t.w,this._fs=t.p,this.Gfs=t.mag,this.Tbt=t.iv,this.Dfs=t.iv2,this.Nfs=t.r,this.Lfs=t.lkv,this.kfs=t.lkv2}eOt(){const t=this.fe.cB();switch(this.Cfs){case oA:this.Tbt=t.zM();break;case aA:this.Tbt=t.qM();break;case lA:this.Tbt=t.Vg(),this.Nfs=t.Zg()/t.Vg();break;case uA:this.Tbt=t.Vg();break;case cA:this.Tbt=t.Zg();break;case fA:this.Tbt=t.cV();break;case dA:this.Tbt=t.tO();break;case pA:this.Tbt=0;break;case mA:this.Tbt=t.zM(),this.Dfs=t.qM();break;case gA:this.Tbt=t.XM()}this.Lfs=this.Tbt,this.kfs=this.Dfs}Bfs(t){switch(t%=MA,this.Ifs){case yA:return Math.sin(t);case SA:return t<=xA?t/xA:t<=TA?1-2*(t-xA)/Math.PI:(t-TA)/xA-1;case wA:return 2*t/MA-1;case vA:return-2*t/MA+1;case bA:return t<Math.PI?-1:1}return 0}P8(){const t=this.Nc.lN(this.fe);this.Qvt&&0!==t&&(0===this._fs?this.Tfs=0:this.Tfs=(this.Tfs+t/this._fs*MA)%MA,this.$fs())}$fs(){const t=this.fe.cB();switch(this.Cfs){case oA:t.zM()!==this.Lfs&&(this.Tbt+=t.zM()-this.Lfs),t.HM(this.Tbt+this.Bfs(this.Tfs)*this.Gfs),this.Lfs=t.zM();break;case aA:t.qM()!==this.Lfs&&(this.Tbt+=t.qM()-this.Lfs),t.YM(this.Tbt+this.Bfs(this.Tfs)*this.Gfs),this.Lfs=t.qM();break;case lA:t.Yg(this.Tbt+this.Bfs(this.Tfs)*this.Gfs),t.jg(t.Vg()*this.Nfs);break;case uA:t.Yg(this.Tbt+this.Bfs(this.Tfs)*this.Gfs);break;case cA:t.jg(this.Tbt+this.Bfs(this.Tfs)*this.Gfs);break;case fA:t.cV()!==this.Lfs&&(this.Tbt=YP.Zn(this.Tbt+(t.cV()-this.Lfs))),t.uV(this.Tbt+this.Bfs(this.Tfs)*this.Gfs),this.Lfs=t.cV();break;case dA:t.eO(this.Tbt+this.Bfs(this.Tfs)*this.Gfs/100);break;case mA:t.zM()!==this.Lfs&&(this.Tbt+=t.zM()-this.Lfs),t.qM()!==this.kfs&&(this.Dfs+=t.qM()-this.kfs),t.HM(this.Tbt+Math.cos(t.cV())*this.Bfs(this.Tfs)*this.Gfs),t.YM(this.Dfs+Math.sin(t.cV())*this.Bfs(this.Tfs)*this.Gfs),this.Lfs=t.zM(),this.kfs=t.qM();break;case gA:t.KM(this.Tbt+this.Bfs(this.Tfs)*this.Gfs)}t.ZU()}Wfs(t,s){}Vfs(t){this._fs=t}jfs(){return this._fs}Ufs(t){this.Gfs=t}zfs(t){5===this.Cfs&&(t=YP.Qn(t)),this.Ufs(t)}Hfs(){return this.Gfs}Jfs(){let t=this.Hfs();return 5===this.Cfs&&(t=YP.tr(t)),t}qfs(t){5===this.Cfs&&5!==t&&(this.Gfs=YP.tr(this.Gfs)),this.Cfs=t,this.eOt()}Yfs(){return this.Cfs}Xfs(t){this.Ifs=t}Kfs(){return this.Ifs}Zfs(t){this.Tfs=YP.Kn(t,0,2*Math.PI),this.$fs()}Qfs(){return this.Tfs}XCt(t){this.Qvt=!!t,this.Qvt?this.CGt():this.lGt()}ZCt(){return this.Qvt}bht(t){switch(t){case ZP:return this.Cfs;case QP:return this.Ifs;case tA:return this.Pfs;case nA:return this.Rfs;case hA:return this.Qvt}}_ht(t,s){switch(t){case ZP:this.Cfs=CA[s],this.eOt();break;case QP:this.Ifs=s;break;case tA:this.Pfs=s,this._fs=this.Pfs+this.Efs,this.Qvt||(0!==this._fs?(this.Tfs=this.Afs/this._fs*MA,this.Tfs+=this.Ofs/this._fs*MA):this.Tfs=0);break;case nA:this.Rfs=s,this.Gfs=this.Rfs+this.Ffs,this.Cfs===fA&&(this.Gfs=YP.Qn(this.Gfs));break;case hA:this.Qvt=!!s}}PGt(){const t="behaviors.sin";return[{title:"$"+this.WH().Pc(),properties:[{name:t+".properties.enabled.name",value:this.ZCt(),lQt:t=>this.XCt(t)},{name:t+".properties.period.name",value:this.jfs(),lQt:t=>this.Vfs(t)},{name:t+".properties.magnitude.name",value:this.Jfs(),lQt:t=>this.zfs(t)},{name:t+".debugger.value",value:this.Bfs(this.Qfs())*this.Jfs()}]}]}W_t(){return self.tds}};const IA=new WeakMap,_A=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],GA=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.tds=class extends KP{constructor(){super(),IA.set(this,KP.Uj().RH())}set sds(t){XP.ii(t),IA.get(this).Vfs(t)}get sds(){return IA.get(this).jfs()}set eds(t){XP.ii(t),IA.get(this).Ufs(t)}get eds(){return IA.get(this).Hfs()}set ids(t){IA.get(this).Zfs(t)}get ids(){return IA.get(this).Qfs()}set nds(t){XP.oi(t);const s=_A.indexOf(t);if(-1===s)throw new Error("invalid movement");IA.get(this).qfs(s)}get nds(){return _A[IA.get(this).Yfs()]}set rds(t){XP.oi(t);const s=GA.indexOf(t);if(-1===s)throw new Error("invalid wave");IA.get(this).Xfs(s)}get rds(){return GA[IA.get(this).Kfs()]}get value(){const t=IA.get(this);return t.Bfs(t.Qfs())*t.Hfs()}hds(){IA.get(this).eOt()}set isEnabled(t){IA.get(this).XCt(!!t)}get isEnabled(){return IA.get(this).ZCt()}}}{const PA=self._s;PA.Llt.xfs.AB={Iu(){return this.ZCt()},ods(t){return this.Yfs()===t},ads(t,s){return PA.compare(this.jfs(),t,s)},lds(t,s){return PA.compare(this.Jfs(),t,s)},uds(t){return this.Kfs()===t}}}self._s.Llt.xfs.Nrt={qIt(t){this.XCt(0!==t)},cds(t){this.Vfs(t)},fds(t){this.zfs(t)},dds(t){this.qfs(t)},pds(t){this.Ifs=t},mds(t){const s=2*Math.PI;this.Zfs(t*s%s)},gds(){this.eOt()}},self._s.Llt.xfs.Brt={yds(){return this.Qfs()/(2*Math.PI)},Sds(){return this.jfs()},wds(){return this.Jfs()},vds(){return this.Bfs(this.Qfs())*this.Jfs()}};{const AA=self._s;AA.Llt.Dlt=class extends AA.yPt{constructor(t){super(t)}Hn(){super.Hn()}}}{const RA=self._s;RA.Llt.Dlt.ORt=class extends RA.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const EA=self._s,OA=EA.Llt.Dlt,FA=0;OA.Instance=class extends EA.TPt{constructor(t,s){super(t),this.bds=!1,this.fu=!0,s&&(this.bds=!1,this.fu=!!s[FA]),this.Mds=new Map,this.xds=[],this.Tds=new Map,this.Cds=null,this.Ids=null,this._ds=null,this.Gds=null,this.Pds="",this.Ads=[],this.R6=t=>this.E6(),this.$B().Sf().addEventListener("afterload",this.R6)}Hn(){this.$B().Sf().removeEventListener("afterload",this.R6),this.R6=null,this.Cds&&(this.Rds(this.Cds),this.Cds=null),this.Eds(),this.Ods=null,this.Fds(),this.xds=null,this.Dds(),this.Tds=null,this.Ads=null,super.Hn()}$lt(t){this.Ads.push(t)}Wlt(){this.Ads.pop()}Lds(){return this.Ads[this.Ads.length-1]}qIt(t){this.fu=!!t,t?this.Tds&&this.Tds.size&&this._Gt():this.uGt();for(const s of this.kds())t?this.Nds(s)&&s.FJ():((s.IsPlaying()||s.jtt())&&this.Bds(s),s.OJ());t&&this.Fds()}Iu(){return this.fu}Bds(t){this.xds.push(t)}Nds(t){return this.xds.includes(t)}Fds(){EA.bh(this.xds)}$ds(){return this.Cds}cet(){const t=this.jH();return!!t&&!t.Jq()}Wds(t,s,e=!1){const i=s?this.Vds(s,e):this.kds(e);if(i&&i.length)for(const s of i)if(s.DJ(t))return s}jds(t,s){for(const e of this.Mds.values())for(const i of e)if(!i.RJ()&&i.DJ(t)&&s(i))return!0;for(const e of this.Tds.values())for(const i of e)if(!i.RJ()&&i.DJ(t)&&s(i))return!0;return!1}Uds(t){for(const s of this.Mds.values())for(const e of s)if(!e.RJ()&&t(e))return!0;for(const s of this.Tds.values())for(const e of s)if(!e.RJ()&&t(e))return!0;return!1}zds(t,s){return this.Wds(t,s,!0)}*Hds(t,s,e=!1){const i=s?this.Vds(s,e):this.kds(e);if(i&&i.length)for(const s of i)s.DJ(t)&&(yield s)}*Jds(t,s){yield*this.Hds(t,s,!0)}Vds(t,s){if(s){let s=this.Mds.get(t),e=this.Tds.get(t);return s||(s=[]),e||(e=[]),s.concat(e).filter((t=>t)).filter((t=>!t.RJ()))}{let s=this.Mds.get(t);return s||(s=[]),s.filter((t=>t)).filter((t=>!t.RJ()))}}kds(t){if(t){const t=[...this.Mds.values()].flat(),s=[...this.Tds.values()].flat();return t.concat(s).filter((t=>t)).filter((t=>!t.RJ()))}return[...this.Mds.values()].flat().filter((t=>t)).filter((t=>!t.RJ()))}qds(){return this.kds(!0)}hx(t="full"){return{s:!1,e:!!this.fu,at:this.Yds(),dt:this.Xds(),wt:this.Kds(),ft:this.Zds()}}ox(t,s="full"){t&&(this.Ids=t.at,this._ds=t.dt,this.Gds=t.wt,this.Pds=t.ft,this.bds=!1,this.fu=!!t.e,"state"===s&&this.E6())}E6(){const t=this.$B().ltt();if(this.Qds(this.Ids,this.Mds,t),this._ds){EA.bh(this.xds);for(const s of this._ds)this.tps(this.xds,s,t)}this.Qds(this.Gds,this.Tds,t),this.Cds=this.sps(this.Pds,t),this.fu?this.Tds&&this.Tds.size&&this._Gt():this.uGt()}Qds(t,s,e){if(t)for(const i in t){let n=s.get(i);n?EA.bh(n):n=[];const r=t[i];for(const t of r)if(this.tps(n,t.name,e))this.eps(t.name,t,e);else{const s=EA.mot.Ult({runtime:this.$B(),json:t});EA.mot.Ret(s,this.jH().tU()),s.Mlt((t=>this.ips(t))),s.vlt(this),e.u8(s),this.tps(n,s,e)}s.set(i,n)}}sps(t,s){return s.o8(t)}tps(t,s,e){if("string"!=typeof s)return!!t.push(s);{const i=this.sps(s,e);if(i)return!!t.push(i)}return!1}eps(t,s,e){if("string"==typeof t){const i=this.sps(t,e);i&&(i.b3(s),EA.mot.Ret(i,this.jH().tU()),EA.mot.vlt(i,this))}else t.b3(s),EA.mot.Ret(t,this.jH().tU()),EA.mot.vlt(t,this)}Yds(){const t={};for(const[s,e]of this.Mds)t[s]=e.filter((t=>!t.RJ())).map((t=>t.v3()));return t}Xds(){return this.xds.filter((t=>!t.RJ())).map((t=>t.Pc()))}Kds(){const t={};for(const[s,e]of this.Tds)t[s]=e.map((t=>t.v3()));return t}Zds(){return this.Cds?this.Cds.Pc():""}TGt(){this.Dds()}nps(t){const s=OA.hps.rps(t.Get,t.Qlt,t.tut,t.Zlt,t.Ylt,this.jH()),e=OA.aps.ops(t.Get);OA.aps.lps(e)||this.ups(t.Get);const i=EA.mot.Ult({runtime:this.$B(),id:e,tags:t.tags,time:t.time,VH:this.jH(),Jlt:!!t.Jlt,loop:!!t.loop,qlt:!!t.qlt,eJ:t.eJ,Hlt:t.Hlt,zlt:s});return i.Mlt((t=>this.ips(t))),i.vlt(this),this.cps(i,t.Get),i}fps(t){const s=t.oq();if(this.Mds.has(s)){const e=this.Mds.get(s);if(e){const s=e.indexOf(t);-1!==s&&e.splice(s,1)}}}tq(t,s=!1){this.fps(t),t.RJ()||this.dps(t)||(t.OJ(s),this.pps(t))}ups(t,s=!1){if(EA.Ke(t)){const e=OA.aps.ops(t);if(!this.Mds.has(e))return;const i=this.Mds.get(e),n=this.$ds();for(const t of i)t!==n&&(t.RJ()||this.dps(t)||(t.OJ(s),t.Hn()));EA.bh(i)}else{const t=this.$ds();for(const e of this.kds())e!==t&&(e.RJ()||this.dps(e)||(e.OJ(s),e.Hn()));for(const t of this.Mds.keys())EA.bh(this.Mds.get(t)),this.Mds.delete(t);this.Mds.clear()}}Rds(t){this.tq(t,!0)}Eds(){this.ups(NaN,!0)}bht(t){if(t===FA)return this.fu}_ht(t,s){t===FA&&(this.fu=!!s)}mps(t){const s=t.iq().Qnt();for(const t of s){const s=t.WH();if(s.sEt()===this.constructor)return s}}xU(t,s,e,i){return this.Nc?super.xU(t):s.xU(t,e,i)}ips(t){let s,e;if(this.Cds=t,OA.AB.gps(t),this.$B())s=this.fe,e=this.Nc,this.xU(OA.AB.yps),this.xU(OA.AB.Sps),this.tq(t);else{if(s=t.iq(),!s)return;if(s&&s.Jq())return;e=s.$B();const i=this.mps(t);this.xU(OA.AB.yps,e,s,i),this.xU(OA.AB.Sps,e,s,i),t.OJ()}this.Cds=null,OA.AB.gps(null),t.rq()&&e.Jj(s)}cps(t,s){const e=OA.aps.ops(s);this.Mds.has(e)||this.Mds.set(e,[]),this.Mds.get(e).push(t)}pps(t){const s=t.oq();this.Tds.has(s)||this.Tds.set(s,[]),this.Tds.get(s).push(t),this.GGt()||this._Gt()}dps(t){const s=t.oq();return!!this.Tds.has(s)&&this.Tds.get(s).includes(t)}Dds(){if(this.Tds.size){for(const t of this.Tds.values()){for(const s of t)s.RJ()||s.Hn();EA.bh(t)}this.Tds.clear(),this.GGt()&&this.uGt()}}PGt(){return[{title:"$"+this.WH().Pc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.Iu(),lQt:t=>this.qIt(t)}]}]}W_t(){return self.wps}}}{const DA=self._s;let LA=null;DA.Llt.Dlt.AB={Flt:()=>!0,klt(t){const s=this.Lds();return!!s&&s.DJ(t)},Nlt(t){const s=this.Lds();return!!s&&(s.xtt()===t||2===t)},Blt(t,s){const e=this.Lds();return!!e&&(e.xtt()===s||2===s)&&e.DJ(t)},gps(t){LA=t},yps:t=>LA.DJ(t),Sps:()=>!0,IsPlaying(t){return this.jds(t,DA.mot.IsPlaying)},a6t(){return this.Uds(DA.mot.IsPlaying)},YJ(t){return this.jds(t,DA.mot.YJ)},vps(){return this.Uds(DA.mot.YJ)},oJ(t,s){return 0===s?this.jds(t,DA.mot.Vlt):1===s&&this.jds(t,DA.mot.jlt)},bps(t){return 0===t?this.Uds(DA.mot.Vlt):1===t&&this.Uds(DA.mot.jlt)}}}{const kA=self._s,NA=self.Vu,BA=kA.Llt.Dlt;BA.Nrt={qIt(t){this.qIt(!!t)},async Mps(...t){if(!this.Iu()||!this.cet())return;const s=this.nps(BA.Tps.xps(this,...t));s.Play()&&await s.HJ()},async Cps(...t){if(!this.Iu()||!this.cet())return;const s=this.nps(BA.Tps.Ips(this,...t));s.Play()&&await s.HJ()},async _ps(...t){if(!this.Iu()||!this.cet())return;const s=this.nps(BA.Tps.Gps(this,...t));s.Play()&&await s.HJ()},Pps(t){if(this.Iu()&&this.cet())for(const s of this.Hds(t))s.OJ()},Aps(){if(this.Iu()&&this.cet())for(const t of this.kds())t.OJ()},Rps(t){if(this.Iu()&&this.cet())for(const s of this.Hds(t))s.FJ()},Eps(){if(this.Iu()&&this.cet())for(const t of this.kds())t.FJ()},Ops(t){if(this.Iu()&&this.cet())for(const s of this.Hds(t))this.tq(s)},Fps(){if(this.Iu()&&this.cet())for(const t of this.kds())this.tq(t)},Dps(t,s,e){if(!this.Iu()||!this.cet())return;const i=kA.Llt.Dlt.aps.Lps(s);for(const s of this.Hds(t))s._lt([i]),s.Glt(e,i)},kps(t,s,e,i){if(!this.Iu()||!this.cet())return;const n=kA.Llt.Dlt.aps.Nps(s);for(const s of this.Hds(t))s._lt(n),s.Glt(e,n[0]),s.Glt(i,n[1])},Bps(t,s){if(this.Iu()&&this.cet())for(const e of this.Hds(t,"value"))e.Clt(s,"value")},$ps(t,s){if(this.Iu()&&this.cet())for(const e of this.Hds(t,"value"))e._lt(["value"]),e.Glt(s,"value")},Wps(t,s){if(!this.Iu()||!this.cet())return;const e=NA.oc(s);for(const s of this.Hds(t))s.eq(e)},Vps(t){if(!this.Iu()||!this.cet())return;const s=NA.oc(t);for(const t of this.kds())t.eq(s)},jps(t,s){if(this.Iu()&&this.cet())for(const e of this.Hds(t))e.LJ(s)},Ups(t){if(this.Iu()&&this.cet())for(const s of this.kds())s.LJ(t)},zps(t,s){if(this.Iu()&&this.cet())for(const e of this.Hds(t))e.jJ(s)},Hps(t){if(this.Iu()&&this.cet())for(const s of this.kds())s.jJ(t)},Jps(t,s){if(this.Iu()&&this.cet())for(const e of this.Hds(t))e.hq(!!s)},qps(t){if(this.Iu()&&this.cet())for(const s of this.kds())s.hq(!!t)}}}self._s.Llt.Dlt.Brt={Yps(t){const s=this.zds(t);return s?s._F():0},css(t){const s=this.zds(t);return s?s._F()/s.NJ():0},Jrt(t){const s=this.zds(t);return s?s.UJ():0},vds(t){const s=this.zds(t,"value");return s?s.lq("value").aq():0},iIt(){let t=this.$ds();return t?t._tt():(t=this.Lds(),t?t._tt():"")}};{const $A=self._s,WA=self.Vu,VA=["position","size","scale"],jA=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],UA=["value"],zA=[].concat(VA).concat(jA).concat(UA),HA={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},JA=Object.assign({},zA.reduce(((t,s)=>Object.assign({},t,{[s]:[s]})),{}),HA);$A.Llt.Dlt.aps=class{constructor(){}static Xps(){return[...WA.Xu()]}static oc(t){return[...WA.Xu()][t]}static ops(t){return zA[t]}static Kps(t){return zA.indexOf(t)}static Zps(t){return VA[t]}static Lps(t){return jA[t]}static Qps(t){return UA[t]}static tms(t){return HA[t]}static Nps(t){return $A.hi(t)?JA[t]:JA[zA[t]]}static sms(t){return!!HA[t]}static ems(t){return"offsetColor"===t}static ims(t){return"offsetAngle"===t}static nms(t){return"offsetOpacity"===t}static lps(t){return"value"===t}}}{const qA=self._s,YA=qA.Llt.Dlt,XA=new Map;YA.hps=class{constructor(){}static rps(t,s,e,i,n,r){0===XA.size&&this.rms();const h=YA.oms.hms(t);let o=XA.get(h);return qA.Ke(t)&&(t=YA.aps.ops(t)),this.ams(o,t,s,e,i,n,r)}static lms(t,s){return qA.Llt.Dlt.rps(t).ums(s)}static rms(){const t=YA.oms,s=YA.cms;this.fms(t.dms,this.pms,s.mms),this.fms(t.COLOR,this.gms,s.yms),this.fms(t.Sms,this.wms,s.vms),this.fms(t.bms,this.Mms,s.mms),this.fms(t.xms,this.Tms,s.mms)}static fms(t,s,e){XA.set(t,this.Cms(t,s,e))}static Cms(t,s,e){return{name:t,Ims:s,ums:e}}static ams(t,s,e,i,n,r,h){return t.Ims(s,t.ums(e),t.ums(i),n,r,h)}static pms(t,s,e,i,n,r){return YA.aps.tms(t).map(((t,r)=>({Xlt:"world-instance",Get:t,type:"float",valueType:"numeric",Qlt:s[r],tut:e[r],Zlt:YA.aps.oc(i),Ylt:n})))}static gms(t,s,e,i,n,r){return qA.EB.Text&&r.MW()instanceof qA.EB.Text?{Xlt:"plugin",Klt:[7],Get:"color",type:"color",valueType:"color",Qlt:s,tut:e,Zlt:YA.aps.oc(i),Ylt:n}:{Xlt:"world-instance",Get:t,type:"color",valueType:"color",Qlt:s,tut:e,Zlt:YA.aps.oc(i),Ylt:n}}static wms(t,s,e,i,n,r){return{Xlt:"world-instance",Get:t,type:"angle",valueType:"angle",Qlt:s,tut:e,Zlt:YA.aps.oc(i),Ylt:n}}static Tms(t,s,e,i,n,r){return{Xlt:"world-instance",Get:t,type:"float",valueType:"numeric",Qlt:s,tut:e,Zlt:YA.aps.oc(i),Ylt:n}}static Mms(t,s,e,i,n,r){return{Xlt:"value",Get:t,type:"float",valueType:"numeric",Qlt:s,tut:e,Zlt:YA.aps.oc(i),Ylt:n}}}}{const KA=self._s,ZA=KA.Llt.Dlt,QA={Ylt:"absolute"},tR=Object.assign({},QA,{tags:"",Get:"",time:0,Zlt:0,Jlt:0,loop:!1,qlt:!1,eJ:1}),sR=Object.assign({},tR,{Hlt:"current-state",Qlt:0,tut:0}),eR=Object.assign({},tR,{Hlt:"current-state",Qlt:[0,0],tut:[0,0]}),iR=Object.assign({},tR,{Hlt:"current-state",Qlt:[0,0,0],tut:[0,0,0]}),nR=Object.assign({},sR,{Hlt:"start-value"}),rR=0,hR=1,oR=0,aR=1,lR=2;ZA.Tps=class{constructor(){}static _ms(t,s,e,i,n,r,h,o){t.tags=s,t.time=e,t.Zlt=i,t.Jlt=n,t.loop=r,t.qlt=h,t.eJ=o}static xps(t,s,e,i,n,r,h,o,a,l){const u="string"==typeof e?e:ZA.aps.Lps(e),c=ZA.aps.ems(u)?iR:sR;return this._ms(c,s,n,r,h,o,a,l),ZA.aps.ems(u)?(iR.tut[0]=KA.Ar(i),iR.tut[1]=KA.Rr(i),iR.tut[2]=KA.Er(i),iR.Get=ZA.aps.Kps(u)):ZA.aps.nms(u)?sR.tut=i/100:sR.tut=i,c.Get=ZA.aps.Kps(u),c}static Ips(t,s,e,i,n,r,h,o,a,l,u){this._ms(eR,s,r,h,o,a,l,u);const c="string"==typeof e?e:ZA.aps.Zps(e);return eR.tut[0]=i,eR.tut[1]=n,eR.Get=ZA.aps.Kps(c),eR}static Gps(t,s,e,i,n,r,h,o,a,l){return this._ms(nR,s,n,r,h,o,a,l),nR.Qlt=e,nR.tut=i,nR.Get=ZA.aps.Kps("value"),nR}}}{const uR=self._s,cR=uR.Llt.Dlt,fR=[];cR.oms=class{constructor(){}static hms(t){if(0===fR.length){const t=fR;t.push({RR:cR.aps.sms,result:this.dms}),t.push({RR:cR.aps.ems,result:this.COLOR}),t.push({RR:cR.aps.ims,result:this.Sms}),t.push({RR:cR.aps.lps,result:this.bms}),t.push({RR:()=>!0,result:this.xms})}uR.Ke(t)&&(t=uR.Llt.Dlt.aps.ops(t));for(const s of fR)if(s.RR(t))return s.result}static get dms(){return"pair"}static get COLOR(){return"color"}static get Sms(){return"angle"}static get bms(){return"value"}static get xms(){return"other"}}}{const dR=self._s,pR=dR.Llt.Dlt;pR.cms=class{constructor(){}static vms(t){const s=dR.Qn(parseFloat(t));return dR.Zn(s)}static yms(t){return t.slice(0)}static mms(t){return t}}}{let mR=function(t){SR.oi(t);const s=vR.zu(t);let e;if(e=s?vR.ac(s,null):vR.ac(t,null),-1===e)throw new Error(`invalid ease name '${t}'`);return e},gR=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};getIndexForEase=mR,ValidateTags=gR;const yR=self._s,SR=self.Ns,wR=self.LH,vR=self.Vu,bR=yR.Llt.Dlt,MR=new WeakMap,xR=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),TR={tags:"",Gms:!1,loop:!1,qlt:!1,eJ:1,Qlt:0},CR={QJ:mR};self.wps=class extends wR{constructor(){super(),MR.set(this,wR.Uj().RH())}Pms(t,s,e,i,n){const r=MR.get(this);if(!r.Iu()||!r.cet())return null;const h=xR.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?SR.Ze(s):(SR.Ti(s),"two"===h.type?(SR.Ze(s[0]),SR.Ze(s[1])):"color"===h.type&&(SR.Ze(s[0]),SR.Ze(s[1]),SR.Ze(s[2]))),"angle"===t?s=yR.tr(s):"opacity"===t?s*=100:"color"===t&&(s=yR.Pr(s[0],s[1],s[2]));const o=mR(i);let a;if(SR.ii(e),n=Object.assign({},TR,n),"value"===h.type&&SR.Ze(n.Qlt),gR(n.tags,!0),"one"===h.type||"color"===h.type?a=r.nps(bR.Tps.xps(r,n.tags,h.name,s,e,o,!!n.Gms,!!n.loop,!!n.qlt,n.eJ)):"two"===h.type?a=r.nps(bR.Tps.Ips(r,n.tags,h.name,s[0],s[1],e,o,!!n.Gms,!!n.loop,!!n.qlt,n.eJ)):"value"===h.type&&(a=r.nps(bR.Tps.Gps(r,n.tags,n.Qlt,s,e,o,!!n.Gms,!!n.loop,!!n.qlt,n.eJ))),a.vlt(r.IPt().RH()),!a.Play())throw new Error("failed to start tween");return a.sut(r,CR)}*Ams(){const t=MR.get(this);for(const s of t.kds())yield s.sut(t,CR)}*Rms(t){gR(t);const s=MR.get(this);for(const e of s.Hds(t))yield e.sut(s,CR)}get isEnabled(){return MR.get(this).Iu()}set isEnabled(t){MR.get(this).qIt(t)}}}{const IR=self._s;IR.Llt.Ems=class extends IR.yPt{constructor(t){super(t)}Hn(){super.Hn()}}}{const _R=self._s;_R.Llt.Ems.ORt=class extends _R.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const GR=self._s,PR=(self.Ns,self.LH),AR=0,RR=1,ER=2,OR=3,FR=4;GR.Llt.Ems.Instance=class extends GR.TPt{constructor(t,s){super(t),this.Oms=2,this.Fms=2,this.Dms=0,this.Lms=0,this.Qvt=!0;const e=this.fe.cB().pz();this.kms=e.Za(),this.Nms=e.Qa(),this.Bms=this.Nc.Ik()-e.Za(),this.$ms=this.Nc.Gk()-e.Qa(),this.Wms=this.Nc.Ik()-e.tl(),this.Vms=this.Nc.Gk()-e.sl(),s&&(this.Oms=s[AR],this.Fms=s[RR],this.Dms=s[ER],this.Lms=s[OR],this.Qvt=!!s[FR]);const i=this.Nc.Sf();this.Xf=new GR.Jf(GR.Wf.Hf(i,"layoutchange",(()=>this.jms()))),this.Qvt&&this.CGt()}Hn(){super.Hn()}hx(){return{xl:this.kms,yt:this.Nms,xr:this.Bms,yb:this.$ms,rd:this.Wms,bd:this.Vms,al:this.Oms,at:this.Fms,ar:this.Dms,ab:this.Lms,e:this.Qvt}}ox(t){this.kms=t.xl,this.Nms=t.yt,this.Bms=t.xr,this.$ms=t.yb,this.Wms=t.rd,this.Vms=t.bd,this.Oms=t.al,this.Fms=t.at,this.Dms=t.ar,this.Lms=t.ab,this.Qvt=t.e,this.Qvt?this.CGt():this.lGt()}XCt(t){if(this.Qvt&&!t)this.Qvt=!1,this.lGt();else if(!this.Qvt&&t){const t=this.fe.cB().pz();this.kms=t.Za(),this.Nms=t.Qa(),this.Bms=this.Nc.Ik()-t.Za(),this.$ms=this.Nc.Gk()-t.Qa(),this.Wms=this.Nc.Ik()-t.tl(),this.Vms=this.Nc.Gk()-t.sl(),this.Qvt=!0,this.CGt()}}ZCt(){return this.Qvt}dPt(){if(!this.Qvt)return;const t=this.fe.cB(),s=t.fB().Pj();if(0===this.Oms){const e=s.Za()+this.kms-t.pz().Za();0!==e&&(t.Lht(e),t.ZU())}else if(1===this.Oms){const e=s.tl()-this.Bms-t.pz().Za();0!==e&&(t.Lht(e),t.ZU())}if(0===this.Fms){const e=s.Qa()+this.Nms-t.pz().Qa();0!==e&&(t.kht(e),t.ZU())}else if(1===this.Fms){const e=s.sl()-this.$ms-t.pz().Qa();0!==e&&(t.kht(e),t.ZU())}if(1===this.Dms){const e=s.tl()-this.Wms-t.pz().tl();0!==e&&(t.Lht(t.iz()*e),t.Yg(Math.max(t.Vg()+e),0),t.ZU(),this.Wms=s.tl()-t.pz().tl())}if(1===this.Lms){const e=s.sl()-this.Vms-t.pz().sl();0!==e&&(t.kht(t.hz()*e),t.jg(Math.max(t.Zg()+e,0)),t.ZU(),this.Vms=s.sl()-t.pz().sl())}}P8(){this.dPt()}jms(){this.dPt()}bht(t){switch(t){case AR:return this.Oms;case RR:return this.Fms;case ER:return this.Dms;case OR:return this.Lms;case FR:return this.Qvt}}_ht(t,s){switch(t){case AR:this.Oms=s;break;case RR:this.Fms=s;break;case ER:this.Dms=s;break;case OR:this.Lms=s;break;case FR:this.Qvt=!!s,this.Qvt?this.CGt():this.lGt()}}PGt(){return[{title:"$"+this.WH().Pc(),properties:[{name:"behaviors.anchor.properties.enabled.name",value:this.ZCt(),lQt:t=>this.XCt(t)}]}]}W_t(){return self.Ums}};const DR=new WeakMap;self.Ums=class extends PR{constructor(){super(),DR.set(this,PR.Uj().RH())}get isEnabled(){return DR.get(this).ZCt()}set isEnabled(t){DR.get(this).XCt(t)}}}self._s.Llt.Ems.AB={Iu(){return this.ZCt()}},self._s.Llt.Ems.Nrt={qIt(t){this.XCt(0!==t)}},self._s.Llt.Ems.Brt={};{const LR=self._s;LR.Llt.T8t=class extends LR.yPt{constructor(t){super(t)}Hn(){super.Hn()}}}{const kR=self._s;kR.Llt.T8t.ORt=class extends kR.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const NR=self._s;NR.Llt.T8t.Instance=class extends NR.TPt{constructor(t,s){super(t),s&&(this.name=s[0],this.K8t=s[1],this.Q8t=s[2]),this.jH().Pxt().T8t=this,this.D8t=this.jH(),this.r7t=this.cB(),this.X8t=this.jH().MW().constructor.Nrt,this.L8t=new globalThis.F8t(this.D8t),this.l8t=globalThis.u8t,this.userName=this.name?this.name:null,this.zms=!1,this.children=[],this.parent=null,this.local={x:this.r7t.zM(),y:this.r7t.qM(),angle:this.r7t.cV(),tDt:Math.sin(this.r7t.cV()),sDt:Math.cos(this.r7t.cV())},this.Hms(),this.f9t={x:this.r7t.zM(),y:this.r7t.qM(),angle:this.r7t.cV(),width:this.r7t.Vg(),height:this.r7t.Zg()},this.l8t.f8t&&(this.name="",this.K8t=""),this.l8t.V8t(this.D8t)}_Pt(){}Hms(){if(!this.Jms){this.Jms=!0;var t=this.jH(),s=t.cB();t.Pxt().T8t&&(s.qms=s.HM,s.HM=function(t,s){var e=this.iq().Pxt().T8t;e&&(s&&e.parent?(e.local.x=t,e.Yms()):(this.qms(t),e.Xms()),e.J8t())},s.Kms=s.YM,s.YM=function(t,s){var e=this.iq().Pxt().T8t;e&&(s&&e.parent?(e.local.y=t,e.Yms()):(this.Kms(t),e.Xms()),e.J8t())},s.Zms=s.QU,s.QU=function(t,s,e){var i=this.iq().Pxt().T8t;i&&(e&&i.parent?(i.local.x=t,i.local.y=s,i.Yms()):(this.Zms(t,s),i.Xms()),i.J8t())},s.Qms=s.Lht,s.Lht=function(t,s){var e=this.iq().Pxt().T8t;e&&(s&&e.parent?(e.local.x+=t,e.Yms()):(this.Qms(t),e.Xms()),e.J8t())},s.tgs=s.kht,s.kht=function(t,s){var e=this.iq().Pxt().T8t;e&&(s&&e.parent?(e.local.y+=t,e.Yms()):(this.tgs(t),e.Xms()),e.J8t())},s.sgs=s.sz,s.sz=function(t,s,e){var i=this.iq().Pxt().T8t;i&&(e&&i.parent?(i.local.x+=t,i.local.y+=s,i.Yms()):(this.sgs(t,s),i.Xms()),i.J8t())},s.egs=s.uV,s.uV=function(t,s){var e=this.iq().Pxt().T8t;e&&(s&&e.parent?(e.local.angle=t,e.local.tDt=Math.sin(t),e.local.sDt=Math.cos(t),e.Yms()):(this.egs(t),e.Xms()),e.J8t())},s.igs=s.Uht,s.Uht=function(t,s){var e=this.iq().Pxt().T8t;if(e){if(s&&e.parent){e.local.angle=NR.Zn(e.local.angle+t);const s=e.local.angle;e.local.tDt=Math.sin(s),e.local.sDt=Math.cos(s),e.Yms()}else this.igs(t),e.Xms();e.J8t()}},s.ngs=s.zM,s.zM=function(t){if(t){var s=this.iq().Pxt().T8t;if(s.parent)return s.local.x}return this.ngs()},s.rgs=s.qM,s.qM=function(t){if(t){var s=this.iq().Pxt().T8t;if(s.parent)return s.local.y}return this.rgs()},s.hgs=s.cV,s.cV=function(t){if(t){var s=this.iq().Pxt().T8t;if(s.parent)return s.local.angle}return this.hgs()},s.ogs=s.LTt,s.LTt=function(t){if(t){var s=this.iq().Pxt().T8t;if(s.parent)return s.local.sDt}return this.ogs()},s.ags=s.kTt,s.kTt=function(t){if(t){var s=this.iq().Pxt().T8t;if(s.parent)return s.local.tDt}return this.ags()},s.lgs=s.Yg,s.Yg=function(t,e){if(e)this.lgs(t);else{var i=this.iq().Pxt().T8t;if(i){var n=(t=0==t?.1:t)/this.Vg();this.lgs(t);for(var r=i.children,h=r.length,o=0;o<h;o++)(s=r[o].cB()).HM(s.zM(!0)*n,!0),s.Yg(s.Vg()*n),s.ZU()}}},s.ugs=s.jg,s.jg=function(t,e){if(e)this.ugs(t);else{var i=this.iq().Pxt().T8t;if(i){var n=(t=0==t?.1:t)/this.Zg();this.ugs(t);for(var r=i.children,h=r.length,o=0;o<h;o++)(s=r[o].cB()).YM(s.qM(!0)*n,!0),s.jg(s.Zg()*n),s.ZU()}}},s.cgs=s.TA,s.TA=function(t,e,i){if(i)this.cgs(t,e);else{var n=this.iq().Pxt().T8t;if(n){t=0==t?.1:t;var r=(e=0==e?.1:e)/this.Zg(),h=t/this.Vg();this.cgs(t,e);for(var o=n.children,a=o.length,l=0;l<a;l++)(s=o[l].cB()).HM(s.zM(!0)*r,!0),s.YM(s.qM(!0)*h,!0),s.TA(s.Vg()*r,s.Zg()*h),s.ZU()}}})}}J8t(){if(this.children.length)for(var t,s=this.children.length,e=0;e<s;e++)(t=this.children[e].cB()).QU(t.zM(!0),t.qM(!0),!0),t.uV(t.cV(!0),!0),t.ZU()}Z8t(t){var s,e;if("string"==typeof t)s=t,t=null;else{if(!(e=t.Pxt().T8t))return void console.error("Aekiro GameObject: You're adding a child (uid=%s) without a gameobject behavior on it.",t.tU());s=e.name}if((t=this.l8t.p8t[s])!=this.jH())if(t)if(s!=this.K8t)if(this.children.indexOf(t)>-1)console.warn("Aekiro GameObject: Object %s already have a child named %s !",this.name,s);else{(e=t.Pxt().T8t).Jz(),e.K8t=this.name,e.parent=this.jH();var i=this.fgs(t,this.jH());e.local.x=i.x,e.local.y=i.y,e.local.angle=i.angle,this.children.push(t),this.L8t.emit("childrenAdded",{args:t,propagate:!1})}else console.error("Aekiro GameObject: Cannot add %s as a child of %s, because %s is its parent !",s,this.name,s);else console.error("Aekiro GameObject: Object of name : %s not found !",s)}dgs(t){try{this.l8t.j8t(this.name,t)}catch(t){return void console.error(t)}this.name=t;const s=this.children.length;for(var e=0;e<s;e++)this.children[e].Pxt().T8t.K8t=t}Xms(){var t=this.pgs();if(t&&null!==this.jH()){var s=this.fgs(this.jH(),t);this.local.x=s.x,this.local.y=s.y,this.local.angle=s.angle}}Yms(){var t=this.pgs();if(t){var s=this.mgs(this.jH(),t);this.r7t.Zms(s.x,s.y),this.r7t.egs(s.angle)}}t7t(t){for(var s,e,i=t.FZ,n=this.jH(),r=0,h=i.length;r<h;r++)e=(s=i[r]).Pxt().T8t,s!=n&&e&&""==e.K8t&&this.Z8t(s)}ggs(t){for(var s=t.DW().FW(),e=0,i=s.length;e<i;e++)this.Z8t(s[e])}ygs(t){var s=-1;if("string"==typeof t){for(var e=0,i=this.children.length;e<i;e++)if(this.children[e].Pxt().T8t.name==t){s=e;break}}else s=this.children.indexOf(t);-1!=s&&(this.children[s].Pxt().T8t.parent=null,this.children.splice(s,1))}Sgs(t){for(var s=t.DW().FW(),e=0,i=s.length;e<i;e++)this.ygs(s[e])}wgs(){if(this.children.length){for(var t=this.children.length,s=0;s<t;s++)this.children[s].Pxt().T8t.parent=null;this.children.length=0}}Jz(){var t=this.parent,s=this.jH();if(t){var e=t.Pxt().T8t;e&&e.ygs(s)}}vgs(){this.$B().Jj(this.jH());for(var t=0,s=this.children.length;t<s;t++)this.children[t].Pxt().T8t.vgs();this.children.length=0}pgs(){return!this.parent&&this.K8t&&this.name&&(this.parent=this.l8t.p8t[this.K8t]),this.parent}bgs(t){t||(t=this.fe);for(var s={type:t.Wj().Pc(),x:t.cB().zM(!0),y:t.cB().qM(!0),Y8t:t.cB().dB()+100*t.cB().fB().tk(),json:JSON.stringify(t.hx(!0)),children:[]},e=t.Pxt().T8t.children,i=0,n=e.length;i<n;i++)s.children.push(this.bgs(e[i]));return s}Mgs(t,s){t||(t=this.jH()),s||(s=[]),s.push(t);for(var e=t.Pxt().T8t.children,i=0,n=e.length;i<n;i++)this.Mgs(e[i],s);return s}q8t(){var t=this.Mgs();t.sort((function(t,s){return t.Pxt().Y8t-s.Pxt().Y8t}));for(var s=t[0].cB().fB(),e=1,i=t.length;e<i;e++)s.Q1(t[e],t[e-1],!0);this.$B().SB()}Mz(){var t=this.Mgs();t.sort((function(t,s){return t.cB().dB()-s.cB().dB()}));for(var s=0,e=t.length;s<e;s++)t[s].RH().RGt(this.X8t.oCt);this.$B().SB()}Tz(){var t=this.Mgs();t.sort((function(t,s){return s.cB().dB()-t.cB().dB()}));for(var s=0,e=t.length;s<e;s++)t[s].RH().RGt(this.X8t.aCt);this.$B().SB()}xgs(t){for(var s=this.Mgs(),e=1,i=s.length;e<i;e++)s[e].vN(t)}P8(){}Hn(){}B8t(){this.l8t.W8t(this.name),this.Jz();for(var t=0,s=this.children.length;t<s;t++)this.ygs(this.children[t]);super.Hn()}hx(){return{name:this.name,parentName:this.K8t,parentSameLayer:this.Q8t,global_x:this.r7t.zM(),global_y:this.r7t.qM()}}ox(t){this.name=t.name,this.K8t=t.parentName,this.Q8t=t.parentSameLayer,this.r7t.QU(t.global_x,t.global_y),this.r7t.ZU()}PGt(){for(var t=[],s=0,e=this.children.length;s<e;s++)t.push(this.children[s].Pxt().T8t.name);var i=JSON.stringify(t,null,"\t");return[{title:"aekiro_gameobject",properties:[{name:"name",value:this.name},{name:"parentName",value:this.K8t},{name:"children",value:i},{name:"local_x",value:this.local.x},{name:"local_y",value:this.local.y},{name:"local_angle",value:this.local.angle}]}]}Tgs(t,s){if(t){this.jH().RH().RGt(t,s);for(var e=this.children,i=e.length,n=0;n<i;n++)e[n].Pxt().T8t.Tgs(t,s)}}FM(t){this.r7t.FM(t);for(var s=this.children,e=0,i=s.length;e<i;e++)s[e].cB().FM(t)}fgs(t,s){if(t&&s){var e=s.cB();return this.Cgs(t,e.zM(),e.qM(),e.cV())}}Cgs(t,s,e,i){if(t){var n={},r=t.cB();return n.x=(r.zM()-s)*Math.cos(i)+(r.qM()-e)*Math.sin(i),n.y=-(r.zM()-s)*Math.sin(i)+(r.qM()-e)*Math.cos(i),n.angle=r.cV()-i,n}}mgs(t,s){if(t&&s){var e=s.cB();return this.Igs(t,e.zM(),e.qM(),e.cV())}}Igs(t,s,e,i){if(t){var n={},r=t.Pxt().T8t;return n.x=s+r.local.x*Math.cos(i)-r.local.y*Math.sin(i),n.y=e+r.local.x*Math.sin(i)+r.local.y*Math.cos(i),n.angle=i+r.local.angle,n}}_gs(){var t=this.pgs();if(t){var s=t.cB();return s.zM()+this.local.x*Math.cos(s.cV())-this.local.y*Math.sin(s.cV())}return this.local.x}Ggs(){var t=this.pgs();if(t){var s=t.cB();return s.qM()+this.local.x*Math.sin(s.cV())+this.local.y*Math.cos(s.cV())}return this.local.y}Pgs(){var t=this.pgs();return t?t.cB().cV()+this.local.angle:this.local.angle}}}{const BR=self._s;BR.Llt.T8t.AB={Ags(t){return t==this.name},Rgs(t){return t==this.K8t},Egs:()=>!0}}{const $R=self._s;$R.Llt.T8t.Nrt={JRt(t,s,e,i,n){var r=this.bgs();globalThis.u8t.clone(r,i,n,t,s,e).Pxt().T8t.q8t()},EY(t){this.dgs(t)},Ogs(t){this.t7t(t)},Fgs(t){this.ggs(t)},Dgs(t){this.Z8t(t)},Lgs(t){this.ygs(t)},kgs(t){this.Sgs(t)},DCt(){this.Jz()},Ngs(){this.wgs()},eO(t){this.Tgs(this.X8t.eO,t)},JV(t){this.Tgs(this.X8t.JV,t)},DM(t){this.Tgs(this.X8t.iCt,t)},Ons(t){this.Tgs(this.X8t.Ons,t)},Fns(t){this.Tgs(this.X8t.Fns,t)},lCt(t){this.Tgs(this.X8t.lCt,t)},oCt(){this.Mz()},aCt(){this.Tz()},KM(t){this.Tgs(this.X8t.KM,t)},kns(t){this.FM(t)},Yg(t){this.r7t.Yg(t,!0),this.r7t.ZU()},jg(t){this.r7t.jg(t,!0),this.r7t.ZU()},lIt(){this.vgs()},Bgs(t){this.r7t.HM(t,!0),this.r7t.ZU()},$gs(t){this.r7t.YM(t,!0),this.r7t.ZU()},Wgs(t){this.r7t.uV(t,!0),this.r7t.ZU()}}}{const WR=self._s;WR.Llt.T8t.Brt={name(){return this.name},parent(){return this.K8t},Vgs(){var t=this.bgs();return JSON.stringify(t)},jgs(){return this.jH().cB().ngs()},Ugs(){return this.jH().cB().rgs()},zgs(){return this.jH().cB().hgs()},Hgs(){return this.r7t.zM(!0)},Jgs(){return this.r7t.qM(!0)},qgs(){return this.r7t.cV(!0)}}}{const VR=self._s;VR.Llt.w8t=class extends VR.yPt{constructor(t){super(t);const s=this.Nc.Sf();this.Xf=new VR.Jf(VR.Wf.Hf(s,"pointerdown",(t=>this.f1t(t.data))),VR.Wf.Hf(s,"pointermove",(t=>this.c1t(t.data))),VR.Wf.Hf(s,"pointerup",(t=>this.d1t(t.data,!1))),VR.Wf.Hf(s,"pointercancel",(t=>this.d1t(t.data,!0))))}Hn(){this.Xf.Hn(),this.Xf=null,super.Hn()}f1t(t){this.Ygs(t.pointerId.toString(),t.clientX-this.Nc.A$(),t.clientY-this.Nc.E$())}c1t(t){this.Xgs(t.pointerId.toString(),t.clientX-this.Nc.A$(),t.clientY-this.Nc.E$())}d1t(t){this.Kgs(t.pointerId.toString(),t.clientX-this.Nc.A$(),t.clientY-this.Nc.E$())}Zgs(){if(!this.e7t){const t=this.$B().krt(VR.EB.h8t);t&&(this.e7t=t.wW().RH())}return this.e7t}async Ygs(t,s,e){const i=this.Zgs().a8t,n=this.FW(),r=[];for(const h of n){const n=h.cB(),o=h.$Ot(VR.Llt.w8t),a=n.fB(),[l,u]=a.Rj(s,e,n.cz());o.M9t(!1),i?n.Oz(l,u)&&r.push(h):o.y9t&&await o.y9t(l,u,t)}if(i){r.sort((function(t,s){return t.cB().cz()-s.cB().cz()}));const i=r.filter((t=>t.cB().YV()&&t.cB().fB().YV())),n=i[i.length-1],h=[];n&&h.push(n);for(const t of r)0==t.Pxt().w8t.o8t&&h.push(t);for(const i of h){const n=i.cB(),r=i.$Ot(VR.Llt.w8t),h=n.fB(),[o,a]=h.Rj(s,e,n.cz());r.y9t&&await r.y9t(o,a,t)}}}Xgs(t,s,e){const i=this.FW();for(const n of i){const i=n.$Ot(VR.Llt.w8t),r=n.cB(),h=r.fB(),[o,a]=h.Rj(s,e,r.cz());i.w9t&&i.w9t(o,a,t)}}async Kgs(t,s,e){const i=this.FW();for(const t of i){const i=t.$Ot(VR.Llt.w8t),n=t.cB(),r=n.fB(),[h,o]=r.Rj(s,e,n.cz());i.O9t&&await i.O9t(h,o)}}}}{const jR=self._s;jR.Llt.w8t.ORt=class extends jR.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const UR=self._s;UR.Llt.w8t.Instance=class extends globalThis.P8t.button{constructor(t,s){super(t,s),this.isEnabled=s[0],this.E7t=s[1],this.O7t=s[2],this.F7t=s[3],this.D7t=s[4],this.r9t=s[5],this.J7t=s[6],this.Y7t=s[7],this.X7t=s[8],this.R9t=s[9],this.P9t=s[10],this.x9t=s[11],this.Z7t=s[12],this.Q7t=s[13],this.t9t=s[14],this.s9t=s[15],this.e9t=s[16],this.p9t=s[17],this.m9t=s[18],this.g9t=s[19],this.o8t=s[20],this.s7t()}L9t(){this.xU(UR.Llt.w8t.AB.q9t),this.e7t.xU(UR.EB.h8t.AB.Gts)}G9t(){this.xU(UR.Llt.w8t.AB.v9t)}k9t(){this.xU(UR.Llt.w8t.AB.b9t)}C9t(){this.xU(UR.Llt.w8t.AB.H9t)}I9t(){this.xU(UR.Llt.w8t.AB.J9t)}Hn(){super.Hn()}hx(){return{isEnabled:this.isEnabled,frame_normal:this.E7t,frame_hover:this.O7t,frame_clicked:this.F7t,frame_disabled:this.D7t,frame_focus:this.r9t,clickSound:this.J7t,hoverSound:this.Y7t,focusSound:this.X7t,clickAnimation:this.R9t,hoverAnimation:this.P9t,focusAnimation:this.x9t,color_normal:this.Z7t,color_hover:this.Q7t,color_clicked:this.t9t,color_disabled:this.s9t,color_focus:this.e9t,ignoreInput:this.o8t,initProps:this.b7t}}ox(t){this.isEnabled=t.isEnabled,this.E7t=t.frame_normal,this.O7t=t.frame_hover,this.F7t=t.frame_clicked,this.D7t=t.frame_disabled,this.r9t=t.frame_focus,this.J7t=t.clickSound,this.Y7t=t.hoverSound,this.X7t=t.focusSound,this.R9t=t.clickAnimation,this.P9t=t.hoverAnimation,this.x9t=t.focusAnimation,this.Z7t=t.color_normal,this.Q7t=t.color_hover,this.t9t=t.color_clicked,this.s9t=t.color_disabled,this.e9t=t.color_focus,this.o8t=t.ignoreInput,this.b7t=t.initProps,this.W7t(),this.P7t()}}}{const zR=self._s;zR.Llt.w8t.AB={},Object.assign(zR.Llt.w8t.AB,globalThis.P8t.button.AB)}{const HR=self._s;HR.Llt.w8t.Nrt={},Object.assign(self._s.Llt.w8t.Nrt,globalThis.P8t.button.Nrt)}{const JR=self._s;JR.Llt.w8t.Brt={}}{const qR=self._s;qR.Llt.Qgs=class extends qR.yPt{constructor(t){super(t)}Hn(){super.Hn()}}}{const YR=self._s;YR.Llt.Qgs.ORt=class extends YR.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const XR=self._s,KR=self.Ns,ZR=self.LH,QR=0,tE=1,sE=2,eE=3,iE=4,nE=5,rE=6;XR.Llt.Qgs.Instance=class extends XR.TPt{constructor(t,s){super(t),this.vAt=0,this.$cs=0,this.Qvt=!0,this.tys=0,this.sys=0,this.eys=0,this.iys=!1,this.w9=0,this.v9=0,this.nys=null,this.rys=-1,this.hys=0,this.oys=0,this.ays=0,s&&(this.vAt=XR.Qn(s[QR]),this.$cs=XR.Qn(s[tE]),this.Qvt=s[rE],this.tys=s[sE],this.sys=s[eE],this.eys=XR.Qn(s[iE]),this.iys=s[nE]);const e=this.Nc.Sf();this.Xf=new XR.Jf(XR.Wf.Hf(e,"instancedestroy",(t=>this.L4t(t.VH))),XR.Wf.Hf(e,"afterload",(t=>this.E6()))),this.XCt(this.Qvt);const i=this.fe.cB();this.w9=i.zM(),this.v9=i.qM(),this.hys=i.cV()}Hn(){this.nys=null,super.Hn()}lys(t){this.vAt=t}uys(){return this.vAt}cys(t){this.$cs=t}fys(){return this.$cs}dys(t,s){this.nys=null,this.w9=t,this.v9=s}pys(){return this.w9}mys(){return this.v9}gys(){const t=this.tys*Math.cos(this.hys),s=this.sys*Math.sin(this.hys);return Math.hypot(t,s)}yys(t){this.hys=t}Sys(){return this.hys}wys(t){this.eys=t}vys(){return this.eys}bys(t){this.tys=t}Mys(){return this.tys}xys(t){this.sys=t}Tys(){return this.sys}Cys(t){this.iys=!!t}Iys(){return this.iys}_ys(t){this.oys=t}Gys(){return this.oys}Pys(t){this.ays=t}Ays(){return this.ays}Rys(t){if(t&&!t.cB())return;const s=this.Qvt;s&&this.XCt(!1),this.nys=t,s&&this.XCt(!0)}XCt(t){this.Qvt=!!t,this.Eys()?this.Qvt?this._Gt():this.uGt():this.Qvt?this.CGt():this.lGt()}ZCt(){return this.Qvt}hx(){return{s:this.vAt,a:this.$cs,r:this.hys,e:this.Qvt,a1:this.sys,a2:this.tys,oa:this.eys,mr:this.iys,tx:this.w9,ty:this.v9,tuid:this.nys?this.nys.tU():-1}}ox(t){this.vAt=t.s,this.$cs=t.a,this.hys=t.r,this.sys=t.a1,this.tys=t.a2,this.eys=t.oa,this.iys=t.mr,this.w9=t.tx,this.v9=t.ty,this.rys=t.tuid,this.XCt(t.e)}E6(){-1===this.rys?this.nys=null:(this.nys=this.Nc.hB(this.rys),this.rys=-1)}L4t(t){this.nys===t&&(this.nys=null)}Oys(){if(!this.Fys)return;const t=this.fe.cB();this.w9=t.zM(),this.v9=t.qM(),this.hys=t.cV(),this.Fys=!1}Dys(){if(!this.nys)return;const t=this.nys.cB();this.w9=t.zM(),this.v9=t.qM()}Eys(){return!!this.nys}P8(){this.Lys()}TGt(){this.Lys()}Lys(){if(!this.Qvt)return;const t=this.Nc.lN(this.fe);if(0===t)return;0!==this.$cs&&(this.vAt+=this.$cs*t);const s=this.fe.cB(),e=this.vAt*t;this.hys=XR.Zn(this.hys+e),this.oys+=e,this.ays+=Math.abs(e);const i=this.tys*Math.cos(this.hys),n=this.sys*Math.sin(this.hys),r=Math.cos(this.eys),h=Math.sin(this.eys);this.Dys(),s.QU(this.w9+(i*r-n*h),this.v9+(i*h+n*r)),this.iys&&s.uV(this.hys+this.eys+.5*Math.PI),s.ZU()}bht(t){switch(t){case QR:return XR.tr(this.uys());case tE:return XR.tr(this.fys());case rE:return this.ZCt();case sE:return this.Mys();case eE:return this.Tys();case iE:return XR.tr(this.vys());case nE:return this.Iys()}}_ht(t,s){switch(t){case QR:this.lys(XR.Qn(s));break;case tE:this.cys(XR.Qn(s));break;case rE:this.XCt(s);break;case sE:this.bys(s);break;case eE:this.xys(s);break;case iE:this.wys(XR.Qn(s));break;case nE:this.Cys(s)}}PGt(){const t="behaviors.orbit";return[{title:"$"+this.WH().Pc(),properties:[{name:t+".debugger.rotation",value:XR.tr(this.Sys())},{name:t+".debugger.total-rotation",value:XR.tr(this.Gys())},{name:t+".debugger.total-absolute-rotation",value:XR.tr(this.Ays())},{name:t+".properties.speed.name",value:XR.tr(this.uys()),lQt:t=>this.lys(XR.Qn(t))},{name:t+".properties.acceleration.name",value:XR.tr(this.fys()),lQt:t=>this.cys(XR.Qn(t))},{name:t+".properties.primary-axis.name",value:this.Mys(),lQt:t=>this.bys(t)},{name:t+".properties.secondary-axis.name",value:this.Tys(),lQt:t=>this.xys(t)},{name:t+".properties.offset-angle.name",value:XR.tr(this.vys()),lQt:t=>this.wys(XR.Qn(t))},{name:t+".properties.match-rotation.name",value:this.Iys(),lQt:t=>this.Cys(!!t)},{name:t+".properties.enabled.name",value:this.ZCt(),lQt:t=>this.XCt(t)}]}]}W_t(){return self.kys}};const hE=new WeakMap;self.kys=class extends ZR{constructor(){super(),hE.set(this,ZR.Uj().RH())}Nys(t,s){KR.ii(t),KR.ii(s),hE.get(this).dys(t,s)}Bys(){const t=hE.get(this);return[t.pys(),t.mys()]}$ys(t){const s=hE.get(this),e=t?s.$B().uB(t):null;s.Rys(e)}set speed(t){KR.ii(t),hE.get(this).lys(t)}get speed(){return hE.get(this).uys()}set acceleration(t){KR.ii(t),hE.get(this).cys(t)}get acceleration(){return hE.get(this).fys()}set rotation(t){KR.ii(t),hE.get(this).yys(t)}get rotation(){return hE.get(this).Sys()}set Wys(t){KR.ii(t),hE.get(this).wys(t)}get Wys(){return hE.get(this).vys()}set Vys(t){KR.ii(t),hE.get(this).bys(t)}get Vys(){return hE.get(this).Mys()}set jys(t){KR.ii(t),hE.get(this).xys(t)}get jys(){return hE.get(this).Tys()}set Uys(t){hE.get(this).Cys(!!t)}get Uys(){return hE.get(this).Iys()}set zys(t){KR.ii(t),hE.get(this)._ys(t)}get zys(){return hE.get(this).Gys()}set Hys(t){KR.ii(t),hE.get(this).Pys(t)}get Hys(){return hE.get(this).Ays()}Jys(){return hE.get(this).gys()}set isEnabled(t){hE.get(this).XCt(t)}get isEnabled(){return hE.get(this).ZCt()}}}self._s.Llt.Qgs.AB={Iu(){return this.ZCt()}};{const oE=self._s;oE.Llt.Qgs.Nrt={qys(t){this.lys(oE.Qn(t))},Als(t){this.cys(oE.Qn(t))},Yys(t,s){this.dys(t,s)},Xys(t){this.yys(oE.Qn(t))},Kys(t){this.wys(oE.Qn(t))},Zys(t,s){this.bys(t),this.xys(s)},Qys(t){this.Cys(!!t)},tSs(t){if(!t)return;const s=t.cCt(this.fe);s&&this.Rys(s)},sSs(){this.Rys(null)},qIt(t){this.XCt(t)},eSs(){this._ys(0),this.Pys(0)}}}{const aE=self._s;aE.Llt.Qgs.Brt={iSs(){return aE.tr(this.uys())},nSs(){return aE.tr(this.fys())},rSs(){return this.Mys()},hSs(){return this.Tys()},Uht(){return aE.tr(this.vys())},oSs(){return aE.tr(this.Sys())},aSs(){return aE.tr(this.Gys())},lSs(){return aE.tr(this.Ays())},uSs(){return this.pys()},cSs(){return this.mys()},fSs(){return this.gys()}}}{let lE=function(t,s,e){const i=t.Gxt(),n=s.Gxt();if(e){const e=i.get(yE);e&&e.delete(s.U0());const r=n.get(yE);r&&r.delete(t.U0())}else{let e=i.get(yE);e||(e=new Set,i.set(yE,e));let r=n.get(yE);r||(r=new Set,n.set(yE,r)),e.add(s.U0()),r.add(t.U0())}};SetObjectTypeCollisionsEnabled=lE;const uE=self._s,cE=self.Ns;let fE=null,dE=null,pE=[],mE=null,gE=null;const yE="Physics_DisabledCollisions";uE.Llt.dSs=class extends uE.yPt{constructor(t){super(t),gE=this,this.pSs=null,this.mSs=10,this.gSs=.02,this.ySs=null,this.SSs=-1,this.wSs=1,this.vSs=8,this.bSs=3,this.MSs=!0,this.Nc.TB(this.xSs())}W_t(){return self.TSs}async xSs(){const t=await this.Nc.rk().HB("box2d.wasm");await new Promise((s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then((t=>{mE=t,this.CSs(),s()}))}))}CSs(){const t=this.Nc.lk();fE=uE.Llt.dSs.HAt(0,0),dE=uE.Llt.dSs.HAt(0,0),this.pSs=new mE.b2World(uE.Llt.dSs.ISs(0,this.mSs),!0);const s=new mE.JSContactListener;s.BeginContact=s=>{const e=mE.wrapPointer(s,mE.b2Contact),i=uE.Llt.dSs.Instance._Ss(e.GetFixtureA().GetBody()),n=uE.Llt.dSs.Instance._Ss(e.GetFixtureB().GetBody());t.kkt(i.jH(),n.jH())},s.EndContact=()=>{},s.PreSolve=()=>{},s.PostSolve=()=>{},this.pSs.SetContactListener(s);const e=new mE.JSContactFilter;e.ShouldCollide=(t,s)=>{if(this.MSs)return!0;const e=mE.wrapPointer(t,mE.b2Fixture),i=mE.wrapPointer(s,mE.b2Fixture),n=uE.Llt.dSs.Instance._Ss(e.GetBody()),r=uE.Llt.dSs.Instance._Ss(i.GetBody()),h=n.jH().Wj(),o=r.jH().Wj(),a=h.U0(),l=o.U0(),u=h.Gxt().get(yE);if(u&&u.has(l))return!1;const c=o.Gxt().get(yE);return!c||!c.has(a)},this.pSs.SetContactFilter(e),this.ySs=new mE.b2WorldManifold}Hn(){super.Hn()}GSs(){return mE}PSs(){return this.pSs}ASs(){return this.gSs}RSs(){return this.wSs}ESs(t){this.wSs=t}OSs(t){this.SSs=t}FSs(){return this.SSs}DSs(t){this.vSs=Math.max(t,1)}LSs(){return this.vSs}kSs(t){this.bSs=Math.max(t,1)}NSs(){return this.bSs}BSs(t,s){this.DSs(t),this.kSs(s)}aus(){return this.mSs}Rls(t){t!==this.mSs&&(this.pSs.SetGravity(uE.Llt.dSs.ISs(0,t)),this.mSs=t,this.$Ss())}$Ss(){for(const t of this.FW()){const s=uE.Llt.dSs.Instance.WSs(t);if(!s)continue;const e=s.VSs();e&&e.SetAwake(!0)}}jSs(){this.MSs=!1}USs(t,s,e){if(e=!!e,t&&s){if(s.k0())for(const i of s.tV())lE(t,i,e);else lE(t,s,e);this.jSs()}}zSs(){return this.ySs}static HSs(){return yE}static HAt(t,s){if(pE.length){const e=pE.pop();return e.set_x(t),e.set_y(s),e}return new(0,mE.b2Vec2)(t,s)}static JSs(t){pE.push(t)}static ISs(t,s){return fE.set_x(t),fE.set_y(s),fE}static qSs(t,s){return dE.set_x(t),dE.set_y(s),dE}static YSs(t){const s=new(0,mE.b2PolygonShape),e=mE._malloc(8*t.length);let i=0;for(let s=0;s<t.length;++s)mE.HEAPF32[e+i>>2]=t[s].get_x(),mE.HEAPF32[e+(i+4)>>2]=t[s].get_y(),i+=8;const n=mE.wrapPointer(e,mE.b2Vec2);return s.Set(n,t.length),mE._free(e),s}};const SE=["fixed","variable"];self.TSs=class extends self.zH{constructor(){super()}set XSs(t){cE.ii(t),gE.Rls(t)}get XSs(){return gE.aus()}set KSs(t){const s=SE.indexOf(t);if(s<0)throw new Error("invalid stepping mode");gE.ESs(SE[s])}get KSs(){return SE[gE.RSs()]}set ZSs(t){cE.ii(t),gE.DSs(t)}get ZSs(){return gE.LSs()}set QSs(t){cE.ii(t),gE.kSs(t)}get QSs(){return gE.NSs()}tws(t,s,e){const i=gE.$B(),n=i.g$(t),r=i.g$(s);e=!!e,gE.USs(n,r,e)}}}{const wE=self._s;wE.Llt.dSs.ORt=class extends wE.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{let vE=function(t,s){return zE.get(t).$B().uB(s)};UnwrapIWorldInstance=vE;const bE=self._s,ME=self.Ns,xE=self.LH,TE=(self.assert,0),CE=1,IE=2,_E=3,GE=4,PE=5,AE=6,RE=7,EE=8,OE=9,FE=new WeakMap,DE=new WeakMap,LE=new WeakMap,kE=-2147483648,NE=1073741824,BE=536870912,$E=3758096384,WE=bE.Llt.dSs.ISs,VE=bE.Llt.dSs.qSs,jE=bE.zn(bE.Rect),UE=bE.zn(bE.Gl);bE.Llt.dSs.Instance=class extends bE.TPt{constructor(t,s){super(t);const e=this.NH(),i=this.cB();this.sws=e.GSs(),this.pSs=e.PSs(),this.gSs=e.ASs(),this.ews=!1,this.iws=0,this.nws=0,this.rws=!1,this.hws=1,this.ows=.5,this.aws=.2,this.lws=0,this.uws=.01,this.cws=!1,this.Qvt=!0,this.fws=null,this.dws=[],this.pws=[],this.mws=[],this.gws=new Set,this.yws=i.zM(),this.Sws=i.qM(),this.wws=i.cV(),this.vws=0,this.bws=0,this.Mws=!1,s&&(this.ews=!!s[TE],this.iws=s[CE],this.rws=!!s[IE],this.hws=s[_E],this.ows=s[GE],this.aws=s[PE],this.lws=s[AE],this.uws=s[RE],this.cws=!!s[EE],this.Qvt=!!s[OE]);const n=this.Nc.Sf();this.Xf=new bE.Jf(bE.Wf.Hf(n,"instancedestroy",(t=>this.L4t(t.VH))),bE.Wf.Hf(n,"beforeload",(()=>this.A6())),bE.Wf.Hf(n,"afterload",(()=>this.E6()))),DE.set(this.fe,this),this.Qvt&&this.CGt()}_Pt(){this.xws()}Hn(){this.Tws(),bE.bh(this.mws),this.gws.clear(),this.fws&&(this.Cws(),this.pSs.DestroyBody(this.fws),this.fws=null),super.Hn()}Iws(t){if(!this.fws)return;const s=this.fws.CreateFixture(t);return this.dws.push(s),s}Cws(){if(this.fws){for(const t of this.dws)this.fws.DestroyFixture(t);bE.bh(this.dws)}}_ws(){const t=this.cB();return t.bH()?(t.dz(jE,UE,!1),UE):t.gz()}Gws(t){this.sws.destroy(t)}xws(){if(!this.Qvt)return;const t=this.sws.b2FixtureDef,s=this.sws.b2BodyDef,e=this.cB(),i=e.GLt();if(this.nws=this.iws,i||this.fe.fOt()||0!==this.nws||(this.nws=1),!this.fws){const t=new s;t.set_type(this.ews?0:2);let i=e.zM()*this.gSs,n=e.qM()*this.gSs;if(2===this.nws){const t=this._ws();i=t.hl()*this.gSs,n=t.ol()*this.gSs}t.set_position(VE(i,n)),t.set_angle(e.cV()),t.set_fixedRotation(this.rws),t.set_linearDamping(this.lws),t.set_angularDamping(this.uws),t.set_bullet(this.cws),this.fws=this.pSs.CreateBody(t),this.Gws(t),FE.set(this.fws,this)}this.Cws();const n=new t;n.set_density(this.hws),n.set_friction(this.ows),n.set_restitution(this.aws);const r=Math.max(Math.abs(e.Vg()),1),h=Math.max(Math.abs(e.Zg()),1);0===this.nws?this.fe.fOt()?this.Pws(n):this.Aws(n,r,h):1===this.nws?this.Rws(n,e,r,h):this.Ews(n,r,h),this.vws=e.Vg(),this.bws=e.Zg(),e.ELt(!1),this.Gws(n)}Rws(t,s,e,i){const n=new(0,this.sws.b2PolygonShape),r=e*this.gSs,h=i*this.gSs;let o=s.iz(),a=s.hz();s.Vg()<0&&(o=1-o),s.Zg()<0&&(a=1-a);const l=(.5-o)*r,u=(.5-a)*h,c=bE.Llt.dSs.HAt(l,u);n.SetAsBox(r/2,h/2,c,0),t.set_shape(n),this.Iws(t),this.Gws(n),bE.Llt.dSs.JSs(c)}Ews(t,s,e){const i=new(0,this.sws.b2CircleShape);i.set_m_radius(Math.min(s,e)*this.gSs*.5),t.set_shape(i),this.Iws(t),this.Gws(i)}Aws(t,s,e){const i=this.cB(),n=i.Vg()<0,r=i.Zg()<0,h=this.gSs,o=i.RLt(n?-s:s,r?-e:e,0).du(),a=o.length/2,l=[];for(let t=0;t<a;++t)l.push(bE.Llt.dSs.HAt(o[2*t],o[2*t+1]));n!==r&&l.reverse();const u=bE.Llt.dSs.Fws.Ows(l,s*e);for(const t of l)bE.Llt.dSs.JSs(t);if(u.length)for(const s of u){for(const t of s)t.set_x(t.get_x()*h),t.set_y(t.get_y()*h);const e=bE.Llt.dSs.YSs(s);t.set_shape(e),this.Iws(t),this.Gws(e);for(const t of s)bE.Llt.dSs.JSs(t)}else this.Rws(t,i,s,e)}Pws(t){const s=this.gSs,e=bE.Llt.dSs.HAt,i=bE.Llt.dSs.JSs,n=[];this.fe.RH().Dws(n);const r=[];for(let h=0,o=n.length;h<o;++h){const o=n[h],a=o.Ukt(),l=o.zkt();if(l){let n=LE.get(l);if(!n){const t=l.du(),s=l.pu();for(let i=0;i<s;++i)r.push(e(t[2*i],t[2*i+1]));const h=o.Lws()&$E;(h===kE||h===NE||h===BE||h&kE&&h&NE&&h&BE)&&r.reverse(),n=bE.Llt.dSs.Fws.Ows(r,a.width()*a.height()),LE.set(l,n);for(const t of r)i(t);bE.bh(r)}for(let h=0,o=n.length;h<o;++h){const o=n[h];for(let t=0,i=o.length;t<i;++t)r.push(e((a.Za()+o[t].get_x())*s,(a.Qa()+o[t].get_y())*s));const l=bE.Llt.dSs.YSs(r);t.set_shape(l),this.Iws(t),this.Gws(l);for(const t of r)i(t);bE.bh(r)}}else{r.push(e(a.Za()*s,a.Qa()*s)),r.push(e(a.tl()*s,a.Qa()*s)),r.push(e(a.tl()*s,a.sl()*s)),r.push(e(a.Za()*s,a.sl()*s));const i=bE.Llt.dSs.YSs(r);t.set_shape(i),this.Iws(t),this.Gws(i)}for(const t of r)i(t);bE.bh(r)}}kws(){this.fws&&(this.Tws(),FE.delete(this.fws),this.Cws(),this.pSs.DestroyBody(this.fws),this.fws=null)}Tws(){for(const t of this.pws)this.pSs.DestroyJoint(t);bE.bh(this.pws)}Nws(){for(const t of this.mws)switch(t.type){case 0:this.Bws(...t.$ws);break;case 1:this.Wws(...t.$ws);break;case 2:this.Vws(...t.$ws);break;case 3:this.jws(...t.$ws)}}Uws(t){const s=this.cB();if(-1===t)return[s.zM(),s.qM()];if(0===t&&this.fws){const t=this.fws.GetWorldCenter();return[t.get_x()/this.gSs,t.get_y()/this.gSs]}return this.fe.FTt(t)}zws(t,s,e,i,n){if(!this.Qvt||!s||s===this.fe)return;const r=bE.Llt.dSs.Instance.WSs(s);r&&r.ZCt()&&(this.mws.push({type:0,$ws:[t,s.tU(),e,i,n]}),this.Bws(t,s.tU(),e,i,n))}Bws(t,s,e,i,n){if(!this.Qvt)return;const r=this.Nc.hB(s);if(!r||r===this.fe)return;const h=bE.Llt.dSs.Instance.WSs(r);if(!h||!h.ZCt())return;h.gws.add(this.fe),this.Hws(!1),h.Hws(!1);const[o,a]=this.Uws(t),[l,u]=r.FTt(e),c=o-l,f=a-u,d=this.sws.b2DistanceJointDef,p=this.gSs,m=new d;m.Initialize(this.fws,h.VSs(),WE(o*p,a*p),VE(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(i),m.set_frequencyHz(n),this.pws.push(this.pSs.CreateJoint(m)),this.Gws(m)}Jws(t,s){if(!this.Qvt||!s||s===this.fe)return;const e=bE.Llt.dSs.Instance.WSs(s);e&&e.ZCt()&&(this.mws.push({type:1,$ws:[t,s.tU()]}),this.Wws(t,s.tU()))}Wws(t,s){if(!this.Qvt)return;const e=this.Nc.hB(s);if(!e||e===this.fe)return;const i=bE.Llt.dSs.Instance.WSs(e);if(!i||!i.ZCt())return;i.gws.add(this.fe),this.Hws(!1),i.Hws(!1);const[n,r]=this.Uws(t),h=this.sws.b2RevoluteJointDef,o=this.gSs,a=new h;a.Initialize(this.fws,i.VSs(),WE(n*o,r*o)),this.pws.push(this.pSs.CreateJoint(a)),this.Gws(a)}qws(t,s,e,i){if(!this.Qvt||!s||s===this.fe)return;const n=bE.Llt.dSs.Instance.WSs(s);n&&n.ZCt()&&(e=bE.tr(e),i=bE.tr(i),this.mws.push({type:2,$ws:[t,s.tU(),e,i]}),this.Vws(t,s.tU(),e,i))}Vws(t,s,e,i){if(!this.Qvt)return;const n=this.Nc.hB(s);if(!n||n===this.fe)return;const r=bE.Llt.dSs.Instance.WSs(n);if(!r||!r.ZCt())return;r.gws.add(this.fe),this.Hws(!1),r.Hws(!1);const[h,o]=this.Uws(t),a=this.sws.b2RevoluteJointDef,l=this.gSs,u=new a;u.Initialize(this.fws,r.VSs(),WE(h*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(bE.Qn(e)),u.set_upperAngle(bE.Qn(i)),this.pws.push(this.pSs.CreateJoint(u)),this.Gws(u)}Yws(t,s,e,i,n,r,h,o,a){if(!this.Qvt||!s||s===this.fe)return;const l=bE.Llt.dSs.Instance.WSs(s);l&&l.ZCt()&&(e=bE.tr(e),o=bE.tr(o),this.mws.push({type:3,$ws:[t,s.tU(),e,i,n,r,h,o,a]}),this.jws(t,s.tU(),e,i,n,r,h,o,a))}jws(t,s,e,i,n,r,h,o,a){if(!this.Qvt)return;const l=this.Nc.hB(s);if(!l||l===this.fe)return;const u=bE.Llt.dSs.Instance.WSs(l);if(!u||!u.ZCt())return;u.gws.add(this.fe),this.Hws(!1),u.Hws(!1);const[c,f]=this.Uws(t);e=bE.Qn(e);const d=Math.cos(e),p=Math.sin(e),m=this.sws.b2PrismaticJointDef,g=this.gSs,y=new m;y.Initialize(this.fws,u.VSs(),WE(c*g,f*g),VE(d,p)),y.set_enableLimit(!!i),y.set_lowerTranslation(n*g),y.set_upperTranslation(r*g),y.set_enableMotor(!!h),y.set_motorSpeed(bE.Qn(o)),y.set_maxMotorForce(a),this.pws.push(this.pSs.CreateJoint(y)),this.Gws(y)}Xws(){this.Qvt&&(this.Tws(),bE.bh(this.mws),this.gws.clear())}Kws(){for(const t of this.gws){const s=bE.Llt.dSs.Instance.WSs(t);if(!s||!s.ZCt())return;s.Zws(this.fe)}this.gws.clear()}L4t(t){this.Zws(t)}Zws(t){const s=t.tU();let e=0;for(let t=0,i=this.mws.length;t<i;++t)this.mws[e]=this.mws[t],e<this.pws.length&&(this.pws[e]=this.pws[t]),this.mws[t].$ws[1]===s?t<this.pws.length&&this.pSs.DestroyJoint(this.pws[t]):++e;bE.wh(this.mws,e),e<this.pws.length&&bE.wh(this.pws,e),this.gws.delete(t)}VSs(){return this.fws}static _Ss(t){return FE.get(t)||null}static WSs(t){return DE.get(t)||null}hx(){const t={e:this.Qvt,im:this.ews,pr:this.rws,d:this.hws,fr:this.ows,re:this.aws,ld:this.lws,ad:this.uws,b:this.cws,mcj:this.mws};if(this.Qvt){const s=this.fws.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.fws.GetAngularVelocity()}return t}A6(){this.Tws(),bE.bh(this.mws),this.gws.clear()}ox(t){this.kws(),this.Qvt=t.e,t.hasOwnProperty("im")&&(this.ews=!!t.im),this.rws=t.pr,this.hws=t.d,this.ows=t.fr,this.aws=t.re,this.lws=t.ld,this.uws=t.ad,this.cws=t.b,this.mws=t.mcj;const s=this.cB();this.yws=s.zM(),this.Sws=s.qM(),this.wws=s.cV(),this.vws=s.Vg(),this.bws=s.Zg(),this.Qvt&&(this.xws(),this.fws.SetLinearVelocity(WE(t.vx,t.vy)),this.fws.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.fws.SetAwake(!0),this.mws=t.mcj),this.Qvt?this.CGt():this.lGt()}E6(){this.Qvt&&this.Nws()}P8(){if(!this.Qvt)return;const t=this.Nc,s=this.NH();let e=0;0===s.RSs()?e=t.wN()/60:(e=t.lN(this.fe),e>1/30&&(e=1/30));const i=t.Kzt();i>s.FSs()&&t.wN()>0&&(0!==e&&this.pSs.Step(e,s.LSs(),s.NSs()),this.pSs.ClearForces(),s.OSs(i)),this.Hws(!0)}Hws(t){const s=this.fe.cB(),e=this.gSs;(s.Vg()!==this.vws||s.Zg()!==this.bws||s.NLt())&&this.xws();const i=this.fws,n=s.zM(),r=s.qM(),h=n-this.yws,o=r-this.Sws,a=Math.abs(h)>.001||Math.abs(o)>.001,l=s.cV()!==this.wws;let u=n,c=r;if(2===this.nws){const t=this._ws();u=t.hl(),c=t.ol()}a?(l?i.SetTransform(WE(u*e,c*e),s.cV()):i.SetTransform(WE(u*e,c*e),i.GetAngle()),t&&(i.SetLinearVelocity(WE(h,o)),this.Mws=!0),i.SetAwake(!0)):t&&this.Mws&&(this.Mws=!1,i.SetLinearVelocity(WE(0,0)),i.SetTransform(WE(u*e,c*e),i.GetAngle())),!a&&l&&(i.SetTransform(i.GetPosition(),s.cV()),i.SetAwake(!0));const f=i.GetPosition(),d=f.get_x()/e,p=f.get_y()/e,m=i.GetAngle();if((d!==s.zM()||p!==s.qM()||m!==s.cV())&&(s.QU(d,p),s.uV(m),s.ZU(),2===this.nws)){const t=this._ws(),e=t.hl()-s.zM(),i=t.ol()-s.qM();0===e&&0===i||(s.sz(-e,-i),s.ZU())}this.yws=s.zM(),this.Sws=s.qM(),this.wws=s.cV()}bht(t){switch(t){case IE:return this.Qws();case _E:return this.tvs();case GE:return this.svs();case PE:return this.evs();case AE:return this.ivs();case RE:return this.nvs();case EE:return this.rvs();case OE:return this.ZCt()}}_ht(t,s){switch(t){case IE:this.hvs(s);break;case _E:this.ovs(s);break;case GE:this.avs(s);break;case PE:this.lvs(s);break;case AE:this.uvs(s);break;case RE:this.cvs(s);break;case EE:this.fvs(s);break;case OE:this.XCt(s)}}XCt(t){t=!!t,this.Qvt&&!t?(this.Kws(),this.kws(),this.Qvt=!1,this.lGt()):!this.Qvt&&t&&(this.Qvt=!0,this.xws(),this.CGt())}ZCt(){return this.Qvt}PGt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.ZCt(),lQt:t=>this.XCt(t)},{name:t+".properties.immovable.name",value:this.dvs(),lQt:t=>this.pvs(t)},{name:t+".properties.density.name",value:this.tvs(),lQt:t=>this.ovs(t)},{name:t+".properties.friction.name",value:this.svs(),lQt:t=>this.avs(t)},{name:t+".properties.elasticity.name",value:this.evs(),lQt:t=>this.lvs(t)},{name:t+".properties.linear-damping.name",value:this.ivs(),lQt:t=>this.uvs(t)},{name:t+".properties.angular-damping.name",value:this.nvs(),lQt:t=>this.cvs(t)}];return this.Qvt&&(s.push({name:t+".debugger.is-sleeping",value:!this.mvs()}),s.push({name:t+".debugger.velocity-x",value:this.gvs(),lQt:t=>this.yvs(t,this.Svs())}),s.push({name:t+".debugger.velocity-y",value:this.Svs(),lQt:t=>this.yvs(this.gvs(),t)}),s.push({name:t+".debugger.angular-velocity",value:bE.tr(this.wvs()),lQt:t=>this.vvs(bE.Qn(t))}),s.push({name:t+".debugger.mass",value:this.bvs()})),[{title:"$"+this.WH().Pc(),properties:s}]}Mvs(t,s,e){const[i,n]=this.Uws(e);this.xvs(t,s,i,n)}Tvs(t,s,e,i){const[n,r]=this.Uws(i),h=bE.rr(n,r,s,e);this.xvs(Math.cos(h)*t,Math.sin(h)*t,n,r)}Cvs(t,s,e){const[i,n]=this.Uws(e);this.xvs(Math.cos(s)*t,Math.sin(s)*t,i,n)}xvs(t,s,e,i){if(!this.Qvt)return;const n=this.gSs;this.fws.ApplyForce(WE(t,s),VE(e*n,i*n),!0)}Ivs(t,s,e){const[i,n]=this.Uws(e);this._vs(t,s,i,n)}Gvs(t,s,e,i){const[n,r]=this.Uws(i),h=bE.rr(n,r,s,e);this._vs(Math.cos(h)*t,Math.sin(h)*t,n,r)}Pvs(t,s,e){const[i,n]=this.Uws(e);this._vs(Math.cos(s)*t,Math.sin(s)*t,i,n)}_vs(t,s,e,i){if(!this.Qvt)return;const n=this.gSs;this.fws.ApplyLinearImpulse(WE(t,s),VE(e*n,i*n),!0);const r=this.cB();this.yws=r.zM(),this.Sws=r.qM(),this.Mws=!1}Avs(t){this.Qvt&&this.fws.ApplyTorque(t,!0)}Rvs(t,s){const e=bE.lr(this.cB().cV(),s)?-1:1;this.Avs(t*e)}Evs(t,s,e){const i=this.cB(),n=bE.rr(i.zM(),i.qM(),s,e),r=bE.lr(i.cV(),n)?-1:1;this.Avs(t*r)}vvs(t){this.Qvt&&(this.fws.SetAngularVelocity(t),this.fws.SetAwake(!0))}wvs(){return this.Qvt?this.fws.GetAngularVelocity():0}yvs(t,s){if(!this.Qvt)return;const e=this.gSs;this.fws.SetLinearVelocity(WE(t*e,s*e)),this.fws.SetAwake(!0);const i=this.cB();this.yws=i.zM(),this.Sws=i.qM(),this.Mws=!1}Ovs(){if(!this.Qvt)return[0,0];const t=this.gSs,s=this.fws.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}gvs(){return this.Qvt?this.fws.GetLinearVelocity().get_x()/this.gSs:0}Svs(){return this.Qvt?this.fws.GetLinearVelocity().get_y()/this.gSs:0}Fvs(t,s){if(!this.Qvt)return;const e=this.gSs;this.fws.SetTransform(WE(t*e,s*e),this.fws.GetAngle());const i=this.cB();i.QU(t,s),i.ZU(),this.yws=i.zM(),this.Sws=i.qM()}ovs(t){if(this.Qvt&&this.hws!==t){this.hws=t;for(const s of this.dws)s.SetDensity(t);this.fws.ResetMassData()}}tvs(){return this.Qvt?this.hws:0}avs(t){if(this.Qvt&&this.ows!==t){this.ows=t;for(const s of this.dws)s.SetFriction(t);if(this.fws)for(let t=this.fws.GetContactList();this.sws.getPointer(t);t=t.get_next()){const s=t.get_contact();s&&s.ResetFriction()}}}svs(){return this.Qvt?this.ows:0}lvs(t){if(this.Qvt&&this.aws!==t){this.aws=t;for(const s of this.dws)s.SetRestitution(t)}}evs(){return this.Qvt?this.aws:0}uvs(t){this.Qvt&&this.lws!==t&&(this.lws=t,this.fws.SetLinearDamping(t))}ivs(){return this.Qvt?this.lws:0}cvs(t){this.Qvt&&this.uws!==t&&(this.uws=t,this.fws.SetAngularDamping(t))}nvs(){return this.Qvt?this.uws:0}pvs(t){this.Qvt&&(t=!!t,this.ews!==t&&(this.ews=t,this.fws.SetType(this.ews?0:2),this.fws.SetAwake(!0)))}dvs(){return this.ews}hvs(t){this.Qvt&&(t=!!t,this.rws!==t&&(this.rws=t,this.fws.SetFixedRotation(this.rws),this.fws.SetAngularVelocity(0),this.fws.SetAwake(!0)))}Qws(){return this.rws}fvs(t){this.Qvt&&(t=!!t,this.cws!==t&&(this.cws=t,this.fws.SetBullet(this.cws),this.fws.SetAwake(!0)))}rvs(){return this.cws}Dvs(t){this.Qvt&&this.fws.SetAwake(!!t)}mvs(){return!!this.Qvt&&this.fws.IsAwake()}bvs(){return this.Qvt?this.fws.GetMass()/this.gSs:0}Lvs(){return this.Qvt?this.fws.GetWorldCenter().get_x()/this.gSs:0}kvs(){return this.Qvt?this.fws.GetWorldCenter().get_y()/this.gSs:0}Nvs(){if(!this.Qvt)return[0,0];const t=this.fws.GetWorldCenter(),s=this.gSs;return[t.get_x()/s,t.get_y()/s]}Bvs(){if(!this.Qvt)return 0;let t=0;for(let s=this.fws.GetContactList();this.sws.getPointer(s);s=s.get_next()){const e=s.get_contact();e&&(t+=e.GetManifold().get_pointCount())}return t}$vs(t){if(t=Math.floor(t),!this.Qvt)return[0,0];let s=0;for(let e=this.fws.GetContactList();this.sws.getPointer(e);e=e.get_next()){const i=e.get_contact();if(!i)continue;const n=i.GetManifold().get_pointCount();if(t>=s&&t<s+n){const e=t-s,n=this.NH().zSs();i.GetWorldManifold(n);const r=n.get_points(e);return[r.get_x()/this.gSs,r.get_y()/this.gSs]}s+=n}return[0,0]}W_t(){return self.Wvs}};const zE=new WeakMap;self.Wvs=class extends xE{constructor(){super(),zE.set(this,xE.Uj().RH())}get isEnabled(){return zE.get(this).ZCt()}set isEnabled(t){zE.get(this).XCt(t)}Vvs(t,s,e=0){ME.ii(t),ME.ii(s),zE.get(this).Mvs(t,s,e)}jvs(t,s,e,i=0){ME.ii(t),ME.ii(s),ME.ii(e),zE.get(this).Tvs(t,s,e,i)}Uvs(t,s,e=0){ME.ii(t),ME.ii(s),zE.get(this).Cvs(t,s,e)}zvs(t,s,e=0){ME.ii(t),ME.ii(s),zE.get(this).Ivs(t,s,e)}Hvs(t,s,e,i=0){ME.ii(t),ME.ii(s),ME.ii(e),zE.get(this).Gvs(t,s,e,i)}Jvs(t,s,e=0){ME.ii(t),ME.ii(s),zE.get(this).Pvs(t,s,e)}qvs(t){ME.ii(t),zE.get(this).Avs(t)}Yvs(t,s){ME.ii(t),ME.ii(s),zE.get(this).Rvs(t,s)}Xvs(t,s,e){ME.ii(t),ME.ii(s),ME.ii(e),zE.get(this).Evs(t,s,e)}set angularVelocity(t){ME.ii(t),zE.get(this).vvs(t)}get angularVelocity(){return zE.get(this).wvs()}setVelocity(t,s){ME.ii(t),ME.ii(s),zE.get(this).yvs(t,s)}Kvs(){return zE.get(this).gvs()}Zvs(){return zE.get(this).Svs()}Qvs(){return zE.get(this).Ovs()}tbs(t,s){ME.ii(t),ME.ii(s),zE.get(this).Fvs(t,s)}set sbs(t){ME.ii(t),zE.get(this).ovs(t)}get sbs(){return zE.get(this).tvs()}set ebs(t){ME.ii(t),zE.get(this).avs(t)}get ebs(){return zE.get(this).svs()}set ibs(t){ME.ii(t),zE.get(this).lvs(t)}get ibs(){return zE.get(this).evs()}set nbs(t){ME.ii(t),zE.get(this).uvs(t)}get nbs(){return zE.get(this).ivs()}set rbs(t){ME.ii(t),zE.get(this).cvs(t)}get rbs(){return zE.get(this).nvs()}set hbs(t){zE.get(this).pvs(t)}get hbs(){return zE.get(this).dvs()}set obs(t){zE.get(this).hvs(t)}get obs(){return zE.get(this).Qws()}set lbs(t){zE.get(this).fvs(t)}get lbs(){return zE.get(this).rvs()}get ubs(){return zE.get(this).bvs()}cbs(){return zE.get(this).Lvs()}fbs(){return zE.get(this).kvs()}dbs(){return zE.get(this).Nvs()}pbs(){return zE.get(this).Bvs()}mbs(t){return ME.ii(t),zE.get(this).$vs(t)[0]}gbs(t){return ME.ii(t),zE.get(this).$vs(t)[1]}ybs(t){return ME.ii(t),zE.get(this).$vs(t)}set Sbs(t){zE.get(this).Dvs(!!t)}get Sbs(){return zE.get(this).mvs()}get wbs(){return!zE.get(this).mvs()}vbs(t,s,e,i,n){ME.ii(i),ME.ii(n);const r=vE(this,s);zE.get(this).zws(t,r,e,i,n)}bbs(t,s){const e=vE(this,s);zE.get(this).Jws(t,e)}Mbs(t,s,e,i){ME.ii(e),ME.ii(i);const n=vE(this,s);zE.get(this).qws(t,n,e,i)}xbs(t,s,e,i,n,r,h,o,a){const l=vE(this,s);zE.get(this).Yws(t,l,e,i,n,r,h,o,a)}Tbs(){zE.get(this).Xws()}}}{const HE=self._s;HE.Llt.dSs.AB={Cbs(){return!this.mvs()},Ibs(){return this.dvs()},_bs(t,s,e){if(!this.Qvt)return!1;let i=0;if(0===t)i=this.gvs();else if(1===t)i=this.Svs();else{const[t,s]=this.Ovs();i=Math.hypot(t,s)}return HE.compare(i,s,e)},Gbs(t,s){if(!this.Qvt)return!1;const e=HE.tr(this.wvs());return HE.compare(e,t,s)},Pbs(t,s){if(!this.Qvt)return!1;const e=this.bvs();return HE.compare(e,t,s)},Iu(){return this.ZCt()}}}{const JE=self._s;JE.Llt.dSs.Nrt={Abs(t,s,e){this.Mvs(t,s,e)},Rbs(t,s,e,i){this.Tvs(t,s,e,i)},Ebs(t,s,e){this.Cvs(t,JE.Qn(s),e)},Obs(t,s,e){this.Ivs(t,s,e)},Fbs(t,s,e,i){this.Gvs(t,s,e,i)},Dbs(t,s,e){this.Pvs(t,JE.Qn(s),e)},Lbs(t){this.Avs(JE.Qn(t))},kbs(t,s){this.Rvs(JE.Qn(t),JE.Qn(s))},Nbs(t,s,e){this.Evs(JE.Qn(t),s,e)},Bbs(t){this.vvs(JE.Qn(t))},$bs(t,s,e,i,n){if(!s)return;const r=s.cCt(this.fe);this.zws(t,r,e,i,n)},Wbs(t,s){if(!s)return;const e=s.cCt(this.fe);this.Jws(t,e)},Vbs(t,s,e,i){if(!s)return;const n=s.cCt(this.fe);this.qws(t,n,JE.Qn(e),JE.Qn(i))},jbs(t,s,e,i,n,r,h,o,a){if(!s)return;const l=s.cCt(this.fe);this.Yws(t,l,JE.Qn(e),i,n,r,h,JE.Qn(o),a)},Ubs(){this.Xws()},zbs(t){this.NH().Rls(t)},ESs(t){this.NH().ESs(t)},BSs(t,s){this.NH().BSs(t,s)},Hbs(t,s){this.yvs(t,s)},Jbs(t,s){this.Fvs(t,s)},qbs(t){this.ovs(t)},Ybs(t){this.avs(t)},Xbs(t){this.lvs(t)},Kbs(t){this.uvs(t)},Zbs(t){this.cvs(t)},Qbs(t){this.pvs(t)},tMs(t,s){this.NH().USs(this.Wj(),t,0!==s)},sMs(t){this.hvs(0!==t)},eMs(t){this.fvs(0!==t)},iMs(t){this.Dvs(!!t)},qIt(t){this.XCt(0!==t)}}}{const qE=self._s;qE.Llt.dSs.Brt={nMs(){return this.gvs()},rMs(){return this.Svs()},hMs(){return qE.tr(this.wvs())},oMs(){return this.bvs()},aMs(){return this.Lvs()},lMs(){return this.kvs()},uMs(){return this.tvs()},cMs(){return this.svs()},fMs(){return this.evs()},dMs(){return this.ivs()},pMs(){return this.nvs()},mMs(){return this.Bvs()},gMs(t){return this.$vs(t)[0]},yMs(t){return this.$vs(t)[1]}}}{let YE=function(t){return tO(t.get_x(),t.get_y())},XE=function(t){const s=[];for(const e of t)e.length<=8?s.push(e):s.push.apply(s,KE(e));return s},KE=function(t){const s=[];s.push(t.splice(0,8));const e=s[0][0];let i=s[0][7];for(;t.length;){const n=t.splice(0,Math.min(t.length,6));let r=n.at(-1);n.push(YE(e)),n.push(YE(i)),s.push(n),i=r}return s};CloneVec2=YE,SplitConvexPolysOver8Points=XE,SplitConvexPoly=KE;const ZE=self._s,QE={};ZE.Llt.dSs.Fws=QE;const tO=ZE.Llt.dSs.HAt,sO=ZE.Llt.dSs.JSs;QE.SMs=function(t,s,e,i,n,r){return t*i+e*r+n*s-s*e-i*n-r*t},QE.wMs=function(t,s,e,i,n,r,h,o){const a=e-t,l=i-s,u=h-n,c=o-r,f=(u*(r-s)-c*(n-t))/(l*u-a*c),d=t+f*a,p=s+f*l,m=QE.vMs(e,i,t,s,d,p),g=QE.vMs(d,p,n,r,h,o);return m&&g?tO(d,p):null},QE.vMs=function(t,s,e,i,n,r){return(e+.1>=t&&t>=n-.1||e-.1<=t&&t<=n+.1)&&(i+.1>=s&&s>=r-.1||i-.1<=s&&s<=r+.1)&&QE.bMs(t,s,e,i,n,r)},QE.bMs=function(t,s,e,i,n,r){if(Math.abs(n-e)>.1){const h=(r-i)/(n-e)*(t-e)+i;return Math.abs(h-s)<.1}return Math.abs(t-e)<.1},QE.MMs=function(t,s,e,i){return Math.abs(e-t)<.1&&Math.abs(i-s)<.1},QE.Ows=function(t,s){if(3===t.length)return[t.map((t=>tO(t.get_x(),t.get_y())))];const e=QE.xMs(t);let i=[];for(let t=0,n=e.length;t<n;++t){const n=e[t],r=[];let h=0;for(let t=0,s=n.length;t<s;++t){const e=n[t],i=n[(t+1)%s];h+=e.get_x()*i.get_y()-e.get_y()*i.get_x(),r.push(tO(e.get_x(),e.get_y()))}if(h=Math.abs(h/2),h>=.001*s)i.push(r);else for(let t=0,s=r.length;t<s;t++)sO(r[t])}return i=XE(i),i},QE.xMs=function(t){let s,e,i,n,r,h,o,a=[],l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=0,S=0,w=0,v=0,b=0,M=0,x=0,T=[],C=[],I=!1,_=[],G=[],P=!1;for(G.push(t);G.length;){for(a=G[0],u=a.length,I=!0,l=0;l<u;l++)if(y=l,S=l<u-1?l+1:l+1-u,w=l<u-2?l+2:l+2-u,s=a[y],e=a[S],i=a[w],f=QE.SMs(s.get_x(),s.get_y(),e.get_x(),e.get_y(),i.get_x(),i.get_y()),f<0){for(I=!1,g=1e9,c=0;c<u;c++)c!==y&&c!==S&&(v=c,b=c<u-1?c+1:0,n=a[v],r=a[b],h=QE.wMs(s.get_x(),s.get_y(),e.get_x(),e.get_y(),n.get_x(),n.get_y(),r.get_x(),r.get_y()),h&&(p=e.get_x()-h.get_x(),m=e.get_y()-h.get_y(),d=p*p+m*m,d<g?(x=v,M=b,o=h,g=d):sO(h)));if(1e9===g)return[];for(T=[],C=[],v=x,b=M,n=a[v],r=a[b],P=!1,QE.MMs(o.get_x(),o.get_y(),r.get_x(),r.get_y())||(T.push(o),P=!0),QE.MMs(o.get_x(),o.get_y(),n.get_x(),n.get_y())||(C.push(o),P=!0),P||sO(o),x=-1,M=y;;){if(M===b){if(x<0||x>=u)return[];QE.vMs(r.get_x(),r.get_y(),a[x].get_x(),a[x].get_y(),s.get_x(),s.get_y())||T.push(a[M]);break}T.push(a[M]),x=M,M-1<0?M=u-1:M--}for(T.reverse(),x=-1,M=S;;){if(M===v){if(x<0||x>=u)return[];M!==v||QE.vMs(n.get_x(),n.get_y(),a[x].get_x(),a[x].get_y(),e.get_x(),e.get_y())||C.push(a[M]);break}C.push(a[M]),x=M,M+1>u-1?M=0:M++}G.push(T,C),G.shift();break}I&&_.push(G.shift())}return _}}{const eO=self._s;eO.Llt.TMs=class extends eO.yPt{constructor(t){super(t)}Hn(){super.Hn()}}}{const iO=self._s;iO.Llt.TMs.ORt=class extends iO.MPt{constructor(t){super(t),this.CMs=[]}Hn(){iO.bh(this.CMs),super.Hn()}$_t(){}IMs(t){if(!this.CMs.includes(t)){for(const s of this.CMs)if(s.k0()&&s.eV(t))return;this.CMs.push(t)}}_Ms(){iO.bh(this.CMs)}GMs(){return this.CMs}PMs(t){const s=this.WH();for(const e of t.Qnt())if(e.WH()===s)return e.RH();return null}}}{const nO=self._s,rO=self.Ns,hO=self.LH,oO=0,aO=1,lO=2,uO=3,cO=0,fO=[];nO.Llt.TMs.Instance=class extends nO.TPt{constructor(t,s){super(t),this.AMs=0,this.RMs=1e4,this.EMs=nO.Qn(360),this.OMs=!0,this.FMs=new nO.yNt,s&&(this.AMs=s[oO],this.RMs=s[aO],this.EMs=nO.Qn(s[lO]),this.OMs=s[uO])}Hn(){super.Hn()}hx(){return{r:this.RMs,c:this.EMs,om:this.AMs,ucc:this.OMs,t:this.STt().GMs().map((t=>t.U0()))}}ox(t){this.RMs=t.r,this.EMs=t.c,this.AMs=t.om||0,this.OMs=!!t.ucc;const s=this.STt().GMs();nO.bh(s);for(const e of t.t){const t=this.Nc._Y(e);t&&s.push(t)}}DMs(t,s){const e=t.tU(),[i,n]=t.FTt(s);return this.LMs(i,n)||this.FMs.PNt()&&this.FMs.wNt===e}LMs(t,s){const e=this.cB();let i=e.cV();return e.Vg()<0&&(i+=Math.PI),this.kMs(e.zM(),e.qM(),i,t,s)}kMs(t,s,e,i,n){this.FMs.Bf();const r=this.RMs;if(nO.nr(t,s,i,n)>r*r)return!1;const h=nO.rr(t,s,i,n);return!(nO.hr(e,h)>this.EMs/2)&&!this.NMs(t,s,i,n,this.OMs).PNt()}BMs(t,s){if(s){const s=this.cB().fB(),e=this.Nc.lk();return this.AMs===cO?e.Ykt(s,t.rect,fO):e.y$(s,this.$Ms(),t.rect,fO),fO}if(this.AMs===cO){const t=this.Nc.qPt();return t?t.FW():fO}for(const t of this.$Ms())nO.On(fO,t.FW());return fO}$Ms(){return this.STt().GMs()}NMs(t,s,e,i,n){const r=this.FMs.Set(t,s,e,i),h=this.BMs(r,n),o=this.Nc.lk(),a=this.AMs===cO,l=this.fe;for(let t=0,s=h.length;t<s;++t){const s=h[t];s!==l&&(a&&!o.pLt(s,l)||o.lNt(s,r))}return r.ANt(),nO.bh(fO),r}WMs(){return this.FMs}VMs(){const t=this.FMs;return t.PNt()?t.xNt:0}jMs(){const t=this.FMs;return t.PNt()?t.TNt:0}UMs(){const t=this.FMs;return t.PNt()?t.bt:0}zMs(){const t=this.FMs;return t.PNt()?t.wNt:-1}HMs(t){const s=this.FMs;return s.PNt()?s.xNt+t*s.CNt:0}JMs(t){const s=this.FMs;return s.PNt()?s.TNt+t*s.INt:0}qMs(){const t=this.FMs;return t.PNt()?t.vNt:0}YMs(t){const s=this.FMs;return s.PNt()?s.xNt+t*s._Nt:0}XMs(t){const s=this.FMs;return s.PNt()?s.TNt+t*s.GNt:0}KMs(){const t=this.FMs;return t.PNt()?Math.atan2(t.GNt,t._Nt):0}ZMs(t){this.RMs=t}QMs(){return this.RMs}txs(t){this.EMs=t}sxs(){return this.EMs}bht(t){switch(t){case oO:return this.AMs;case aO:return this.RMs;case lO:return nO.tr(this.EMs);case uO:return this.OMs}}_ht(t,s){switch(t){case oO:this.AMs=s;break;case aO:this.RMs=s;break;case lO:this.EMs=nO.Qn(s);break;case uO:this.OMs=!!s}}PGt(){const t="behaviors.los.properties";return[{title:"$"+this.WH().Pc(),properties:[{name:t+".range.name",value:this.QMs(),lQt:t=>this.ZMs(t)},{name:t+".cone-of-view.name",value:nO.tr(this.sxs()),lQt:t=>this.txs(nO.Qn(t))}]}]}W_t(){return self.exs}};const dO=new WeakMap;self.exs=class extends hO{constructor(){super();const t=hO.Uj().RH();dO.set(this,t),this.ixs=new self.nxs(t)}set range(t){rO.ii(t),dO.get(this).ZMs(t)}get range(){return dO.get(this).QMs()}set rxs(t){rO.ii(t),dO.get(this).txs(t)}get rxs(){return dO.get(this).sxs()}hxs(t,s){return rO.Ze(t),rO.Ze(s),dO.get(this).LMs(t,s)}oxs(t,s,e,i,n){return rO.Ze(t),rO.Ze(s),rO.Ze(e),rO.Ze(i),rO.Ze(n),dO.get(this).kMs(t,s,e,i,n)}axs(t,s,e,i,n=!0){return rO.Ze(t),rO.Ze(s),rO.Ze(e),rO.Ze(i),dO.get(this).NMs(t,s,e,i,n),this.ixs}lxs(t){const s=dO.get(this),e=s.$B().g$(t);s.STt().IMs(e)}uxs(){dO.get(this).STt()._Ms()}},self.nxs=class{constructor(t){dO.set(this,t)}get cxs(){return dO.get(this).WMs().PNt()}get xNt(){return dO.get(this).VMs()}get TNt(){return dO.get(this).jMs()}fxs(){const t=dO.get(this);return[t.VMs(),t.jMs()]}get dxs(){return dO.get(this).UMs()}get wNt(){return dO.get(this).zMs()}pxs(t){return rO.ii(t),dO.get(this).HMs(t)}mxs(t){return rO.ii(t),dO.get(this).JMs(t)}gxs(t){rO.ii(t);const s=dO.get(this);return[s.HMs(t),s.JMs(t)]}get yxs(){return dO.get(this).qMs()}Sxs(t){return rO.ii(t),dO.get(this).YMs(t)}wxs(t){return rO.ii(t),dO.get(this).XMs(t)}vxs(t){rO.ii(t);const s=dO.get(this);return[s.YMs(t),s.XMs(t)]}get bxs(){return dO.get(this).KMs()}}}{const pO=self._s,mO=new Set,gO=new Set;pO.Llt.TMs.AB={Mxs(t,s){return this.LMs(t,s)},xxs(){return this.FMs.PNt()},kMs(t,s,e,i,n){return this.kMs(t,s,pO.Qn(e),i,n)},Txs(t,s){if(!t)return!1;const e=this.Nc.sgt(),i=e.Uk().upt(),n=e.$B(),r=e.Wj().DW(),h=t.DW();let o=r.FW(),a=h.FW();r.Jdt()?pO.bh(r.ept()):i&&(o=n.xTt()&&!r.ept().length&&r.spt().length?r.spt():r.ept()),h.Jdt()?pO.bh(h.ept()):i&&(a=n.xTt()&&!h.ept().length&&h.spt().length?h.spt():h.ept());const l=e.xxt(),u=this.STt();for(const t of o){let e=!1;const i=u.PMs(t);if(0===a.length)l&&(e=!0);else for(const n of a)t!==n&&pO.xor(i.DMs(n,s),l)&&(e=!0,gO.add(n));e&&mO.add(t)}return i?(o===r.ept()?r.opt(mO):(r.hpt(mO,o),r.rpt(mO)),a===h.ept()?h.opt(gO):(h.hpt(gO,a),h.rpt(gO))):(r.rpt(mO),h.rpt(gO)),mO.clear(),gO.clear(),r.qdt()}}}{const yO=self._s;yO.Llt.TMs.Nrt={Cxs(t){this.ZMs(t)},Ixs(t){this.txs(yO.Qn(t))},NMs(t,s,e,i,n){this.NMs(t,s,e,i,n)},IMs(t){this.STt().IMs(t)},_Ms(){this.STt()._Ms()}}}{const SO=self._s;SO.Llt.TMs.Brt={Range(){return this.QMs()},_xs(){return SO.tr(this.sxs())},Gxs(){return this.VMs()},Pxs(){return this.jMs()},Axs(){return this.UMs()},Rxs(){return this.zMs()},Exs(t){return this.HMs(t)},Oxs(t){return this.JMs(t)},Fxs(){return SO.tr(this.qMs())},Dxs(t){return this.YMs(t)},Lxs(t){return this.XMs(t)},kxs(){return SO.tr(this.KMs())}}}{const wO=self._s;wO.Llt.bound=class extends wO.yPt{constructor(t){super(t)}Hn(){super.Hn()}}}{const vO=self._s;vO.Llt.bound.ORt=class extends vO.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const bO=self._s,MO=0;bO.Llt.bound.Instance=class extends bO.TPt{constructor(t,s){super(t),this.Nxs=0,s&&(this.Nxs=s[MO]),this._Gt()}Hn(){super.Hn()}hx(){return{m:this.Nxs}}ox(t){this.Nxs=t.m}TGt(){const t=this.fe.cB(),s=t.pz(),e=t.JN();let i=!1;0===this.Nxs?(t.zM()<0&&(t.HM(0),i=!0),t.qM()<0&&(t.YM(0),i=!0),t.zM()>e.Vg()&&(t.HM(e.Vg()),i=!0),t.qM()>e.Zg()&&(t.YM(e.Zg()),i=!0)):(s.Za()<0&&(t.Lht(-s.Za()),i=!0),s.Qa()<0&&(t.kht(-s.Qa()),i=!0),s.tl()>e.Vg()&&(t.Lht(-(s.tl()-e.Vg())),i=!0),s.sl()>e.Zg()&&(t.kht(-(s.sl()-e.Zg())),i=!0)),i&&t.ZU()}bht(t){if(t===MO)return this.Nxs}_ht(t,s){t===MO&&(this.Nxs=s)}}}self._s.Llt.bound.AB={},self._s.Llt.bound.Nrt={},self._s.Llt.bound.Brt={};{const xO=self._s;xO.Llt.Bxs=class extends xO.yPt{constructor(t){super(t),this.$xs=0,this.Wxs=0,this.Vxs=0,this.jxs=0}Hn(){super.Hn()}Uxs(t){this.$xs=t}zxs(){return this.$xs}Hxs(t){this.Wxs=t}Jxs(){return this.Wxs}qxs(t){this.Vxs=t}Yxs(){return this.Vxs}Xxs(t){this.jxs=t}Kxs(){return this.jxs}}}{const TO=self._s;TO.Llt.Bxs.ORt=class extends TO.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const CO=self._s,IO=0;CO.Llt.Bxs.Instance=class extends CO.TPt{constructor(t,s){super(t),this.Qvt=!0,s&&(this.Qvt=s[IO]),this.Qvt&&this._Gt()}Hn(){super.Hn()}hx(){const t=this.NH();return{e:this.Qvt,smg:t.zxs(),ss:t.Jxs(),se:t.Yxs(),smd:t.Kxs()}}ox(t){const s=this.NH();s.Uxs(t.smg),s.Hxs(t.ss),s.qxs(t.se),s.Xxs(t.smd),this.Qvt=t.e,this.Qvt?this._Gt():this.uGt()}XCt(t){this.Qvt=!!t,this.Qvt?this._Gt():this.uGt()}Iu(){return this.Qvt}TGt(){if(!this.Iu())return;this.Nc.lN(this.fe);const t=this.NH(),s=t.FW();let e=0,i=0,n=0;for(const t of s){const s=t.BOt(CO.Llt.Bxs);if(!s||!s.RH().Iu())continue;const r=t.cB();e+=r.zM(),i+=r.qM(),++n}const r=this.fe.cB().JN(),h=this.Nc.dN();let o=0,a=0;if(h>=t.Jxs()&&h<t.Yxs()){let s=t.zxs()*Math.min(this.Nc.wN(),1);0===t.Kxs()&&(s*=1-(h-t.Jxs())/(t.Yxs()-t.Jxs()));const e=this.Nc.VN()*Math.PI*2,i=this.Nc.VN()*s;o=Math.cos(e)*i,a=Math.sin(e)*i}r.fV(e/n+o),r.pV(i/n+a)}bht(t){if(t===IO)return this.Qvt}_ht(t,s){t===IO&&(this.Qvt=!!s,this.Qvt?this._Gt():this.uGt())}PGt(){return[{title:"$"+this.WH().Pc(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.Iu(),lQt:t=>this.XCt(t)}]}]}}}self._s.Llt.Bxs.AB={Iu(){return this.Iu()}},self._s.Llt.Bxs.Nrt={Zxs(t,s,e){const i=this.NH();i.Uxs(t),i.Hxs(this.Nc.dN()),i.qxs(this.Nc.dN()+s),i.Xxs(e)},qIt(t){this.XCt(0!==t)}},self._s.Llt.Bxs.Brt={};{const _O=self._s;_O.Llt.Qxs=class extends _O.yPt{constructor(t){super(t)}Hn(){super.Hn()}}}{const GO=self._s;GO.Llt.Qxs.ORt=class extends GO.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const PO=self._s,AO=self.Ns,RO=self.LH,EO=0,OO=1,FO=2,DO=3,LO=4;PO.Llt.Qxs.Instance=class extends PO.TPt{constructor(t,s){super(t),this.tTs=0,this.sTs=0,this.eTs=0,this.iTs=!0,this.nTs=!0,this.rTs=!1,this.hTs=0,this.oTs=PO.zn(PO.Qf),this.aTs=this.fe.cB().tO()||1,s&&(this.tTs=s[EO],this.sTs=s[OO],this.eTs=s[FO],this.iTs=!!s[DO],this.nTs=!!s[LO],this.hTs=this.nTs?0:3),this.nTs&&(0===this.tTs?(this.hTs=1,0===this.sTs&&(this.hTs=2)):(this.fe.cB().eO(0),this.Nc.SB())),this.CGt()}Hn(){super.Hn()}hx(){return{fit:this.tTs,wt:this.sTs,fot:this.eTs,d:this.iTs,s:this.hTs,st:this.oTs.Hs(),mo:this.aTs}}ox(t){this.tTs=t.fit,this.sTs=t.wt,this.eTs=t.fot,this.iTs=t.d,this.hTs=t.s,this.oTs.Set(t.st),this.aTs=t.mo,3===this.hTs?this.lGt():this.CGt()}P8(){const t=this.Nc.lN(this.fe);this.oTs.Bu(t);const s=this.fe.cB();0===this.hTs&&(s.eO(this.oTs.Hs()/this.tTs*this.aTs),this.Nc.SB(),s.tO()>=this.aTs&&(s.eO(this.aTs),this.hTs=1,this.oTs.Bf(),this.nGt("fadeinend"),this.xU(PO.Llt.Qxs.AB.lTs))),1===this.hTs&&this.oTs.Hs()>=this.sTs&&(this.hTs=2,this.oTs.Bf(),this.nGt("waitend"),this.xU(PO.Llt.Qxs.AB.uTs)),2===this.hTs&&(0!==this.eTs?(s.eO(this.aTs-this.oTs.Hs()/this.eTs*this.aTs),this.Nc.SB(),s.tO()<=0&&(this.hTs=3,this.oTs.Bf(),this.nGt("fadeoutend"),this.xU(PO.Llt.Qxs.AB.cTs),this.iTs&&this.Nc.Jj(this.fe))):(this.hTs=3,this.oTs.Bf())),3===this.hTs&&this.lGt()}fTs(){this.nTs||this.rTs||(this.aTs=this.fe.cB().tO()||1,this.rTs=!0),3===this.hTs&&this.EO()}dTs(){this.EO()}EO(){this.hTs=0,this.oTs.Bf(),0===this.tTs?(this.hTs=1,0===this.sTs&&(this.hTs=2)):(this.fe.cB().eO(0),this.Nc.SB()),this.CGt()}pTs(t){this.tTs=Math.max(t,0)}mTs(){return this.tTs}gTs(t){this.sTs=Math.max(t,0)}yTs(){return this.sTs}STs(t){this.eTs=Math.max(t,0)}wTs(){return this.eTs}bht(t){switch(t){case EO:return this.mTs();case OO:return this.yTs();case FO:return this.wTs();case DO:return this.iTs}}_ht(t,s){switch(t){case EO:this.pTs(s);break;case OO:this.gTs(s);break;case FO:this.STs(s);break;case DO:this.iTs=!!s}}PGt(){const t="behaviors.fade";return[{title:"$"+this.WH().Pc(),properties:[{name:t+".properties.fade-in-time.name",value:this.mTs(),lQt:t=>this.pTs(t)},{name:t+".properties.wait-time.name",value:this.yTs(),lQt:t=>this.gTs(t)},{name:t+".properties.fade-out-time.name",value:this.wTs(),lQt:t=>this.STs(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.hTs]]}]}]}W_t(){return self.vTs}};const kO=new WeakMap;self.vTs=class extends RO{constructor(){super(),kO.set(this,RO.Uj().RH())}bTs(){kO.get(this).fTs()}MTs(){kO.get(this).dTs()}set xTs(t){AO.ii(t),kO.get(this).pTs(t)}get xTs(){return kO.get(this).mTs()}set TTs(t){AO.ii(t),kO.get(this).gTs(t)}get TTs(){return kO.get(this).yTs()}set CTs(t){AO.ii(t),kO.get(this).STs(t)}get CTs(){return kO.get(this).wTs()}}}self._s.Llt.Qxs.AB={cTs:()=>!0,lTs:()=>!0,uTs:()=>!0},self._s.Llt.Qxs.Nrt={ITs(){this.fTs()},_Ts(){this.dTs()},GTs(t){this.pTs(t)},PTs(t){this.gTs(t)},ATs(t){this.STs(t)}},self._s.Llt.Qxs.Brt={RTs(){return this.mTs()},ETs(){return this.yTs()},OTs(){return this.wTs()}};{const NO=self._s;NO.Llt.FTs=class extends NO.yPt{constructor(t){super(t)}Hn(){super.Hn()}}}{const BO=self._s;BO.Llt.FTs.ORt=class extends BO.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const $O=self._s,WO=self.Ns,VO=self.LH,jO=0,UO=1,zO=2;$O.Llt.FTs.Instance=class extends $O.TPt{constructor(t,s){super(t),this.vAt=0,this.$cs=0,this.Qvt=!0,s&&(this.vAt=$O.Qn(s[jO]),this.$cs=$O.Qn(s[UO]),this.Qvt=s[zO]),this.Qvt&&this.CGt()}Hn(){super.Hn()}lys(t){this.vAt=t}uys(){return this.vAt}cys(t){this.$cs=t}fys(){return this.$cs}hx(){return{s:this.vAt,a:this.$cs,e:this.Qvt}}ox(t){this.vAt=t.s,this.$cs=t.a,this.XCt(t.e)}P8(){if(!this.Qvt)return;const t=this.Nc.lN(this.fe);if(0!==t&&(0!==this.$cs&&(this.vAt+=this.$cs*t),0!==this.vAt)){const s=this.fe.cB();s.uV(s.cV()+this.vAt*t),s.ZU()}}bht(t){switch(t){case jO:return $O.tr(this.uys());case UO:return $O.tr(this.fys());case zO:return this.ZCt()}}_ht(t,s){switch(t){case jO:this.lys($O.Qn(s));break;case UO:this.cys($O.Qn(s));break;case zO:this.XCt(s)}}XCt(t){this.Qvt=!!t,this.Qvt?this.CGt():this.lGt()}ZCt(){return this.Qvt}PGt(){const t="behaviors.rotate";return[{title:"$"+this.WH().Pc(),properties:[{name:t+".properties.speed.name",value:$O.tr(this.uys()),lQt:t=>this.lys($O.Qn(t))},{name:t+".properties.acceleration.name",value:$O.tr(this.fys()),lQt:t=>this.cys($O.Qn(t))},{name:t+".properties.enabled.name",value:this.ZCt(),lQt:t=>this.XCt(t)}]}]}W_t(){return self.DTs}};const HO=new WeakMap;self.DTs=class extends VO{constructor(){super(),HO.set(this,VO.Uj().RH())}set speed(t){WO.ii(t),HO.get(this).lys(t)}get speed(){return HO.get(this).uys()}set acceleration(t){WO.ii(t),HO.get(this).cys(t)}get acceleration(){return HO.get(this).fys()}get isEnabled(){return HO.get(this).ZCt()}set isEnabled(t){HO.get(this).XCt(t)}}}self._s.Llt.FTs.AB={Iu(){return this.ZCt()}};{const JO=self._s;JO.Llt.FTs.Nrt={qys(t){this.lys(JO.Qn(t))},Als(t){this.cys(JO.Qn(t))},qIt(t){this.XCt(t)}}}{const qO=self._s;qO.Llt.FTs.Brt={iSs(){return qO.tr(this.uys())},nSs(){return qO.tr(this.fys())}}}{const YO=self._s;YO.Llt.VPt=class extends YO.yPt{constructor(t){super(t)}Hn(){super.Hn()}}}{const XO=self._s;XO.Llt.VPt.ORt=class extends XO.MPt{constructor(t){super(t)}Hn(){super.Hn()}$_t(){}}}{const KO=self._s,ZO=self.Ns,QO=self.LH,tF=0,sF=1,eF=new Set;KO.Llt.VPt.Instance=class extends KO.TPt{constructor(t,s){super(t),this.qIt(!0),s&&(this.qIt(s[tF]),this.Ctt(s[sF]))}Hn(){super.Hn()}qIt(t){this.fe.gOt(!!t)}Iu(){return this.fe.mOt()}Ctt(t){const s=this.fe.Gxt();if(!t.trim())return void s.delete("solidTags");let e=s.get("solidTags");e||(e=new Set,s.set("solidTags",e)),e.clear();for(const s of t.split(" "))s&&e.add(s.toLowerCase())}zJ(){return this.fe.Gxt().get("solidTags")||eF}LTs(){return[...this.zJ()].join(" ")}hx(){return{e:this.Iu()}}ox(t){this.qIt(t.e)}bht(t){if(t===tF)return this.Iu()}_ht(t,s){t===tF&&this.qIt(s)}PGt(){return[{title:"$"+this.WH().Pc(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.Iu(),lQt:t=>this.qIt(t)},{name:"behaviors.solid.properties.tags.name",value:this.LTs(),lQt:t=>this.Ctt(t)}]}]}W_t(){return self.kTs}};const iF=new WeakMap;self.kTs=class extends QO{constructor(){super(),iF.set(this,QO.Uj().RH())}set isEnabled(t){iF.get(this).qIt(!!t)}get isEnabled(){return iF.get(this).Iu()}set tags(t){ZO.oi(t),iF.get(this).Ctt(t)}get tags(){return iF.get(this).LTs()}}}self._s.Llt.VPt.AB={Iu(){return this.Iu()}},self._s.Llt.VPt.Nrt={qIt(t){this.qIt(t)},Ctt(t){this.Ctt(t)}},self._s.Llt.VPt.Brt={};{let nF=function(t){return"number"==typeof t?-t:t},rF=function(t,s){return"number"==typeof t&&"number"==typeof s},hF=function(t,s){return rF(t,s)?t+s:t},oF=function(t,s){return rF(t,s)?t-s:t},aF=function(t,s){return rF(t,s)?t*s:t},lF=function(t,s){return rF(t,s)?t/s:t},uF=function(t,s){return rF(t,s)?t%s:t},cF=function(t,s){return rF(t,s)?Math.pow(t,s):t},fF=function(t,s){if("string"==typeof t||"string"==typeof s){let e,i;return e="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,i="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,e+i}return t&&s?1:0},dF=function(t,s){return rF(t,s)?t||s?1:0:t};unaryminus=nF,bothNumbers=rF,add=hF,subtract=oF,multiply=aF,divide=lF,mod=uF,pow=cF,and=fF,or=dF;const pF=self._s;self.dMt=[()=>"Custom Expressions",()=>"Custom Expressions - Unscaled DeltaTime",t=>{const s=t.xMt(0).jbt();return()=>1/s()},()=>"Custom Expressions - Angle Lock",t=>{const s=t.xMt(0).fMt();return()=>360/s.qit()},t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).fMt(),i=t.xMt(2).fMt(),n=t.xMt(3).fMt(),r=t.xMt(4).fMt(),h=t.xMt(5).fMt(),o=t.xMt(6).fMt();return()=>s(Math.round(e.qit()/i.qit())*n.qit(),Math.round(r.qit()/h.qit())*o.qit(),360)},()=>"Custom Expressions - Convert to Range",t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt(),i=t.xMt(2).fMt(),n=t.xMt(3).fMt();return()=>(s.qit()%e.qit()+i.qit())%n.qit()},()=>"Custom Expressions - Input String to Angle",t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).fMt();return()=>s(e.qit())},()=>"left",()=>180,()=>"right",()=>0,()=>"up",()=>270,()=>"down",()=>90,()=>"Custom Expression - Get weighted random value",t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).fMt();return()=>s(e.qit(),"'",'"')},()=>"r",t=>{const s=t.xMt(0).fMt();return()=>s.qit()},t=>{const s=t.xMt(0).jbt();return()=>s()},()=>"Custom Expressions - Distance 3D",t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt();return()=>s.qit()-e.qit()},t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt(),i=t.xMt(2).fMt(),n=t.xMt(3).fMt(),r=t.xMt(4).fMt(),h=t.xMt(5).fMt();return()=>Math.sqrt(s.qit()*e.qit()+i.qit()*n.qit()+r.qit()*h.qit())},()=>"JuiceFX",()=>"Juice FX - Zoom To Position",t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).fMt(),i=t.xMt(2).jbt();return()=>s()*(e.qit()/100)+i()},()=>"Juice FX - Zoom By Percentage",()=>"Juice FX - Screenshake",()=>"Juice FX - Slow Motion",()=>1,()=>"Juice FX - Chromatic Aberration",()=>"Juice FX - Chromatic Aberration - Function",()=>"Juice FX - Chromatic Aberration - Toggle Effect",()=>"Objects",()=>"RGBAChannelSeparation",t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).jbt();return()=>pF._t(s.qit(),0,1-Math.exp(-7.5*e()))},()=>"Juice FX - Chromatic Aberration - Apply Params",t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt();return()=>Math.cos(pF.Qn(s.qit()))*e.qit()},t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt();return()=>Math.cos(pF.Qn(s.qit()))*-e.qit()},()=>2,t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt();return()=>Math.cos(pF.Qn(s.qit()))*(4*e.qit())},()=>3,t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt();return()=>Math.cos(pF.Qn(s.qit()))*(1.25*e.qit())},()=>4,t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt();return()=>Math.sin(pF.Qn(s.qit()))*e.qit()},()=>5,t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt();return()=>Math.sin(pF.Qn(s.qit()))*-e.qit()},()=>6,t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt();return()=>Math.sin(pF.Qn(s.qit()))*(4*-e.qit())},()=>7,t=>{const s=t.xMt(0).fMt(),e=t.xMt(1).fMt();return()=>Math.sin(pF.Qn(s.qit()))*(1.25*e.qit())},()=>8,()=>"ProUI",()=>"Debug",()=>"Debug - Toggle Debug Mode",()=>"Debug - Debug UI Visibility",()=>"UI - Debug",()=>"Debug - Fullscreen",()=>"Debug - Debug Text",t=>{const s=t.xMt(0).jbt();return()=>s()%2},t=>{const s=t.xMt(0);return()=>s.Ybt()},t=>{const s=t.xMt(0).jbt();return()=>"Preproduction - "+s()},t=>{const s=t.xMt(0).jbt();return()=>"\nversion - "+s()},t=>{const s=t.xMt(0).jbt(),e=t.xMt(1),i=t.xMt(2).jbt(),n=t.xMt(3);return()=>fF(fF("\nviewport Size - ( ",Math.floor(s(e.Ybt())))+", ",Math.floor(i(n.Ybt())))+" )"},t=>{const s=t.xMt(0).jbt();return()=>fF("\nFPS - ",s())},t=>{const s=t.xMt(0).jbt();return()=>fF("\nCPU - ",Math.floor(100*s()))+"%"},t=>{const s=t.xMt(0).jbt();return()=>fF("\nGPU - ",Math.floor(100*s()))+"%"},t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).jbt();return()=>"\nTime - "+s(e())},t=>{const s=t.xMt(0).jbt(),e=t.xMt(1);return()=>"\nLevel Time - "+s(e.Qbt())},t=>{const s=t.xMt(0);return()=>s.Ybt()+16},t=>{const s=t.xMt(0).fMt();return()=>Math.floor(s.qit()/60/60%60)},t=>{const s=t.xMt(0).fMt();return()=>Math.floor(s.qit()/60%60)},t=>{const s=t.xMt(0).fMt();return()=>Math.floor(s.qit()%60)},t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).jbt(),i=t.xMt(2).fMt();return()=>1*s(e((Math.round(100*i.qit())/100).toString(),1,"."))},t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).fMt(),i=t.xMt(2).jbt(),n=t.xMt(3).fMt(),r=t.xMt(4).jbt(),h=t.xMt(5).fMt();return()=>s(e.qit(),2)+":"+i(n.qit(),2)+":"+r(h.qit(),2)},()=>"Debug - Restart",t=>{const s=t.xMt(0);return()=>s.Qbt()},()=>"Physics",()=>"Physics - No Collider Connector",()=>"BG",t=>{const s=t.xMt(0);return()=>Math.round(s.Ybt()/5e3)},()=>"Prismatic",t=>{const s=t.xMt(0);return()=>-.5*s.Ybt()},t=>{const s=t.xMt(0);return()=>.5*s.Ybt()},()=>"Static",()=>"Physics - Set Stepping Mode",()=>"Physics - Set Gravity ",()=>20,()=>"Physics - Set Physics Iteration",()=>30,()=>35,()=>"Physics - Zone Tile",()=>"Player",()=>"PMove",()=>"PMove - States",()=>"PMove - States - Ground Dist",t=>{const s=t.xMt(0),e=t.xMt(1);return()=>s.Ybt()+e.oMt()},t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2),n=t.xMt(3);return()=>pF.ir(s.Ybt(),e.Ybt(),i.oMt(),n.oMt())},t=>{const s=t.xMt(0);return()=>s.oMt()},()=>"PMove - States - Is Grounded / On Landed",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>.5*s.Ybt()+e.oMt()*i.Ybt()},t=>{const s=t.xMt(0);return()=>.85*s.Ybt()},()=>"PMove - States - Is Falling / On Fall",()=>"On Fall",()=>"PMove - States - Is Jumping / On Jump",()=>"On Jump",()=>"PMove - States - Is Sliding",t=>{const s=t.xMt(0);return()=>Math.abs(s.oMt())},()=>10,()=>"PMove - Set Start Position",()=>"PWeapon",()=>"PWeapon - Layering",()=>"PWeapon - Reload",()=>"PWeapon - Reload - On Signals",t=>{const s=t.xMt(0),e=t.xMt(1);return()=>pF.Kn(s.Qbt(),0,e.Qbt())},()=>"Weapon - On Reload",()=>"PWeapon - Reload - Triggers",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2),n=t.xMt(3);return()=>s.Ybt()+.5*e.Ybt()+i.oMt()*n.Ybt()},t=>{const s=t.xMt(0),e=t.xMt(1);return()=>s.Qbt()/e.Qbt()},t=>{const s=t.xMt(0),e=t.xMt(1);return()=>s.Qbt()/e.Qbt()*10},()=>"PWeapon - Aim & Shoot",t=>{const s=t.xMt(0);return()=>90-64*Math.sign(s.Ybt())},()=>"Weapon - On Shoot",()=>"Weapon - On Shoot Fail",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>pF._t(s.oMt(),e.Qbt(),1-Math.exp(-10*i.Ybt()))},t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>.6*s.oMt()+Math.cos(pF.Qn(e.Ybt()-180))*i.Qbt()},t=>{const s=t.xMt(0),e=t.xMt(1);return()=>Math.sin(pF.Qn(s.Ybt()))*-e.Qbt()},t=>{const s=t.xMt(0);return()=>.5*s.oMt()},()=>2.5,()=>50,()=>16,()=>"Weapon - On Recoil",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>s.Ybt()-Math.sign(e.Ybt())*i.Qbt()},()=>"ShootPoint",()=>"",t=>{const s=t.xMt(0),e=t.xMt(1).fMt(),i=t.xMt(2).fMt(),n=t.xMt(3).fMt(),r=t.xMt(4).jbt(),h=t.xMt(5).jbt(),o=t.xMt(6).fMt(),a=t.xMt(7).fMt();return()=>s.Ybt()-e.qit()/2+i.qit()/n.qit()*r()+h(.5*-o.qit(),.5*a.qit())},t=>{const s=t.xMt(0);return()=>s.Ybt("ShootPoint")},t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>s.Ybt("ShootPoint")+Math.cos(pF.Qn(e.Ybt()))*i.oMt()},t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>s.Ybt("ShootPoint")+Math.sin(pF.Qn(e.Ybt()))*i.oMt()},()=>"Bullet - Height",()=>.2,()=>"HitPoint",()=>"On Shoot - Scale",t=>{const s=t.xMt(0);return()=>1*s.Ybt()},()=>1.5,()=>.15,()=>.5,t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2),n=t.xMt(3);return()=>pF.tr(pF.rr(s.Ybt(),e.Ybt(),i.Ybt(),n.Ybt()))},()=>"PAnim",()=>"PAnim - Juice",()=>"PAnim - Juice - Land Particles",()=>"AnimPoint",t=>{const s=t.xMt(0).jbt();return()=>270+5*s(-1,1)},t=>{const s=t.xMt(0).jbt();return()=>s(2,5)},()=>"PAnim - Juice - Reset Size",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2),n=t.xMt(3);return()=>pF._t(s.Ybt(),Math.sign(e.Ybt())*i.Ybt(),1-Math.exp(-10*n.Ybt()))},t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>pF._t(s.Ybt(),e.Ybt(),1-Math.exp(-10*i.Ybt()))},()=>"PAnim - Juice - Angle Tilt",t=>{const s=t.xMt(0);return()=>pF.mr(0,400,s.oMt())},t=>{const s=t.xMt(0).fMt();return()=>pF.Kn(s.qit(),-1,1)},t=>{const s=t.xMt(0).jbt(),e=t.xMt(1),i=t.xMt(2),n=t.xMt(3).fMt(),r=t.xMt(4);return()=>s(e.Ybt(),Math.sign(i.Ybt())*n.qit()*-45,1-Math.exp(-10*r.Ybt()))},()=>"PAnim - Animations",()=>"PAnim - Animations - Default",()=>"Poof",()=>"Default",()=>"PAnim - Animations - Land",t=>{const s=t.xMt(0),e=t.xMt(1);return()=>Math.sign(s.Ybt())*e.Ybt()*1.25},t=>{const s=t.xMt(0);return()=>.75*s.Ybt()},()=>"PAnim - Animations - Falling / Jumping",t=>{const s=t.xMt(0),e=t.xMt(1);return()=>Math.sign(s.Ybt())*e.Ybt()*.75},t=>{const s=t.xMt(0);return()=>1.75*s.Ybt()},()=>"Jumping",()=>"Falling",()=>"PAnim - Animations - On Shoot",t=>{const s=t.xMt(0).jbt(),e=t.xMt(1);return()=>s(25,64)*Math.sign(e.Ybt())},t=>{const s=t.xMt(0),e=t.xMt(1);return()=>Math.sign(s.Ybt())*(1.45*e.Ybt())},()=>"On Shoot - Angle",()=>"Interactables",()=>"Interactables - Chest Teleport",()=>"Interactables - Moving Platform",t=>{const s=t.xMt(0),e=t.xMt(1);return()=>Math.cos(pF.Qn(s.sMt()))+e.oMt()},t=>{const s=t.xMt(0),e=t.xMt(1);return()=>Math.sin(pF.Qn(s.sMt()))+e.oMt()},()=>"Interactables - Balloons",()=>"Interactables - Conveyor Belt",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2).jbt();return()=>s.Ybt()+10*e.Qbt()*i()},()=>"Interactables - Wind",t=>{const s=t.xMt(0),e=t.xMt(1).jbt();return()=>s.Ybt()+48.75*e()},()=>3.25,()=>"Interactables - Bubbles",()=>.1,()=>.05,()=>-600,()=>"Camera",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>pF._t(s.Ybt(),e.Ybt()-16,1-Math.exp(-10*i.Ybt()))},t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).jbt();return()=>pF._t(s(),1,1-Math.exp(-10*e()))},()=>"UI",()=>"UI - Version ID",()=>"versionID",t=>{const s=t.xMt(0).jbt();return()=>"v"+s()},t=>{const s=t.xMt(0);return()=>s.Ybt()+8},()=>"UI - Completion Time",()=>"Completion",t=>{const s=t.xMt(0).jbt(),e=t.xMt(1);return()=>s(e.Qbt())},t=>{const s=t.xMt(0).jbt();return()=>s(0)},()=>"UI - Links",()=>"aboywithaballoon",()=>"https://soundcloud.com/aboywithaballoon",()=>"NewWindow",()=>"viktorKraus",()=>"https://viktorkraus.carrd.co/",()=>"salman",()=>"https://salmanshh.itch.io/",()=>"discord",()=>"https://discord.gg/rQ3beSsdUF",()=>"Patreon",()=>"https://www.patreon.com/c/SalmanShh",()=>"viktorKraus aboywithaballoon salman",()=>"UI - Height Measure",()=>"UI - Height Measure -Text ",()=>.25,t=>{const s=t.xMt(0),e=t.xMt(1);return()=>fF(Math.floor(pF.ir(0,s.Ybt(),0,e.Qbt())/100),"m")},()=>"UI - Height Measure - Completed Position",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>pF.Kn(pF.mr(s.Ybt(),e.Ybt(),i.Qbt()),0,1)},t=>{const s=t.xMt(0),e=t.xMt(1).fMt();return()=>s.Ybt()*e.qit()},()=>"UI Height - Reset Colour",t=>{const s=t.xMt(0).jbt();return()=>s(148,148,148)},t=>{const s=t.xMt(0).jbt();return()=>s(156,254,120)},()=>"UI - Height Measure - Set Animation",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2).jbt();return()=>pF._t(s.Ybt(),e.Ybt(),1-Math.exp(-2*i()))},()=>300,()=>75,()=>"Neutral",()=>"Sad",()=>1.25,()=>-75,()=>"Happy",()=>"UI - Height Measure - Set Head Position",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>pF.Kn(pF.mr(s.Ybt(),e.Ybt(),i.Ybt()),0,1)},t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2),n=t.xMt(3).fMt(),r=t.xMt(4).jbt();return()=>pF._t(s.Ybt(),e.Ybt()-i.Ybt()*n.qit(),1-Math.exp(-10*r()))},()=>"UI - Buttons",()=>"UI - Buttons - Invert Controls",()=>"InvertControls",()=>"Invert Controls (On)",()=>"Invert Controls (Off)",()=>"UI - Buttons - Audio Toggle",()=>"audio",()=>"Audio (Off)",()=>"Audio (On)",()=>"UI - Buttons - Restart",()=>"restart",()=>"UI - Weapon Ammo",()=>"Ammo",t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2);return()=>s.Ybt()-e.Ybt()*(i.Qbt()-1)*.5},t=>{const s=t.xMt(0).fMt(),e=t.xMt(1),i=t.xMt(2).jbt();return()=>s.qit()+e.Ybt()*i()},t=>{const s=t.xMt(0),e=t.xMt(1).jbt();return()=>1/s.Qbt()*e()},t=>{const s=t.xMt(0),e=t.xMt(1),i=t.xMt(2),n=t.xMt(3);return()=>pF.Kn(pF.mr(s.Ybt(),e.Ybt()+1,i.Qbt()),0,1)*n.Ybt()},t=>{const s=t.xMt(0).jbt();return()=>s(0,0,0)},()=>"On Changed - Scale",()=>"On Change - Colour",t=>{const s=t.xMt(0).jbt();return()=>s(255,255,255)},()=>"UI - Speech Bubble",()=>"UI - Speech Bubble - Set Visibility",()=>"UI - Speech Bubble - Create",()=>"Objects - Speech Bubble",()=>-100,()=>"SpeechBubble",()=>"UI - Speech Bubble - Toggle",()=>"UI - Speech Bubble - Anim",t=>{const s=t.xMt(0);return()=>pF.Kn(s.Ybt(),250,650)},t=>{const s=t.xMt(0);return()=>pF.Kn(s.Ybt(),128,512)},()=>25,()=>"SpeechPoint",()=>"InsertOpacity",()=>100,()=>"InsertPosY",t=>{const s=t.xMt(0);return()=>s.Ybt()-4},()=>"ExitPosY",t=>{const s=t.xMt(0);return()=>s.Ybt()+4},()=>"ExitOpacity",()=>"Loader",()=>"Loader - Return to Loader",()=>"GLoader",()=>"Loading",()=>"Finished loading game files!",()=>"Loaded!",()=>"Audio",()=>"Audio - Silence Mode",()=>"Audio - Set Listener",()=>"Audio - BGM",()=>"BGM-Start",t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).fMt(),i=t.xMt(2).jbt();return()=>pF.Kn(s(5*e.qit()/2/10)/i(2)*10,-1/0,0)},()=>"BGM-Loop",()=>"Audio - Player",()=>"Audio - Player - Land",t=>{const s=t.xMt(0).jbt();return()=>s(0,1,2,3)},t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).fMt(),i=t.xMt(2).jbt();return()=>pF.Kn(s(1*e.qit())/i(2)*10,-1/0,0)},()=>360,()=>"SFX",t=>{const s=t.xMt(0).jbt();return()=>s(1,1.05)},()=>"Audio - Player - Gun",()=>"Audio - Player - Gun - Reload",t=>{const s=t.xMt(0).jbt();return()=>s(1,1.25)},()=>"Audio - Player - Gun - Shoot",t=>{const s=t.xMt(0).jbt();return()=>s(0,1,2)},t=>{const s=t.xMt(0).jbt();return()=>s(1,1.1)},()=>"Audio - Player - Gun - Bullet Impact",()=>"Audio - Interactables",()=>"Audio - Interactables - Trap Chest",t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).fMt(),i=t.xMt(2).jbt();return()=>pF.Kn(s(1.4*e.qit())/i(2)*10,-1/0,0)},t=>{const s=t.xMt(0).jbt();return()=>s(.9,1)},()=>"Audio - Interactables - Speech Bubbles",()=>"Audio - Interactables - Speech Bubbles - Open",t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).fMt(),i=t.xMt(2).jbt();return()=>pF.Kn(s(1.2*e.qit())/i(2)*10,-1/0,0)},()=>"Audio - Interactables - Speech Bubbles - Close",()=>"Audio - Interactables - Bubbles",()=>"Audio - Interactables - Bubbles - On Launch",()=>"Audio - Interactables - Bubbles - On Enter",t=>{const s=t.xMt(0).jbt(),e=t.xMt(1).fMt(),i=t.xMt(2).jbt();return()=>pF.Kn(s(.75*e.qit())/i(2)*10,-1/0,0)},()=>"Audio - Interactables - Crate",()=>"Audio - Interactables - Crate - On Impact",t=>{const s=t.xMt(0).jbt();return()=>s(0,1)},()=>"Audio - Interactables - Bouncy Solid",()=>"Audio - Interactables - Bouncy Solid - On Impact",t=>{const s=t.xMt(0).jbt();return()=>s(0,1,2,3,4)},()=>"Audio - Interactables - Balloons",()=>"Audio - Interactables - Balloons - Bounce Impact",()=>"Input Manager",()=>"Input Manager - Disable Bools",()=>"Input Manager - Input Actions",()=>"Input Manager - Keyboard",()=>"Input Manager - Touch",t=>{const s=t.xMt(0).jbt();return()=>s("!UI")},t=>{const s=t.xMt(0).jbt();return()=>.5*s()},()=>"Input Manager - Gamepad",()=>"Game Manager ",()=>"Game Manager - Level State",()=>"Game Manager - Level State - Level Initialise",()=>"Level Initialise",()=>"Game Manager - Level State - Level Start",()=>"Level Start",()=>"Game Manager - Level State - Level Finish",()=>"Level Finish",()=>"Game Manager - Timer"]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self._s;self._Ut=function(){return[C32.EB.Keyboard,C32.EB.NKt,C32.EB.zQt,C32.EB.B0t,C32.EB.PlatformInfo,C32.EB.se,C32.EB.Audio,C32.EB.h8t,C32.EB.Rts,C32.EB.Touch,C32.EB.rrt,C32.Llt.xfs,C32.EB.n7t,C32.Llt.Dlt,C32.EB.i7t,C32.EB.Text,C32.Llt.Ems,C32.Llt.T8t,C32.Llt.w8t,C32.Llt.Qgs,C32.Llt.dSs,C32.Llt.TMs,C32.Llt.bound,C32.Llt.Bxs,C32.Llt.Qxs,C32.Llt.FTs,C32.EB.nls,C32.Llt.VPt,C32.EB.RB.AB.Byt,C32.EB.RB.Nrt.sN,C32.EB.RB.Brt.bN,C32.EB.RB.Nrt.cqt,C32.EB.RB.Brt.EYt,C32.EB.RB.AB.kJt,C32.EB.RB.Brt.NYt,C32.EB.RB.Brt.replace,C32.EB.NKt.Nrt.mQt,C32.EB.NKt.Nrt.gQt,C32.EB.NKt.Brt.OQt,C32.EB.rrt.Nrt.RTt,C32.EB.RB.Nrt.rYt,C32.EB.RB.Brt.dXt,C32.Llt.Bxs.Nrt.Zxs,C32.EB.RB.Nrt.bqt,C32.EB.RB.Brt.KYt,C32.EB.RB.AB.BJt,C32.EB.RB.Nrt.dqt,C32.EB.RB.Brt.XYt,C32.EB.RB.AB.RJt,C32.EB.RB.AB.u4,C32.EB.RB.Nrt.eYt,C32.EB.RB.Brt.aN,C32.EB.RB.AB.xwt,C32.EB.RB.Nrt.iYt,C32.EB.h8t.Nrt.eOt,C32.EB.RB.AB.NWt,C32.EB.Keyboard.AB.MKt,C32.EB.rrt.Nrt.gIt,C32.EB.rrt.Nrt.mIt,C32.EB.rrt.AB.tIt,C32.EB.RB.Nrt.Wqt,C32.EB.Keyboard.AB.uKt,C32.EB.se.AB.D3t,C32.EB.se.Nrt.h5t,C32.EB.se.Nrt.o5t,C32.EB.RB.Brt.tXt,C32.EB.RB.AB.iqt,C32.EB.Text.Brt.dCt,C32.EB.Text.Nrt.Vc,C32.EB.RB.Brt.eKt,C32.EB.Text.Nrt.Eas,C32.EB.RB.Brt.iKt,C32.EB.RB.Brt.xXt,C32.EB.rrt.Brt.dCt,C32.EB.RB.Brt.TXt,C32.EB.RB.Brt.eXt,C32.EB.RB.Brt.iXt,C32.EB.RB.Brt.time,C32.EB.Text.Nrt.TA,C32.EB.Text.Brt.qas,C32.EB.Text.Brt.Yas,C32.EB.RB.Brt.float,C32.EB.RB.Brt.BYt,C32.EB.RB.Brt.JYt,C32.EB.rrt.Nrt.dU,C32.Llt.dSs.Nrt.Hbs,C32.Llt.dSs.Nrt.Jbs,C32.EB.rrt.Brt.PIt,C32.EB.rrt.Brt.AIt,C32.EB.rrt.AB.uIt,C32.Llt.dSs.Nrt.tMs,C32.EB.rrt.Nrt.fIt,C32.EB.rrt.Nrt.lCt,C32.EB.rrt.AB.T3,C32.EB.rrt.AB.ACt,C32.EB.rrt.AB.xns,C32.Llt.dSs.Nrt.jbs,C32.EB.rrt.Brt.WIt,C32.EB.rrt.Brt.RIt,C32.Llt.dSs.Nrt.$bs,C32.Llt.dSs.AB.Ibs,C32.Llt.dSs.Nrt.Qbs,C32.EB.rrt.AB._Ct,C32.Llt.dSs.Nrt.ESs,C32.Llt.dSs.Nrt.zbs,C32.Llt.dSs.Nrt.BSs,C32.EB.rrt.AB.QCt,C32.EB.RB.AB.jd,C32.Llt.dSs.AB.Iu,C32.EB.RB.AB.AJt,C32.Llt.TMs.Nrt.NMs,C32.Llt.TMs.Brt.Range,C32.Llt.TMs.AB.xxs,C32.Llt.TMs.Brt.Gxs,C32.Llt.TMs.Brt.Pxs,C32.Llt.dSs.AB._bs,C32.EB.rrt.AB.CCt,C32.EB.rrt.Brt.Jns,C32.Llt.dSs.Brt.rMs,C32.EB.rrt.Brt.aN,C32.EB.rrt.Brt.EIt,C32.Llt.dSs.Brt.nMs,C32.EB.rrt.Nrt.OTt,C32.EB.rrt.Nrt.uCt,C32.EB.rrt.AB.Tyt,C32.EB.rrt.Nrt.dIt,C32.EB.rrt.AB.ATt,C32.EB.RB.AB.EJt,C32.EB.rrt.AB.MCt,C32.EB.rrt.Nrt.Ons,C32.EB.rrt.Nrt.uV,C32.Llt.Qgs.Nrt.tSs,C32.Llt.Qgs.Nrt.Xys,C32.Llt.Qgs.Nrt.Zys,C32.Llt.Qgs.Brt.rSs,C32.Llt.Qgs.Brt.hSs,C32.EB.rrt.AB.YTt,C32.EB.rrt.Nrt.Fns,C32.EB.rrt.Nrt.pIt,C32.Llt.Dlt.Nrt.Ops,C32.Llt.Dlt.Nrt.Mps,C32.EB.rrt.Nrt.Pns,C32.EB.RB.AB.QJt,C32.EB.rrt.Nrt.jg,C32.EB.RB.Brt.UXt,C32.EB.RB.Brt.random,C32.EB.rrt.Brt.Vns,C32.EB.rrt.Brt.jns,C32.EB.rrt.Nrt.Yg,C32.Llt.TMs.Brt.Axs,C32.EB.rrt.Nrt.TA,C32.EB.rrt.Brt.Hns,C32.Llt.Dlt.Nrt.Cps,C32.Llt.dSs.Nrt.Dbs,C32.EB.nls.Nrt.uV,C32.EB.nls.Nrt.yls,C32.Llt.Dlt.AB.a6t,C32.EB.RB.Brt.RYt,C32.EB.rrt.AB.zis,C32.EB.rrt.Nrt.h9t,C32.EB.rrt.AB.bns,C32.Llt.Dlt.Nrt.Fps,C32.Llt.xfs.AB.Iu,C32.Llt.xfs.Brt.vds,C32.EB.rrt.Nrt.o9t,C32.Llt.FTs.Nrt.qIt,C32.EB.n7t.AB.GTt,C32.EB.n7t.Nrt.hhs,C32.EB.n7t.Brt.mhs,C32.EB.rrt.AB.TCt,C32.Llt.dSs.Nrt.Ebs,C32.EB.n7t.Brt.WIt,C32.EB.rrt.Brt.kIt,C32.EB.rrt.Brt.NIt,C32.EB.RB.Nrt.ph,C32.EB.Text.AB.DJ,C32.EB.Text.Nrt.JV,C32.Llt.w8t.Nrt.setEnabled,C32.Llt.w8t.Nrt.Q9t,C32.Llt.w8t.AB.q9t,C32.EB.se.Nrt.r5t,C32.EB.B0t.AB.E1t,C32.EB.B0t.Nrt.D1t,C32.EB.RB.Brt.gXt,C32.EB.n7t.AB.uIt,C32.EB.n7t.Nrt.jg,C32.EB.n7t.Nrt.RTt,C32.EB.n7t.Brt.kIt,C32.EB.n7t.Brt.LIt,C32.EB.rrt.AB._Tt,C32.EB.n7t.Brt.FIt,C32.EB.n7t.Brt.EIt,C32.EB.RB.Brt.tKt,C32.EB.n7t.Nrt.iCt,C32.Llt.dSs.AB.Cbs,C32.EB.RB.AB.NJt,C32.EB.rrt.Nrt.aV,C32.EB.rrt.AB.DJ,C32.EB.rrt.Nrt.lIt,C32.EB.RB.Nrt.Sqt,C32.EB.rrt.Brt.n9t,C32.EB.rrt.Nrt.Uz,C32.Llt.xfs.Nrt.mds,C32.EB.RB.AB.eqt,C32.EB.rrt.Brt.XIt,C32.EB.rrt.Brt.Bns,C32.EB.rrt.AB.His,C32.EB.rrt.AB.Mns,C32.EB.rrt.Nrt.iCt,C32.EB.rrt.Nrt.JV,C32.EB.Text.AB.YV,C32.EB.Text.AB.GTt,C32.EB.Text.Nrt.eO,C32.EB.Text.Nrt.Oas,C32.EB.Text.Nrt.OTt,C32.EB.rrt.Brt.FIt,C32.EB.RB.Brt.fXt,C32.EB.RB.AB.$Jt,C32.EB.RB.Nrt.kqt,C32.EB.RB.Nrt.Nqt,C32.EB.RB.Nrt.Tqt,C32.EB.RB.Nrt.pqt,C32.EB.se.Nrt.u5t,C32.EB.Audio.Nrt.C6t,C32.EB.Audio.Nrt.W6t,C32.EB.Audio.AB.l6t,C32.EB.Audio.Nrt.Play,C32.EB.RB.Brt.log10,C32.EB.Audio.AB.K4t,C32.EB.RB.Brt.Wbt,C32.EB.Audio.Nrt.f6t,C32.EB.Audio.Nrt.jJ,C32.EB.rrt.AB.PTt,C32.EB.Touch.AB.Bss,C32.EB.Touch.AB.res,C32.EB.Touch.Brt.PIt,C32.EB.RB.Brt.aXt]},self.YUt=[{Keyboard:0},{NKt:0},{zQt:0},{B0t:0},{PlatformInfo:0},{se:0},{Audio:0},{NTs:0},{Rts:0},{Touch:0},{BTs:0},{$Ts:0},{WTs:0},{VTs:0},{jTs:0},{iSs:0},{UTs:0},{zTs:0},{HTs:0},{JTs:0},{qTs:0},{YTs:0},{XTs:0},{KTs:0},{ZTs:0},{Dlt:0},{QTs:0},{tCs:0},{sCs:0},{eCs:0},{iCs:0},{nCs:0},{rCs:0},{hCs:0},{oCs:0},{aCs:0},{Ems:0},{lCs:0},{uCs:0},{cCs:0},{fCs:0},{dCs:0},{pCs:0},{mCs:0},{gCs:0},{yCs:0},{SCs:0},{wCs:0},{vCs:0},{bCs:0},{MCs:0},{xCs:0},{TCs:0},{CCs:0},{ICs:0},{_Cs:0},{GCs:0},{PCs:0},{ACs:0},{RCs:0},{ECs:0},{OCs:0},{FCs:0},{DCs:0},{LCs:0},{kCs:0},{NCs:0},{BCs:0},{$Cs:0},{WCs:0},{VCs:0},{jCs:0},{UCs:0},{zCs:0},{Qgs:0},{HCs:0},{JCs:0},{qCs:0},{YCs:0},{XCs:0},{KCs:0},{ZCs:0},{QCs:0},{tIs:0},{sIs:0},{eIs:0},{iIs:0},{dSs:0},{nIs:0},{rIs:0},{hIs:0},{oIs:0},{aIs:0},{lIs:0},{uIs:0},{cIs:0},{fIs:0},{Qxs:0},{dIs:0},{pIs:0},{mIs:0},{gIs:0},{yIs:0},{SIs:0},{FTs:0},{wIs:0},{vIs:0},{bIs:0},{MIs:0},{xIs:0},{TIs:0},{CIs:0},{IIs:0},{_Is:0},{Text:0},{GIs:0},{PIs:0},{AIs:0},{RIs:0},{EIs:0},{OIs:0},{FIs:0},{DIs:0},{LIs:0},{kIs:0},{NIs:0},{BIs:0},{$Is:0},{table:0},{WIs:0},{VIs:0},{jIs:0},{UIs:0},{zIs:0},{HIs:0},{JIs:0},{qIs:0},{YIs:0},{XIs:0},{KIs:0},{ZIs:0},{QIs:0},{t_s:0},{s_s:0},{e_s:0},{i_s:0},{n_s:0},{r_s:0},{h_s:0},{o_s:0},{a_s:0},{l_s:0},{u_s:0},{c_s:0},{f_s:0},{d_s:0},{p_s:0},{m_s:0},{g_s:0},{y_s:0},{S_s:0},{w_s:0},{v_s:0},{b_s:0},{M_s:0},{x_s:0},{T_s:0},{C_s:0},{I_s:0},{__s:0},{G_s:0},{P_s:0},{A_s:0},{R_s:0},{E_s:0},{O_s:0},{F_s:0},{D_s:0},{L_s:0},{k_s:0},{N_s:0},{B_s:0},{$_s:0},{W_s:0},{V_s:0},{j_s:0},{U_s:0},{z_s:0},{H_s:0},{J_s:0},{q_s:0},{Y_s:0},{X_s:0},{K_s:0},{Z_s:0},{Q_s:0},{tGs:0}],self.sGs={Keyboard:class extends self.$j{},NKt:class extends self.$j{},zQt:class extends self.$j{},B0t:class extends self.$j{},PlatformInfo:class extends self.$j{},se:class extends self.$j{},Audio:class extends self.$j{},NTs:class extends self.$j{},Rts:class extends self.$j{},Touch:class extends self.$j{},jTs:class extends self.lns{},UTs:class extends self.krs{},KTs:class extends self.lns{},ZTs:class extends self.krs{},tCs:class extends self.lns{},sCs:class extends self.IH{},eCs:class extends self.lns{},oCs:class extends self.lns{},aCs:class extends self.mas{},lCs:class extends self.lns{},fCs:class extends self.lns{},dCs:class extends self.krs{},pCs:class extends self.krs{},mCs:class extends self.lns{},gCs:class extends self.lns{},yCs:class extends self.mas{},wCs:class extends self.lns{},vCs:class extends self.lns{},GCs:class extends self.lns{},OCs:class extends self.lns{},DCs:class extends self.lns{},HCs:class extends self.lns{},hIs:class extends self.lns{},oIs:class extends self.lns{},aIs:class extends self.krs{},uIs:class extends self.lns{},cIs:class extends self.lns{},fIs:class extends self.lns{},dIs:class extends self.lns{},pIs:class extends self.mas{},mIs:class extends self.lns{},gIs:class extends self.lns{},yIs:class extends self.lns{},SIs:class extends self.lns{},vIs:class extends self.lns{},bIs:class extends self.lns{},MIs:class extends self._us{},xIs:class extends self.lns{},TIs:class extends self._us{},_Is:class extends self.lns{},Text:class extends self.mas{},GIs:class extends self.mas{},PIs:class extends self.lns{},AIs:class extends self.lns{},EIs:class extends self.lns{},FIs:class extends self.lns{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/